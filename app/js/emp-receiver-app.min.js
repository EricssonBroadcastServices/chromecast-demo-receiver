!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.empReceiver=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){},{}],2:[function(b,c,d){(function(b){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.empPlayer=e()}(this,function(){function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function f(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}function g(a,b){return b={exports:{}},a(b,b.exports),b.exports}function h(a,b){na(a).forEach(function(c){return b(a[c],c)})}function i(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return na(a).reduce(function(c,d){return b(c,a[d],d)},c)}function j(a){return!!a&&"object"===("undefined"==typeof a?"undefined":fa(a))}function k(a){return"string"==typeof a||!!a&&"object"===("undefined"==typeof a?"undefined":fa(a))&&"[object String]"===Object.prototype.toString.call(a)}function l(a){var b={assetId:void 0,programId:void 0,channelId:void 0};try{b=JSON.parse(a)}catch(c){b.assetId=a}return b.channelId&&(b.assetId=b.channelId),b}function m(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){a=m(a),Array.isArray(a)?b=b.concat(a):j(a)&&b.push(a)}),a=b}else a="string"==typeof a&&a.trim()?[{src:a}]:j(a)&&"string"==typeof a.src&&a.src&&a.src.trim()?[a]:[];return a}function n(a,b){a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}function o(a,b){var c=Array.prototype.slice.call(b),d=function(){},e=ca.console||{log:d,warn:d,error:d,trace:d};a?c.unshift(a.toUpperCase()+":"):a="log",c.unshift("EMPPlayer:"),e[a].apply?e[a].apply(e,c):e[a](c.join(" "))}function p(){return va++}function q(a){return a.replace(/\n\r?\s*/g,"")}function r(a,b){if(!a||!b)return"";if("function"==typeof ca.getComputedStyle){var c=ca.getComputedStyle(a);return c?c[b]:""}return a.currentStyle[b]||""}function s(){return Ca===ca.document&&"undefined"!=typeof Ca.createElement}function t(a){return j(a)&&1===a.nodeType}function u(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=arguments[3],e=Ca.createElement(a);return Object.getOwnPropertyNames(b).forEach(function(a){var c=b[a];a.indexOf("aria-")!==-1||"role"===a||"type"===a?(sa.warn(Ja(Ka,a,c)),e.setAttribute(a,c)):"textContent"===a?v(e,c):e[a]=c}),Object.getOwnPropertyNames(c).forEach(function(a){e.setAttribute(a,c[a])}),d&&z(e,d),e}function v(a,b){return"undefined"==typeof a.textContent?a.innerText=b:a.textContent=b,a}function w(a){if(a&&a.getBoundingClientRect&&a.parentNode){var b=a.getBoundingClientRect(),c={};return["bottom","height","left","right","top","width"].forEach(function(a){void 0!==b[a]&&(c[a]=b[a])}),c.height||(c.height=parseFloat(r(a,"height"))),c.width||(c.width=parseFloat(r(a,"width"))),c}}function x(a){return j(a)&&3===a.nodeType}function y(a){return"function"==typeof a&&(a=a()),(Array.isArray(a)?a:[a]).map(function(a){return"function"==typeof a&&(a=a()),t(a)||x(a)?a:"string"==typeof a&&/\S/.test(a)?Ca.createTextNode(a):void 0}).filter(function(a){return a})}function z(a,b){return y(b).forEach(function(b){return a.appendChild(b)}),a}function A(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;a=a<0?0:a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||a===1/0)&&(e=d=c="-"),e=e>0||g>0?e+":":"",d=((e||f>=10)&&d<10?"0"+d:d)+":",c=c<10?"0"+c:c,e+d+c}function B(a){return void 0!==a&&"function"==typeof a.then}function C(a){B(a)&&a.then(null,function(a){})}function D(a,b){return Array.isArray(a)?E(a):void 0===a||void 0===b?E():E([[a,b]])}function E(a){return void 0===a||0===a.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:a.length,start:F.bind(null,"start",0,a),end:F.bind(null,"end",1,a)}}function F(a,b,c,d){return void 0===d&&(log.warn("DEPRECATED: Function '"+a+"' on 'TimeRanges' called without an index argument."),d=0),G(a,d,c.length-1),c[d][b]}function G(a,b,c){if(b<0||b>c)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+b+") is greater than or equal to the maximum bound ("+c+").")}function H(a,b){return"rgba("+parseInt(a[1]+a[1],16)+","+parseInt(a[2]+a[2],16)+","+parseInt(a[3]+a[3],16)+","+b+")"}function I(a,b,c){try{a.style[b]=c}catch(d){return}}function J(a,b){if(b&&(a=b(a)),a&&"none"!==a)return a}function K(a,b){var c=a.options[a.options.selectedIndex].value;return J(c,b)}function L(a,b,c){if(b)for(var d=0;d<a.options.length;d++)if(J(a.options[d].value,c)===b){a.selectedIndex=d;break}}function M(){var a=ea.getTech("EmpShaka");if(void 0!==a&&a.isSupported())return Promise.resolve(!0);var b=ea.getTech("EmpHLS");if(void 0!==b&&b.isSupported())return Promise.resolve(!0);var c=ea.getTech("EmpFlash");return void 0!==c&&c.isSupported()?Promise.resolve(!0):Promise.resolve(!1)}function N(){var a=[];if("function"==typeof ca.navigator.requestMediaKeySystemAccess){var b=ca.navigator.userAgent.indexOf("Android")!==-1,c=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.5"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:b===!0?"SW_SECURE_DECODE":"SW_SECURE_CRYPTO"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]}],d=ea.getTech("EmpShaka");void 0!==d&&d.isSupported()&&(a.push(new Promise(function(a,b){ca.navigator.requestMediaKeySystemAccess("com.microsoft.playready",c).then(function(){a(!0)},function(){a(!1)})})),a.push(new Promise(function(a,b){ca.navigator.requestMediaKeySystemAccess("com.widevine.alpha",c).then(function(){a(!0)},function(){a(!1)})})))}var e=ea.getTech("EmpHLS");void 0!==e&&e.isSupported()&&ca.WebKitMediaKeys&&e.getKeySystem&&ca.WebKitMediaKeys.isTypeSupported(e.getKeySystem(),"video/mp4")&&a.push(!0);var f=ea.getTech("EmpFlash");return void 0!==f&&f.isSupported()&&a.push(!0),0===a.length&&a.push(!1),Promise.all(a).then(function(a){return a.indexOf(!0)!==-1},function(a){return!1})}function O(a){var b=oc.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}function P(a,b,c){if(!nc(b))throw new TypeError("iterator must be a function");arguments.length<3&&(c=this),"[object Array]"===rc.call(a)?Q(a,b,c):"string"==typeof a?R(a,b,c):S(a,b,c)}function Q(a,b,c){for(var d=0,e=a.length;d<e;d++)sc.call(a,d)&&b.call(c,a[d],d,a)}function R(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c,a.charAt(d),d,a)}function S(a,b,c){for(var d in a)sc.call(a,d)&&b.call(c,a[d],d,a)}function T(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)wc.call(c,d)&&(a[d]=c[d])}return a}function U(a,b){for(var c=0;c<a.length;c++)b(a[c])}function V(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function W(a,b,c){var d=a;return nc(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=vc(b,{uri:a}),d.callback=c,d}function X(a,b,c){return b=W(a,b,c),Y(b)}function Y(a){function b(){4===h.readyState&&setTimeout(e,0)}function c(){var a=void 0;if(a=h.response?h.response:h.responseText||Z(h),q)try{a=JSON.parse(a)}catch(b){}return a}function d(a){return clearTimeout(k),a instanceof Error||(a=new Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,g(a,r)}function e(){if(!j){var b;clearTimeout(k),b=a.useXDR&&void 0===h.status?200:1223===h.status?204:h.status;var d=r,e=null;return 0!==b?(d={body:c(),statusCode:b,method:m,headers:{},url:l,rawRequest:h},h.getAllResponseHeaders&&(d.headers=uc(h.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),g(e,d,d.body)}}if("undefined"==typeof a.callback)throw new Error("callback argument missing");var f=!1,g=function(b,c,d){f||(f=!0,a.callback(b,c,d))},h=a.xhr||null;h||(h=a.cors||a.useXDR?new X.XDomainRequest:new X.XMLHttpRequest);var i,j,k,l=h.url=a.uri||a.url,m=h.method=a.method||"GET",n=a.body||a.data,o=h.headers=a.headers||{},p=!!a.sync,q=!1,r={body:void 0,headers:{},statusCode:0,method:m,url:l,rawRequest:h};if("json"in a&&a.json!==!1&&(q=!0,o.accept||o.Accept||(o.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(o["content-type"]||o["Content-Type"]||(o["Content-Type"]="application/json"),n=JSON.stringify(a.json===!0?n:a.json))),h.onreadystatechange=b,h.onload=e,h.onerror=d,h.onprogress=function(){},h.onabort=function(){j=!0},h.ontimeout=d,h.open(m,l,!p,a.username,a.password),p||(h.withCredentials=!!a.withCredentials),!p&&a.timeout>0&&(k=setTimeout(function(){if(!j){j=!0,h.abort("timeout");var a=new Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",d(a)}},a.timeout)),h.setRequestHeader)for(i in o)o.hasOwnProperty(i)&&h.setRequestHeader(i,o[i]);else if(a.headers&&!V(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(h.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(h),h.send(n||null),h}function Z(a){if("document"===a.responseType)return a.responseXML;var b=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;return""!==a.responseType||b?null:a.responseXML}function $(){}function _(a,b,c){var d=0,e=!1,f={next:function(){e||(d<a?(d++,b(f)):(e=!0,c()))},iteration:function(){return d-1},"break":function(){e=!0,c()}};return f.next(),f}var aa,ba="undefined"!=typeof window?window:"undefined"!=typeof b?b:"undefined"!=typeof self?self:{};aa="undefined"!=typeof window?window:"undefined"!=typeof ba?ba:"undefined"!=typeof self?self:{};var ca=aa,da=ca.videojs,ea=da,fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ga=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},ha=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ia=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},ja=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},ka=function(a,b){return a.raw=b,a},la=function Oc(){ga(this,Oc),this.ENDED="ended",this.ERROR="error",this.LOADED_DATA="loadeddata",this.TIMESHIFT_CHANGE="timeshiftchange",this.DURATION_CHANGE="durationchange",this.LOADED_METADATA="loadedmetadata",this.SEEKING="seeking",this.TIME_UPDATE="timeupdate",this.USER_ACTIVE="useractive",this.USERIN_ACTIVE="userinactive",this.VOLUME_CHANGE="volumechange",this.LOAD_START="loadstart",this.CAN_PLAY="canplay",this.PLAYING="playing",this.WAITING="waiting",this.SEEKED="seeked",this.ABORT="abort",this.PLAY="play",this.PAUSE="pause",this.DISPOSE="dispose",this.MODE_CHANGE="modechange",this.CHANGE="change",this.ADD_TRACK="addtrack",this.REMOVE_TRACK="removetrack",this.METRIC_CHANGED="metricchanged",this.RECOVERABLE_ASSET_ERROR="recoverableasseterror",this.BITRATE_CHANGED="bitratechanged",this.CLOSE="close",this.READY="ready",this.RESIZE="resize",this.TAP="tap",this.CLICK="click",this.FOCUS="focus",this.BLUR="blur",this.BEFORE_MODAL_OPEN="beforemodalopen",this.MODAL_OPEN="modalopen",this.BEFORE_MODAL_CLOSE="beforemodalclose",this.MODAL_CLOSE="modalclose",this.BEFORE_MODAL_FILL="beforemodalfill",this.MODAL_FILL="modalfill",this.BEFORE_MODAL_EMPTY="beforemodalempty",this.MODAL_EMPTY="modalempty",this.CAN_PLAY_THROUGH="canplaythrough",this.FIRST_PLAY="firstplay",this.PROGRESS="progress",this.SUSPEND="suspend",this.EMPTIED="emptied",this.STALLED="stalled",this.RATE_CHANGE="ratechange",this.TEXT_TRACK_CHANGE="texttrackchange",this.TRACK_CHANGE="trackchanged",this.POSTER_CHANGE="posterchange",this.KEY_DOWN="keydown",this.KEY_UP="keyup",this.MOUSE_DOWN="mousedown",this.MOUSE_MOVE="mousemove",this.MOUSE_UP="mouseup",this.TOUCH_START="touchstart",this.TOUCH_MOVE="touchmove",this.TOUCH_END="touchend",this.TOUCH_LEAVE="touchleave",this.TOUCH_CANCEL="touchcancel",this.FULLSCREEN_CHANGE="fullscreenchange",this.ENTER_FULL_WINDOW="enterFullWindow",this.EXIT_FULL_WINDOW="exitFullWindow",this.CONTROLS_ENABLED="controlsenabled",this.CONTROLS_DISABLED="controlsdisabled",this.USING_NATIVE_CONTROLS="usingnativecontrols",this.USING_CUSTOM_CONTROLS="usingcustomcontrols",this.SLIDER_ACTIVE="slideractive",this.SLIDER_INACTIVE="sliderinactive",this.ENTITLEMENT_CHANGE="entitlementchange",this.ENTITLEMENT_LOAD_START="entitlementloadstart",this.PLAYER_CREATED="playercreated",this.RESTARTING="restarting",this.SEGMENTS_UPDATED="segmentsupdated",this.SEGMENT_CHANGED="segmentchanged",this.CHROMECAST_CASTING="chromecastcasting",this.CHROMECAST_STOPPED="chromecaststopped",this.STOPPED="stopped",this.READY_TO_PLAY="readytoplay",this.PROGRAM_CHANGED="programchanged",this.ASSET_CHANGED="assetchanged",this.SEGMENT_MISSING="segmentmissing",this.AIRPLAY_START="airplayStart",this.REPLAY="replay"},ma=new la,na=function(a){return j(a)?Object.keys(a):[]},oa={UNKNOWN:100,LOAD_ASSET:101,ENTITLEMENT:102,SHAKA_TECH:200,HLS_TECH:300,FLASH_TECH:400,CHROMECAST_TECH:500},pa=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oa.UNKNOWN,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ga(this,b);var f=ja(this,a.call(this));return f.code=d,k(c)?f.message=c:c.message&&(f.message=c.message),f.status=e,Error.captureStackTrace&&Error.captureStackTrace(f,b),f}return ia(b,a),ha(b,[{key:"codes",get:function(){return oa}}]),b}(Error),qa=!1,ra=function(){qa&&o(null,arguments)};ca.EMP_DEBUG_LOG&&(ra=ca.console&&ca.console.log&&void 0||function(){});var sa=ra;if(sa.history=[],sa.error=function(){o("error",arguments)},sa.warn=function(){o("warn",arguments)},sa.debug=function(){o("debug",arguments)},ca.EMP_DEBUG_LOG){var ta=function(){};sa.debug=ca.console&&ca.console.debug&&void 0||ta,sa.warn=ca.WARN=ca.console&&ca.console.warn&&void 0||ta,sa.error=ca.ERROR=ca.console&&ca.console.error&&void 0||ta}sa.setLogToBrowserConsole=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];qa=a};var ua,va=1,wa=function(a,b,c){b.guid||(b.guid=p());var d=function(){return b.apply(a,arguments)};return d.guid=c?c+"_"+b.guid:b.guid,d},xa=function(a,b){var c=Date.now(),d=function(){var d=Date.now();d-c>=b&&(a.apply(void 0,arguments),c=d)};return d},ya={},za=(Object.freeze||Object)({"default":ya}),Aa=za&&ya||za,Ba="undefined"!=typeof ba?ba:"undefined"!=typeof window?window:{};"undefined"!=typeof document?ua=document:(ua=Ba["__GLOBAL_DOCUMENT_CACHE@4"],ua||(ua=Ba["__GLOBAL_DOCUMENT_CACHE@4"]=Aa));var Ca=ua,Da=ea.getComponent("MenuItem"),Ea=ea.getComponent("Component"),Fa=function(a){function b(c,d){ga(this,b);var e=d.bitrate;d.label=0===e?"auto":Math.max(0,Math.round(e/1e3))+"Kb/s",d.selected=c.bitrate()===e;var f=ja(this,a.call(this,c,d));return f.bitrate=e,f.player_.on(ma.BITRATE_CHANGED,function(a,b){f.el()&&f.selected(b.bitrate===f.bitrate)}),f}return ia(b,a),b.prototype.handleClick=function(a){this.player_.bitrate(this.bitrate)},b}(Da);Ea.registerComponent("BitrateMenuItem",Fa);var Ga=ea.getComponent("MenuButton"),Ha=ea.getComponent("Component"),Ia=function(a){function b(c,d){ga(this,b);var e=ja(this,a.call(this,c,d));e.el_.setAttribute("aria-label","Bitrate menu");e.player_.bitrates();e.items.length<=1&&e.hide();var f=wa(e,e.update);return e.player_.on(ma.LOADED_DATA,f),e.player_.on(ma.CHROMECAST_CASTING,f),e.player_.on(ma.ENDED,function(){return e.hide()}),e.player_.on(ma.PLAYING,function(){e.items.length>1&&e.show()}),e.player_.on(ma.DISPOSE,function(){this.player_.on(ma.LOADED_DATA,f)}),e}return ia(b,a),b.prototype.buildCSSClass=function(){return"vjs-bitrate-button "+a.prototype.buildCSSClass.call(this)},b.prototype.createItems=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=this.player_.bitrates();if(!b)return a;b.length>0&&a.push(new Fa(this.player_,{selectable:!0,bitrate:0}));for(var c=0;c<b.length;c++){var d=b[c];a.push(new Fa(this.player_,{selectable:!0,bitrate:d}))}return a},b}(Ga);Ia.prototype.controlText_="Bitrate",Ha.registerComponent("BitrateButton",Ia);var Ja=function(a){for(var b="",c=0;c<arguments.length;c++)b+=q(a[c])+(arguments[c+1]||"");return b},Ka=ka(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),La={bitrates:function(a){return a.tech_&&void 0!==a.tech_.bitrates?a.techGet_("bitrates"):[]},bitrate:function(a,b){return a.tech_&&void 0!==a.tech_.bitrate?(void 0!==b&&a.techCall_("bitrate",b),a.techGet_("bitrate")):0},canRestart:function(a){return!a.tech_||void 0===a.tech_.canRestart||a.techGet_("canRestart")},restart:function(a,b){a.currentSource()&&(a.options_.startTime=0,a.options_.absoluteStartTime=void 0,a.previousAbsoluteStartTime=void 0,a.options_.autoplay||(a.options_.autoplay=!0,a.one("play",function(){a.options_.autoplay=!1})),a.trigger(ma.RESTARTING),a.options_.useLastViewedOffset=b,a.trigger(ma.REPLAY))},getSelectedAudioTrack:function(a){for(var b=a.audioTracks(),c=b.length;c--;){var d=b[c];if(d.enabled)return d.language}return null},getSelectedTextTrack:function(a){for(var b=a.textTracks(),c=b.length;c--;){var d=b[c];if("showing"===d.mode)return d.language}return null},loadAsset:function(a,b,c,d){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},f={assetId:b?b:d,programId:c,channelId:d};a.on(ma.LOADED_DATA,function(){e(a.entitlement)}),a.src({type:"video/emp",src:JSON.stringify(f)})},currentAsset:function(a,b,c,d){if(!b&&!c&&!d){var e=a.cache_.source;if(e&&e.src&&"video/emp"===e.type){var f=l(e.src);return f}return e&&e.assetId?{assetId:e.channelId?e.channelId:e.assetId,programId:e.programId,channelId:e.channelId}:null}if(sa("Update currentAsset",b,c,d),a.cache_.source&&"video/emp"===a.cache_.source.type)a.cache_.source.src=JSON.stringify({assetId:b,programId:c,channelId:d});else if(a.cache_.source&&a.cache_.source.assetId)a.cache_.source.assetId=b,a.cache_.source.programId=c,a.cache_.source.channelId=d;else{var g={assetId:b,programId:c,channelId:d};a.cache_.source={type:"video/emp",src:JSON.stringify(g)}}a.cache_.sources=[a.cache_.source]},getAbsoluteTime:function(a){if(!a.tech_||void 0===a.tech_.getAbsoluteTime)return new Date(1e3*a.currentTime());var b=this.getServerTime(a),c=a.tech_.getAbsoluteTime(b);if("EmpCast"!==a.techName_){var d=this.getEntitlement(a);c&&d&&d.isStaticCachupAsLive?c=new Date(c.getTime()+d.streamInfo.start.getTime()):d&&d.isDynamicCachupAsLive&&"EmpHLS"===a.techName_&&(c=new Date(1e3*a.tech_.baseCurrentTime()+d.streamInfo.start.getTime()))}return c},getPlayheadTime:function(a){var b=this.getAbsoluteTime(a);return b?b.getTime():0},timeBehindLive:function(a){if(!a.tech_||void 0===a.tech_.timeBehindLive)return 0;var b=this.getServerTime(a),c=this.getEntitlement(a);if(c&&c.isStaticCachupAsLive)return b-this.getPlayheadTime(a);var d=a.tech_.timeBehindLive(b);return d!==1/0&&d?d:0},liveDelay:function(a){return this.isLive(a)?(this.getServerTime(a)-this.getSeekTimerange(a).end)/1e3:0},stop:function(a,b){a.stopProgramService&&a.stopProgramService(),a.cache_.sources=[],a.tech_&&void 0!==a.tech_.stop?(a.techCall_("stop",b),a.techCall_("stopTrackingCurrentTime")):(a.techCall_("stopTrackingCurrentTime"),b&&b())},timeShiftEnabled:function(a){return!a.tech_||void 0===a.tech_.timeShiftEnabled||a.techGet_("timeShiftEnabled")},baseCurrentTime:function(a){return a.tech_&&void 0!==a.tech_.baseCurrentTime?a.techGet_("baseCurrentTime"):a.currentTime()},baseDuration:function(a){return a.tech_&&void 0!==a.tech_.duration?a.techGet_("duration"):0},startTimeLive:function(a){if(!a.tech_||void 0===a.tech_.startTimeLive)return 0;var b=this.getServerTime(a),c=a.tech_.startTimeLive(b),d=this.getEntitlement(a);return d&&d.isDynamicCachupAsLive&&"EmpHLS"===a.techName_&&(c=d.streamInfo.referenceTime),d&&d.isStaticCachupAsLive&&"EmpCast"!==a.techName_&&(c=d.streamInfo.referenceTime),c},isLive:function(a){return!(!a.tech_||void 0===a.tech_.live)&&a.techGet_("live")},isCatchupAsLive:function(a){var b=this.getEntitlement(a);return!this.isLive(a)&&b&&b.live},getBitrate:function(a){return a.tech_&&void 0!==a.tech_.getBitrate?a.techGet_("getBitrate"):0},duration:function(a,b){return a.tech_&&void 0!==a.tech_.duration?(a.duration(b),a.techGet_("duration")):a.duration(b)},techVersion:function(a){return a.tech_&&void 0!==a.tech_.techVersion?a.techGet_("techVersion"):"2.x.x"},canSeekTo:function(a,b){if(this.timeShiftEnabled(a)===!1)return!1;var c=this.getEntitlement(a);return!(c&&a.cache_&&c.ffEnabled===!1&&a.cache_.currentTime<=b)&&!(c&&a.cache_&&c.rwEnabled===!1&&a.cache_.currentTime>=b)},remainingTime:function(a){if(!a.tech_||void 0===a.tech_.remainingTime){var b=a.duration();return b===1/0||0===b?1/0:b-a.currentTime()}return a.techGet_("remainingTime")},casting:function(a,b){return!(!a.castPlugin||!a.castPlugin().canOverride("Cast"))&&(a.cache_.sources=b,a.cache_.source=b[0],a.castPlugin().cast(),!0)},setAbsoluteTime:function(a,b){if(!a.tech_||void 0===a.tech_.setAbsoluteTime){var c=(b.getTime()-new Date(0))/1e3;return void a.currentTime(c)}var d=this.getServerTime(a);if("EmpCast"!==a.techName_){var e=this.getEntitlement(a);if(e&&e.isStaticCachupAsLive){if(b.getTime()<e.streamInfo.start.getTime())sa("setAbsoluteTime","playPreviousProgram"),this.playProgram(a,b),b=0;else{if(b.getTime()>=e.streamInfo.end.getTime())return sa("setAbsoluteTime","playNextProgram"),void this.playProgram(a,b);b=b.getTime()-e.streamInfo.start.getTime()}return void a.techCall_("setCurrentTime",b/1e3)}if(e&&e.isDynamicCachupAsLive)if(b.getTime()<e.streamInfo.start.getTime()){if(sa("setAbsoluteTime","playPreviousProgram"),this.playProgram(a,b),"EmpHLS"===a.techName_)return void a.techCall_("setCurrentTime",0);b=new Date(e.streamInfo.start.getTime())}else if("EmpHLS"===a.techName_)return b-=e.streamInfo.start.getTime(),void a.techCall_("setCurrentTime",b/1e3)}a.techCall_("setAbsoluteTime",{date:b,nowDate:d})},gotoLive:function(a){if(a.tech_.gotoLive)a.techCall_("gotoLive");else{var b=this.getEntitlement(a);if(b&&b.isDynamicCachupAsLive)this.setAbsoluteTime(a,new Date(a.getServerTime()));else if(b&&b.isStaticCachupAsLive){var c=this.currentAsset(a);c&&c.channelId&&a.startPlayback(null,c.channelId,null)}else if(this.isLive(a)){var d=a.duration();a.currentTime(d)}else sa.warn("Not suppoted for VOD")}},SeekToTime:function(a,b){this.setAbsoluteTime(a,new Date(b))},supportsEpgProgramChange:function(a){if(a.tech_&&void 0!==a.tech_.supportsEpgProgramChange)return a.techGet_("supportsEpgProgramChange")},program:function(a){return a.tech_&&void 0!==a.tech_.program?a.techGet_("program"):null},playPreviousProgram:function(a,b){a.programService&&a.programService().getPreviousProgram(function(c,d){if(d)sa.error("playPreviousProgram",d);else{var e={};if(b){e.playFrom="startTime";var f=new Date(c.endTime);f.setSeconds(f.getSeconds()-30),e.startTime=f}else e.playFrom="beginning";a.startPlayback(null,c.channelId,c.programId,e)}})},playNextProgram:function(a){a.programService&&a.programService().currentProgram&&this.getServerTime(a)>a.programService().currentProgram.end.getTime()&&a.programService().getNextProgram(function(b,c){if(c)sa.error("playNextProgram",c);else{var d={};d.playFrom="beginning",a.startPlayback(null,b.channelId,b.programId,d)}})},playProgram:function(a,b){a.programService&&a.programService().getProgram(b,function(c,d){if(d)sa.error("getProgram",d);else{var e={};e.playFrom="startTime",e.startTime=b,a.startPlayback(null,c.channelId,c.programId,e)}})},getServerTime:function(a){return a.programService&&a.programService()&&a.programService().exposure?a.programService().exposure.getCachedServerTime():Date.now()},getEntitlement:function(a){if(a.programService)return a.programService().entitlement();if(a.tech_){var b=a.tech_.options_;if(b&&b.source&&b.source.playSessionId)return b.source}return null},getSeekTimerange:function(a){var b={start:0,end:0};return!a.tech_||void 0===a.tech_.seekable||a.seeking()?b:(seekable=a.techGet_("seekable"),seekable&&seekable.length>0&&(b.start=1e3*(seekable.start(seekable.length-1)+this.startTimeLive(a)/1e3),b.end=1e3*(seekable.end(seekable.length-1)+this.startTimeLive(a)/1e3)),b)},getBufferedTimerange:function(a){var b={start:0,end:0};return!a.tech_||void 0===a.tech_.buffered||a.seeking()?b:(buffered=a.techGet_("buffered"),buffered&&buffered.length>0&&(b.start=1e3*(buffered.start(buffered.length-1)+this.startTimeLive(a)/1e3),b.end=1e3*(buffered.end(buffered.length-1)+this.startTimeLive(a)/1e3)),b)},setTechProgram:function(a,b){(a.tech_||void 0!==a.tech_.program)&&a.techCall_("program",b)}},Ma=ea.getComponent("Button"),Na=ea.getComponent("Component"),Oa=function(a){function b(c,d){ga(this,b);var e=ja(this,a.call(this,c,d));return e.updateShowing(),e.on(e.player(),ma.PLAYING,function(){return e.updateShowing()}),e.on(e.player(),ma.DURATION_CHANGE,function(){return e.updateShowing()}),e.on(e.player(),ma.TIME_UPDATE,function(){return e.timeUpdate()}),e.on(e.player(),ma.ENDED,function(){return e.hide()}),e}return ia(b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,"button",{className:"emp-live-control vjs-control"});return this.contentEl_=u("div",{className:"emp-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),b.appendChild(this.contentEl_),b},b.prototype.updateShowing=function(){this.player().isLive()||this.entitlement&&this.entitlement.isStaticCachupAsLive?this.show():this.hide()},b.prototype.timeUpdate=function(){var a=(this.player().currentTime(),this.player().duration(),5),b=this.player().timeBehindLive();this.player().isLive()&&b<a?this.addClass("emp-live-edge"):this.removeClass("emp-live-edge")},b.prototype.handleClick=function(){this.player().gotoLive()},ha(b,[{key:"entitlement",get:function(){return La.getEntitlement(this.player())}}]),b}(Ma);Na.registerComponent("EmpLiveDisplay",Oa);var Pa=ea.getComponent("Component"),Qa=ea.getComponent("MouseTimeDisplay"),Ra=function(a){function b(c,d){return ga(this,b),ja(this,a.call(this,c,d))}return ia(b,a),b.prototype.update=function(a,b){var c=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var d=c.player_.duration(),e=void 0;e=c.player().isLive()?"-"+A(d-b*d,d):A(b*d,d),c.el_.style.left=a.width*b+"px",c.getChild("timeTooltip").update(a,b,e)})},b}(Qa);Pa.registerComponent("MouseTimeDisplay",Ra);var Sa=ca.navigator&&ca.navigator.userAgent||"",Ta=(/AppleWebKit\/([\d.]+)/i.exec(Sa),/iPad/i.test(Sa)),Ua=/iPhone/i.test(Sa)&&!Ta,Va=/iPod/i.test(Sa),Wa=Ua||Ta||Va,Xa=(function(){var a=Sa.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),/Android/i.test(Sa)),Ya=function(){var a=Sa.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);return b&&c?parseFloat(a[1]+"."+a[2]):b?b:null}(),Za=(Xa&&/webkit/i.test(Sa)&&Ya<2.3,/Firefox/i.test(Sa),/Edge/i.test(Sa)),$a=!Za&&/Chrome/i.test(Sa),_a=(function(){var a=Sa.match(/Chrome\/(\d+)/);return a&&a[1]?parseFloat(a[1]):null}(),/MSIE\s8\.0/.test(Sa),function(){var a=/MSIE\s(\d+)\.\d/.exec(Sa),b=a&&parseFloat(a[1]);return!b&&/Trident\/7.0/i.test(Sa)&&/rv:11.0/.test(Sa)&&(b=11),b}()),ab=(/Safari/i.test(Sa)&&!$a&&!Xa&&!Za,s()&&"backgroundSize"in ca.document.createElement("video").style,ea.getComponent("Component")),bb=ea.getComponent("Slider"),cb=(ea.getComponent("LoadProgressBar"),ea.getComponent("PlayProgressBar"),5),db=30,eb=function(a){function b(c,d){ga(this,b);var e=ja(this,a.call(this,c,d));return e.lastStep=0,e.update=xa(wa(e,e.update),db),e.on(c,"timeupdate",e.update),e.on(c,"ended",e.handleEnded),e.updateInterval=null,e.on(c,["playing"],function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},db)}),e.on(c,["ended","pause","waiting"],function(){e.clearInterval(e.updateInterval)}),e.on(c,["timeupdate","ended"],e.update),e}return ia(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},b.prototype.update_=function(a,b){var c=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*b).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[A(a,c),A(c,c)],"{1} of {2}")),this.bar.update(w(this.el_),b)},b.prototype.update=function(b){var c=a.prototype.update.call(this);return this.update_(this.getCurrentTime_(),c),c},b.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},b.prototype.handleEnded=function(a){this.update_(this.player_.duration(),1)},b.prototype.getPercent=function(){var a=this.getCurrentTime_()/this.player_.duration();return a>=1?1:a},b.prototype.handleMouseDown=function(b){this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b)},b.prototype.handleMouseMove=function(a){var b=this.calculateDistance(a)*this.player_.duration();b===this.player_.duration()&&(b-=.1),this.throttleSetCurrentTime(b)},b.prototype.throttleSetCurrentTime=function(a){null!=this.seekTimeoutId_&&ca.clearTimeout(this.seekTimeoutId_),this.seekTimeoutId_=ca.setTimeout(this.onSeekInputTimeout_.bind(this,a),1e3)},b.prototype.onSeekInputTimeout_=function(a){this.lastStep=0,this.seekTimeoutId_=null,this.player_.currentTime(a)},b.prototype.enable=function(){a.prototype.enable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.show()},b.prototype.disable=function(){a.prototype.disable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.hide()},b.prototype.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b),this.videoWasPlaying&&C(this.player_.play()),this.player_.scrubbing(!1)},b.prototype.stepForward=function(){this.lastStep+=cb,this.throttleSetCurrentTime(this.player_.currentTime()+this.lastStep)},b.prototype.stepBack=function(){this.lastStep-=cb,this.throttleSetCurrentTime(this.player_.currentTime()+this.lastStep)},b.prototype.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()},b.prototype.handleKeyPress=function(b){32===b.which||13===b.which?(b.preventDefault(),
this.handleAction(b)):a.prototype.handleKeyPress&&a.prototype.handleKeyPress.call(this,b)},b}(bb);eb.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},_a&&!(_a>8)||Wa||Xa||eb.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),eb.prototype.playerEvent="timeupdate",ab.registerComponent("SeekBar",eb);var fb=ea.getComponent("Button"),gb=ea.getComponent("Component"),hb=function(a){function b(c,d){ga(this,b);var e=ja(this,a.call(this,c,d));return e.shouldRestart_=!0,e.updateShowing(),e.on(e.player(),ma.LOADED_METADATA,e.updateShowing),e.on(e.player(),ma.PLAYING,function(){e.shouldRestart_=!1,e.updateShowing()}),e.on(e.player(),ma.ERROR,function(){return e.shouldRestart_=!0}),e}return ia(b,a),b.prototype.buildCSSClass=function(){return"emp-restart-control "+a.prototype.buildCSSClass.call(this)},b.prototype.updateShowing=function(){this.player().canRestart()?this.show():this.hide()},b.prototype.handleClick=function(){if(this.shouldRestart_===!0)return void this.player_.restart();this.player_.scrubbing(!0);var a=!this.player_.paused();this.player_.pause(),this.player_.currentTime(0),this.player_.scrubbing(!1),a&&C(this.player_.play())},b}(fb);hb.prototype.controlText_="Restart",gb.registerComponent("EmpRestartButton",hb);var ib=ea.getComponent("Button"),jb=ea.getComponent("Component"),kb=function(a){function b(c,d){ga(this,b),d=Object.assign({seconds:30},d);var e=ja(this,a.call(this,c,d));return e.controlText("Forward "+d.seconds+"s"),c.on(ma.TIMESHIFT_CHANGE,function(){return e.onTimeshift()}),c.on(ma.PROGRAM_CHANGED,function(a,b){return e.updateEnabled(b&&b.program)}),c.on(ma.DURATION_CHANGE,function(){return e.updateEnabled()}),e.updateEnabled(),e}return ia(b,a),b.prototype.updateEnabled=function(a){this.entitlement&&!this.entitlement.ffEnabled?(this.disable(),this.controlText("Forward restricted")):(this.enable(),this.show(),this.controlText("Forward "+this.options_.seconds+"s"))},b.prototype.onTimeshift=function(){this.player()&&(this.player().timeShiftEnabled()?this.show():this.hide())},b.prototype.buildCSSClass=function(){return"emp-forward-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(){if(!this.player().ended()){this.player().scrubbing(!0);var a=!this.player().paused();this.player().pause();var b=this.player().currentTime()+this.options_.seconds;this.player().currentTime(b),this.player().scrubbing(!1),a&&C(this.player_.play())}},ha(b,[{key:"entitlement",get:function(){return La.getEntitlement(this.player())}}]),b}(ib);kb.prototype.controlText_="Forward",jb.registerComponent("EmpForwardButton",kb);var lb=ea.getComponent("Button"),mb=ea.getComponent("Component"),nb=function(a){function b(c,d){ga(this,b),d=Object.assign({seconds:30},d);var e=ja(this,a.call(this,c,d));return e.controlText("Rewind "+d.seconds+"s"),c.on(ma.TIMESHIFT_CHANGE,function(){return e.onTimeshift()}),c.on(ma.PROGRAM_CHANGED,function(a,b){return e.updateEnabled(b&&b.program)}),c.on(ma.DURATION_CHANGE,function(){return e.updateEnabled()}),e.updateEnabled(),e}return ia(b,a),b.prototype.updateEnabled=function(a){this.entitlement&&!this.entitlement.rwEnabled?(this.disable(),this.controlText("Rewind restricted")):(this.enable(),this.show(),this.controlText("Rewind "+this.options_.seconds+"s"))},b.prototype.onTimeshift=function(){this.player()&&(this.player().timeShiftEnabled()?this.show():this.hide())},b.prototype.buildCSSClass=function(){return"emp-rewind-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(){if(!this.player().ended()){this.player().scrubbing(!0);var a=!this.player().paused();this.player().pause();var b=this.player().currentTime()-this.options_.seconds;this.player().currentTime(b),this.player().scrubbing(!1),a&&C(this.player_.play())}},ha(b,[{key:"entitlement",get:function(){return La.getEntitlement(this.player())}}]),b}(lb);nb.prototype.controlText_="Rewind",mb.registerComponent("EmpRewindButton",nb);var ob=ea.getComponent("Button"),pb=ea.getComponent("Component"),qb=function(a){function b(c,d){return ga(this,b),ja(this,a.call(this,c,d))}return ia(b,a),b.prototype.buildCSSClass=function(){return"emp-reload-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(){this.player_.restart()},b}(ob);qb.prototype.controlText_="Reload",pb.registerComponent("EmpReloadButton",qb);var rb=(ea.getComponent("RemainingTimeDisplay"),ea.getComponent("Component")),sb=function(a){function b(c,d){ga(this,b);var e=ja(this,a.call(this,c,d));return e.mode_=d.mode||"remainingTime",e.on(c,ma.TIME_UPDATE,e.updateContent),e.on(c,ma.DURATION_CHANGE,e.updateContent),c.on(ma.ENDED,function(){e.hide()}),c.on(ma.PLAYING,function(){e.show()}),e}return ia(b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"emp-time vjs-time-control vjs-remaining-time vjs-control"});return this.contentEl_=u("div",{className:"emp-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span>-0:00"},{"aria-live":"off"}),b.appendChild(this.contentEl_),b},b.prototype.updateContent=function(){if("currentTime"===this.mode_){var a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),b=this.localize("Current Time"),c=A(a,this.player_.duration());c!==this.formattedTime_&&(this.formattedTime_=c,this.contentEl_.innerHTML='<span class="vjs-control-text">'+b+"</span>"+c)}else{var d=this.player_.duration();if(d){var e=this.localize("Remaining Time"),f=void 0;if(d>4294967295)f="",f!==this.formattedTime_&&(this.formattedTime_=f,this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span>"+f);else{var g=this.player_.remainingTime();f=g>=0?A(g):"",f!==this.formattedTime_&&(this.formattedTime_=f,this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span>-"+f)}}}},b}(rb);rb.registerComponent("EmpTimeDisplay",sb);var tb=ea.getComponent("Button"),ub=ea.getComponent("Component"),vb=function(a){function b(c,d,e){ga(this,b);var f=ja(this,a.call(this,c,d,e));return f.el_.setAttribute("aria-label","Stop Playback"),c.on(ma.TIMESHIFT_CHANGE,function(){return f.onTimeshift()}),c.on(ma.PLAYING,function(){return f.onTimeshift()}),c.on(ma.ENDED,function(){return f.hide()}),f}return ia(b,a),b.prototype.onTimeshift=function(){this.player()&&(this.player().timeShiftEnabled()?this.hide():this.show())},b.prototype.handleClick=function(a){this.player()&&this.player().stop()},b.prototype.buildCSSClass=function(){return"emp-stop-control vjs-icon-square "+a.prototype.buildCSSClass.call(this)},b}(tb);vb.prototype.kind_="stop",vb.prototype.controlText_="stop",ub.registerComponent("EmpStopButton",vb);var wb=ea.getComponent("PlayToggle"),xb=ea.getComponent("Component"),yb=function(a){function b(c,d,e){ga(this,b);var f=ja(this,a.call(this,c,d,e));return f.el_.setAttribute("aria-label","Play Toggle"),c.on(ma.TIMESHIFT_CHANGE,function(){return f.onTimeshift()}),c.on(ma.PLAYING,function(){return f.onTimeshift()}),f}return ia(b,a),b.prototype.onTimeshift=function(){this.player()&&(this.player().timeShiftEnabled()?this.show():this.hide())},b.prototype.handleClick=function(b){a.prototype.handleClick.call(this,b)},b.prototype.buildCSSClass=function(){return""+a.prototype.buildCSSClass.call(this)},b}(wb);yb.prototype.kind_="playToggle",yb.prototype.controlText_="playToggle",xb.registerComponent("EmpPlayToggle",yb);var zb=(ea.getComponent("Component"),ea.getComponent("Button")),Ab=function(a){function b(c,d){ga(this,b);var e=ja(this,a.call(this,c,d));return e.addClass("vjs-hidden"),c.ready(function(){e.initAirPlay()}),e}return ia(b,a),b.prototype.initAirPlay=function(){var a=this.player();if(window.WebKitPlaybackTargetAvailabilityEvent){var b=a.el().getElementsByTagName("video")[0];b.addEventListener("webkitplaybacktargetavailabilitychanged",function(b){switch(b.availability){case"available":sa("Airplay available"),a.on("loadeddata",function(){a.controlBar.childNameIndex_.hasOwnProperty("AirplayToggle")&&(this.entitlement&&this.entitlement.airplayBlocked?a.controlBar.airplayToggle.hide():a.controlBar.airplayToggle.show())});break;case"not-available":sa("Airplay not-available")}})}},b.prototype.buildCSSClass=function(){return"vjs-airplay-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(){this.entitlement&&this.entitlement.airplayBlocked?sa("Airplay Blocked"):(this.player().el().getElementsByTagName("video")[0].webkitShowPlaybackTargetPicker(),this.player().trigger(ma.AIRPLAY_START))},ha(b,[{key:"entitlement",get:function(){return La.getEntitlement(this.player())}}]),b}(zb);Ab.prototype.controlText_="Airplay",ea.registerComponent("AirplayToggle",Ab);var Bb=ea.getComponent("Button"),Cb=ea.getComponent("Component"),Db=function(a){function b(c,d){ga(this,b);var e=ja(this,a.call(this,c,d));return e.controlText("Next program"),e.updateShowing(),e.on(e.player(),ma.PLAYING,function(){return e.updateShowing()}),e.on(e.player(),ma.DURATION_CHANGE,function(){return e.updateShowing()}),e.on(e.player(),ma.PROGRAM_CHANGED,function(a,b){return e.updateShowing(b&&b.program)}),e}return ia(b,a),b.prototype.updateShowing=function(a){a=a?a:this.player().getProgramDetails(),!this.player().noEPG()&&this.entitlement&&a?(this.show(),this.enable()):this.hide(),a&&Date.now()<a.end.getTime()&&this.disable(),this.entitlement&&(this.entitlement.isDynamicCachupAsLive||this.entitlement.isStaticCachupAsLive)||this.hide()},b.prototype.buildCSSClass=function(){return"emp-next-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(){this.player().ended()||this.player().playNextProgram()},ha(b,[{key:"entitlement",get:function(){return La.getEntitlement(this.player())}}]),b}(Bb);Db.prototype.controlText_="Next",Cb.registerComponent("EmpNextButton",Db);var Eb=ea.getComponent("Button"),Fb=ea.getComponent("Component"),Gb=function(a){function b(c,d){ga(this,b);var e=ja(this,a.call(this,c,d));return e.controlText("Previous Program"),e.updateShowing(),e.on(e.player(),ma.PLAYING,function(){return e.updateShowing()}),e.on(e.player(),ma.DURATION_CHANGE,function(){return e.updateShowing()}),e.on(e.player(),ma.PROGRAM_CHANGED,function(){return e.updateShowing()}),e}return ia(b,a),b.prototype.updateShowing=function(){var a=this.player().getProgramDetails();!this.player().noEPG()&&this.entitlement&&a?this.show():this.hide(),this.entitlement&&(this.entitlement.isDynamicCachupAsLive||this.entitlement.isStaticCachupAsLive)||this.hide()},b.prototype.buildCSSClass=function(){return"emp-previous-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(){this.player().ended()||this.player().playPreviousProgram()},ha(b,[{key:"entitlement",get:function(){return La.getEntitlement(this.player())}}]),b}(Eb);Gb.prototype.controlText_="Previous",Fb.registerComponent("EmpPreviousButton",Gb);var Hb=ea.getComponent("ControlBar"),Ib=ea.getComponent("Component"),Jb=function(a){function b(){return ga(this,b),ja(this,a.apply(this,arguments))}return ia(b,a),b}(Hb);Jb.prototype.options_={loadEvent:"play",children:{empPlayToggle:{},empReloadButton:{},empStopButton:{},empPreviousButton:{},empRewindButton:{},empForwardButton:{},empNextButton:{},volumePanel:{inline:!1},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},empLiveDisplay:{},progressControl:{},empTimeDisplay:{mode:"remainingTime"},customControlSpacer:{},empRestartButton:{},playbackRateMenuButton:{},chaptersButton:{},bitrateButton:{},audioTrackButton:{},subsCapsButton:{},airplayToggle:{},fullscreenToggle:{}}},Ib.registerComponent("ControlBar",Jb);var Kb=ea.getComponent("Component"),Lb="#222",Mb="#ccc",Nb={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Ob=function(a){function b(c,d,e){ga(this,b);var f=ja(this,a.call(this,c,d,e));return c.on("loadstart",wa(f,f.toggleDisplay)),c.on("texttrackchange",wa(f,f.updateDisplay)),c.on("loadstart",wa(f,f.preselectTrack)),c.ready(wa(f,function(){if(c.tech_&&c.tech_.featuresNativeTextTracks)return void this.hide();if("EmpShaka"===c.techName_||"EmpHLS"===c.techName_||"EmpCast"===c.techName_)return void this.hide();c.on("fullscreenchange",wa(this,this.updateDisplay));for(var a=this.options_.playerOptions.tracks||[],b=0;b<a.length;b++)this.player_.addRemoteTextTrack(a[b],!0);this.preselectTrack()})),f}return ia(b,a),b.prototype.preselectTrack=function(){for(var a={captions:1,subtitles:1},b=this.player_.textTracks(),c=this.player_.cache_.selectedLanguage,d=void 0,e=void 0,f=void 0,g=0;g<b.length;g++){var h=b[g];c&&c.enabled&&c.language===h.language?h.kind===c.kind?f=h:f||(f=h):c&&!c.enabled?(f=null,d=null,e=null):h["default"]&&("descriptions"!==h.kind||d?h.kind in a&&!e&&(e=h):d=h)}f?f.mode="showing":e?e.mode="showing":d&&(d.mode="showing")},b.prototype.toggleDisplay=function(){return"EmpShaka"===this.player_.techName_||"EmpHLS"===this.player_.techName_||"EmpCast"===this.player_.techName_?void this.hide():void(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show())},b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},b.prototype.clearDisplay=function(){"function"==typeof ca.WebVTT&&ca.WebVTT.processCues(ca,[],this.el_)},b.prototype.removeStyles=function(a){var b=Ca.getElementById(a);return b&&Ca.getElementsByTagName("head")[0].removeChild(b),b},b.prototype.writeStyles=function(a,b){var c=this.removeStyles(a);c=Ca.createElement("style"),c.type="text/css",c.id=a,c.innerHTML=b,Ca.getElementsByTagName("head")[0].appendChild(c)},b.prototype.getStyle=function(a){var b=void 0,c=void 0,d=void 0,e=void 0,f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0;a.color&&(b="color: "+a.color),a.textOpacity&&(b="color: "+H(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(c="background-color: "+a.backgroundColor),a.backgroundOpacity&&(c="background-color: "+H(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(k=a.windowOpacity?"outline: "+H(a.windowColor,a.windowOpacity)+" solid 10px":"outline: "+a.windowColor+" solid 10px"),a.edgeStyle&&("dropshadow"===a.edgeStyle?d="text-shadow: 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, black 0.1em 0.1em 0.2em":"raised"===a.edgeStyle?d="text-shadow: "+("1px 1px "+Lb+", 2px 2px "+Lb+", 3px 3px "+Lb):"depressed"===a.edgeStyle?d="text-shadow: "+("1px 1px "+Mb+", 0 1px "+Mb+", -1px -1px "+Lb+", 0 -1px "+Lb):"uniform"===a.edgeStyle&&(d="text-shadow: "+("0 0 4px "+Lb+", 0 0 4px "+Lb+", 0 0 4px "+Lb+", 0 0 4px "+Lb))),a.fontPercent&&1!==a.fontPercent&&(e="font-size: "+a.fontPercent+"em",f="height: auto",g="top: auto",h="bottom: 2px"),a.fontFamily&&"default"!==a.fontFamily&&("small-caps"===a.fontFamily?i="font-variant: small-caps":j="font-family: "+Nb[a.fontFamily]);var l=(b?b+"; ":"")+(c?c+"; ":"")+(d?d+"; ":"")+(e?e+"; ":"")+(f?f+"; ":"")+(g?g+"; ":"")+(h?h+"; ":"")+(i?i+"; ":"")+(j?j+"; ":"")+(k?k+"; ":"");return l},b.prototype.getSafariStyle=function(a){var b=void 0;return a.backgroundColor&&(b="background-color: "+a.backgroundColor),a.backgroundOpacity&&(b="background-color: "+H(a.backgroundColor||"#000",a.backgroundOpacity)),b?"video::-webkit-media-text-track-display-backdrop {"+b+" !important;overflow: visible !important;}":""},b.prototype.updateDisplay=function(){if(this.player_.textTrackSettings){var a=void 0;a=this.player_.options_.textTrackStyle?this.player_.options_.textTrackStyle:this.player_.textTrackSettings.getValues();var b="styles_cue";if("EmpShaka"===this.player_.techName_||"EmpHLS"===this.player_.techName_||"EmpCast"===this.player_.techName_){var c=this.getStyle(a);return"EmpHLS"===this.player_.techName_?this.writeStyles(b,"video::cue {"+c+"}\n"+this.getSafariStyle(a)):this.writeStyles(b,"video::cue {"+c+"}"),void this.clearDisplay()}this.removeStyles(b)}var d=this.player_.textTracks();this.clearDisplay();for(var e=null,f=null,g=d.length;g--;){var h=d[g];"showing"===h.mode&&("descriptions"===h.kind?e=h:f=h)}f?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(f)):e&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))},b.prototype.updateForTrack=function(a){if("function"==typeof ca.WebVTT&&a.activeCues){var b=void 0;this.player_.textTrackSettings&&(b=this.player_.textTrackSettings.getValues());for(var c=[],d=0;d<a.activeCues.length;d++)c.push(a.activeCues[d]);if(ca.WebVTT.processCues(ca,c,this.el_),!b)for(var e=c.length;e--;){var f=c[e];if(f){var g=f.displayState;if(b.color&&(g.firstChild.style.color=b.color),b.textOpacity&&I(g.firstChild,"color",H(b.color||"#fff",b.textOpacity)),b.backgroundColor&&(g.firstChild.style.backgroundColor=b.backgroundColor),b.backgroundOpacity&&I(g.firstChild,"backgroundColor",H(b.backgroundColor||"#000",b.backgroundOpacity)),b.windowColor&&(b.windowOpacity?I(g,"backgroundColor",H(b.windowColor,b.windowOpacity)):g.style.backgroundColor=b.windowColor),b.edgeStyle&&("dropshadow"===b.edgeStyle?g.firstChild.style.textShadow="2px 2px 3px "+Lb+", 2px 2px 4px "+Lb+", 2px 2px 5px "+Lb:"raised"===b.edgeStyle?g.firstChild.style.textShadow="1px 1px "+Lb+", 2px 2px "+Lb+", 3px 3px "+Lb:"depressed"===b.edgeStyle?g.firstChild.style.textShadow="1px 1px "+Mb+", 0 1px "+Mb+", -1px -1px "+Lb+", 0 -1px "+Lb:"uniform"===b.edgeStyle&&(g.firstChild.style.textShadow="0 0 4px "+Lb+", 0 0 4px "+Lb+", 0 0 4px "+Lb+", 0 0 4px "+Lb)),b.fontPercent&&1!==b.fontPercent){var h=ca.parseFloat(g.style.fontSize);g.style.fontSize=h*b.fontPercent+"px",g.style.height="auto",g.style.top="auto",g.style.bottom="2px"}b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?g.firstChild.style.fontVariant="small-caps":g.firstChild.style.fontFamily=Nb[b.fontFamily])}}}},b}(Kb);Kb.registerComponent("TextTrackDisplay",Ob);var Pb=ea.getComponent("Component"),Qb=ea.getComponent("ModalDialog"),Rb="vjs-text-track-settings",Sb=["#000","Black"],Tb=["#00F","Blue"],Ub=["#0FF","Cyan"],Vb=["#0F0","Green"],Wb=["#F0F","Magenta"],Xb=["#F00","Red"],Yb=["#FFF","White"],Zb=["#FF0","Yellow"],$b=["1","Opaque"],_b=["0.5","Semi-Transparent"],ac=["0","Transparent"],bc={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Sb,Yb,Xb,Vb,Tb,Zb,Wb,Ub]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ac,_b,$b]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Yb,Sb,Xb,Vb,Tb,Zb,Wb,Ub]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]],"default":4},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.25","25%"],["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["2.50","250%"]],"default":3,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[$b,_b]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[ac,_b,$b]}};bc.windowColor.options=bc.backgroundColor.options;var cc=function(a){function b(c,d){ga(this,b),d.temporary=!1;var e=ja(this,a.call(this,c,d));return e.updateDisplay=wa(e,e.updateDisplay),e.fill(),e.hasBeenOpened_=e.hasBeenFilled_=!0,e.endDialog=u("p",{className:"vjs-control-text",textContent:e.localize("End of dialog window.")}),e.el().appendChild(e.endDialog),e.setDefaults(),void 0===d.persistTextTrackSettings&&(e.options_.persistTextTrackSettings=e.options_.playerOptions.persistTextTrackSettings),e.on(e.$(".vjs-done-button"),"click",function(){e.saveSettings(),e.close()}),e.on(e.$(".vjs-default-button"),"click",function(){e.setDefaults(),e.updateDisplay()}),h(bc,function(a){e.on(e.$(a.selector),"change",e.updateDisplay)}),e.options_.persistTextTrackSettings&&e.restoreSettings(),e}return ia(b,a),b.prototype.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},b.prototype.createElSelect_=function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",e=bc[a],f=e.id.replace("%s",this.id_);return["<"+d+' id="'+f+'" class="'+("label"===d?"vjs-label":"")+'">',this.localize(e.label),"</"+d+">",'<select aria-labelledby="'+(""!==c?c+" ":"")+f+'">'].concat(e.options.map(function(a){var d=f+"-"+a[1];return['<option id="'+d+'" value="'+a[0]+'" ','aria-labelledby="'+(""!==c?c+" ":"")+f+" "+d+'">',b.localize(a[1]),"</option>"].join("")})).concat("</select>").join("")},b.prototype.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span>","</fieldset>"].join("")},b.prototype.createElBgColor_=function(){var a="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span>","</fieldset>"].join("")},b.prototype.createElWinColor_=function(){var a="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span>","</fieldset>"].join("")},b.prototype.createElColors_=function(){return u("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},b.prototype.createElFont_=function(){return u("div",{className:'vjs-track-settings-font">',innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},b.prototype.createElControls_=function(){var a=this.localize("restore all settings to the default values");return u("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},b.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},b.prototype.label=function(){return this.localize("Caption Settings Dialog")},b.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},b.prototype.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},b.prototype.getValues=function(){var a=this;return i(bc,function(b,c,d){var e=K(a.$(c.selector),c.parser);return void 0!==e&&(b[d]=e),b},{})},b.prototype.setValues=function(a){var b=this;h(bc,function(c,d){L(b.$(c.selector),a[d],c.parser)})},b.prototype.setDefaults=function(){var a=this;h(bc,function(b){var c=b.hasOwnProperty("default")?b["default"]:0;a.$(b.selector).selectedIndex=c})},b.prototype.restoreSettings=function(){var a=void 0;try{a=JSON.parse(ca.localStorage.getItem(Rb))}catch(b){sa.warn(b)}a&&this.setValues(a)},b.prototype.saveSettings=function(){var a=this.getValues();if(this.player_.options_.textTrackStyle=void 0,"EmpCast"===this.player_.techName_&&this.player_.techCall_("sendTextTrackStyle",a),this.options_.persistTextTrackSettings)try{Object.keys(a).length?ca.localStorage.setItem(Rb,JSON.stringify(a)):ca.localStorage.removeItem(Rb)}catch(b){sa.warn(b)}},b.prototype.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()},b.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(Ca,"keydown",this.handleKeyDown);var a=this.player_.controlBar,b=a&&a.subsCapsButton,c=a&&a.captionsButton;b?b.focus():c&&c.focus()},b}(Qb);Pb.registerComponent("TextTrackSettings",cc);var dc=ea.getComponent("Player"),ec=ea.getComponent("Tech"),fc=ea.getComponent("CaptionSettingsMenuItem"),gc=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};ga(this,b),d.startTime=d.absoluteStartTime?0:d.startTime,d=Object.assign({children:["mediaLoader","PosterImage","textTrackDisplay","loadingSpinner","controlBar","errorDisplay","textTrackSettings","BigPlayButton"]},d),("auto"===d.techOrder||Array.isArray(d.techOrder)&&1===d.techOrder.length&&"auto"===d.techOrder[0])&&(d.techOrder=b.AutoTechArray()),d=ea.mergeOptions({"entitlement-engine":"EricssonExposure",techOrder:b.AutoTechArray(),maxBitrate:0,timeShiftDisabled:!1,useLastViewedOffset:!1,startTime:0,absoluteStartTime:void 0,persistTextTrackSettings:!0,textTrackSettings:!0},d);var f=ja(this,a.call(this,c,d,e));return f.monkeyPatchingTextMenu_(),ca.empPlayer&&sa.islogToBrowserConsole&&ca.empPlayer.setInstance(f),f.previousAbsoluteStartTime_=void 0,f.castPlugin&&f.castPlugin(),f.on(ma.ENDED,function(){sa("ENDED"),f.ended_=!0,f.stopProgramService(),f.entitlementExpirationService&&f.entitlementExpirationService().stop(),"EmpCast"!==f.techName_&&f.loadNextSource()}),f.on(ma.DISPOSE,function(){f.stopProgramService(),f.entitlementExpirationService&&f.entitlementExpirationService().stop()}),f.on(ma.ERROR,function(){f.stopProgramService(),f.entitlementExpirationService&&f.entitlementExpirationService().stop()}),f.on(ma.CAN_PLAY,function(){f.disableTimeShift(f.options_.timeShiftDisabled)}),f.on(ma.LOADED_DATA,function(){if(f.addClass("vjs-has-started"),f.ended_=!1,f.programService){var a=f.programService().entitlement();a&&(a.streamInfo.referenceTime=f.startTimeLive())}}),f.on(ma.REPLAY,function(){f.cache_&&f.cache_.source&&f.src(f.cache_.source)}),f.on(ma.FIRST_PLAY,function(){sa("firstplay"),f.options_.startTime&&"Html5"===f.techName_&&f.currentTime(f.options_.startTime),f.options_.startTime=0}),f.initialSeekToAbsoluteStartTimeBind=f.initialSeekToAbsoluteStartTime_.bind(f),f.isCreated=!0,f.trigger(ma.PLAYER_CREATED),f.ended_=!1,f}return ia(b,a),b.prototype.monkeyPatchingTextMenu_=function(){if(this.controlBar&&this.controlBar.subsCapsButton){var a=this.controlBar.subsCapsButton.createItems,b=this;this.controlBar.subsCapsButton.createItems=function(){var c=a.apply(this,arguments);return c&&"CaptionSettingsMenuItem"!==c[0].name()&&"EmpHLS"===b.techName_&&b.options_.textTrackSettings&&(c.unshift(new fc(this.player_,{kind:this.label_})),this.hideThreshold_+=1),c}}return null},b.prototype.options=function(a){return a?(("auto"===a.techOrder||Array.isArray(a.techOrder)&&1===a.techOrder.length&&"auto"===a.techOrder[0])&&(a.techOrder=b.AutoTechArray()),void 0!==a.startTime&&(a.startTime=parseFloat(a.startTime)||0),void 0!==a.absoluteStartTime&&(a.startTime=0),this.options_=ea.mergeOptions(this.options_,a),this.options_):this.options_},b.prototype.getTechOptions_=function(){var a={autoplay:this.options_.autoplay,muted:this.options_.muted,language:this.options_.language,maxBitrate:this.options_.maxBitrate,timeShiftDisabled:this.options_.timeShiftDisabled,useLastViewedOffset:this.options_.useLastViewedOffset,startTime:this.options_.startTime,absoluteStartTime:this.options_.absoluteStartTime,audioLanguage:this.options_.audioLanguage,subtitleLanguage:this.options_.subtitleLanguage};return a},b.prototype.loadTech_=function(b,c){var d=this;a.prototype.loadTech_.call(this,b,c),this.on(this.tech_,ma.RECOVERABLE_ASSET_ERROR,this.handleRecoverableError),this.on(this.tech_,ma.ERROR,function(a,b){d.player_.error(b)}),this.on(this.tech_,ma.TRACK_CHANGE,function(){sa("TRACK_CHANGE"),d.player_.trigger(ma.TRACK_CHANGE)}),this.on(this.tech_,ma.DURATION_CHANGE,function(){sa("DURATION_CHANGE")})},b.prototype.loadNextSource=function(){return this.tech_&&void 0!==this.tech_.loadNextSource?(this.techCall_("loadNextSource"),!0):!!(this.cache_.sources&&this.cache_.sources.length>1)&&(this.cache_.sources.shift(),this.src(this.cache_.sources),!0)},b.prototype.setTextTrackStyle=function(a){"EmpCast"===this.techName_?this.techCall_("sendTextTrackStyle",a):(this.options_.textTrackStyle=a,this.trigger("texttrackchange"))},b.prototype.lineUpAsset=function(a,b,c,d){var e={assetId:a,programId:c,channelId:b};d&&this.options({playFrom:"beginning",absoluteStartTime:d}),this.lineupSource({type:"video/emp",src:JSON.stringify(e)})},b.prototype.lineupSource=function(a){return this.tech_&&void 0!==this.tech_.lineupSource?void this.techCall_("lineupSource",a):void this.cache_.sources.push(a)},b.prototype.unloadTech_=function(){a.prototype.unloadTech_.call(this)},b.prototype.stop=function(a){La.stop(this,a)},b.prototype.handleRecoverableError=function(b,c){if(c.source&&(6001!==c.code&&(sa.error("handleRecoverableError",c.techName,c.message),this.analytics&&this.analytics().onError({code:c.code,message:c.message})),this.options_.excludeTechs||(this.options_.excludeTechs=[]),this.options_.excludeTechs.push(c.techName),this.options_.techOrder.length>this.options_.excludeTechs.length&&(this.error(null),this.resetWithoutReload_(),this.options_.autoplay=this.options_.autoplay,this.hasStarted()&&(this.options_.autoplay=!0),this.options_.absoluteStartTime=this.previousAbsoluteStartTime_,c.source.assetId))){var d={assetId:c.source.assetId,programId:c.source.programId};return void a.prototype.src.call(this,{type:"video/emp",src:JSON.stringify(d)})}c.message=c.message||this.localize("Unknown error, can't recover"),this.error(new pa(c.message,c.code)),this.resetWithoutReload_()},b.prototype.resetWithoutReload_=function(){this.tech_&&(this.techCall_("reset"),this.unloadTech_())},b.prototype.bitrates=function(){return La.bitrates(this)},b.prototype.bitrate=function(a){return La.bitrate(this,a)},b.prototype.getBitrate=function(){return La.getBitrate(this)},b.prototype.selectAudioTrack=function(a,b){for(var c=this.audioTracks(),d=c.length;d--;){var e=c[d];if(e.language===a&&!e.enabled)return void(b&&e.kind!==b||(e.enabled=!0))}},b.prototype.getSelectedAudioTrack=function(){return La.getSelectedAudioTrack(this);
},b.prototype.getAudioTracksLanguages=function(){for(var a=[],b=this.audioTracks(),c=0;c<b.length;c++)a.push(b[c].language);return a},b.prototype.selectTextTrack=function(a,b){a=a&&"None"!==a?a:null;for(var c=this.textTracks(),d=c.length;d--;){var e=c[d];e.language===a?b&&e.kind!==b||(e.mode="showing"):"disabled"!==e.mode&&(e.mode="disabled")}},b.prototype.getSelectedTextTrack=function(){return La.getSelectedTextTrack(this)},b.prototype.textTrackVisible=function(a){for(var b=this.textTracks(),c=b.length;c--;){var d=b[c];if(a){if("hidden"===d.mode)return void(d.mode="showing")}else"showing"===d.mode?d.mode="hidden":"disabled"!==d.mode&&(d.mode="disabled")}},b.prototype.isTextTrackVisible=function(){for(var a=this.textTracks(),b=a.length;b--;){var c=a[b];if("showing"===c.mode)return!0}return!1},b.prototype.getTextTracksLanguages=function(){for(var a=[],b=this.textTracks(),c=0;c<b.length;c++)a.push(b[c].language);return a},b.prototype.canSeekTo=function(a){return La.canSeekTo(this,a)},b.prototype.getRestrictions=function(){var a={},b=La.getEntitlement(this);return b&&(a={minBitrate:b.minBitrate,maxBitrate:b.maxBitrate,maxResWidth:b.maxResWidth,maxResHeight:b.maxResHeight,rwEnabled:b.rwEnabled,ffEnabled:b.ffEnabled}),a},b.prototype.isPlaying=function(){return this.hasStarted()},b.prototype.isLive=function(){return La.isLive(this)},b.prototype.techVersion=function(){return La.techVersion(this)},b.prototype.baseCurrentTime=function(){return La.baseCurrentTime(this)},b.prototype.baseDuration=function(b){return void 0===b?La.baseDuration(this):void a.prototype.duration.call(this,b)},b.prototype.src=function(b){var c=this;if("undefined"==typeof b)return this.cache_.src||"";if(!this.isCreated)return void this.one(ma.PLAYER_CREATED,function(){c.src(b)});var d=m(b);return d.length?(d[0].type||(d[0].type="video/emp"),this.options_.excludeTechs=[],this.tech_||this.reset(),this.error(null),La.casting(this,d)?void 0:("video/emp"!==d[0].type&&(d[0].options=this.getTechOptions_()),this.off(ma.LOADED_DATA,this.initialSeekToAbsoluteStartTimeBind),this.one(ma.LOADED_DATA,this.initialSeekToAbsoluteStartTimeBind),a.prototype.src.call(this,d))):void this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},b.prototype.initialSeekToAbsoluteStartTime_=function(){var a=La.getEntitlement(this);this.options_.absoluteStartTime&&this.timeShiftEnabled()?(this.setAbsoluteTime(new Date(this.options_.absoluteStartTime)),this.previousAbsoluteStartTime_=this.options_.absoluteStartTime,this.options_.absoluteStartTime=void 0):this.options_.useLastViewedOffset&&a&&!this.isLive()&&"EmpShaka"===this.techName_&&a.lastViewedOffset&&this.currentTime(a.lastViewedOffset/1e3)},b.prototype.setMaxBitrate=function(a){this.options_.maxBitrate=a,this.tech_&&void 0!==this.tech_.setMaxBitrate&&this.techCall_("setMaxBitrate",a)},b.prototype.getMaxBitrate=function(){return this.tech_&&void 0!==this.tech_.getMaxBitrate?this.techGet_("getMaxBitrate"):0},b.prototype.disableTimeShift=function(a){if(!this.tech_||void 0===this.tech_.disableTimeShift)return!1;if(void 0!==a){if(a===!1&&!this.canEnableTimeshift())return!La.timeShiftEnabled(this);this.techCall_("disableTimeShift",a);var b=La.timeShiftEnabled(this);return void 0===b?this.options_.timeShiftDisabled=a:this.options_.timeShiftDisabled=!b,this.trigger(ma.TIMESHIFT_CHANGE,{timeShiftDisabled:this.options_.timeShiftDisabled}),this.options_.timeShiftDisabled}return!La.timeShiftEnabled(this)},b.prototype.canEnableTimeshift=function(){var a=La.getEntitlement(this);return!a||a.timeshiftEnabled!==!1},b.prototype.timeShiftEnabled=function(a){return void 0===a?La.timeShiftEnabled(this):void this.disableTimeShift(!a)},b.prototype.noEPG=function(){if(!this.getProgramDetails()){var a=La.getEntitlement(this);return a&&(a.isDynamicCachupAsLive||a.isStaticCachupAsLive)}return!1},b.prototype.canRestart=function(){return!this.noEPG()&&La.canRestart(this)},b.prototype.restart=function(a){La.restart(this,a)},b.prototype.error=function(b){return void 0===b?this.error_||null:(b&&k(b)?b=new pa(b):b&&!b.code&&(b.code=oa.UNKNOWN),a.prototype.error.call(this,b))},b.prototype.getError=function(){return this.error_},b.prototype.setAbsoluteTime=function(a){La.setAbsoluteTime(this,a)},b.prototype.getAbsoluteTime=function(){return La.getAbsoluteTime(this)},b.prototype.playheadTime=function(a){return void 0===a?La.getPlayheadTime(this):void La.SeekToTime(this,a)},b.prototype.SeekToTime=function(a){La.SeekToTime(this,a)},b.prototype.setAnalyticsCustomAttribute=function(a,b){this.options_.analytics||(this.options_.analytics={}),this.options_.analytics.customAttributes||(this.options_.analytics.customAttributes=[]),this.options_.analytics.customAttributes.push({key:a,value:b})},b.prototype.loadAsset=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};sa.warn("loadAsset() has been deprecated with new USP a/v pipe use startPlayback() or src() instead"),this.options({playFrom:void 0}),La.loadAsset(this,a,b,null,c)},b.prototype.startPlayback=function(a,b,c,d){if(d||(d={}),!a&&!b)return void sa.error("assetId or channelId is undefined");if(c&&!b)return void sa.error("channelId is undefined");d.playFrom||(d.playFrom="defaultBehaviour");var e={playFrom:d.playFrom};void 0!==d.autoplay&&(e.autoplay=d.autoplay),d.startTime&&"startTime"===d.playFrom?(e.absoluteStartTime=d.startTime,this.options_.useLastViewedOffset=!1):e.absoluteStartTime=void 0,void 0!==d.startOffset?e.startTime=d.startOffset/1e3:e.startTime=0,e.useLastViewedOffset="bookmark"===d.playFrom||this.options_.useLastViewedOffset===!0,this.options(e),La.loadAsset(this,a,c,b)},b.prototype.playEntitlement=function(b){b&&j(b)?(b.type="video/emp",a.prototype.src.call(this,b)):sa.error("Call playEntitlement without entitlement")},b.prototype.timeBehindLive=function(){return La.timeBehindLive(this)},b.prototype.liveDelay=function(){return La.liveDelay(this)},b.prototype.startTimeLive=function(){return La.startTimeLive(this)},b.prototype.getCurrentTechName=function(){return this.techName_},b.prototype.stopProgramService=function(){this.programService&&this.programService().stop()},b.prototype.startProgramService=function(){this.programService&&this.programService().start()},b.prototype.supportsEpgProgramChange=function(){return void 0!==this.programService},b.prototype.getServerTime=function(){return La.getServerTime(this)},b.prototype.getProgram=function(a){if(this.programService){var b=this.getProgramDetails();a(b,b?null:"No EPG for program")}},b.prototype.getProgramDetails=function(){return La.supportsEpgProgramChange(this)?La.program(this):this.programService?this.programService().currentProgram:void 0},b.prototype.getAssetDetails=function(){return this.tech_&&this.tech_.VOD?this.techGet_("VOD"):this.programService?this.programService().currentVOD:void 0},b.prototype.getSeekTimerange=function(){return La.getSeekTimerange(this)},b.prototype.getBufferedTimerange=function(){return La.getBufferedTimerange(this)},b.prototype.currentTime=function c(a){var b=La.getEntitlement(this);if(b&&(b.isDynamicCachupAsLive||b.isStaticCachupAsLive)&&"EmpCast"!==this.techName_){if("undefined"!=typeof a){var d=this.getProgramDetails();if(d){a<1&&a>-1&&(a=1);var e=new Date(d.startTime);if(b.isStaticCachupAsLive||"EmpHLS"===this.techName_){var f=b.streamInfo;a+=(e.getTime()-f.start.getTime())/1e3,a<=0&&(a=0,sa("currentTime","playPreviousProgram"),La.playPreviousProgram(this,!0))}else a+=e.getTime()/1e3,1e3*a<=b.streamInfo.start.getTime()&&(a=b.streamInfo.start.getTime()/1e3+1,sa("currentTime","playPreviousProgram"),La.playPreviousProgram(this,!0))}return a<0&&(a=0),void this.techCall_("setCurrentTime",a)}var c=this.techGet_("currentTime")||0,g=this.getProgramDetails();if(g&&c){var h=new Date(g.startTime);if(b.isStaticCachupAsLive||"EmpHLS"===this.techName_){var i=b.streamInfo;c-=(h.getTime()-i.start.getTime())/1e3}else c-=h.getTime()/1e3}return this.cache_.currentTime=c,this.cache_.currentTime}return"undefined"!=typeof a?void this.techCall_("setCurrentTime",a):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},b.prototype.duration=function d(b){var c=La.getEntitlement(this);if(c&&(c.isDynamicCachupAsLive||c.isStaticCachupAsLive)&&"EmpCast"!==this.techName_){if(void 0!==b){var e=this.getProgramDetails();if(e&&b!==1/0){var f=new Date(e.startTime);if(c.isStaticCachupAsLive||"EmpHLS"===this.techName_){var g=c.streamInfo;b-=(f.getTime()-g.start.getTime())/1e3}else b-=f.getTime()/1e3}return this.noEPG()&&(b=1/0,this.addClass("vjs-live")),sa("set duration",b),void a.prototype.duration.call(this,b)}var d=this.techGet_("duration"),h=this.getProgramDetails();if(h&&d!==1/0){var i=this.getServerTime(),j=new Date(h.endTime);if(i<j){var k=c.streamInfo;d="EmpHLS"===this.techName_?(k.start.getTime()+1e3*d-h.start.getTime())/1e3:(1e3*d-h.start.getTime())/1e3}else d=h.duration/1e3}return this.noEPG()&&(d=1/0,this.addClass("vjs-live")),this.cache_.duration=d,d}return a.prototype.duration.call(this,b),this.techGet_("duration")},b.prototype.seekable=function(){var b=a.prototype.seekable.call(this);return"EmpCast"!==this.techName_?this.getRange_(b):b},b.prototype.buffered=function(){var b=a.prototype.buffered.call(this);return"EmpCast"!==this.techName_?this.getRange_(b):b},b.prototype.getRange_=function(a){var b=La.getEntitlement(this);if(this.seeking()||!a)return D(0,0);if(a.length>0&&b&&(b.isDynamicCachupAsLive||b.isStaticCachupAsLive)){var c=this.getProgramDetails();if(c){var d=new Date(c.startTime),e=b.streamInfo,f=a.start(a.length-1),g=a.end(a.length-1);g&&(b.isStaticCachupAsLive||"EmpHLS"===this.techName_?(f-=(d.getTime()-e.start.getTime())/1e3,g-=(d.getTime()-e.start.getTime())/1e3,a=D(f>0?f:0,g>this.duration()?this.duration():g)):b.isDynamicCachupAsLive&&(f-=d.getTime()/1e3,g-=d.getTime()/1e3,a=D(f>0?f:0,g>this.duration()?this.duration():g)))}}return a},b.prototype.remainingTime=function(){var a=La.getEntitlement(this);if(a&&(a.isDynamicCachupAsLive||a.isStaticCachupAsLive)&&"EmpCast"!==this.techName_){var b=this.duration();return b===1/0||0===b?1/0:b-this.currentTime()}return La.remainingTime(this)},b.prototype.gotoLive=function(){La.gotoLive(this)},b.prototype.playPreviousProgram=function(a){var b=this;if(this.tech_.playPreviousProgram)this.techCall_("playPreviousProgram",a);else{var c=La.getEntitlement(this);this.programService&&(c.isStaticCachupAsLive||c.isDynamicCachupAsLive)&&c.rwEnabled?this.programService().getPreviousProgram(function(c,d){if(d)sa.error("playPreviousProgram",d);else{new Date(c.startTime);a?b.playheadTime(c.end.getTime()-3e4):b.playheadTime(c.start.getTime()+1e3)}}):La.playPreviousProgram(this)}},b.prototype.playNextProgram=function(){if(this.tech_.playNextProgram)this.techCall_("playNextProgram");else{var a=La.getEntitlement(this),b=this.getProgramDetails();b&&(a.isStaticCachupAsLive||a.isDynamicCachupAsLive)&&a.ffEnabled?this.playheadTime(b.end.getTime()+1e3):La.playNextProgram(this)}},b.prototype.isProgramLive=function(){var a=this.getProgramDetails();return a?a.end.getTime()>this.getServerTime():this.isLive()},b.prototype.isProgramCatchup=function(){var a=La.getEntitlement(this);return a?a.isStaticCachupAsLive||!this.isProgramLive()&&a.isDynamicCachupAsLive:!this.isLive()},b.prototype.currentAsset=function(){return La.currentAsset(this)},b.prototype.ended=function(){return this.ended_},ha(b,[{key:"version",get:function(){return"2.79.2"}},{key:"entitlement",get:function(){var a=La.getEntitlement(this);return a=Object.assign({},a),a.options=void 0,a}},{key:"entitlementEngine",get:function(){return this.programService?this.programService().exposure:null}}]),b}(dc);gc.AutoTechArray=function(){var a=["EmpShaka","EmpHLS","EmpFlash","Html5"];gc.SupportFairplay_()&&(a=["EmpHLS","EmpShaka","EmpFlash","Html5"]);for(var b=[],c=0;c<a.length;c++)ec.techs_.hasOwnProperty(a[c])&&b.push(a[c]);return b},gc.SupportFairplay_=function(){var a=ea.getTech("EmpHLS");return!!(void 0!==a&&a.isSupported()&&ca.WebKitMediaKeys&&a.getKeySystem&&ca.WebKitMediaKeys.isTypeSupported(a.getKeySystem(),"video/mp4"))};var hc=ea.getComponent("Component");hc.registerComponent("player",gc);var ic=function(){function a(b){ga(this,a),this.assetId=b.assetId||0,this.playToken=b.playToken||"",this.playTokenExpiration=b.playTokenExpiration||"",this.productId=b.productId||"",this.edrmConfig=b.edrmConfig||null,this.mediaLocator=b.mediaLocator||"",this.mediaLocator&&(this.src=this.mediaLocator.replace(/^(http:)/,"").replace(/^(https:)/,"")),b.streamInfo?this.streamInfo=b.streamInfo:this.setupStreamInfo(b.mediaLocator||""),this.mimeType=b.mimeType||"",this.entitlementType=b.entitlementType||"",this.live=b.live||!1,this.playSessionId=b.playSessionId||"",this.analyticsConfig=b.analyticsConfig||null,this.lastViewedOffset=b.lastViewedOffset||null,this.lastViewedTime=b.lastViewedTime||null,this.liveTime=b.liveTime||null;var c=Date.parse(b.licenseExpiration||null);isNaN(c)===!1&&(this.licenseExpiration=new Date(c)),this.licenseExpirationReason=b.licenseExpirationReason||"",this.playRequest=b.playRequest||null,this.minBitrate=b.minBitrate||0,this.maxBitrate=b.maxBitrate||0,this.maxResWidth=b.maxResWidth||0,this.maxResHeight=b.maxResHeight||0,this.rwEnabled=void 0===b.rwEnabled||b.rwEnabled,this.ffEnabled=void 0===b.ffEnabled||b.ffEnabled,this.airplayBlocked=void 0!==b.airplayBlocked&&b.airplayBlocked,b.fairplayConfig&&(this.protection={},this.protection.certificateUrl=b.fairplayConfig.certificateUrl||"",this.protection.licenseUrl=b.fairplayConfig.licenseAcquisitionUrl||""),this.mdnRequestRouterUrl=b.mdnRequestRouterUrl||"",this.timeshiftEnabled=b.timeshiftEnabled,b.cencConfig&&(this.licenseServers=b.cencConfig)}return a.prototype.setupStreamInfo=function(){if(this.streamInfo={referenceTime:0},this.isDynamicCachupAsLive=!1,this.isStaticCachupAsLive=!1,this.mediaLocator){var a=n("t",this.mediaLocator);if(a)try{a&&47===a.length?(this.streamInfo.start=new Date(a.slice(0,23)+"Z"),this.streamInfo.startTime=this.streamInfo.start.getTime(),this.streamInfo.end=new Date(a.slice(24)+"Z"),this.streamInfo.endTime=this.streamInfo.end.getTime()):a&&23===a.length&&(this.streamInfo.start=new Date(a+"Z"),this.streamInfo.startTime=this.streamInfo.start.getTime()),this.isDynamicCachupAsLive=void 0!==this.streamInfo.start&&void 0===this.streamInfo.end,this.isStaticCachupAsLive=void 0!==this.streamInfo.start&&void 0!==this.streamInfo.end}catch(b){sa.warn("timeParams",b)}}},ha(a,null,[{key:"Type",get:function(){return{DASH:"DASH",FLASH:"FLASH",HLS:"HLS"}}}]),a}(),jc=g(function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var e=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},f=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return c(this,b),e(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),Object.defineProperty(this,"message",{enumerable:!1,value:a,writable:!0}),Object.defineProperty(this,"name",{enumerable:!1,value:this.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?void Error.captureStackTrace(this,this.constructor):void Object.defineProperty(this,"stack",{enumerable:!1,value:new Error(a).stack,writable:!0})}return d(b,a),b}(Error);b["default"]=f,a.exports=b["default"]}),kc=f(jc),lc=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ga(this,b);var d=void 0,e=!0;"string"==typeof c?d=c:c instanceof Object&&(d=c.message,c.fatal===!1&&(e=c.fatal));var f=ja(this,a.call(this,d));return f.fatal=e,f}return ia(b,a),ha(b,[{key:"fatal",get:function(){return!!this.fatal_},set:function(a){this.fatal_=a}}]),b}(kc),mc=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ga(this,a),this.options_=b}return a.prototype.getEntitlement=function(a,b,c){throw new lc("EntitlementEngine: getEntitlement should be implemented in subclass.")},a.prototype.getServerTime=function(a){throw new lc("EntitlementEngine: getServerTime should be implemented in subclass.")},a.prototype.getCachedServerTime=function(){return void 0!==a.ServerTimeDiff_?Date.now()+a.ServerTimeDiff_:Date.now()},a.prototype.getProgramInfo=function(a,b,c,d){throw new lc("EntitlementEngine: getProgramInfo should be implemented in subclass.")},a.prototype.getEPG=function(a,b,c,d){throw new lc("EntitlementEngine: getEPG should be implemented in subclass.")},a.prototype.getAssetInfo=function(a,b){throw new lc("EntitlementEngine: getAssetInfo should be implemented in subclass.")},a.prototype.verifySession=function(a,b){throw new lc("EntitlementEngine: verifySession should be implemented in subclass.")},a.prototype.login=function(a,b,c,d){throw new lc("EntitlementEngine: login should be implemented in subclass.")},a.prototype.logout=function(a){throw new lc("EntitlementEngine: logout should be implemented in subclass.")},a.prototype.fetchPreferences=function(a){throw new lc("EntitlementEngine: fetchPreferences should be implemented in subclass.")},a.prototype.savePreferences=function(a,b){throw new lc("EntitlementEngine: savePreferences should be implemented in subclass.")},a.isEntitlementEngine=function(b){return b.prototype instanceof a||b instanceof a||b===a},a.registerEntitlementEngine=function(b,c){if(a.engines_||(a.engines_={}),!a.isEntitlementEngine(c))throw new lc("EntitlementEngine "+b+" must be a EntitlementEngine");return a.engines_[b]=c,c},a.getEntitlementEngine=function(b){if(a.engines_&&a.engines_[b])return a.engines_[b]},a}();mc.ServerTimeDiff_=void 0,mc.registerEntitlementEngine("EntitlementEngine",mc);var nc=O,oc=Object.prototype.toString,pc=g(function(a,b){function c(a){return a.replace(/^\s*|\s*$/g,"")}b=a.exports=c,b.left=function(a){return a.replace(/^\s*/,"")},b.right=function(a){return a.replace(/\s*$/,"")}}),qc=P,rc=Object.prototype.toString,sc=Object.prototype.hasOwnProperty,tc=function(a){return"[object Array]"===Object.prototype.toString.call(a)},uc=function(a){if(!a)return{};var b={};return qc(pc(a).split("\n"),function(a){var c=a.indexOf(":"),d=pc(a.slice(0,c)).toLowerCase(),e=pc(a.slice(c+1));"undefined"==typeof b[d]?b[d]=e:tc(b[d])?b[d].push(e):b[d]=[b[d],e]}),b},vc=T,wc=Object.prototype.hasOwnProperty,xc=X;X.XMLHttpRequest=ca.XMLHttpRequest||$,X.XDomainRequest="withCredentials"in new X.XMLHttpRequest?X.XMLHttpRequest:ca.XDomainRequest,U(["get","put","post","patch","head","delete"],function(a){X["delete"===a?"del":a]=function(b,c,d){return c=W(b,c,d),c.method=a.toUpperCase(),Y(c)}});var yc=function(){function a(){ga(this,a)}return a.getBaseUrl=function(a,b){var c=new XMLHttpRequest;c.open("GET",a.mdnRequestRouterUrl),c.onreadystatechange=function(d){if(4===c.readyState)if(200===c.status){sa("getBaseUrl OK");var e=c.responseXML;try{var f=e.firstChild.getElementsByTagName("baseURL")[0].textContent;f?a.baseUrl=f:sa.error("getBaseUrl Error can not find baseURL"),b(a)}catch(g){sa.error("getBaseUrl Error",g),b(a)}}else sa.error("getBaseUrl Error",c.statusText),b(a)},c.send(null)},a}(),zc=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ga(this,b),c=Object.assign({exposureApiURL:"https://exposure.emps.ebsd.ericsson.net",exposureApiVersion:"v1"},c);var d=ja(this,a.call(this,c));return d.errorMap={400:{INVALID_JSON:{message:"Invalid json.",fatal:!1}},401:{NO_SESSION_TOKEN:{message:"The session token is missing.",fatal:!0},INVALID_SESSION_TOKEN:{message:"The session token is not valid.",fatal:!0}},403:{FORBIDDEN:{message:"The business unit has been configured to require server to server authentication, but it is not valid.",fatal:!0},NOT_ENTITLED:{message:"The user is not entitled.",fatal:!0},DEVICE_BLOCKED:{message:"The device is not allowed to play the asset.",fatal:!0},GEO_BLOCKED:{message:"Not allowed from this region.",fatal:!0},LICENSE_EXPIRED:{message:"Asset has been expired.",fatal:!0},NOT_AVAILABLE_IN_FORMAT:{message:"The media is not available in the requested format.",fatal:!1},NOT_ENABLED:{message:"The media is not enabled.",fatal:!0},CONCURRENT_STREAMS_LIMIT_REACHED:{message:"You have reached the maximum number of concurrent streams you are allowed to watch.",fatal:!0},NO_MEDIA_ON_CHANNEL:{message:"The media is not available on the channel.",fatal:!1},NO_MEDIA_FOR_PROGRAM:{message:"No media available for this program.",fatal:!1}},404:{UNKNOWN_BUSINESS_UNIT:{message:"The business unit cannot be found.",fatal:!0},UNKNOWN_ASSET:{message:"The asset cannot be found.",fatal:!1}},0:{NETWORK_ERROR:{message:"Network error.",fatal:!1}}},void 0===mc.ServerTimeDiff_&&d.getServerTime(function(a,b){b&&(sa.error("getServerTime",b),a=new Date),mc.ServerTimeDiff_=new Date-a,sa("serverDiff",mc.ServerTimeDiff_)}),d}return ia(b,a),b.prototype.login=function(a,b,c,d){var e=this;if(!c)throw"callback is mandantory for login";var f=!1;d&&(f=!0);var g=""===a,h=new Date(this.getCachedServerTime()),i=86400;if(h.setTime(h.getTime()+1e3*i),this.options_.apiKey){var j={"EMP-Auth":this.options_.apiKey},k=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+this.customer+"/businessunit/"+this.businessUnit+"/auth/session",l={accountId:a,userId:a,deviceId:"WEB_"+a,device:{height:screen.height,width:screen.width,model:navigator.appName,name:navigator.product,os:navigator.platform,osVersion:navigator.appVersion,manufacturer:navigator.vendor,type:"WEB"},expiration:h.toISOString(),anonymous:!1};xc.post(k,{json:l,headers:j},function(a,b,d){e.checkForError(a,b,function(a,b){c({success:!1,expiration:0,message:b.message})})||(e.sessionToken=d.sessionToken,c({success:!0,expiration:1e3*i,session:d}))})}else{var m=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+this.customer+"/businessunit/"+this.businessUnit;m+=g===!0?"/auth/anonymous":f===!0?"/auth/twofactorlogin":"/auth/login";var n={deviceId:"WEB_"+a,device:{height:screen.height,width:screen.width,model:navigator.appName,name:navigator.product,os:navigator.platform,osVersion:navigator.appVersion,manufacturer:navigator.vendor,type:"WEB"},rememberMe:!1,username:a,password:b,totp:f===!0?d:void 0};xc.post(m,{json:n},function(a,b,d){e.checkForError(a,b,function(a,b){c({success:!1,expiration:0,message:b.message})})||(e.sessionToken=d.sessionToken,c({success:!0,expiration:d.expirationDateTime?new Date(d.expirationDateTime)-new Date(e.getCachedServerTime()):1e3*i,session:d}))})}},b.prototype.logout=function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},c=arguments[1],d=this.customer,e=this.businessUnit;if(!d)throw new lc("Customer was not provided.");if(!e)throw new lc("Business unit was not provided.");var f=this.requestHeaders;c&&(f={Authorization:"Bearer "+c});var g=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+d+"/businessunit/"+e+"/auth/session";return xc.del(g,{headers:f},function(c,d,e){a.checkForError(c,d,b)||(a.sessionToken=null,void 0!==("undefined"==typeof b?"undefined":fa(b))&&b(!0))})},b.prototype.getEntitlement=function(a,b,c){if("undefined"==typeof a)throw new lc("No request specified.");if("undefined"==typeof a.assetId)throw new lc("No assetId specified.");if("undefined"==typeof b)throw new lc("Media not found.");if(!b.drm||!b.format)throw new lc("Invalid playrequest specified.");null!==a.programId||a.channelId?this.getProgram_(a.assetId,a.programId,b,c):this.getAsset_(a.assetId,b,c)},b.prototype.getErrorForResponse=function(a){if(!a)return null;var b=a.statusCode,c="";a.body&&(c=a.body.message);var d=this.errorMap[b];if(d){var e=b+" "+c,f=d[c];return f&&(e+=": "+f.message),new lc(f?{message:e,fatal:!!f.fatal}:e)}if(!(b>=200&&b<=299)){var g=b+" "+c;return new lc(g)}return null},b.prototype.checkForError=function(a,b,c){var d=a;return a||(d=this.getErrorForResponse(b)),d?(c&&c(null,d),d):null},b.prototype.getAsset_=function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},e=this.customer,f=this.businessUnit;if(!e)throw new lc("Customer was not provided.");if(!f)throw new lc("Business unit was not provided.");var g=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+e+"/businessunit/"+f+"/entitlement/"+a+"/play";return xc.post(g,{json:b,headers:this.requestHeaders},function(e,f,g){if(!c.checkForError(e,f,d)){var h=new ic(g);h.assetId=a,h.playRequest=b,h.mimeType=b.type,h.mdnRequestRouterUrl?yc.getBaseUrl(h,d):d(h)}})},b.prototype.setStreamReferenceTime=function(a){(a.isDynamicCachupAsLive||a.isStaticCachupAsLive)&&("application/dash+xml"===a.mimeType?a.isStaticCachupAsLive?a.streamInfo.referenceTime=a.streamInfo.startTime:a.streamInfo.referenceTime=0:"application/x-mpegurl"===a.mimeType&&(a.streamInfo.referenceTime=a.streamInfo.startTime))},b.prototype.getAssetMetadata_=function(a,b){var c=this,d=this.customer,e=this.businessUnit;if(!d)throw new lc("Customer was not provided.");if(!e)throw new lc("Business unit was not provided.");var f=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+d+"/businessunit/"+e+"/content/asset/"+a;return xc.get(f,null,function(a,d,e){if(!c.checkForError(a,d,b)){var f=JSON.parse(e);b(f)}})},b.prototype.getProgram_=function(a,b,c){var d=this,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},f=this.customer,g=this.businessUnit;if(!f)throw new lc("Customer was not provided.");if(!g)throw new lc("Business unit was not provided.");var h="";b&&(h="/program/"+b);var i=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+f+"/businessunit/"+g+"/entitlement/channel/"+a+h+"/play";return xc.post(i,{json:c,headers:this.requestHeaders},function(f,g,h){if(!d.checkForError(f,g,e)){var i=new ic(h);i.assetId=a,b&&(i.programId=b),i.playRequest=c,i.mimeType=c.type,d.setStreamReferenceTime(i),i.mdnRequestRouterUrl?yc.getBaseUrl(i,e):e(i)}})},b.prototype.getServerTime=function(a){var b=this.customer,c=this.businessUnit;if(!b||!c)return sa.warn("getServerTime no customer or businessUnit"),void a(new Date);var d=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+b+"/businessunit/"+c+"/time";return xc.get(d,null,function(b,c,d){if(b)return void a(null,b);var e=JSON.parse(d),f=new Date(e.iso8601);a(f)})},b.prototype.getPreferences=function(a){var b=this,c=this.customer,d=this.businessUnit,e=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+c+"/businessunit/"+d+"/preferences";return xc.get(e,{headers:this.requestHeaders},function(c,d,e){if(!b.checkForError(c,d,a)){var f=JSON.parse(e);a(f)}})},b.prototype.savePreferences=function(a,b){var c=this,d=this.customer,e=this.businessUnit;if(!a)return void sa.error("Preferences was not provided.");var f={preferences:a},g=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+d+"/businessunit/"+e+"/preferences";return xc.post(g,{json:f,headers:this.requestHeaders},function(a,d,e){c.checkForError(a,d,b)||b(!0)})},b.prototype.getEPG=function(a,b,c,d){var e=this,f=this.customer,g=this.businessUnit,h=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+f+"/businessunit/"+g+"/epg/"+a;return h+="?from="+b+"&to="+c,xc.get(h,null,function(a,b,c){if(!e.checkForError(a,b,d)){var f=JSON.parse(c);d(f)}})},b.prototype.getProgramInfo=function(a,b,c,d){var e=this.customer,f=this.businessUnit,g=null,h=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+e+"/businessunit/"+f+"/epg/"+a;return d?h=h+"/program/"+d:(g={from:b.getTime(),to:b.getTime()},h+="?from="+g.from+"&to="+g.to),xc.get(h,null,function(a,b,d){if(a)return void c(null,a);var e=JSON.parse(d),f=void 0;if(e.programs&&e.programs.length>0)f=e.programs[0];else{if(!e.programId)return void c(null,"Invalid response from EPG. No programs found.");f=e}f.start=new Date(f.startTime),f.end=new Date(f.endTime),f.duration=new Date(f.endTime)-new Date(f.startTime),c(f)})},b.prototype.getAssetInfo=function(a,b){var c=this.customer,d=this.businessUnit,e=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+c+"/businessunit/"+d+"/content/asset/"+a;return xc.get(e,null,function(a,c,d){if(a)return void b(null,a);var e=JSON.parse(d);b(e)})},b.prototype.verifyEntitlement=function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},e=this.customer,f=this.businessUnit;if(!e)throw new lc("Customer was not provided.");if(!f)throw new lc("Business unit was not provided.");if(!a)throw new lc("assetId was not provided.");if(!b)throw new lc("playRequest was not provided.");var g=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+e+"/businessunit/"+f+"/entitlement/"+a+"?drm="+b.drm+"&format="+b.format;return xc.get(g,{headers:this.requestHeaders},function(a,b,e){c.checkForError(a,b,d)||void 0!==("undefined"==typeof d?"undefined":fa(d))&&d(JSON.parse(e))})},b.prototype.verifySession=function(a,b){var c=this,d=this.customer,e=this.businessUnit,f=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+d+"/businessunit/"+e+"/auth/session";return xc.get(f,{headers:this.requestHeaders},function(d,e,f){return c.checkForError(d,e)?void(b&&b()):void(a&&a())})},ha(b,[{key:"requestHeaders",get:function(){var a={Authorization:"Bearer "+this.sessionToken};return this.options_.apiKey&&(a=Object.assign({"EMP-Auth":this.options_.apiKey},a)),a}},{key:"customer",get:function(){return this.customer_||this.options_.customer||null},set:function(a){this.customer_=a}},{key:"businessUnit",get:function(){return this.businessUnit_||this.options_.businessUnit||null},set:function(a){this.businessUnit_=a}},{key:"sessionToken",get:function(){return this.options_.sessionToken||null},set:function(a){this.options_.sessionToken=a}}]),b}(mc);mc.registerEntitlementEngine("EricssonExposure",zc);var Ac=function(){function a(b){ga(this,a),this.assetId=b.assetId||null,this.programId=b.programId||null,this.channelId=b.channelId||null}return ha(a,[{key:"assetId",get:function(){return this.assetId_},set:function(a){this.assetId_=a}},{key:"programId",get:function(){return this.programId_},set:function(a){this.programId_=a}},{key:"channelId",get:function(){return this.channelId_},set:function(a){this.channelId_=a}}]),a}(),Bc=videojs.getPlugin("plugin"),Cc=function(a){function b(c,d){ga(this,b);var e=ja(this,a.call(this,c,d));return sa("ProgramService","create"),e.MIN_PROGRAM_CHECK_TIMEOUT=1e3,e.checkForProgramChangeBind=e.checkForProgramChange_.bind(e),e.onEntitlementChangeBind=e.onEntitlementChange.bind(e),e.clearProgramChangeTimeoutBind=e.clearProgramChangeTimeout_.bind(e),e.options_=d?d:{},e.programChangeTimeout_=null,e.programChangeCheckTimestamp_=0,e.player.on(ma.ENTITLEMENT_CHANGE,e.onEntitlementChangeBind),e}return ia(b,a),b.prototype.entitlement=function(a){return"undefined"==typeof a?this.entitlement_:(this.entitlement_=a,a)},b.prototype.options=function(a){return a?void(this.options_=a):this.options_},b.prototype.onEntitlementChange=function(a,b){this.currentProgram_=null,this.currentVOD_=null;var c=b&&b.entitlement;c&&(c instanceof ic||(this.stop(),c=Object.assign(new ic({}),c)),this.entitlement(c)),La.supportsEpgProgramChange(this.player)||(this.player.off(ma.PLAYING,this.checkForProgramChangeBind),this.player.one(ma.PLAYING,this.checkForProgramChangeBind))},b.prototype.start=function(){
sa("ProgramService","start"),this.entitlement()&&this.checkForProgramChange_({type:"startplayback"})},b.prototype.stop=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){stop("ProgramService stop"),this.clearProgramChangeTimeout_(),this.currentProgram_=null,this.currentVOD_=null,this.player&&(this.player.off(ma.SEEKED,this.checkForProgramChangeBind),this.player.off(ma.PLAYING,this.checkForProgramChangeBind),this.player.off(ma.PAUSE,this.clearProgramChangeTimeoutBind),this.player.off(ma.PLAY,this.checkForProgramChangeBind))}),b.prototype.clearProgramChangeTimeout_=function(a,b){this.programChangeTimeout_&&(a&&sa("clearProgramChangeTimeout",a.type),clearTimeout(this.programChangeTimeout_),this.programChangeTimeout_=null)},b.prototype.running=function(){return!!this.programChangeTimeout_&&(sa("ProgramService:running",this.programChangeCheckTimestamp_?new Date(this.programChangeCheckTimestamp_):0),!0)},b.prototype.dispose=function(){sa("ProgramService","dispose"),this.player.off(ma.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.stop(),a.prototype.dispose.call(this)},b.prototype.checkForProgramChange_=function(a,b){var c=this;if(!a)return void sa.error("checkForProgramChange","event was not provided.");if(sa("checkForProgramChange",a.type),this.entitlement().live||this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive||a.type!==ma.SEEKED){if(this.player.options_.absoluteStartTime&&a.type===ma.SEEKED)return void sa("checkForProgramChange","ignore livepoint");if(this.clearProgramChangeTimeout_(),La.supportsEpgProgramChange(this.player)){var d=La.program(this.player);if(d)return void sa("updateCurrentProgram from player")}var e=this.entitlement().assetId,f=this.entitlement().live,g=this.entitlement().programId;if(!f&&!g)return void this.updateVOD_(e);var h=void 0;if(f&&!g){var i=new Date(this.exposure.getCachedServerTime()),j="startplayback"===a.type?15:La.timeBehindLive(this.player);if(i.setSeconds(i.getSeconds()-j),h=i,sa("checkForProgramChange","Live",j),this.currentProgram&&h.getTime()<this.currentProgram.end.getTime()&&h.getTime()>=this.currentProgram.start.getTime())return sa("checkForProgramChange","Same"),h=null,void this.updateCurrentProgram_(this.currentProgram,!1)}else if("startplayback"!==a.type&&(this.entitlement().isDynamicCachupAsLive||this.entitlement().isStaticCachupAsLive)){var k=La.getPlayheadTime(this.player);if(k){h=new Date(k);new Date(this.exposure.getCachedServerTime());if(this.currentProgram&&this.entitlement().isStaticCachupAsLive&&h.getTime()+2e3>=this.entitlement().streamInfo.end.getTime())return sa("checkForProgramChange","Load next stream",h),void(this.player.lineUpAsset&&this.player.lineUpAsset(null,this.currentProgram.channelId,this.currentProgram.programId,h.getTime()));if(this.currentProgram&&h.getTime()+2e3>=this.currentProgram.end.getTime())sa("checkForProgramChange","Next",h),h.setSeconds(h.getSeconds()+2);else{if(this.currentProgram&&h.getTime()<this.currentProgram.end.getTime()&&h.getTime()>=this.currentProgram.start.getTime())return sa("checkForProgramChange","Same",h),h=null,void this.updateCurrentProgram_(this.currentProgram,!1);sa("checkForProgramChange","Prev",h)}}}this.exposure.getProgramInfo(e,h,function(b,d){return d?(sa.warn("getProgramInfo","No EPG found.",d),void c.pollingForEPG()):void c.updateCurrentProgram_(b,"startplayback"===a.type)},h?null:g)}},b.prototype.updateVOD_=function(a){var b=this;this.exposure.getAssetInfo(a,function(a,c){return c?void sa.warn("No AssetInfo found.",c):void(b.currentVOD_&&b.currentVOD_.assetId===a.assetId||(b.currentVOD_=a,b.currentProgram_=null,sa("ASSET_CHANGED"),b.player.trigger(ma.ASSET_CHANGED,{asset:a})))})},b.prototype.updateCurrentProgram_=function(a,b){var c=this;if(sa("updateCurrentProgram",a,b),this.clearProgramChangeTimeout_(),this.currentProgram_&&this.currentProgram_.programId===a.programId||(this.currentVOD_=null,La.setTechProgram(this.player,a),this.player.trigger(ma.PROGRAM_CHANGED,{program:a}),this.player.trigger(ma.DURATION_CHANGE),this.currentProgram_=a,b||this.verifyEntitlement()),b)return void sa("updateCurrentProgram","startplayback");if(this.entitlement().isDynamicCachupAsLive||this.entitlement().live||this.entitlement().isStaticCachupAsLive){var d=void 0;if(this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive){var e=La.getPlayheadTime(this.player);if(!e)return void sa.error("updateCurrentProgram","no playHeadTime");d=new Date(e)}else{var f=La.timeBehindLive(this.player);d=new Date(this.exposure.getCachedServerTime()),d.setSeconds(d.getSeconds()-f)}var g=new Date(a.start.getTime()+a.duration),h=g.getTime()-d.getTime();(!h||h<this.MIN_PROGRAM_CHECK_TIMEOUT)&&(sa("updateCurrentProgram","timediff is below minimum",h),h=this.MIN_PROGRAM_CHECK_TIMEOUT),this.programChangeCheckTimestamp_=Date.now()+h,sa("updateCurrentProgram","programChangeTimeout",new Date(this.programChangeCheckTimestamp_)),this.programChangeTimeout_=setTimeout(function(){c.checkForProgramChange_({type:"programend"}),c.programChangeTimeout_=null},h)}this.player.off(ma.SEEKED,this.checkForProgramChangeBind),this.player.one(ma.SEEKED,this.checkForProgramChangeBind),this.player.off(ma.PLAY,this.checkForProgramChangeBind),this.player.one(ma.PLAY,this.checkForProgramChangeBind),this.player.off(ma.PAUSE,this.clearProgramChangeTimeoutBind),this.player.one(ma.PAUSE,this.clearProgramChangeTimeoutBind)},b.prototype.pollingForEPG=function(){var a=this;this.currentProgram_;this.currentProgram_=null,this.player.trigger(ma.PROGRAM_CHANGED,{program:null}),this.player.trigger(ma.DURATION_CHANGE);var b=3e5;this.programChangeCheckTimestamp_=Date.now()+b,this.programChangeTimeout_=setTimeout(function(){a.checkForProgramChange_({type:"pollingforepg"}),a.programChangeTimeout_=null},b)},b.prototype.getNextProgram=function(a){if(this.currentProgram||a&&a(null,{message:"getNextProgram No Current Program"}),this.exposure.getCachedServerTime()<this.currentProgram.end.getTime())return void a(this.currentProgram);var b=new Date(this.currentProgram.endTime);b.setSeconds(b.getSeconds()+15),this.exposure.getProgramInfo(this.currentProgram.channelId,b,function(b,c){c?a(null,c):a(b)},null)},b.prototype.getPreviousProgram=function(a){this.currentProgram||a&&a(null,{message:"getPreviousProgram No Current Program"});var b=new Date(this.currentProgram.startTime);b.setSeconds(b.getSeconds()-15),this.exposure.getProgramInfo(this.currentProgram.channelId,b,function(b,c){c?a(null,c):a(b)},null)},b.prototype.getProgram=function(a,b){this.currentProgram||b&&b(null,{message:"getProgram No Current Program"}),this.exposure.getProgramInfo(this.currentProgram.channelId,a,function(a,c){c?b(null,c):b(a)},null)},b.prototype.verifyEntitlement=function(){var a=this;this.currentProgram&&this.exposure.verifyEntitlement(this.currentProgram.assetId,this.entitlement().playRequest,function(b,c){return c?(a.player.error("verifyEntitlement "+c.message),void La.stop(a.player)):b&&"SUCCESS"===b.status?void sa("verifyEntitlement",b.status):(a.player.error(b?b.status:"verifyEntitlement no status"),void La.stop(a.player))})},b.prototype.getAssetMetadata=function(a,b){var c=this,d=this.currentProgram?this.currentProgram:this.currentVOD;d||this.exposure.getAssetMetadata_(a,function(a,d){return d?(sa.warn("getAssetMetadata","No data found.",d),void b(null,d)):void b(c.extractMetadata_(a))}),b(this.extractMetadata_(d))},b.prototype.extractMetadata_=function(a){var b=null,c=null,d=null;return a&&a.localized&&a.localized.length>0&&(a.localized[0].title&&(b=a.localized[0].title),a.localized[0].shortDescription&&(c=a.localized[0].shortDescription),a.localized[0].images&&a.localized[0].images.length>0&&a.localized[0].images[0].url&&(d=a.localized[0].images)),{title:b?b:"",subtitle:c?c:"",images:d?d:[]}},ha(b,[{key:"exposure",get:function(){if(!this.options_.exposure){var a=this.player.options_["entitlement-engine"];a||(a=this.player.options_["exposure-service"]?this.player.options_["exposure-service"]:"EricssonExposure");var b=this.player.options_[a.toLowerCase()];if(!b){sa.warn("Missing entitlementOptions in player options");new pa("Missing entitlementOptions in player options",oa.ENTITLEMENT);return null}var c=mc.getEntitlementEngine(a);this.options_.exposure=new c(b)}return this.options_.exposure}},{key:"currentProgram",get:function(){if(La.supportsEpgProgramChange(this.player)){var a=La.program(this.player);return a}return this.currentProgram_}},{key:"currentVOD",get:function(){return this.currentVOD_}}]),b}(Bc);Cc.VERSION="2.79.2",videojs.getPlugin("programService")?videojs.log.warn('A plugin named "programService" already exists.'):videojs.registerPlugin("programService",Cc);var Dc=videojs.getPlugin("plugin"),Ec=function(a){function b(c,d){ga(this,b);var e=ja(this,a.call(this,c,d));return sa("EntitlementExpirationService","create"),e.options_=d,e.onEntitlementChangeBind=e.onEntitlementChange.bind(e),e}return ia(b,a),b.prototype.dispose=function(){sa("EntitlementExpirationService","dispose"),this.stop(),a.prototype.dispose.call(this)},b.prototype.stop=function(){sa("EntitlementExpirationService","stop"),this.player.off(ma.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.expirationTimeout_&&(clearTimeout(this.expirationTimeout_),this.expirationTimeout_=null)},b.prototype.start=function(){sa("EntitlementExpirationService","start"),this.expirationTimeout_&&(clearTimeout(this.expirationTimeout_),this.expirationTimeout_=null),this.player.off(ma.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.player.on(ma.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind)},b.prototype.entitlement=function(a){return"undefined"==typeof a?this.entitlement_:(this.entitlement_=a,a)},b.prototype.onEntitlementChange=function(a,b){this.entitlement(b&&b.entitlement),this.expirationTimeout_&&(clearTimeout(this.expirationTimeout_),this.expirationTimeout_=null),this.checkForExpiration()},b.prototype.options=function(a){return a?void(this.options_=a):this.options_},b.prototype.checkForExpiration=function(){var a=this,b=this.entitlement();if(sa("EntitlementExpirationService","checkForExpiration",b.licenseExpiration),this.hasLicenseExpiration(b)){var c=b.licenseExpiration.getTime()-this.exposure.getCachedServerTime();return c<=0?(this.player.error(this.errorForReason(b.licenseExpirationReason)),void La.stop(this.player)):void(c<2147483647?this.expirationTimeout_=setTimeout(function(){a.expirationTimeout_=null,sa("EntitlementExpirationService","license expired"),a.refreshEntitlement()},c):setTimeout(function(){return a.checkForExpiration()},1073741823))}},b.prototype.refreshEntitlement=function(){La.restart(this.player,!0)},b.prototype.errorForReason=function(a){switch(a){case"GEO_BLOCKED":return this.player.localize("Not allowed from this region.");case"NOT_ENTITLED":return this.player.localize("The user is not entitled.");case"GAP_IN_EPG":return this.player.localize("Asset temporarily not available");case"EPG_PLAY_MAX_HOURS":default:return this.player.localize("Asset exceeded maximum playback time")}},b.prototype.hasLicenseExpiration=function(a){return!!a.licenseExpiration},ha(b,[{key:"exposure",get:function(){return this.options_&&this.options_.exposure}}]),b}(Dc);Ec.VERSION="2.79.2",videojs.getPlugin("entitlementExpirationService")?videojs.log.warn('A plugin named "entitlementExpirationService" already exists.'):videojs.registerPlugin("entitlementExpirationService",Ec);var Fc=ea.getComponent("Tech"),Gc=function Pc(a){return{setSource:function(b,c){function d(a,b,c,d){var e=b.analyticsDeviceInfo;e&&(sa.warn("options.analyticsDeviceInfo is deprecated. Use options.analytics.deviceInfo."),b.analytics||(b.analytics={}),b.analytics.deviceInfo=e),a.analytics&&(a.analytics().options({exposure:d,analytics:b.analytics}),a.analytics().newAnalytics({exposureApiURL:c.exposureApiURL,customer:c.customer,businessUnit:c.businessUnit,sessionToken:c.sessionToken}),a.analytics().onEntitlementLoadStart())}function e(a,b,c,d,e){a.options_.absoluteStartTime&&a.options_.absoluteStartTime>c.getCachedServerTime()?a.options_.absoluteStartTime=c.getCachedServerTime()-1e4:a.options_.startTime&&a.options_.startTime>c.getCachedServerTime()/1e3&&(a.options_.startTime=(c.getCachedServerTime()-1e4)/1e3);var f=!1;if(a.programService&&(!b.programService||!b.programService.disable)){if(a.programService().options({exposure:c}),d.isDynamicCachupAsLive&&b.playFrom){var f="beginning"===b.playFrom||!d.live&&!a.options_.absoluteStartTime&&!a.options_.startTime;if(f){var g=d.streamInfo.start.getTime()+100;sa("SET startTime",g),"EmpShaka"===a.techName_?(a.options({startTime:g/1e3}),d.options.startTime=g/1e3):(a.options({startTime:.1}),d.options.startTime=.1)}else if(a.options_.absoluteStartTime){a.options_.absoluteStartTime<d.streamInfo.start.getTime()&&(a.options_.absoluteStartTime=d.streamInfo.start.getTime());var h=a.options_.absoluteStartTime;"EmpHLS"===a.techName_&&(h=a.options_.absoluteStartTime-d.streamInfo.start.getTime()),sa("absoluteStartTime SET startTime",h),a.options({startTime:h/1e3}),d.options.startTime=h/1e3,a.options_.absoluteStartTime=void 0,d.options.absoluteStartTime=void 0}else a.options_.startTime&&(d.options.startTime=a.options_.startTime,a.options_.absoluteStartTime=void 0,d.options.absoluteStartTime=void 0)}else if(d.isStaticCachupAsLive&&a.options_.absoluteStartTime){a.options_.absoluteStartTime<d.streamInfo.start.getTime()&&(a.options_.absoluteStartTime=d.streamInfo.start.getTime());var i=a.options_.absoluteStartTime-d.streamInfo.start.getTime();sa("absoluteStartTime SET startTime",i),a.options({startTime:i/1e3}),d.options.startTime=i/1e3,a.options_.absoluteStartTime=void 0,d.options.absoluteStartTime=void 0}else d.isStaticCachupAsLive&&a.options_.startTime&&(d.options.startTime=a.options_.startTime,a.options_.absoluteStartTime=void 0,d.options.absoluteStartTime=void 0);a.programService().start()}e()}function f(a){return a&&a.playSessionId&&a.playToken&&a.mediaLocator}function g(b,c){if(!b)return void sa.error("setupEntitlement no entitlement");h.useLastViewedOffset===!0&&((b.isStaticCachupAsLive||b.isDynamicCachupAsLive||b.live)&&(b.lastViewedTime||b.liveTime)?b.liveTime?(sa("liveTime",new Date(b.liveTime),b.liveTime),a.options({absoluteStartTime:b.liveTime})):(sa("lastViewedTime",new Date(b.lastViewedTime),b.lastViewedTime),a.options({absoluteStartTime:b.lastViewedTime})):b.lastViewedOffset&&(sa("lastViewedOffset",b.lastViewedOffset/1e3),"EmpShaka"!==a.techName_&&a.options({startTime:b.lastViewedOffset/1e3}))),b.timeshiftEnabled===!1&&a.options({timeShiftDisabled:!0}),a.trigger(ma.ENTITLEMENT_CHANGE,{entitlement:b}),b=Object.assign(new ic({}),b),b.type=b.mimeType;var d={autoplay:a.options_.autoplay,muted:a.options_.muted,language:a.options_.language,maxBitrate:a.options_.maxBitrate,timeShiftDisabled:a.options_.timeShiftDisabled,useLastViewedOffset:a.options_.useLastViewedOffset,startTime:a.options_.startTime,absoluteStartTime:a.options_.absoluteStartTime,audioLanguage:a.options_.audioLanguage,subtitleLanguage:a.options_.subtitleLanguage};return b.options=d,b.options.source=b,a.entitlementExpirationService().start(),b}var h=a.options(),i=null,j=null;if(a.programService&&a.programService().stop(),f(a.currentSource()))i=a.currentSource();else{var k=l(b.src);j=new Ac(k),a.trigger(ma.ENTITLEMENT_LOAD_START,j)}var m=h["entitlement-engine"];m||(m=h["exposure-service"]?h["exposure-service"]:"EricssonExposure");var n=h[m.toLowerCase()];if(!n){var o=new pa("Missing entitlementOptions in player options",oa.ENTITLEMENT);return a.error(o),void c(o)}var p=Pc.getExposure(n,m);h.analytics&&h.analytics.disable||d(a,h,n,p),a.entitlementExpirationService().options({exposure:p});var q=h.techOrder.map(function(a){return a.charAt(0).toUpperCase()+a.slice(1)}).map(function(a){return[a,Fc.getTech(a)]}).filter(function(a){var b=a[0],c=a[1];if(c&&"Html5"!==b&&"EmpCast"!==b)return c.isSupported()});if(0===q.length){var o=new pa("Unable to load asset: None of the playback technologies are supported",oa.ENTITLEMENT);return a.error(o),void c(o)}_(q.length,function(b){var d=b.iteration();if(h.excludeTechs&&h.excludeTechs.indexOf(q[d][0])!==-1)return void b.next();var f=q[d][1];a.tech_&&a.techName_!==q[d][0]&&(a.techCall_("reset"),a.unloadTech_());try{if(i)return i=g(i,f),e(a,h,p,i,function(){c(null,i)}),void b["break"]();p.getEntitlement(j,f.entitlementPlayRequest,function(d,j){if(j){if(j.fatal){var j=new pa(j,oa.ENTITLEMENT);return a.error(j),La.stop(a),void c(j)}b.next()}else i=g(d,f),e(a,h,p,i,function(){c(null,i)}),b["break"]()})}catch(k){return a.error(new pa(k,oa.ENTITLEMENT)),void b.next()}},function(){if(null===i){var b=new pa("No valid entitlement found for asset",oa.ENTITLEMENT);return a.error(b),La.stop(a),void c(b)}})}}};Gc.isExposure=function(a){return mc.isEntitlementEngine(a)},Gc.EntitlementClass=ic,Gc.getExposure=function(a,b){if(a){var c=mc.getEntitlementEngine(b?b:"EricssonExposure");return new c(a)}throw new pa("Missing exposureOptions",oa.ENTITLEMENT)},Gc.registerExposure=function(a,b){return mc.registerEntitlementEngine(a,b)},Gc.getLog=function(){return sa},Gc.VERSION="2.79.2",ea.use("video/emp",Gc);var Hc=function(){function a(b,c,d){ga(this,a),this.INITIAL_REFERENCE_TIME=1,this.player_=b,this.analytics_=c,this.sessionId_=null,this.customAttributes=d.analytics&&d.analytics.customAttributes,this.exposure=d.exposure,this.currentTimeTimer=null,this.onPlayBind=this.onPlay.bind(this),this.onResumedBind=this.onResume.bind(this),this.onPlayingBind=this.onPlaying.bind(this),this.onPauseBind=this.onPause.bind(this),this.onEndedBind=this.onEnded.bind(this),this.onErrorBind=this.onError.bind(this),this.onEntitlementLoadStartBind=this.onEntitlementLoadStart.bind(this),this.onBitrateChangeBind=this.onBitrateChange.bind(this),this.onDisposeBind=this.onDispose.bind(this),this.onLoadStartBind=this.onLoadStart.bind(this),this.onSeekedBind=this.onSeeked.bind(this),this.onWaitingBind=this.onWaiting.bind(this),this.onChromeCastingStartBind=this.onChromeCastingStart.bind(this),this.onChromeCastingStopBind=this.onChromeCastingStop.bind(this),this.onProgramChangeBind=this.onProgramChange.bind(this),this.onWaitingEndedBind=this.onWaitingEnded.bind(this),this.onErrorBeforeAssetBind=this.onErrorBeforeAsset.bind(this),this.onEntitlementChangeBind=this.onEntitlementChange.bind(this),this.onWindowUnloadBind=this.onWindowUnload.bind(this),this.onPlayingAfterStartBind=this.onPlayingAfterStart.bind(this),this.allEvents_=Object.keys(ma).map(function(a){return ma[a]}),this.init(),this.createdSessions={},this.mem={}}return a.prototype.SessionId=function(a){if(!(a||this.entitlement()&&this.entitlementLoaded_))return"error-"+Math.random().toString().split(".")[1];var b=a?a:this.entitlement().playSessionId;return this.mem[b]||(this.mem[b]={pause:{},resume:{}}),b},a.prototype.hasSessionId=function(){return!(!this.entitlement()||!this.entitlementLoaded_)},a.prototype.sendCurrentTime=function(){var a=this.SessionId();a&&this.player_&&this.analytics_.getSessionState&&"PLAYING"===this.analytics_.getSessionState(a)&&this.analytics_.setCurrentTime(a,this.OffsetTime())},a.prototype.registerCurrentTimeTimer=function(){var a=this;this.clearTimers(),this.currentTimeTimer=setInterval(function(){a.sendCurrentTime();var b=a.SessionId();b&&a.analytics_&&a.analytics_.ok&&a.analytics_.ok(b)===!1&&(a.exposure?a.exposure.verifySession(null,function(){a.player_.el_&&(a.player_.trigger(ma.ERROR,"401 INVALID_SESSION_TOKEN: The session token is no longer valid."),La.stop(a.player_)),a.clearTimers()}):sa.error("registerCurrentTimeTimer Exposure is undefined"))},1e3)},a.prototype.clearTimers=function(){this.currentTimeTimer&&clearInterval(this.currentTimeTimer),this.currentTimeTimer=null},a.prototype.init=function(){return this.player_&&this.analytics_?(this.disabled_=!1,this.entitlementLoaded_=!1,sa("Initialization EmpAnalytics"),this.analytics_.init(),ca.addEventListener("beforeunload",this.onWindowUnloadBind),this.player_.on(ma.ENTITLEMENT_LOAD_START,this.onEntitlementLoadStartBind),this.player_.on(ma.PAUSE,this.onPauseBind),this.player_.on(ma.SEEKED,this.onSeekedBind),this.player_.on(ma.ENDED,this.onEndedBind),this.player_.on(ma.ERROR,this.onErrorBind),this.player_.on(ma.DISPOSE,this.onDisposeBind),this.player_.on(ma.STOPPED,this.onDisposeBind),this.player_.on(ma.BITRATE_CHANGED,this.onBitrateChangeBind),this.player_.on(ma.WAITING,this.onWaitingBind),this.player_.on(ma.CHROMECAST_CASTING,this.onChromeCastingStartBind),this.player_.on(ma.CHROMECAST_STOPPED,this.onChromeCastingStopBind),void this.player_.on(ma.PROGRAM_CHANGED,this.onProgramChangeBind)):void sa.warn("Warning: init failed . Possible causes: either player or analytics were not set.")},a.prototype.onWindowUnload=function(){var a=this;this.onGeneric("WindowClose",this.analytics_.dispose,function(){a.hasSessionId()===!0&&a.analytics_.dispose(a.SessionId(),a.getCachedCurrentTime()),a.analytics_.dispatchNow(!1)},!0)},a.prototype.onChromeCastingStart=function(){var a=this;this.onGeneric("StartCasting",this.analytics_.startCasting,function(){if(a.hasSessionId()!==!1){var b=a.SessionId();b&&a.analytics_.startCasting(a.SessionId(),a.OffsetTime())}},!1),this.disabled_=!0},a.prototype.onChromeCastingStop=function(){var a=this;this.disabled_=!1,this.onGeneric("StopCasting",this.analytics_.stopCasting,function(){a.hasSessionId()!==!1&&a.analytics_.stopCasting(a.SessionId(),a.OffsetTime())},!1)},a.prototype.onProgramChange=function(a,b){var c=this,d=b?b.program:null;sa("analytics","onProgramChange",d),d&&this.analytics_.programChanged&&this.onGeneric("ProgramChange",this.analytics_.programChanged,function(){c.analytics_.programChanged(c.SessionId(),c.OffsetTime(),{programId:d.programId})},!0)},a.prototype.onEntitlementChange=function(a,b,c){var d=this;this.entitlementLoaded_=!0,this.player_.off(ma.ERROR,this.onErrorBeforeAssetBind);var e=this.entitlement(b&&b.entitlement);this.onGeneric("HandShake",this.analytics_.handshake,function(){var a={};e&&e.assetId&&(a.assetId=e.assetId),e&&e.programId&&(a.programId=e.programId);var b=e?e.playSessionId:c;d.analytics_.handshake(d.SessionId(b),a),d.onLoadStart(b)},!1)},a.prototype.onEntitlementLoadStart=function(){var a=this;this.entitlementLoaded_=!1,this.onGeneric("ExitOngoingSession",this.analytics_.exitOngoingSession,function(){return a.analytics_.exitOngoingSession(a.getCachedCurrentTime())}),this.player_.one(ma.ERROR,this.onErrorBeforeAssetBind),this.player_.one(ma.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind)},a.prototype.onLoadStart=function(a){var b=this,c=a?a:this.SessionId();return c?void(this.sessionCreated(c)||(this.createdSessions[c]=!0,this.onGeneric("Created",this.analytics_.created,function(){var a=b.player_.options(),d={version:b.playerVersion};a&&a.autoplay&&(d.autoplay=a.autoplay),b.analytics_.created(c,d)},!1),this.player_.off(ma.PLAYING,this.onResumedBind),this.player_.off(ma.PLAYING,this.onPlayingAfterStartBind),this.player_.one(ma.PLAYING,this.onPlayingAfterStartBind))):void sa("onLoadStart called but not session available.")},a.prototype.onPlayingAfterStart=function(){this.onPlayBind(),this.onPlayingBind(),this.player_.on(ma.PLAYING,this.onResumedBind)},a.prototype.onBitrateChange=function(){var a=this;this.onGeneric("BitrateChange",this.analytics_.bitrateChanged,function(){var b={bitrate:Math.max(0,Math.round(a.getBitrate()/1024))};a.analytics_.bitrateChanged(a.SessionId(),a.OffsetTime(),b)},!0)},a.prototype.onWaiting=function(){var a=this;this.onGeneric("StartWaiting",this.analytics_.waiting,function(){a.player_.hasStarted()&&a.analytics_.waiting(a.SessionId(),a.OffsetTime()),a.allEvents_.map(function(b){b!==ma.PLAY&&b!==ma.PLAYING&&b!==ma.ENDED&&b!==ma.ERROR&&b!==ma.DISPOSE&&b!==ma.SEEKED&&b!==ma.CHROMECAST_CASTING&&b!==ma.CHROMECAST_STOPPED||a.player_.one(b,a.onWaitingEndedBind)})},!0)},a.prototype.OffsetTime=function(){return this.entitlement()&&(this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive)?La.getPlayheadTime(this.player_)/1e3:La.baseCurrentTime(this.player_)},a.prototype.startTimeLive=function(){return La.startTimeLive(this.player_)},a.prototype.isLive=function(){return La.isLive(this.player_)},a.prototype.getBitrate=function(){return La.getBitrate(this.player_)},a.prototype.duration=function(){return this.entitlement()&&(this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive)&&this.player_.getProgramDetails&&this.player_.getProgramDetails()?this.player_.getProgramDetails().duration/1e3:La.duration(this.player_)},a.prototype.entitlement=function(a){return"undefined"==typeof a?La.getEntitlement(this.player_)||this.entitlement_:(this.entitlement_=a,a)},a.prototype.onWaitingEnded=function(){var a=this;this.allEvents_.map(function(b){a.player_.off(b,a.onWaitingEndedBind)}),this.onGeneric("WaitingEnded",this.analytics_.waitingEnded,function(){a.analytics_.waitingEnded(a.SessionId(),a.OffsetTime())},!0)},a.prototype.onDispose=function(){var a=this;this.onGeneric("Dispose",this.analytics_.dispose,function(){a.hasSessionId()!==!1&&a.analytics_.dispose(a.SessionId(),a.getCachedCurrentTime())},!0,!0)},a.prototype.getCachedCurrentTime=function(){if(this.player_){var a=this.player_.getCache().currentTime,b=this.OffsetTime();return b?b:a}},a.prototype.onEnded=function(){var a=this;this.onGeneric("End of Stream",this.analytics_.endOfStream,function(){a.analytics_.endOfStream(a.SessionId())},!0,!0)},a.prototype.onPlay=function(){var a=this;this.onGeneric("Play",this.analytics_.play,function(){var b=a.player_.techName_,c="Unknown";switch(b){case"EmpShaka":c="Shaka";break;case"EmpDash":c="DashJS";break;case"EmpFlash":c="Flash";break;case"EmpHLS":c="NativeHLS"}var d={techName:c,version:a.playerVersion,techVersion:a.techVersion};a.analytics_.play(a.SessionId(),a.OffsetTime(),d),a.registerCurrentTimeTimer()},!1)},a.prototype.onPlaying=function(){var a=this;this.onGeneric("Playing",this.analytics_.playing,function(){var b={};b.bitrate=Math.max(0,Math.round(a.getBitrate()/1024)),a.isLive()===!0?b.referenceTime=a.startTimeLive():b.duration=a.duration(),a.entitlement()&&a.entitlement().mediaLocator&&(b.mediaLocator=a.entitlement().mediaLocator),b.mediaLocator&&b.mediaLocator.indexOf(".isml")>=0&&(b.referenceTime=a.INITIAL_REFERENCE_TIME),a.analytics_.clearCustomAttributes(),(a.customAttributes||[]).map(function(b){a.analytics_.setCustomAttribute(b.key,b.value)}),a.analytics_.playing(a.SessionId(),a.OffsetTime(),b)},!1)},a.prototype.onSeeked=function(){var a=this;this.onGeneric("Seeked",this.analytics_.seek,function(){a.analytics_.seek(a.SessionId(),a.OffsetTime())},!0)},a.prototype.onPause=function(){var a=this;this.onGeneric("Pause",this.analytics_.paused,function(){if(a.player_.hasStarted()!==!1){var b=a.SessionId(),c=parseInt((new Date-0)/25);a.mem[b].pause[c]||(a.mem[b].pause[c]=!0,a.analytics_.paused(b,a.OffsetTime()))}},!0)},a.prototype.onResume=function(){var a=this;this.onGeneric("Resume",this.analytics_.resume,function(){var b=a.SessionId(),c=parseInt((new Date-0)/25);a.mem[b].resume[c]||(a.mem[b].resume[c]=!0,a.analytics_.resume(b,a.OffsetTime()))},!0)},a.prototype.onErrorBeforeAsset=function(){this.entitlementLoaded_=!1;var a="error-"+Math.random().toString().split(".")[1];this.onEntitlementChange(null,null,a),this.onError(null,a)},a.prototype.onError=function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(c||this.entitlementLoaded_)&&this.onGeneric("Error",this.analytics_.error,function(){var d=a.player_.error(),e={};d&&d.code&&(e.errorCode=d.code),d&&d.message&&(e.errorMessage=d.message),!d&&b&&(e.errorCode=b.code,e.errorMessage=b.message?b.message:"Unknown Error");var f=a.SessionId();(f||c)&&a.analytics_.error(f||c,a.OffsetTime(),e)},!1)},a.prototype.onGeneric=function(a,b,c,d){var e=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.disabled_&&!e?void sa(a+" not delivered: analytics disabled."):void(d&&!this.sessionCreated(this.SessionId())?sa(a+" was discarded."):b&&c&&c())},a.prototype.sessionCreated=function(a){return a&&this.createdSessions[a]},a.prototype.dispose=function(){this.clearTimers(),this.analytics_&&(this.analytics_.exitOngoingSession(this.getCachedCurrentTime()),this.analytics_.dispatchNow(!1)),ca.removeEventListener("beforeunload",this.onWindowUnloadBind),this.player_.off(ma.PLAY,this.onPlayBind),this.player_.off(ma.PLAYING,this.onPlayingBind),this.player_.off(ma.PLAYING,this.onResumedBind),this.player_.off(ma.PAUSE,this.onPauseBind),this.player_.off(ma.SEEKED,this.onSeekedBind),this.player_.off(ma.ENTITLEMENT_LOAD_START,this.onEntitlementLoadStartBind),this.player_.off(ma.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.player_.off(ma.BITRATE_CHANGED,this.onBitrateChangeBind),this.player_.off(ma.ENDED,this.onEndedBind),this.player_.off(ma.DISPOSE,this.onDisposeBind),this.player_.off(ma.STOPPED,this.onDisposeBind),this.player_.off(ma.ERROR,this.onErrorBind),this.player_.off(ma.ERROR,this.onErrorBeforeAssetBind),this.player_.off(ma.WAITING,this.onWaitingBind),this.player_.off(ma.CHROMECAST_CASTING,this.onChromeCastingStartBind),this.player_.off(ma.CHROMECAST_STOPPED,this.onChromeCastingStopBind),this.player_.off(ma.PROGRAM_CHANGED,this.onProgramChangeBind),this.player_.off(ma.PLAYING,this.onPlayingAfterStartBind)},ha(a,[{key:"techVersion",get:function(){return La.techVersion(this.player_)}},{key:"playerVersion",get:function(){return this.player_.version?this.player_.version:ca.videojs?ca.videojs.VERSION:"2.x.x"}}]),a}(),Ic=g(function(a,b){!function(b){a.exports=b()}(function(){var a;return function b(a,c,d){function f(h,i){if(!c[h]){if(!a[h]){var j="function"==typeof e&&e;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=c[h]={exports:{}};a[h][0].call(l.exports,function(b){var c=a[h][1][b];return f(c?c:b)},l,l.exports,b,a,c,d)}return c[h].exports}for(var g="function"==typeof e&&e,h=0;h<d.length;h++)f(d[h]);return f}({1:[function(a,b,c){(function(a){"undefined"!=typeof window?b.exports=window:"undefined"!=typeof a?b.exports=a:"undefined"!=typeof self?b.exports=self:b.exports={}}).call(this,"undefined"!=typeof ba?ba:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.workerTimersBroker=b.workerTimersBroker||{})}(this,function(a){"use strict";var b=function(a){return void 0!==a.method&&"call"===a.method},c=function(a){return null===a.error&&"number"==typeof a.id},d=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,e=function(a){for(var b=Math.round(Math.random()*d);a.has(b);)b=Math.round(Math.random()*d);return b},f=function(a){var d=new Map,f=new Map,g=new Map,h=new Worker(a);h.addEventListener("message",function(a){var e=a.data;if(b(e)){var h=e.params,i=h.timerId,j=h.timerType;if("interval"===j){var k=d.get(i);if("number"==typeof k){var l=g.get(k);if(void 0===l||l.timerId!==i||l.timerType!==j)throw new Error("The timer is in an undefined state.")}else{if("undefined"==typeof k)throw new Error("The timer is in an undefined state.");k()}}else if("timeout"===j){var m=f.get(i);if("number"==typeof m){var n=g.get(m);if(void 0===n||n.timerId!==i||n.timerType!==j)throw new Error("The timer is in an undefined state.")}else{if("undefined"==typeof m)throw new Error("The timer is in an undefined state.");m(),f["delete"](i)}}}else{if(!c(e)){var o=e.error.message;throw new Error(o)}var p=e.id,q=g.get(p);if(void 0===q)throw new Error("The timer is in an undefined state.");var r=q.timerId,s=q.timerType;g["delete"](p),"interval"===s?d["delete"](r):f["delete"](r)}});var i=function(a){var b=e(g);g.set(b,{timerId:a,timerType:"interval"}),d.set(a,b),h.postMessage({id:b,method:"clear",params:{timerId:a,timerType:"interval"}})},j=function(a){var b=e(g);g.set(b,{timerId:a,
timerType:"timeout"}),f.set(a,b),h.postMessage({id:b,method:"clear",params:{timerId:a,timerType:"timeout"}})},k=function(a,b){var c=e(d);return d.set(c,function(){a(),"function"==typeof d.get(c)&&h.postMessage({id:null,method:"set",params:{delay:b,now:performance.now(),timerId:c,timerType:"interval"}})}),h.postMessage({id:null,method:"set",params:{delay:b,now:performance.now(),timerId:c,timerType:"interval"}}),c},l=function(a,b){var c=e(f);return f.set(c,a),h.postMessage({id:null,method:"set",params:{delay:b,now:performance.now(),timerId:c,timerType:"timeout"}}),c};return{clearInterval:i,clearTimeout:j,setInterval:k,setTimeout:l}};a.load=f,Object.defineProperty(a,"__esModule",{value:!0})})},{}],3:[function(b,c,d){!function(e,f){"object"==typeof d&&"undefined"!=typeof c?f(d,b("worker-timers-broker")):"function"==typeof a&&a.amd?a(["exports","worker-timers-broker"],f):f(e.workerTimers=e.workerTimers||{},e.workerTimersBroker)}(this,function(a,b){"use strict";var c='!function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'+t+\'".\');clearTimeout(r),e.delete(t)},i=function(e){var r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'+e+\'".\');clearTimeout(r),t.delete(e)},o=function(e,t){var r=void 0;if("performance"in self){var i=performance.now();e-=Math.max(0,i-t),r=i}else r=Date.now();return{delay:e,expected:r+e}},n=function e(t,r,i,o){var n="performance"in self?performance.now():Date.now();n>i?postMessage({id:null,method:"call",params:{timerId:r,timerType:o}}):t.set(r,setTimeout(e,i-n,t,r,i,o))},a=function(t,r,i){var a=void 0,s=o(t,i);t=s.delay,a=s.expected,e.set(r,setTimeout(n,t,e,r,a,"interval"))},s=function(e,r,i){var a=void 0,s=o(e,i);e=s.delay,a=s.expected,t.set(r,setTimeout(n,e,t,r,a,"timeout"))};addEventListener("message",function(e){var t=e.data;try{if("clear"===t.method){var o=t.id,n=t.params,d=n.timerId,l=n.timerType;if("interval"===l)r(d),postMessage({error:null,id:o});else{if("timeout"!==l)throw new Error(\'The given type "\'+l+\'" is not supported\');i(d),postMessage({error:null,id:o})}}else{if("set"!==t.method)throw new Error(\'The given method "\'+t.method+\'" is not supported\');var m=t.params,u=m.delay,p=m.now,v=m.timerId,c=m.timerType;if("interval"===c)a(u,v,p);else{if("timeout"!==c)throw new Error(\'The given type "\'+c+\'" is not supported\');s(u,v,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}})}();',d=new Blob([c],{type:"application/javascript"}),e=URL.createObjectURL(d),f=b.load(e),g=f.clearInterval,h=f.clearTimeout,i=f.setInterval,j=f.setTimeout;a.clearInterval=g,a.clearTimeout=h,a.setInterval=i,a.setTimeout=j,Object.defineProperty(a,"__esModule",{value:!0})})},{"worker-timers-broker":2}],4:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("global/window"),i=e(h),j=a("./platform"),k=e(j),l=a("worker-timers"),m=d(l),n=function(){function a(b,c,d,e,g){var h=arguments.length<=5||void 0===arguments[5]?{}:arguments[5],i=arguments.length<=6||void 0===arguments[6]?{}:arguments[6];f(this,a),this.CYCLE_TIME=1e3,this.EVENT_PURGE_TIME_DEFAULT=3*this.CYCLE_TIME,this.TIME_WITHOUT_BEAT_DEFAULT=60*this.CYCLE_TIME,this.SERVER_URL_DEFAULT="",this.CUSTOMER_DEFAULT="",this.BUSINESS_UNIT_DEFAULT="",this.INCLUDE_DEVICE_METRICS_DEFAULT=!0,this.SESSION_TOKEN_DEFAULT="",this.SESSION_ID_DEFAULT="",this.DEBUG_DEFAULT=!1,this.MAX_RETRIES=20,this.DEVICE_CLOCK_CHECK_THRESHOLD=3e5,this.eventsSkeleton=this.initEventSkeleton(),this.customer_=c,this.businessUnit_=d,this.sessionToken_=e,this.serverURL_=b,this.includeDeviceMetrics_=!1,this.userId_=g,this.deviceInfoData_=h,this.props_=i||{},this.pendingRequest_=!1}return a.prototype.init=function(){var a=this;this.cycleTimer&&("undefined"!=typeof Worker&&this.props_.disableWebWorkers!==!0?m.clearInterval(this.cycle):clearInterval(this.cycle)),"undefined"!=typeof Worker&&this.props_.disableWebWorkers!==!0?this.cycleTimer=m.setInterval(function(){return a.cycle()},this.CYCLE_TIME):this.cycleTimer=setInterval(function(){return a.cycle()},this.CYCLE_TIME),this.communicationCurrentTime=0,this.lastCommunicationTime=0,this.eventPool={}},a.prototype.clear=function(){this.eventPool={}},a.prototype.ok=function(a){var b=this.eventPool[a];return!!b&&b.forbidden===!1&&b.retries<this.MAX_RETRIES},a.prototype.created=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c={type:"Created"};this.addEventToPool(a,c,b)},a.prototype.play=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"PlayerReady",currentTime:b};this.deviceAppInfo&&(c.deviceAppInfo=this.deviceAppInfo),this.addEventToPool(a,d,c)},a.prototype.playing=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"Started",currentTime:b};if(this.customAttributes){var e=Object.keys(this.customAttributes);e.length&&e.length>0&&(c.attributes=this.customAttributes)}this.addEventToPool(a,d,c),this.changeSessionState(a,"PLAYING")},a.prototype.paused=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"Paused",currentTime:b};this.addEventToPool(a,d,c,!0)},a.prototype.seek=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"ScrubbedTo",currentTime:b};this.addEventToPool(a,d,c,!0)},a.prototype.startCasting=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"StartCasting",currentTime:b};this.addEventToPool(a,d,c,!0),this.changeSessionState(a,"DIRTY")},a.prototype.stopCasting=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"StopCasting",currentTime:b};this.addEventToPool(a,d,c,!0)},a.prototype.setCurrentTime=function(a,b){this.eventPool[a]&&(this.eventPool[a].currentTime=b)},a.prototype.handshake=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c={type:"HandshakeStarted"};this.addEventToPool(a,c,b)},a.prototype.resume=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"Resumed",currentTime:b};this.addEventToPool(a,d,c,!0)},a.prototype.bitrateChanged=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"BitrateChanged",currentTime:b};this.addEventToPool(a,d,c,!0)},a.prototype.endOfStream=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c={type:"Completed"};this.addEventToPool(a,c,b,!0),this.changeSessionState(a,"FINISHED")},a.prototype.error=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"Error",currentTime:b};this.changeSessionState(a,"DIRTY"),this.addEventToPool(a,d,c)},a.prototype.dispose=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"Aborted"};b&&(d.currentTime=b),this.addEventToPool(a,d,c,!0),this.changeSessionState(a,"FINISHED")},a.prototype.waiting=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"BufferingStarted",currentTime:b};this.addEventToPool(a,d,c)},a.prototype.waitingEnded=function(a,b){var c=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d={type:"BufferingEnded",currentTime:b};this.addEventToPool(a,d,c)},a.prototype.getSessionState=function(a){return this.eventPool[a]?this.eventPool[a].currentState||"IDLE":"IDLE"},a.prototype.dispatchNow=function(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0];this.cycle(a,!0)},a.prototype.exitOngoingSession=function(a){var b=this,c=Object.keys(this.eventPool);c.map(function(c){b.eventPool[c]&&b.dispose(c,a)})},a.prototype.setCustomAttribute=function(a,b){this.customAttributes||this.resetAnalyticsCustomAttributes(),this.customAttributes[a]=b},a.prototype.clearCustomAttributes=function(){this.customAttributes={}},a.prototype.removeSession=function(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(b===!0)delete this.eventPool[a];else{var c=this.eventPool[a];c&&(c.currentState="REMOVED")}},a.prototype.hasDataToSend=function(){for(var a=Object.keys(this.eventPool),b=0;b<a.length;++b)if(this.eventPool[a[b]].events.length>0)return!0;return!1},a.prototype.sendData=function(){var a=this,b=arguments.length<=0||void 0===arguments[0]||arguments[0],c=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!this.pendingRequest_){var d=!1;this.pendingRequest_=!0;var e=void 0;e="undefined"!=typeof Worker&&this.props_.disableWebWorkers!==!0?m.setTimeout(function(){return a.pendingRequest_=!1},2*this.EVENT_PURGE_TIME_DEFAULT):setTimeout(function(){return a.pendingRequest_=!1},2*this.EVENT_PURGE_TIME_DEFAULT);var f=Object.keys(this.eventPool);f.map(function(f){var g=a.eventPool[f];if(g){if(!f)return g.events=[],void a.removeSession(f,!0);if("PLAYING"===g.currentState&&0===g.events.length&&c&&g.events.push({EventType:"Playback.Heartbeat",Timestamp:(new Date).getTime(),OffsetTime:Math.floor(1e3*g.currentTime)}),"IDLE"!==g.currentState&&"REMOVED"!==g.currentState){if(0===g.events.length)return void("FINISHED"===g.currentState&&a.removeSession(f));var h={DispatchTime:(new Date).getTime(),Customer:a.customer_,BusinessUnit:a.businessUnit_,Payload:g.events,SessionId:f,ClockOffset:g.clockOffset};if(a.debugLog("Sending analytics - sessionId: "+f+" and params: ",h),g.retries>a.MAX_RETRIES||g.forbidden===!0)return void(g.events=[]);Math.abs(a.communicationCurrentDate-a.lastCommunicationDate)>a.DEVICE_CLOCK_CHECK_THRESHOLD&&a.initRequest(f),d=!0,a.sendRequest(b,h,function(b,c){"undefined"!=typeof Worker&&a.props_.disableWebWorkers!==!0?m.clearTimeout(e):clearTimeout(e),a.pendingRequest_=!1;var d=b&&b.httpCode?b.httpCode:200;"undefined"!=typeof c||200!==d?(401===d&&(g.forbidden=!0),a.debugLog("Error sending request to backend",c),g.retries++):(g.events=[],g.retries=0,"FINISHED"===g.currentState&&a.removeSession(f))})}}}),d||(this.pendingRequest_=!1)}},a.prototype.cycle=function(){var a=arguments.length<=0||void 0===arguments[0]||arguments[0],b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];this.communicationCurrentDate=new Date,this.communicationCurrentTime+=this.CYCLE_TIME,this.hasDataToSend()?(b||this.lastCommunicationTime+this.EVENT_PURGE_TIME_DEFAULT<this.communicationCurrentTime)&&(this.sendData(a),this.lastCommunicationTime=this.communicationCurrentTime,this.lastCommunicationDate=this.communicationCurrentDate):(b||this.lastCommunicationTime+this.TIME_WITHOUT_BEAT_DEFAULT<this.communicationCurrentTime)&&(this.sendData(a,!0),this.lastCommunicationTime=this.communicationCurrentTime,this.lastCommunicationDate=this.communicationCurrentDate)},a.prototype.sendRequest=function(a,b,c){var d=new XMLHttpRequest;d.open("POST",this.serverURL_+"/eventsink/send",a),d.setRequestHeader("Content-type","application/json"),d.setRequestHeader("Authorization","Bearer "+this.sessionToken_),d.onload=function(){var a=JSON.parse(this.responseText);c(a)},d.onerror=function(a){c(null,a)},d.send(JSON.stringify(b))},a.prototype.initRequest=function(a,b,c){var d=this,e=(new Date).getTime(),f=new XMLHttpRequest;f.open("POST",this.serverURL_+"/eventsink/init",!0),f.setRequestHeader("Content-type","application/json"),f.setRequestHeader("Authorization","Bearer "+this.sessionToken_),f.onload=function(){var c=(new Date).getTime(),g=JSON.parse(f.responseText);d.determineClockOffset(a,g,e,c),g&&g.settings&&(g.settings,g.settings.includeDeviceMetrics&&(d.includeDeviceMetrics_=!!g.settings.includeDeviceMetrics)),b&&b()},f.onerror=function(a){d.debugLog("Unable to init. Aborting."),c&&c()};var g={Customer:this.customer_,BusinessUnit:this.businessUnit_,SessionId:a};f.send(JSON.stringify(g))},a.prototype.debugLog=function(a,b){b=b||"",this.debug_},a.prototype.addDeviceInfoEvent=function(a){var b=this.eventPool[a];if(this.includeDeviceMetrics_&&b&&b.events&&b.events.length){var c={Timestamp:(new Date).getTime(),EventType:"Device.Info",DeviceModel:this.deviceInfoData_.deviceModel||"Desktop",UserAgent:this.deviceInfoData_.userAgent||i["default"].navigator.userAgent,Height:this.deviceInfoData_.screenHeight||i["default"].screen.height,Width:this.deviceInfoData_.screenWidth||i["default"].screen.width,Model:this.deviceInfoData_.model||i["default"].navigator.appName,Name:this.deviceInfoData_.deviceName||i["default"].navigator.product,OS:this.deviceInfoData_.deviceOS||k["default"].os.family,OSVersion:this.deviceInfoData_.deviceOSVersion||k["default"].os.version,Type:this.deviceInfoData_.type||"WEB"};(this.deviceInfoData_.deviceManufacturer||k["default"].manufacturer)&&(c.Manufacturer=this.deviceInfoData_.deviceManufacturer||k["default"].manufacturer),this.deviceInfoData_.deviceId&&(c.DeviceId=this.deviceInfoData_.deviceId),b.events.push(c)}},a.prototype.determineClockOffset=function(a,b,c,d){var e=this.eventPool[a];e&&(e.clockOffset=Math.floor((d-b.repliedTime+c-b.receivedTime)/2))},a.prototype.createPool=function(a){var b=this;this.eventPool[a]={currentState:"IDLE",currentTime:0,clockOffset:0,events:[],retries:0,forbidden:!1},this.initRequest(a,function(){return b.addDeviceInfoEvent(a)})},a.prototype.addEventToPool=function(a,b,c){var d=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];if(!d||!this.eventPool[a]||"FINISHED"!==this.eventPool[a].currentState&&"REMOVED"!==this.eventPool[a].currentState){this.eventPool[a]||this.createPool(a);var e=this.eventsSkeleton[b.type];if(!e)return void this.debugLog("Unknown playback event: ",b);var f={Timestamp:(new Date).getTime(),EventType:"Playback."+e.event};e.includeOffset&&(f.OffsetTime=Math.floor(1e3*b.currentTime)),e.attributes&&"function"==typeof e.attributes&&(f=this.objectAssign(f,e.attributes(c))),this.eventPool[a].events.push(f),this.debugLog("added "+e.event+" to queue")}},a.prototype.changeSessionState=function(a,b){this.eventPool[a]||this.createPool(a),this.eventPool[a].currentState=b},a.prototype.initEventSkeleton=function(){var a={};return a.Completed={event:"Completed",autoListener:!1},a.PlayerReady={event:"PlayerReady",autoListener:!1,attributes:function(a){var b={Technology:a.techName,PlayerVersion:a.version};return a.techVersion&&(b.TechVersion=a.techVersion),a.deviceAppInfo&&(b.DeviceAppInfo=a.deviceAppInfo),a.playMode&&(b.PlayMode=a.playMode),b}},a.Resumed={event:"Resumed",autoListener:!1,includeOffset:!0},a.BufferingStarted={event:"BufferingStarted",includeOffset:!0},a.BufferingEnded={event:"BufferingEnded",includeOffset:!0},a.ScrubbedTo={event:"ScrubbedTo",includeOffset:!0},a.Created={event:"Created",attributes:function(a){var b={};return"undefined"!=typeof a.autoplay&&(b.AutoPlay=a.autoplay),a.techName&&(b.Technology=a.techName),a.player&&(b.Player=a.player),a.version&&(b.Version=a.version),a.techVersion&&(b.TechVersion=a.techVersion),a.deviceAppInfo&&(b.DeviceAppInfo=a.deviceAppInfo),a.playMode&&(b.PlayMode=a.playMode),b}},a.StartCasting={event:"StartCasting",includeOffset:!0},a.StopCasting={event:"StopCasting",includeOffset:!0},a.Paused={event:"Paused",includeOffset:!0},a.BitrateChanged={event:"BitrateChanged",includeOffset:!0,attributes:function(a){return{Bitrate:a.bitrate}}},a.Error={event:"Error",includeOffset:!0,attributes:function b(a){var b={};return a.errorCode&&(b.Code=a.errorCode),a.errorMessage?b.Message=a.errorMessage:b.Message="Unknown Error",b}},a.HandshakeStarted={event:"HandshakeStarted",autoListener:!1,attributes:function c(a){if(!a.assetId)return{};var c={AssetId:a.assetId};return a.programId&&(c.ProgramId=a.programId),c}},a.Aborted={event:"Aborted",autoListener:!1,includeOffset:!0},a.Started={event:"Started",autoListener:!1,includeOffset:!0,attributes:function d(a){var d={};if(a.bitrate&&(d.Bitrate=a.bitrate),a.duration&&(d.VideoLength=1e3*a.duration),a.mediaLocator){var b=a.mediaLocator.split("?");d.MediaLocator=b[0]}return a.attributes&&(d.Attributes=a.attributes),a.referenceTime&&(d.ReferenceTime=a.referenceTime),a.playMode&&(d.PlayMode=a.playMode),d}},a},a.prototype.objectAssign=function(a,b){for(var c,d,e=1;e<arguments.length;++e){d=arguments[e];for(c in d)Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}return a},g(a,[{key:"debug",get:function(){return this.debug_},set:function(a){this.debug_=a}},{key:"deviceAppInfo",get:function(){return this.deviceInfoData_?this.deviceInfoData_.deviceAppInfo:null}}]),a}();c["default"]=n,b.exports=c["default"]},{"./platform":5,"global/window":1,"worker-timers":3}],5:[function(b,c,d){(function(b){"use strict";(function(){function e(a){return a=String(a),a.charAt(0).toUpperCase()+a.slice(1)}function f(a,b,c){var d={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"7 / Server 2008 R2","6.0":"Vista / Server 2008",5.2:"XP 64-bit / Server 2003",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return b&&c&&/^Win/i.test(a)&&!/^Windows Phone /i.test(a)&&(d=d[/[\d.]+$/.exec(a)])&&(a="Windows "+d),a=String(a),b&&c&&(a=a.replace(RegExp(b,"i"),c)),a=h(a.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function g(a,b){var c=-1,d=a?a.length:0;if("number"==typeof d&&d>-1&&d<=v)for(;++c<d;)b(a[c],c,a);else i(a,b)}function h(a){return a=n(a),/^(?:webOS|i(?:OS|P))/.test(a)?a:e(a)}function i(a,b){for(var c in a)z.call(a,c)&&b(a[c],c,a)}function j(a){return null==a?e(a):A.call(a).slice(8,-1)}function k(a,b){var c=null!=a?typeof a[b]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(c)||"object"==c&&!a[b])}function l(a){return String(a).replace(/([ -])(?!$)/g,"$1?")}function m(a,b){var c=null;return g(a,function(d,e){c=b(c,d,e,a)}),c}function n(a){return String(a).replace(/^ +| +$/g,"")}function o(a){function b(b){return m(b,function(b,c){return b||RegExp("\\b"+(c.pattern||l(c))+"\\b","i").exec(a)&&(c.label||c)})}function c(b){return m(b,function(b,c,d){return b||(c[X]||c[/^[a-z]+(?: +[a-z]+\b)*/i.exec(X)]||RegExp("\\b"+l(d)+"(?:\\b|\\w*\\d)","i").exec(a))&&d})}function d(b){return m(b,function(b,c){return b||RegExp("\\b"+(c.pattern||l(c))+"\\b","i").exec(a)&&(c.label||c)})}function e(b){return m(b,function(b,c){var d=c.pattern||l(c);return!b&&(b=RegExp("\\b"+d+"(?:/[\\d.]+|[ \\w.]*)","i").exec(a))&&(b=f(b,d,c.label||c)),b})}function g(b){return m(b,function(b,c){var d=c.pattern||l(c);return!b&&(b=RegExp("\\b"+d+" *\\d+[.\\w_]*","i").exec(a)||RegExp("\\b"+d+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(a))&&((b=String(c.label&&!RegExp(d,"i").test(c.label)?c.label:b).split("/"))[1]&&!/[\d.]+/.test(b[0])&&(b[0]+=" "+b[1]),c=c.label||c,b=h(b[0].replace(RegExp(d,"i"),c).replace(RegExp("; *(?:"+c+"[_-])?","i")," ").replace(RegExp("("+c+")[-_.]?(\\w)","i"),"$1 $2"))),b})}function p(b){return m(b,function(b,c){return b||(RegExp(c+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(a)||0)[1]||null})}function s(){return this.description||""}var t=q,u=a&&"object"==typeof a&&"String"!=j(a);u&&(t=a,a=null);var v=t.navigator||{},y=v.userAgent||"";a||(a=y);var z,B,C=u||x==r,D=u?!!v.likeChrome:/\bChrome\b/.test(a)&&!/internal|\n/i.test(A.toString()),E="Object",F=u?E:"ScriptBridgingProxyObject",G=u?E:"Environment",H=u&&t.java?"JavaPackage":j(t.java),I=u?E:"RuntimeObject",J=/\bJava/.test(H)&&t.java,K=J&&j(t.environment)==G,L=J?"a":"",M=J?"b":"",N=t.document||{},O=t.operamini||t.opera,P=w.test(P=u&&O?O["[[Class]]"]:j(O))?P:O=null,Q=a,R=[],S=null,T=a==y,U=T&&O&&"function"==typeof O.version&&O.version(),V=b([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),W=d(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox Mobile",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),X=g([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation 3","PlayStation 4","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Y=c({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),Z=e(["Windows Phone ","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(V&&(V=[V]),Y&&!X&&(X=g([Y])),(z=/\bGoogle TV\b/.exec(X))&&(X=z[0]),/\bSimulator\b/i.test(a)&&(X=(X?X+" ":"")+"Simulator"),"Opera Mini"==W&&/\bOPiOS\b/.test(a)&&R.push("running in Turbo/Uncompressed mode"),/^iP/.test(X)?(W||(W="Safari"),Z="iOS"+((z=/ OS ([\d_]+)/i.exec(a))?" "+z[1].replace(/_/g,"."):"")):"Konqueror"!=W||/buntu/i.test(Z)?Y&&"Google"!=Y&&(/Chrome/.test(W)&&!/\bMobile Safari\b/i.test(a)||/\bVita\b/.test(X))?(W="Android Browser",Z=/\bAndroid\b/.test(Z)?Z:"Android"):"Silk"==W?(/\bMobi/i.test(a)||(Z="Android",R.unshift("desktop mode")),/Accelerated *= *true/i.test(a)&&R.unshift("accelerated")):"PaleMoon"==W&&(z=/\bFirefox\/([\d.]+)\b/.exec(a))?R.push("identifying as Firefox "+z[1]):"Firefox"==W&&(z=/\b(Mobile|Tablet|TV)\b/i.exec(a))?(Z||(Z="Firefox OS"),X||(X=z[1])):W&&!(z=!/\bMinefield\b/i.test(a)&&/\b(?:Firefox|Safari)\b/.exec(W))||(W&&!X&&/[\/,]|^[^(]+?\)/.test(a.slice(a.indexOf(z+"/")+8))&&(W=null),(z=X||Y||Z)&&(X||Y||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Z))&&(W=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Z)?Z:z)+" Browser")):Z="Kubuntu",U||(U=p(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",l(W),"(?:Firefox|Minefield|NetFront)"])),(z="iCab"==V&&parseFloat(U)>3&&"WebKit"||/\bOpera\b/.test(W)&&(/\bOPR\b/.test(a)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(a)&&!/^(?:Trident|EdgeHTML)$/.test(V)&&"WebKit"||!V&&/\bMSIE\b/i.test(a)&&("Mac OS"==Z?"Tasman":"Trident")||"WebKit"==V&&/\bPlayStation\b(?! Vita\b)/i.test(W)&&"NetFront")&&(V=[z]),"IE"==W&&(z=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(a)||0)[1])?(W+=" Mobile",Z="Windows Phone "+(/\+$/.test(z)?z:z+".x"),R.unshift("desktop mode")):/\bWPDesktop\b/i.test(a)?(W="IE Mobile",Z="Windows Phone 8.x",R.unshift("desktop mode"),U||(U=(/\brv:([\d.]+)/.exec(a)||0)[1])):"IE"!=W&&"Trident"==V&&(z=/\brv:([\d.]+)/.exec(a))&&(W&&R.push("identifying as "+W+(U?" "+U:"")),W="IE",U=z[1]),T){if(k(t,"global"))if(J&&(z=J.lang.System,Q=z.getProperty("os.arch"),Z=Z||z.getProperty("os.name")+" "+z.getProperty("os.version")),C&&k(t,"system")&&(z=[t.system])[0]){Z||(Z=z[0].os||null);try{z[1]=t.require("ringo/engine").version,U=z[1].join("."),W="RingoJS"}catch($){z[0].global.system==t.system&&(W="Narwhal")}}else"object"==typeof t.process&&(z=t.process)?(W="Node.js",Q=z.arch,Z=z.platform,U=/[\d.]+/.exec(z.version)[0]):K&&(W="Rhino");else j(z=t.runtime)==F?(W="Adobe AIR",Z=z.flash.system.Capabilities.os):j(z=t.phantom)==I?(W="PhantomJS",U=(z=z.version||null)&&z.major+"."+z.minor+"."+z.patch):"number"==typeof N.documentMode&&(z=/\bTrident\/(\d+)/i.exec(a))&&(U=[U,N.documentMode],(z=+z[1]+4)!=U[1]&&(R.push("IE "+U[1]+" mode"),V&&(V[1]=""),U[1]=z),U="IE"==W?String(U[1].toFixed(1)):U[0]);Z=Z&&h(Z)}U&&(z=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(U)||/(?:alpha|beta)(?: ?\d)?/i.exec(a+";"+(T&&v.appMinorVersion))||/\bMinefield\b/i.test(a)&&"a")&&(S=/b/i.test(z)?"beta":"alpha",U=U.replace(RegExp(z+"\\+?$"),"")+("beta"==S?M:L)+(/\d+\+?/.exec(z)||"")),"Fennec"==W||"Firefox"==W&&/\b(?:Android|Firefox OS)\b/.test(Z)?W="Firefox Mobile":"Maxthon"==W&&U?U=U.replace(/\.[\d.]+/,".x"):/\bXbox\b/i.test(X)?(Z=null,"Xbox 360"==X&&/\bIEMobile\b/.test(a)&&R.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(W)&&(!W||X||/Browser|Mobi/.test(W))||"Windows CE"!=Z&&!/Mobi/i.test(a)?"IE"==W&&T&&null===t.external?R.unshift("platform preview"):(/\bBlackBerry\b/.test(X)||/\bBB10\b/.test(a))&&(z=(RegExp(X.replace(/ +/g," *")+"/([.\\d]+)","i").exec(a)||0)[1]||U)?(z=[z,/BB10/.test(a)],Z=(z[1]?(X=null,Y="BlackBerry"):"Device Software")+" "+z[0],U=null):this!=i&&"Wii"!=X&&(T&&O||/Opera/.test(W)&&/\b(?:MSIE|Firefox)\b/i.test(a)||"Firefox"==W&&/\bOS X (?:\d+\.){2,}/.test(Z)||"IE"==W&&(Z&&!/^Win/.test(Z)&&U>5.5||/\bWindows XP\b/.test(Z)&&U>8||8==U&&!/\bTrident\b/.test(a)))&&!w.test(z=o.call(i,a.replace(w,"")+";"))&&z.name&&(z="ing as "+z.name+((z=z.version)?" "+z:""),w.test(W)?(/\bIE\b/.test(z)&&"Mac OS"==Z&&(Z=null),z="identify"+z):(z="mask"+z,W=P?h(P.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(z)&&(Z=null),T||(U=null)),V=["Presto"],R.push(z)):W+=" Mobile",(z=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(a)||0)[1])&&(z=[parseFloat(z.replace(/\.(\d)$/,".0$1")),z],"Safari"==W&&"+"==z[1].slice(-1)?(W="WebKit Nightly",S="alpha",U=z[1].slice(0,-1)):U!=z[1]&&U!=(z[2]=(/\bSafari\/([\d.]+\+?)/i.exec(a)||0)[1])||(U=null),z[1]=(/\bChrome\/([\d.]+)/i.exec(a)||0)[1],537.36==z[0]&&537.36==z[2]&&parseFloat(z[1])>=28&&"WebKit"==V&&(V=["Blink"]),T&&(D||z[1])?(V&&(V[1]="like Chrome"),z=z[1]||(z=z[0],z<530?1:z<532?2:z<532.05?3:z<533?4:z<534.03?5:z<534.07?6:z<534.1?7:z<534.13?8:z<534.16?9:z<534.24?10:z<534.3?11:z<535.01?12:z<535.02?"13+":z<535.07?15:z<535.11?16:z<535.19?17:z<536.05?18:z<536.1?19:z<537.01?20:z<537.11?"21+":z<537.13?23:z<537.18?24:z<537.24?25:z<537.36?26:"Blink"!=V?"27":"28")):(V&&(V[1]="like Safari"),z=z[0],z=z<400?1:z<500?2:z<526?3:z<533?4:z<534?"4+":z<535?5:z<537?6:z<538?7:z<601?8:"8"),V&&(V[1]+=" "+(z+="number"==typeof z?".x":/[.+]/.test(z)?"":"+")),"Safari"==W&&(!U||parseInt(U)>45)&&(U=z)),"Opera"==W&&(z=/\bzbov|zvav$/.exec(Z))?(W+=" ",R.unshift("desktop mode"),"zvav"==z?(W+="Mini",U=null):W+="Mobile",Z=Z.replace(RegExp(" *"+z+"$"),"")):"Safari"==W&&/\bChrome\b/.exec(V&&V[1])&&(R.unshift("desktop mode"),W="Chrome Mobile",U=null,/\bOS X\b/.test(Z)?(Y="Apple",Z="iOS 4.3+"):Z=null),U&&0==U.indexOf(z=/[\d.]+$/.exec(Z))&&a.indexOf("/"+z+"-")>-1&&(Z=n(Z.replace(z,""))),V&&!/\b(?:Avant|Nook)\b/.test(W)&&(/Browser|Lunascape|Maxthon/.test(W)||"Safari"!=W&&/^iOS/.test(Z)&&/\bSafari\b/.test(V[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(W)&&V[1])&&(z=V[V.length-1])&&R.push(z),R.length&&(R=["("+R.join("; ")+")"]),Y&&X&&X.indexOf(Y)<0&&R.push("on "+Y),X&&R.push((/^on /.test(R[R.length-1])?"":"on ")+X),Z&&(z=/ ([\d.+]+)$/.exec(Z)||(B=/^[a-z]+ ([\d.+]+) \//i.exec(Z)),Z={architecture:32,family:z&&!B?Z.replace(z[0],""):Z,version:z?z[1]:null,toString:function(){var a=this.version;return this.family+(a&&!B?" "+a:"")+(64==this.architecture?" 64-bit":"")}}),(z=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Q))&&!/\bi686\b/i.test(Q)&&(Z&&(Z.architecture=64,Z.family=Z.family.replace(RegExp(" *"+z),"")),W&&(/\bWOW64\b/i.test(a)||T&&/\w(?:86|32)$/.test(v.cpuClass||v.platform)&&!/\bWin64; x64\b/i.test(a))&&R.unshift("32-bit")),a||(a=null);var _={};return _.description=a,_.layout=V&&V[0],_.manufacturer=Y,_.name=W,_.prerelease=S,_.product=X,_.ua=a,_.version=W&&U,_.os=Z||{architecture:null,family:null,version:null,toString:function(){return"null"}},_.parse=o,_.toString=s,_.version&&R.unshift(U),_.name&&R.unshift(W),Z&&W&&(Z!=String(Z).split(" ")[0]||Z!=W.split(" ")[0]&&!X)&&R.push(X?"("+Z+")":"on "+Z),R.length&&(_.description=R.join(" ")),_}var p={"function":!0,object:!0},q=p[typeof window]&&window||this,r=q,s=p[typeof d]&&d,t=p[typeof c]&&c&&!c.nodeType&&c,u=s&&t&&"object"==typeof b&&b;!u||u.global!==u&&u.window!==u&&u.self!==u||(q=u);var v=Math.pow(2,53)-1,w=/\bOpera/,x=this,y=Object.prototype,z=y.hasOwnProperty,A=y.toString;"function"==typeof a&&"object"==typeof a.amd&&a.amd?a(function(){return o()}):s&&t?i(o(),function(a,b){s[b]=a}):q.platform=o()}).call(void 0)}).call(this,"undefined"!=typeof ba?ba:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[4])(4)})}),Jc=f(Ic),Kc=ca.empAnalytics?ca.empAnalytics:Jc,Lc=ea.getPlugin("plugin"),Mc=function(a){function b(c,d){ga(this,b);var e=ja(this,a.call(this,c,d));return sa("AnalyticsPlugin","create"),e.analyticsConnector_=null,e.options_=d,e.onLoadStartBind=e.onLoadStart_.bind(e),e.player.on(ma.LOAD_START,e.onLoadStartBind),e}return ia(b,a),b.prototype.stop=function(){this.analyticsConnector_&&this.analyticsConnector_.dispose&&(this.analyticsConnector_.dispose(),this.analyticsConnector_=null)},b.prototype.dispose=function(){sa("AnalyticsPlugin","dispose"),this.player.off(ma.LOAD_START,this.onLoadStartBind),this.stop(),a.prototype.dispose.call(this)},b.prototype.options=function(a){return a?void(this.options_=a):this.options_},b.prototype.newAnalytics=function(a){sa("new EMPAnalytics");var b=new Kc(a.exposureApiURL,a.customer,a.businessUnit,a.sessionToken,a.userId,this.options_.analytics&&this.options_.analytics.deviceInfo);this.stop(),sa("new EMPAnalyticsConnector"),this.analyticsConnector_=new Hc(this.player,b,this.options_)},b.prototype.onEntitlementLoadStart=function(){this.analyticsConnector_&&this.analyticsConnector_.onEntitlementLoadStart()},b.prototype.onError=function(a){this.analyticsConnector_&&this.analyticsConnector_.onError(a)},b.prototype.onLoadStart_=function(a){La.getEntitlement(this.player)||this.stop()},ha(b,[{key:"connector",get:function(){return this.analyticsConnector_}}]),b}(Lc);Mc.VERSION="2.79.2",ea.getPlugin("analytics")?ea.log.warn('A plugin named "analytics" already exists.'):ea.registerPlugin("analytics",Mc);var Nc=ea;return Nc.canPlayUnencrypted=M,Nc.canPlayEncrypted=N,Nc.getEntitlementEngine=Gc.getEntitlementEngine,Nc.registerEntitlementEngine=Gc.registerEntitlementEngine,Nc.isEntitlementEngine=Gc.isEntitlementEngine,Nc.EntitlementClass=Gc.EntitlementClass,Nc.log=sa,Nc.plugin=ea.plugin,Nc.videojs=ea,Nc.EntitlementMiddleware=Gc,Nc.extend=ea.extend,Nc.Events=ma,Nc.VERSION="2.79.2","function"==typeof a&&a.amd?a("empPlayer",[],function(){return Nc}):"object"===("undefined"==typeof d?"undefined":fa(d))&&"object"===("undefined"==typeof c?"undefined":fa(c))&&(c.exports=Nc),Nc})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(b,c,d){(function(b){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?c.exports=e():"function"==typeof a&&a.amd?a(e):b.empShaka=e();
}(this,function(){function a(a,b){return b={exports:{}},a(b,b.exports),b.exports}function c(a,b){var c=Array.prototype.slice.call(b),d=function(){},e=n.console||{log:d,warn:d,error:d,trace:d};a?c.unshift(a.toUpperCase()+":"):a="log",c.unshift("EMPPlayer:"),e[a].apply?e[a].apply(e,c):e[a](c.join(" "))}function d(a){return"string"==typeof a||!!a&&"object"===("undefined"==typeof a?"undefined":t(a))&&"[object String]"===Object.prototype.toString.call(a)}function e(a,b){return Array.isArray(a)?f(a):void 0===a||void 0===b?f():f([[a,b]])}function f(a){return void 0===a||0===a.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:a.length,start:g.bind(null,"start",0,a),end:g.bind(null,"end",1,a)}}function g(a,b,c,d){return void 0===d&&(log.warn("DEPRECATED: Function '"+a+"' on 'TimeRanges' called without an index argument."),d=0),h(a,d,c.length-1),c[d][b]}function h(a,b,c){if(b<0||b>c)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+b+") is greater than or equal to the maximum bound ("+c+").")}function i(){this.aar={"ISO_639-1":"aa","ISO_639-3":"aar"},this.abk={"ISO_639-1":"ab","ISO_639-3":"abk"},this.ave={"ISO_639-1":"ae","ISO_639-3":"ave"},this.afr={"ISO_639-1":"af","ISO_639-3":"afr"},this.aka={"ISO_639-1":"ak","ISO_639-3":"aka"},this.amh={"ISO_639-1":"am","ISO_639-3":"amh"},this.arg={"ISO_639-1":"an","ISO_639-3":"arg"},this.ara={"ISO_639-1":"ar","ISO_639-3":"ara"},this.asm={"ISO_639-1":"as","ISO_639-3":"asm"},this.ava={"ISO_639-1":"av","ISO_639-3":"ava"},this.aym={"ISO_639-1":"ay","ISO_639-3":"aym"},this.aze={"ISO_639-1":"az","ISO_639-3":"aze"},this.bak={"ISO_639-1":"ba","ISO_639-3":"bak"},this.bel={"ISO_639-1":"be","ISO_639-3":"bel"},this.bul={"ISO_639-1":"bg","ISO_639-3":"bul"},this.bis={"ISO_639-1":"bi","ISO_639-3":"bis"},this.bam={"ISO_639-1":"bm","ISO_639-3":"bam"},this.ben={"ISO_639-1":"bn","ISO_639-3":"ben"},this.bod={"ISO_639-1":"bo","ISO_639-3":"bod"},this.bre={"ISO_639-1":"br","ISO_639-3":"bre"},this.bos={"ISO_639-1":"bs","ISO_639-3":"bos"},this.cat={"ISO_639-1":"ca","ISO_639-3":"cat"},this.che={"ISO_639-1":"ce","ISO_639-3":"che"},this.cha={"ISO_639-1":"ch","ISO_639-3":"cha"},this.cos={"ISO_639-1":"co","ISO_639-3":"cos"},this.cre={"ISO_639-1":"cr","ISO_639-3":"cre"},this.ces={"ISO_639-1":"cs","ISO_639-3":"ces"},this.chu={"ISO_639-1":"cu","ISO_639-3":"chu"},this.chv={"ISO_639-1":"cv","ISO_639-3":"chv"},this.cym={"ISO_639-1":"cy","ISO_639-3":"cym"},this.dan={"ISO_639-1":"da","ISO_639-3":"dan"},this.deu={"ISO_639-1":"de","ISO_639-3":"deu"},this.div={"ISO_639-1":"dv","ISO_639-3":"div"},this.dzo={"ISO_639-1":"dz","ISO_639-3":"dzo"},this.ewe={"ISO_639-1":"ee","ISO_639-3":"ewe"},this.ell={"ISO_639-1":"el","ISO_639-3":"ell"},this.eng={"ISO_639-1":"en","ISO_639-3":"eng"},this.epo={"ISO_639-1":"eo","ISO_639-3":"epo"},this.spa={"ISO_639-1":"es","ISO_639-3":"spa"},this.est={"ISO_639-1":"et","ISO_639-3":"est"},this.eus={"ISO_639-1":"eu","ISO_639-3":"eus"},this.fas={"ISO_639-1":"fa","ISO_639-3":"fas"},this.ful={"ISO_639-1":"ff","ISO_639-3":"ful"},this.fin={"ISO_639-1":"fi","ISO_639-3":"fin"},this.fij={"ISO_639-1":"fj","ISO_639-3":"fij"},this.fao={"ISO_639-1":"fo","ISO_639-3":"fao"},this.fra={"ISO_639-1":"fr","ISO_639-3":"fra"},this.fry={"ISO_639-1":"fy","ISO_639-3":"fry"},this.ger={"ISO_639-1":"de","ISO_639-3":"deu"},this.gle={"ISO_639-1":"ga","ISO_639-3":"gle"},this.gla={"ISO_639-1":"gd","ISO_639-3":"gla"},this.glg={"ISO_639-1":"gl","ISO_639-3":"glg"},this.grn={"ISO_639-1":"gn","ISO_639-3":"grn"},this.guj={"ISO_639-1":"gu","ISO_639-3":"guj"},this.glv={"ISO_639-1":"gv","ISO_639-3":"glv"},this.hau={"ISO_639-1":"ha","ISO_639-3":"hau"},this.heb={"ISO_639-1":"he","ISO_639-3":"heb"},this.hin={"ISO_639-1":"hi","ISO_639-3":"hin"},this.hmo={"ISO_639-1":"ho","ISO_639-3":"hmo"},this.hrv={"ISO_639-1":"hr","ISO_639-3":"hrv"},this.hat={"ISO_639-1":"ht","ISO_639-3":"hat"},this.hun={"ISO_639-1":"hu","ISO_639-3":"hun"},this.hye={"ISO_639-1":"hy","ISO_639-3":"hye"},this.her={"ISO_639-1":"hz","ISO_639-3":"her"},this.ina={"ISO_639-1":"ia","ISO_639-3":"ina"},this.ind={"ISO_639-1":"id","ISO_639-3":"ind"},this.ile={"ISO_639-1":"ie","ISO_639-3":"ile"},this.ibo={"ISO_639-1":"ig","ISO_639-3":"ibo"},this.iii={"ISO_639-1":"ii","ISO_639-3":"iii"},this.ipk={"ISO_639-1":"ik","ISO_639-3":"ipk"},this.ido={"ISO_639-1":"io","ISO_639-3":"ido"},this.isl={"ISO_639-1":"is","ISO_639-3":"isl"},this.ita={"ISO_639-1":"it","ISO_639-3":"ita"},this.iku={"ISO_639-1":"iu","ISO_639-3":"iku"},this.jpn={"ISO_639-1":"ja","ISO_639-3":"jpn"},this.jav={"ISO_639-1":"jv","ISO_639-3":"jav"},this.kat={"ISO_639-1":"ka","ISO_639-3":"kat"},this.kon={"ISO_639-1":"kg","ISO_639-3":"kon"},this.kik={"ISO_639-1":"ki","ISO_639-3":"kik"},this.kua={"ISO_639-1":"kj","ISO_639-3":"kua"},this.kaz={"ISO_639-1":"kk","ISO_639-3":"kaz"},this.kal={"ISO_639-1":"kl","ISO_639-3":"kal"},this.khm={"ISO_639-1":"km","ISO_639-3":"khm"},this.kan={"ISO_639-1":"kn","ISO_639-3":"kan"},this.kor={"ISO_639-1":"ko","ISO_639-3":"kor"},this.kau={"ISO_639-1":"kr","ISO_639-3":"kau"},this.kas={"ISO_639-1":"ks","ISO_639-3":"kas"},this.kur={"ISO_639-1":"ku","ISO_639-3":"kur"},this.kom={"ISO_639-1":"kv","ISO_639-3":"kom"},this.cor={"ISO_639-1":"kw","ISO_639-3":"cor"},this.kir={"ISO_639-1":"ky","ISO_639-3":"kir"},this.lat={"ISO_639-1":"la","ISO_639-3":"lat"},this.ltz={"ISO_639-1":"lb","ISO_639-3":"ltz"},this.lug={"ISO_639-1":"lg","ISO_639-3":"lug"},this.lim={"ISO_639-1":"li","ISO_639-3":"lim"},this.lin={"ISO_639-1":"ln","ISO_639-3":"lin"},this.lao={"ISO_639-1":"lo","ISO_639-3":"lao"},this.lit={"ISO_639-1":"lt","ISO_639-3":"lit"},this.lub={"ISO_639-1":"lu","ISO_639-3":"lub"},this.lav={"ISO_639-1":"lv","ISO_639-3":"lav"},this.mlg={"ISO_639-1":"mg","ISO_639-3":"mlg"},this.mah={"ISO_639-1":"mh","ISO_639-3":"mah"},this.mri={"ISO_639-1":"mi","ISO_639-3":"mri"},this.mkd={"ISO_639-1":"mk","ISO_639-3":"mkd"},this.mal={"ISO_639-1":"ml","ISO_639-3":"mal"},this.mon={"ISO_639-1":"mn","ISO_639-3":"mon"},this.mar={"ISO_639-1":"mr","ISO_639-3":"mar"},this.msa={"ISO_639-1":"ms","ISO_639-3":"msa"},this.mlt={"ISO_639-1":"mt","ISO_639-3":"mlt"},this.mya={"ISO_639-1":"my","ISO_639-3":"mya"},this.nau={"ISO_639-1":"na","ISO_639-3":"nau"},this.nob={"ISO_639-1":"nb","ISO_639-3":"nob"},this.nde={"ISO_639-1":"nd","ISO_639-3":"nde"},this.nep={"ISO_639-1":"ne","ISO_639-3":"nep"},this.ndo={"ISO_639-1":"ng","ISO_639-3":"ndo"},this.nld={"ISO_639-1":"nl","ISO_639-3":"nld"},this.nno={"ISO_639-1":"nn","ISO_639-3":"nno"},this.nor={"ISO_639-1":"no","ISO_639-3":"nor"},this.nbl={"ISO_639-1":"nr","ISO_639-3":"nbl"},this.nav={"ISO_639-1":"nv","ISO_639-3":"nav"},this.nya={"ISO_639-1":"ny","ISO_639-3":"nya"},this.oci={"ISO_639-1":"oc","ISO_639-3":"oci"},this.oji={"ISO_639-1":"oj","ISO_639-3":"oji"},this.orm={"ISO_639-1":"om","ISO_639-3":"orm"},this.ori={"ISO_639-1":"or","ISO_639-3":"ori"},this.oss={"ISO_639-1":"os","ISO_639-3":"oss"},this.pan={"ISO_639-1":"pa","ISO_639-3":"pan"},this.pli={"ISO_639-1":"pi","ISO_639-3":"pli"},this.pol={"ISO_639-1":"pl","ISO_639-3":"pol"},this.pus={"ISO_639-1":"ps","ISO_639-3":"pus"},this.por={"ISO_639-1":"pt","ISO_639-3":"por"},this.que={"ISO_639-1":"qu","ISO_639-3":"que"},this.roh={"ISO_639-1":"rm","ISO_639-3":"roh"},this.run={"ISO_639-1":"rn","ISO_639-3":"run"},this.ron={"ISO_639-1":"ro","ISO_639-3":"ron"},this.rus={"ISO_639-1":"ru","ISO_639-3":"rus"},this.kin={"ISO_639-1":"rw","ISO_639-3":"kin"},this.san={"ISO_639-1":"sa","ISO_639-3":"san"},this.srd={"ISO_639-1":"sc","ISO_639-3":"srd"},this.snd={"ISO_639-1":"sd","ISO_639-3":"snd"},this.sme={"ISO_639-1":"se","ISO_639-3":"sme"},this.sag={"ISO_639-1":"sg","ISO_639-3":"sag"},this.hbs={"ISO_639-1":"sh (deprecated)","ISO_639-3":"hbs"},this.sin={"ISO_639-1":"si","ISO_639-3":"sin"},this.slk={"ISO_639-1":"sk","ISO_639-3":"slk"},this.slv={"ISO_639-1":"sl","ISO_639-3":"slv"},this.smo={"ISO_639-1":"sm","ISO_639-3":"smo"},this.sna={"ISO_639-1":"sn","ISO_639-3":"sna"},this.som={"ISO_639-1":"so","ISO_639-3":"som"},this.sqi={"ISO_639-1":"sq","ISO_639-3":"sqi"},this.srp={"ISO_639-1":"sr","ISO_639-3":"srp"},this.ssw={"ISO_639-1":"ss","ISO_639-3":"ssw"},this.sot={"ISO_639-1":"st","ISO_639-3":"sot"},this.sun={"ISO_639-1":"su","ISO_639-3":"sun"},this.swe={"ISO_639-1":"sv","ISO_639-3":"swe"},this.swa={"ISO_639-1":"sw","ISO_639-3":"swa"},this.tam={"ISO_639-1":"ta","ISO_639-3":"tam"},this.tel={"ISO_639-1":"te","ISO_639-3":"tel"},this.tgk={"ISO_639-1":"tg","ISO_639-3":"tgk"},this.tha={"ISO_639-1":"th","ISO_639-3":"tha"},this.tir={"ISO_639-1":"ti","ISO_639-3":"tir"},this.tuk={"ISO_639-1":"tk","ISO_639-3":"tuk"},this.tgl={"ISO_639-1":"tl","ISO_639-3":"tgl"},this.tsn={"ISO_639-1":"tn","ISO_639-3":"tsn"},this.ton={"ISO_639-1":"to","ISO_639-3":"ton"},this.tur={"ISO_639-1":"tr","ISO_639-3":"tur"},this.tso={"ISO_639-1":"ts","ISO_639-3":"tso"},this.tat={"ISO_639-1":"tt","ISO_639-3":"tat"},this.twi={"ISO_639-1":"tw","ISO_639-3":"twi"},this.tah={"ISO_639-1":"ty","ISO_639-3":"tah"},this.uig={"ISO_639-1":"ug","ISO_639-3":"uig"},this.ukr={"ISO_639-1":"uk","ISO_639-3":"ukr"},this.urd={"ISO_639-1":"ur","ISO_639-3":"urd"},this.uzb={"ISO_639-1":"uz","ISO_639-3":"uzb"},this.ven={"ISO_639-1":"ve","ISO_639-3":"ven"},this.vie={"ISO_639-1":"vi","ISO_639-3":"vie"},this.vol={"ISO_639-1":"vo","ISO_639-3":"vol"},this.wln={"ISO_639-1":"wa","ISO_639-3":"wln"},this.wol={"ISO_639-1":"wo","ISO_639-3":"wol"},this.xho={"ISO_639-1":"xh","ISO_639-3":"xho"},this.yid={"ISO_639-1":"yi","ISO_639-3":"yid"},this.yor={"ISO_639-1":"yo","ISO_639-3":"yor"},this.zha={"ISO_639-1":"za","ISO_639-3":"zha"},this.zho={"ISO_639-1":"zh","ISO_639-3":"zho"},this.zul={"ISO_639-1":"zu","ISO_639-3":"zul"}}function j(a){var b;b=3==a.length?window.iso639Converter.from3to1(a):a.slice(0,2);var c=O[b];return c?c.name:a}var k,l="undefined"!=typeof window?window:"undefined"!=typeof b?b:"undefined"!=typeof self?self:{};k="undefined"!=typeof window?window:"undefined"!=typeof l?l:"undefined"!=typeof self?self:{};var m,n=k,o={},p=(Object.freeze||Object)({"default":o}),q=p&&o||p,r="undefined"!=typeof l?l:"undefined"!=typeof window?window:{};"undefined"!=typeof document?m=document:(m=r["__GLOBAL_DOCUMENT_CACHE@4"],m||(m=r["__GLOBAL_DOCUMENT_CACHE@4"]=q));var s=m,t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},u=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},v=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),w=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},x=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},y=function U(){u(this,U),this.ENDED="ended",this.ERROR="error",this.LOADED_DATA="loadeddata",this.TIMESHIFT_CHANGE="timeshiftchange",this.DURATION_CHANGE="durationchange",this.LOADED_METADATA="loadedmetadata",this.SEEKING="seeking",this.TIME_UPDATE="timeupdate",this.USER_ACTIVE="useractive",this.USERIN_ACTIVE="userinactive",this.VOLUME_CHANGE="volumechange",this.LOAD_START="loadstart",this.CAN_PLAY="canplay",this.PLAYING="playing",this.WAITING="waiting",this.SEEKED="seeked",this.ABORT="abort",this.PLAY="play",this.PAUSE="pause",this.DISPOSE="dispose",this.MODE_CHANGE="modechange",this.CHANGE="change",this.ADD_TRACK="addtrack",this.REMOVE_TRACK="removetrack",this.METRIC_CHANGED="metricchanged",this.RECOVERABLE_ASSET_ERROR="recoverableasseterror",this.BITRATE_CHANGED="bitratechanged",this.CLOSE="close",this.READY="ready",this.RESIZE="resize",this.TAP="tap",this.CLICK="click",this.FOCUS="focus",this.BLUR="blur",this.BEFORE_MODAL_OPEN="beforemodalopen",this.MODAL_OPEN="modalopen",this.BEFORE_MODAL_CLOSE="beforemodalclose",this.MODAL_CLOSE="modalclose",this.BEFORE_MODAL_FILL="beforemodalfill",this.MODAL_FILL="modalfill",this.BEFORE_MODAL_EMPTY="beforemodalempty",this.MODAL_EMPTY="modalempty",this.CAN_PLAY_THROUGH="canplaythrough",this.FIRST_PLAY="firstplay",this.PROGRESS="progress",this.SUSPEND="suspend",this.EMPTIED="emptied",this.STALLED="stalled",this.RATE_CHANGE="ratechange",this.TEXT_TRACK_CHANGE="texttrackchange",this.TRACK_CHANGE="trackchanged",this.POSTER_CHANGE="posterchange",this.KEY_DOWN="keydown",this.KEY_UP="keyup",this.MOUSE_DOWN="mousedown",this.MOUSE_MOVE="mousemove",this.MOUSE_UP="mouseup",this.TOUCH_START="touchstart",this.TOUCH_MOVE="touchmove",this.TOUCH_END="touchend",this.TOUCH_LEAVE="touchleave",this.TOUCH_CANCEL="touchcancel",this.FULLSCREEN_CHANGE="fullscreenchange",this.ENTER_FULL_WINDOW="enterFullWindow",this.EXIT_FULL_WINDOW="exitFullWindow",this.CONTROLS_ENABLED="controlsenabled",this.CONTROLS_DISABLED="controlsdisabled",this.USING_NATIVE_CONTROLS="usingnativecontrols",this.USING_CUSTOM_CONTROLS="usingcustomcontrols",this.SLIDER_ACTIVE="slideractive",this.SLIDER_INACTIVE="sliderinactive",this.ENTITLEMENT_CHANGE="entitlementchange",this.ENTITLEMENT_LOAD_START="entitlementloadstart",this.PLAYER_CREATED="playercreated",this.RESTARTING="restarting",this.SEGMENTS_UPDATED="segmentsupdated",this.SEGMENT_CHANGED="segmentchanged",this.CHROMECAST_CASTING="chromecastcasting",this.CHROMECAST_STOPPED="chromecaststopped",this.STOPPED="stopped",this.READY_TO_PLAY="readytoplay",this.PROGRAM_CHANGED="programchanged",this.ASSET_CHANGED="assetchanged",this.SEGMENT_MISSING="segmentmissing",this.AIRPLAY_START="airplayStart",this.REPLAY="replay"},z=new y,A=n.videojs,B=A,C=!1,D=function(){C&&c(null,arguments)};n.EMP_DEBUG_LOG&&(D=n.console&&n.console.log&&void 0||function(){});var E=D;if(E.history=[],E.error=function(){c("error",arguments)},E.warn=function(){c("warn",arguments)},E.debug=function(){c("debug",arguments)},n.EMP_DEBUG_LOG){var F=function(){};E.debug=n.console&&n.console.debug&&void 0||F,E.warn=n.WARN=n.console&&n.console.warn&&void 0||F,E.error=n.ERROR=n.console&&n.console.error&&void 0||F}E.setLogToBrowserConsole=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];C=a};var G={UNKNOWN:100,LOAD_ASSET:101,ENTITLEMENT:102,SHAKA_TECH:200,HLS_TECH:300,FLASH_TECH:400,CHROMECAST_TECH:500},H=(function(a){function b(c){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.UNKNOWN,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u(this,b);var g=x(this,a.call(this));return g.code=e,d(c)?g.message=c:c.message&&(g.message=c.message),g.status=f,Error.captureStackTrace&&Error.captureStackTrace(g,b),g}return w(b,a),v(b,[{key:"codes",get:function(){return G}}]),b}(Error),function(){function a(){u(this,a)}return a.prototype.addAudioTrack=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=new B.AudioTrack({enabled:d,kind:a||"main",label:b,language:c});return this.audioTracks().addTrack(e),e},a.prototype.languageCode=function(a){return a?a.split("-")[0]:null},a.prototype.remainingTime=function(){var a=this.duration();return a===1/0||0===a?1/0:a-this.currentTime()},a.prototype.supportsEpgProgramChange=function(){return this.supportsEpgProgramChange_||!1},a.prototype.base=function(){},a.prototype.triggerRecoverableTechError=function(a,b){E("RecoverableTechError",b,a);var c=a.category||"",d=a.code||"",e=a.message||"",f="Tech: "+b+"  Can't load video: error category: "+c+" code: "+d+" message: "+e;6!==c&&6001!==d&&E.error(f),this.trigger(z.RECOVERABLE_ASSET_ERROR,{source:this.options_.source,techName:b,message:f,code:a.code})},a.prototype.trackDuration=function(){this.durationInterval&&this.stopTrackingDuration(),this.preDuration_=0,this.durationInterval=this.setInterval(function(){this.isReady_&&this.onDurationUpdate()},1e3)},a.prototype.stopTrackingDuration=function(){this.durationInterval&&(this.clearInterval(this.durationInterval),this.durationInterval=null,this.preDuration_=0),this.trigger(z.DURATION_CHANGE)},a.prototype.onDurationUpdate=function(){var a=this.duration();this.preDuration_!==a&&(a-this.preDuration_>=1||a-this.preDuration_<=-1||0===a)&&(this.preDuration_=this.duration(),this.trigger(z.DURATION_CHANGE))},a}()),I=a(function(a){!function(){var b={};(function(a){function b(a,b){var c=a.split("."),d=ih;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function c(a){function b(){}var c=Gb;b.prototype=c.prototype,a.af=c.prototype,a.prototype=new b,a.prototype.constructor=a,a.Ze=function(a,b,d){return c.prototype[b].apply(a,Array.prototype.slice.call(arguments,2))}}function d(a){this.c=Math.exp(Math.log(.5)/a),this.b=this.a=0}function e(a,b,c){var d=Math.pow(a.c,b);c=c*(1-d)+d*a.a,isNaN(c)||(a.a=c,a.b+=b)}function f(a){return a.a/(1-Math.pow(a.c,a.b))}function g(){this.b=new d(2),this.c=new d(5),this.a=0}function h(){}function i(){}function j(a,b,c,d){this.severity=a,this.category=b,this.code=c,this.data=Array.prototype.slice.call(arguments,3),this.handled=!1}function k(a){var b;a instanceof k?(l(this,a.ea),this.Ca=a.Ca,this.ja=a.ja,m(this,a.Ka),this.V=a.V,n(this,s(a.a)),this.wa=a.wa):a&&(b=String(a).match(jh))?(l(this,b[1]||"",!0),this.Ca=o(b[2]||""),this.ja=o(b[3]||"",!0),m(this,b[4]),this.V=o(b[5]||"",!0),n(this,b[6]||"",!0),this.wa=o(b[7]||"")):this.a=new r(null)}function l(a,b,c){a.ea=c?o(b,!0):b,a.ea&&(a.ea=a.ea.replace(/:$/,""))}function m(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.Ka=b}else a.Ka=null}function n(a,b,c){b instanceof r?a.a=b:(c||(b=p(b,nh)),a.a=new r(b))}function o(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function p(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,q),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function q(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(15&a).toString(16)}function r(a){this.b=a||null}function s(a){var b=new r;if(b.b=a.b,a.a){var c,d={};for(c in a.a)d[c]=a.a[c].concat();b.a=d,b.c=a.c}return b}function t(){var a,b,c=new Promise(function(c,d){a=c,b=d});return c.resolve=a,c.reject=b,c}function u(a,b,c){var d=w();this.j=null==a.maxAttempts?d.maxAttempts:a.maxAttempts,this.f=null==a.baseDelay?d.baseDelay:a.baseDelay,this.i=null==a.fuzzFactor?d.fuzzFactor:a.fuzzFactor,this.h=null==a.backoffFactor?d.backoffFactor:a.backoffFactor,this.a=0,this.b=this.f,this.c=b||!1,this.g=c||null,this.c&&(this.a=1)}function v(a){if(a.a>=a.j){if(!a.c)return Promise.reject();a.a=1,a.b=a.f}var b=new t;return a.a?(x(a,b.resolve,a.b*(1+(2*Math.random()-1)*a.i)),a.b*=a.h):b.resolve(),a.a++,b}function w(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function x(a,b,c){if(a.g)if(a.g()||!c)b();else{var d=Math.min(200,c);y(function(){x(this,b,c-d)}.bind(a),d)}else y(b,c)}function y(b,c){a.setTimeout(b,c)}function z(a,b,c,d,e){var f,g=e in d;for(f in b){var h=e+"."+f,i=g?d[e]:c[f];(g||f in a)&&(void 0===b[f]?void 0===i||g?delete a[f]:a[f]=i:i.constructor==Object&&b[f]&&b[f].constructor==Object?(a[f]||(a[f]=i),z(a[f],b[f],i,d,h)):typeof b[f]==typeof i&&null!=b[f]&&b[f].constructor==i.constructor&&(a[f]=b[f]))}}function A(a){function b(a){switch(typeof a){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return a;default:if(!a)return a;if(0<=c.indexOf(a))return null;var d=a.constructor==Array;if(a.constructor!=Object&&!d)return null;c.push(a);var e,f=d?[]:{};for(e in a)f[e]=b(a[e]);return d&&(f.length=a.length),f}}var c=[];return b(a)}function B(a,b){return a.reduce(function(a,b,c){return b["catch"](a.bind(null,c))}.bind(null,b),Promise.reject())}function C(a,b){return a.concat(b)}function D(){}function E(a){return null!=a}function F(a,b,c){return c.indexOf(a)==b}function G(a){this.f=!1,this.a=[],this.b=[],this.c=[],this.g=a||null}function H(a,b,c){c=c||3;var d=ph[a];(!d||c>=d.ee)&&(ph[a]={ee:c,ce:b})}function I(a,b){return{uris:a,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:b}}function J(a,b,c,d,e,f,g){if(a.f||g())return Promise.reject();var h=new k(c.uris[e]),i=h.ea;if(i||(i=location.protocol,i=i.slice(0,-1),l(h,i),c.uris[e]=h.toString()),i=(i=ph[i])?i.ce:null,!i)return Promise.reject(new j(2,1,1e3,h));var m=Date.now();return i(c.uris[e],c,b).then(function(a){void 0==a.timeMs&&(a.timeMs=Date.now()-m);var c=Date.now(),d=Promise.resolve();return this.c.forEach(function(c){d=d.then(function(){return Promise.resolve(c(b,a))}.bind(this))}.bind(this)),d=d["catch"](function(a){var b=2;throw a instanceof j&&(b=a.severity),new j(b,1,1007,a)}),d.then(function(){return a.timeMs+=Date.now()-c,a.timeMs+=f,a})}.bind(a))["catch"](function(a){if(a&&1==a.severity)return e=(e+1)%c.uris.length,g()?Promise.reject():v(d).then(function(){return J(this,b,c,d,e,f,g)}.bind(this),function(){throw a});throw a}.bind(a))}function K(a,b){for(var c=[],d=0;d<a.length;++d){for(var e=!1,f=0;f<c.length&&!(e=b?b(a[d],c[f]):a[d]===c[f]);++f);e||c.push(a[d])}return c}function L(a,b,c){for(var d=0;d<a.length;++d)if(c(a[d],b))return d;return-1}function M(a,b){var c=a.indexOf(b);-1<c&&a.splice(c,1)}function N(a,b){var c=0;return a.forEach(function(a){c+=b(a)?1:0}),c}function O(){this.a={}}function P(){this.a=new O}function Q(a,b,c,d){a.a&&(b=new T(b,c,d),a.a.push(c,b))}function R(a,b,c,d){Q(a,b,c,function(a){this.na(b,c),d(a)}.bind(a))}function S(a){if(a.a){var b,c=a.a,d=[];for(b in c.a)d.push.apply(d,c.a[b]);for(c=0;c<d.length;++c)d[c].na();a.a.a={}}}function T(a,b,c){this.target=a,this.type=b,this.a=c,this.target.addEventListener(b,c,!1)}function U(b,c){var d,e=c||{};for(d in e)this[d]=e[d];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=a.performance&&a.performance.now?a.performance.now():Date.now(),this.type=b,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function V(a,b){if(!b.length)return a;var c=b.map(function(a){return new k(a)});return a.map(function(a){return new k(a)}).map(function(a){return c.map(a.resolve.bind(a))}).reduce(C,[]).map(function(a){return a.toString()})}function W(a,b){return{keySystem:a,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:b||[],keyIds:[]}}function X(a){return!a||!Object.keys(a).length}function Y(a){return Object.keys(a).map(function(b){return a[b]})}function Z(a,b){return Object.keys(a).every(function(c){return b(c,a[c])})}function $(a,b){Object.keys(a).forEach(function(c){b(c,a[c])})}function _(a,b){var c=a;return b&&(c+='; codecs="'+b+'"'),c}function aa(a){if(!a)return"";a=new Uint8Array(a),239==a[0]&&187==a[1]&&191==a[2]&&(a=a.subarray(3)),a=escape(ea(a));try{return decodeURIComponent(a)}catch(b){throw new j(2,2,2004)}}function ba(a,b,c){if(!a)return"";if(!c&&a.byteLength%2)throw new j(2,2,2004);if(a instanceof ArrayBuffer)var d=a;else c=new Uint8Array(a.byteLength),c.set(new Uint8Array(a)),d=c.buffer;a=Math.floor(a.byteLength/2),c=new Uint16Array(a),d=new DataView(d);for(var e=0;e<a;e++)c[e]=d.getUint16(2*e,b);return ea(c)}function ca(a){var b=new Uint8Array(a);if(239==b[0]&&187==b[1]&&191==b[2])return aa(b);if(254==b[0]&&255==b[1])return ba(b.subarray(2),!1);if(255==b[0]&&254==b[1])return ba(b.subarray(2),!0);var c=function(a,b){return a.byteLength<=b||32<=a[b]&&126>=a[b]}.bind(null,b);if(!b[0]&&!b[2])return ba(a,!1);if(!b[1]&&!b[3])return ba(a,!0);if(c(0)&&c(1)&&c(2)&&c(3))return aa(a);throw new j(2,2,2003)}function da(a){a=unescape(encodeURIComponent(a));for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b.buffer}function ea(a){for(var b="",c=0;c<a.length;c+=16e3)b+=String.fromCharCode.apply(null,a.subarray(c,c+16e3));return b}function fa(a){this.a=null,this.b=function(){this.a=null,a()}.bind(this)}function ga(a){a.cancel(),a.a=setTimeout(a.b,500)}function ha(a,b){a.cancel();var c=function(){this.b(),this.a=setTimeout(c,1e3*b)}.bind(a);a.a=setTimeout(c,1e3*b)}function ia(b,c){var d=void 0==c||c,e=a.btoa(String.fromCharCode.apply(null,b)).replace(/\+/g,"-").replace(/\//g,"_");return d?e:e.replace(/=*$/,"")}function ja(b){b=a.atob(b.replace(/-/g,"+").replace(/_/g,"/"));for(var c=new Uint8Array(b.length),d=0;d<b.length;++d)c[d]=b.charCodeAt(d);return c}function ka(b){for(var c=new Uint8Array(b.length/2),d=0;d<b.length;d+=2)c[d/2]=a.parseInt(b.substr(d,2),16);return c}function la(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d),b+=d}return b}function ma(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}function na(a){for(var b=0,c=0;c<arguments.length;++c)b+=arguments[c].length;for(var b=new Uint8Array(b),d=0,c=0;c<arguments.length;++c)b.set(arguments[c],d),d+=arguments[c].length;return b}function oa(a){this.v=a,this.l=this.j=this.w=null,this.M=!1,this.b=null,this.f=new P,this.a=[],this.m=[],this.i=new t,this.h=null,this.g=function(b){this.i.reject(b),a.onError(b)}.bind(this),this.C={},this.H=new fa(this.fe.bind(this)),this.ia=this.c=!1,this.L=[],this.ha=!1,this.B=new fa(this.de.bind(this)),ha(this.B,1),this.i["catch"](function(){})}function pa(a,b){if(!a.j)return R(a.f,b,"encrypted",function(){this.g(new j(2,6,6010))}.bind(a)),Promise.resolve();a.l=b,R(a.f,a.l,"play",a.Kd.bind(a));var c=a.l.setMediaKeys(a.j),c=c["catch"](function(a){return Promise.reject(new j(2,6,6003,a.message))}),d=null;return a.b.serverCertificate&&a.b.serverCertificate.length&&(d=a.j.setServerCertificate(a.b.serverCertificate).then(function(){})["catch"](function(a){return Promise.reject(new j(2,6,6004,a.message))})),Promise.all([c,d]).then(function(){return this.c?Promise.reject():(ra(this),void(this.b.initData.length||this.m.length||Q(this.f,this.l,"encrypted",this.zd.bind(this))))}.bind(a))["catch"](function(a){return this.c?Promise.resolve():Promise.reject(a)}.bind(a))}function qa(a,b){return Promise.all(b.map(function(a){return za(this,a).then(function(a){if(a){for(var b=new t,c=0;c<this.a.length;c++)if(this.a[c].fa==a){this.a[c].oa=b;break}return Promise.all([a.remove(),b])}}.bind(this))}.bind(a)))}function ra(a){var b=a.b?a.b.initData:[];return b.forEach(function(a){Aa(this,a.initDataType,a.initData)}.bind(a)),a.m.forEach(function(a){za(this,a)}.bind(a)),b.length||a.m.length||a.i.resolve(),a.i}function sa(a){return a.a.map(function(a){return a.fa.sessionId})}function ta(a,b,c,d,e){var f=wa(a);b.periods.forEach(function(a){a.variants.forEach(function(a){f&&(a.drmInfos=[f]),a.drmInfos.forEach(function(b){va(this,b);var f=d[b.keySystem];f||(f={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:c?"required":"optional",sessionTypes:[c?"persistent-license":"temporary"],label:b.keySystem,drmInfos:[]},d[b.keySystem]=f,e.push(b.keySystem)),f.drmInfos.push(b),b.distinctiveIdentifierRequired&&(f.distinctiveIdentifier="required"),b.persistentStateRequired&&(f.persistentState="required");var g=[];a.video&&g.push(a.video),a.audio&&g.push(a.audio),g.forEach(function(a){("video"==a.type?f.videoCapabilities:f.audioCapabilities).push({robustness:("video"==a.type?b.videoRobustness:b.audioRobustness)||"",contentType:_(a.mimeType,a.codecs)})}.bind(this))}.bind(this))}.bind(this))}.bind(a))}function ua(a,b,c){if(1==c.length&&""==c[0])return Promise.reject(new j(2,6,6e3));var d=new t,e=d;return[!0,!1].forEach(function(a){c.forEach(function(c){var d=b[c];d.drmInfos.some(function(a){return!!a.licenseServerUri})==a&&(d.audioCapabilities.length||delete d.audioCapabilities,d.videoCapabilities.length||delete d.videoCapabilities,e=e["catch"](function(){return this.c?Promise.reject():navigator.requestMediaKeySystemAccess(c,[d])}.bind(this)))}.bind(this))}.bind(a)),e=e["catch"](function(){return Promise.reject(new j(2,6,6001))}),e=e.then(function(a){if(this.c)return Promise.reject();var c=0<=navigator.userAgent.indexOf("Edge/"),d=a.getConfiguration();return this.w=(d.audioCapabilities||[]).concat(d.videoCapabilities||[]).map(function(a){return a.contentType}),c&&(this.w=null),c=b[a.keySystem],xa(this,a.keySystem,c,c.drmInfos),this.b.licenseServerUri?a.createMediaKeys():Promise.reject(new j(2,6,6012))}.bind(a)).then(function(a){return this.c?Promise.reject():(this.j=a,void(this.M=!0))}.bind(a))["catch"](function(a){return this.c?Promise.resolve():(this.w=this.b=null,a instanceof j?Promise.reject(a):Promise.reject(new j(2,6,6002,a.message)))}.bind(a)),d.reject(),e}function va(a,b){var c=b.keySystem;if(c){if(!b.licenseServerUri){var d=a.h.servers[c];d&&(b.licenseServerUri=d)}b.keyIds||(b.keyIds=[]),(c=a.h.advanced[c])&&(b.distinctiveIdentifierRequired||(b.distinctiveIdentifierRequired=c.distinctiveIdentifierRequired),b.persistentStateRequired||(b.persistentStateRequired=c.persistentStateRequired),b.videoRobustness||(b.videoRobustness=c.videoRobustness),b.audioRobustness||(b.audioRobustness=c.audioRobustness),b.serverCertificate||(b.serverCertificate=c.serverCertificate))}}function wa(b){if(X(b.h.clearKeys))return null;var c,d=[],e=[];for(c in b.h.clearKeys){var f=b.h.clearKeys[c],g=ka(c),f=ka(f),g={kty:"oct",kid:ia(g,!1),k:ia(f,!1)};d.push(g),e.push(g.kid)}return b=JSON.stringify({keys:d}),e=JSON.stringify({kids:e}),e=[{initData:new Uint8Array(da(e)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+a.btoa(b),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:e,keyIds:[]}}function xa(a,b,c,d){var e=[],f=[],g=[],h=[];ya(d,e,f,g,h),a.b={keySystem:b,licenseServerUri:e[0],distinctiveIdentifierRequired:"required"==c.distinctiveIdentifier,persistentStateRequired:"required"==c.persistentState,audioRobustness:c.audioCapabilities?c.audioCapabilities[0].robustness:"",videoRobustness:c.videoCapabilities?c.videoCapabilities[0].robustness:"",serverCertificate:f[0],initData:g,keyIds:h}}function ya(a,b,c,d,e){function f(a,b){return!(!a.keyId||a.keyId!=b.keyId)||a.initDataType==b.initDataType&&ma(a.initData,b.initData)}a.forEach(function(a){if(-1==b.indexOf(a.licenseServerUri)&&b.push(a.licenseServerUri),a.serverCertificate&&-1==L(c,a.serverCertificate,ma)&&c.push(a.serverCertificate),a.initData&&a.initData.forEach(function(a){-1==L(d,a,f)&&d.push(a)}),a.keyIds)for(var g=0;g<a.keyIds.length;++g)-1==e.indexOf(a.keyIds[g])&&e.push(a.keyIds[g])})}function za(a,b){try{var c=a.j.createSession("persistent-license")}catch(d){var e=new j(2,6,6005,d.message);return a.g(e),Promise.reject(e)}Q(a.f,c,"message",a.xc.bind(a)),Q(a.f,c,"keystatuseschange",a.rc.bind(a));var f={initData:null,fa:c,loaded:!1,Jb:1/0,oa:null};return a.a.push(f),c.load(b).then(function(a){if(!this.c){if(a)return f.loaded=!0,this.a.every(function(a){return a.loaded})&&this.i.resolve(),c;this.a.splice(this.a.indexOf(f),1),this.g(new j(2,6,6013))}}.bind(a),function(a){this.c||(this.a.splice(this.a.indexOf(f),1),this.g(new j(2,6,6005,a.message)))}.bind(a))}function Aa(a,b,c){try{var d=a.ia?a.j.createSession("persistent-license"):a.j.createSession()}catch(e){return void a.g(new j(2,6,6005,e.message))}Q(a.f,d,"message",a.xc.bind(a)),Q(a.f,d,"keystatuseschange",a.rc.bind(a)),a.a.push({initData:c,fa:d,loaded:!1,Jb:1/0,oa:null}),d.generateRequest(b,c.buffer)["catch"](function(a){if(!this.c){for(var b=0;b<this.a.length;++b)if(this.a[b].fa==d){this.a.splice(b,1);break}this.g(new j(2,6,6006,a.message))}}.bind(a))}function Ba(a,b){for(var c,d=b.target,e=0;e<a.a.length;e++)if(a.a[e].fa==d){c=a.a[e];break}e=I([a.b.licenseServerUri],a.h.retryParameters),e.body=b.message,e.method="POST","com.microsoft.playready"!=a.b.keySystem&&"com.chromecast.playready"!=a.b.keySystem||Ca(e),a.v.Va.request(2,e).then(function(a){
return this.c?Promise.reject():d.update(a.data).then(function(){this.v.onEvent(new U("drmsessionupdate")),c&&(c.oa&&c.oa.resolve(),setTimeout(function(){c.loaded=!0,this.a.every(function(a){return a.loaded})&&this.i.resolve()}.bind(this),5e3))}.bind(this))}.bind(a),function(a){return this.c?Promise.resolve():(a=new j(2,6,6007,a),this.g(a),void(c&&c.oa&&c.oa.reject(a)))}.bind(a))["catch"](function(a){return this.c?Promise.resolve():(a=new j(2,6,6008,a.message),this.g(a),void(c&&c.oa&&c.oa.reject(a)))}.bind(a))}function Ca(a){var b=ba(a.body,!0,!0);if(-1==b.indexOf("PlayReadyKeyMessage"))a.headers["Content-Type"]="text/xml; charset=utf-8";else{for(var b=(new DOMParser).parseFromString(b,"application/xml"),c=b.getElementsByTagName("HttpHeader"),d=0;d<c.length;++d)a.headers[c[d].querySelector("name").textContent]=c[d].querySelector("value").textContent;a.body=ja(b.querySelector("Challenge").textContent).buffer}}function Da(){var a=[],b=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c=[{videoCapabilities:b,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:b}],d={};return"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(b){var e=navigator.requestMediaKeySystemAccess(b,c).then(function(a){var c=a.getConfiguration().sessionTypes,c=!!c&&0<=c.indexOf("persistent-license");return 0<=navigator.userAgent.indexOf("Tizen 3")&&(c=!1),d[b]={persistentState:c},a.createMediaKeys()})["catch"](function(){d[b]=null});a.push(e)}),Promise.all(a).then(function(){return d})}function Ea(a,b){var c=a.keySystem();return!b.drmInfos.length||b.drmInfos.some(function(a){return a.keySystem==c})}function Fa(a,b){if(!a.length)return b;if(!b.length)return a;for(var c=[],d=0;d<a.length;d++)for(var e=0;e<b.length;e++)if(a[d].keySystem==b[e].keySystem){var f=a[d],e=b[e],g=[],g=g.concat(f.initData||[]),g=g.concat(e.initData||[]),h=[],h=h.concat(f.keyIds),h=h.concat(e.keyIds);c.push({keySystem:f.keySystem,licenseServerUri:f.licenseServerUri||e.licenseServerUri,distinctiveIdentifierRequired:f.distinctiveIdentifierRequired||e.distinctiveIdentifierRequired,persistentStateRequired:f.persistentStateRequired||e.persistentStateRequired,videoRobustness:f.videoRobustness||e.videoRobustness,audioRobustness:f.audioRobustness||e.audioRobustness,serverCertificate:f.serverCertificate||e.serverCertificate,initData:g,keyIds:h});break}return c}function Ga(a){return!a||1==a.length&&1e-6>a.end(0)-a.start(0)?null:a.length?a.end(a.length-1):null}function Ha(a,b){return!(!a||!a.length||1==a.length&&1e-6>a.end(0)-a.start(0))&&(b>=a.start(0)&&b<=a.end(a.length-1))}function Ia(a,b){if(!a||!a.length||1==a.length&&1e-6>a.end(0)-a.start(0))return 0;for(var c=0,d=a.length-1;0<=d&&a.end(d)>b;--d)c+=a.end(d)-Math.max(a.start(d),b);return c}function Ja(a){if(!a)return[];for(var b=[],c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b}function Ka(){this.a=new muxjs.mp4.Transmuxer,this.b=null,this.c=[],this.f=!1,this.a.on("data",this.h.bind(this)),this.a.on("done",this.g.bind(this))}function La(a,b){var c=b.replace("mp2t","mp4");return"audio"==a&&(c=c.replace("video","audio")),c}function Ma(a,b,c){return a.b=new t,a.c=[],null==c||a.f||(a.a.setBaseMediaDecodeTime(9e4*c),a.f=!0),b=new Uint8Array(b),a.a.push(b),a.a.flush(),a.b}function Na(a){this.c=null,this.f=a,this.h=this.i=0,this.g=1/0,this.b=this.a=null}function Oa(a,b){b.length?(h("The use of stateless text parsers is deprecated."),sh[a]=Qa.bind(null,b)):sh[a]=b}function Pa(a,b,c,d){return Promise.resolve().then(function(){if(this.c&&this.f)if(null==c||null==d)this.c.parseInit(b);else{var a={periodStart:this.i,segmentStart:c,segmentEnd:d},a=this.c.parseMedia(new Uint8Array(b),a).filter(function(a){return a.startTime>=this.h&&a.startTime<this.g}.bind(this));this.f.append(a),null==this.a&&(this.a=Math.max(c,this.h)),this.b=Math.min(d,this.g)}}.bind(a))}function Qa(a){this.ba=a}function Ra(a,b,c){this.g=a,this.f=b,this.l=c,this.b={},this.a=null,this.c={},this.i=new P,this.j=!1,this.h={}}function Sa(){var a={};return'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="av1",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",video/mp2t; codecs="mp4a.40.2",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(b){a[b]=!!sh[b]||MediaSource.isTypeSupported(b);var c=b.split(";")[0];a[c]=a[c]||a[b]}),a}function Ta(a,b){a.a||(a.a=new Na(a.l)),a.a.c=new sh[b]}function Ua(a,b){if("text"==b)var c=a.a.a;else c=Va(a,b),c=!c||1==c.length&&1e-6>c.end(0)-c.start(0)?null:1==c.length&&0>c.start(0)?0:c.length?c.start(0):null;return c}function Va(a,b){try{return a.b[b].buffered}catch(c){return null}}function Wa(a,b,c,d,e){return"text"==b?Pa(a.a,c,d,e):a.h[b]?Ma(a.h[b],c,d).then(function(a){return Za(this,b,this.Nc.bind(this,b,a.buffer))}.bind(a)):Za(a,b,a.Nc.bind(a,b,c))}function Xa(a,b){return"text"==b?a.a.remove(0,1/0):Za(a,b,a.Dc.bind(a,b,0,a.f.duration))}function Ya(a,b,c,d,e){return"text"==b?(a.a.i=c,a=a.a,a.h=d,a.g=e,Promise.resolve()):Promise.all([Za(a,b,a.Tc.bind(a,b)),Za(a,b,a.xe.bind(a,b,c)),Za(a,b,a.ue.bind(a,b,d,e))])}function Za(a,b,c){if(a.j)return Promise.reject();if(c={start:c,p:new t},a.c[b].push(c),1==a.c[b].length)try{c.start()}catch(d){"QuotaExceededError"==d.name?c.p.reject(new j(2,3,3017,b)):c.p.reject(new j(2,3,3015,d)),_a(a,b)}return c.p}function $a(a,b){if(a.j)return Promise.reject();var c,d=[];for(c in a.b){var e=new t,f={start:function(a){a.resolve()}.bind(null,e),p:e};a.c[c].push(f),d.push(e),1==a.c[c].length&&f.start()}return Promise.all(d).then(function(){var a;try{b()}catch(c){var d=Promise.reject(new j(2,3,3015,c))}for(a in this.b)_a(this,a);return d}.bind(a),function(){return Promise.reject()}.bind(a))}function _a(a,b){a.c[b].shift();var c=a.c[b][0];if(c)try{c.start()}catch(d){c.p.reject(new j(2,3,3015,d)),_a(a,b)}}function ab(a,b,c){return c==b||a>=th&&c==b.split("-")[0]||a>=uh&&c.split("-")[0]==b.split("-")[0]}function bb(a){a=a.toLowerCase().split("-");var b=vh[a[0]];return b&&(a[0]=b),a.join("-")}function cb(a,b,c){var d=a.video;return!(d&&(d.width<b.minWidth||d.width>b.maxWidth||d.width>c.width||d.height<b.minHeight||d.height>b.maxHeight||d.height>c.height||d.width*d.height<b.minPixels||d.width*d.height>b.maxPixels)||a.bandwidth<b.minBandwidth||a.bandwidth>b.maxBandwidth)}function db(a,b,c){var d=!1;return a.variants.forEach(function(a){var e=a.allowedByApplication;a.allowedByApplication=cb(a,b,c),e!=a.allowedByApplication&&(d=!0)}),d}function eb(a,b,c,d){d.variants=d.variants.filter(function(d){return!(a&&a.M&&!Ea(a,d))&&(fb(d.audio,a,b)&&fb(d.video,a,c))}),d.textStreams=d.textStreams.filter(function(a){return!!sh[_(a.mimeType,a.codecs)]})}function fb(b,c,d){if(!b)return!0;var e=null;c&&c.M&&(e=c.w),c=_(b.mimeType,b.codecs);var f,g=_(b.mimeType,b.codecs),h=b.mimeType;for(f in rh){var i=b[f],j=rh[f];i&&(h+="; "+j+'="'+i+'"')}return!(!(sh[g]||MediaSource.isTypeSupported(h)||a.muxjs&&"mp2t"==g.split(";")[0].split("/")[1]&&MediaSource.isTypeSupported(La(b.type,g)))||e&&b.encrypted&&0>e.indexOf(c)||d&&(b.mimeType!=d.mimeType||b.codecs.split(".")[0]!=d.codecs.split(".")[0]))}function gb(a){var b=a.audio,c=a.video,d=b?b.codecs:null,e=c?c.codecs:null,f=[];e&&f.push(e),d&&f.push(d);var g=[];c&&g.push(c.mimeType),b&&g.push(b.mimeType);var g=g[0]||null,h=[];b&&h.push(b.kind),c&&h.push(c.kind);var h=h[0]||null,i=[];return b&&i.push.apply(i,b.roles),c&&i.push.apply(i,c.roles),i=K(i),a={id:a.id,active:!1,type:"variant",bandwidth:a.bandwidth,language:a.language,label:null,kind:h,width:null,height:null,frameRate:null,mimeType:g,codecs:f.join(", "),audioCodec:d,videoCodec:e,primary:a.primary,roles:i,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null},c&&(a.videoId=c.id,a.width=c.width||null,a.height=c.height||null,a.frameRate=c.frameRate||null,a.videoBandwidth=c.bandwidth||null),b&&(a.audioId=b.id,a.channelsCount=b.channelsCount,a.audioBandwidth=b.bandwidth||null,a.label=b.label),a}function hb(a){return{id:a.id,active:!1,type:"text",bandwidth:0,language:a.language,label:a.label,kind:a.kind||null,width:null,height:null,frameRate:null,mimeType:a.mimeType,codecs:a.codecs||null,audioCodec:null,videoCodec:null,primary:a.primary,roles:a.roles,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null}}function ib(a){var b=[],c=ob(a.variants);return a=a.textStreams,c.forEach(function(a){b.push(gb(a))}),a.forEach(function(a){b.push(hb(a))}),b}function jb(a,b,c){return ob(a.variants).map(function(a){var d=gb(a);return a.video&&a.audio?d.active=c==a.video.id&&b==a.audio.id:a.video?d.active=c==a.video.id:a.audio&&(d.active=b==a.audio.id),d})}function kb(a,b){return a.textStreams.map(function(a){var c=hb(a);return c.active=b==a.id,c})}function lb(a,b){for(var c=0;c<a.variants.length;c++)if(a.variants[c].id==b.id)return a.variants[c];return null}function mb(a,b){for(var c=0;c<a.textStreams.length;c++)if(a.textStreams[c].id==b.id)return a.textStreams[c];return null}function nb(a){return a.allowedByApplication&&a.allowedByKeySystem}function ob(a){return a.filter(function(a){return nb(a)})}function pb(a,b,c,d){var e=ob(a.variants),f=e.filter(function(a){return a.primary});f.length||(f=e);var g=f.length?f[0].language:"",f=f.filter(function(a){return a.language==g});if(b){var h=bb(b);[uh,th,0].forEach(function(a){var b=!1;e.forEach(function(c){h=bb(h);var e=bb(c.language);ab(a,h,e)&&(b?f.push(c):(f=[c],b=!0),d&&(d.audio=!0))})})}return c&&(a=rb(f,c),a.length)?a:(a=f.map(function(a){return(a.audio?a.audio.roles:[]).concat(a.video?a.video.roles:[])}).reduce(C,[]),a.length?rb(f,a[0]):f)}function qb(a,b,c,d){var e=a.textStreams,f=e.filter(function(a){return a.primary});f.length||(f=e);var g=f.length?f[0].language:"",f=f.filter(function(a){return a.language==g});if(b){var h=bb(b);[uh,th,0].forEach(function(a){var b=!1;e.forEach(function(c){var e=bb(c.language);ab(a,h,e)&&(b?f.push(c):(f=[c],b=!0),d&&(d.text=!0))})})}return c&&(a=sb(f,c),a.length)?a:(a=f.map(function(a){return a.roles}).reduce(C,[]),a.length?sb(f,a[0]):f)}function rb(a,b){return a.filter(function(a){return a.audio&&0<=a.audio.roles.indexOf(b)||a.video&&0<=a.video.roles.indexOf(b)})}function sb(a,b){return a.filter(function(a){return 0<=a.roles.indexOf(b)})}function tb(a,b,c){for(var d=0;d<c.length;d++)if(c[d].audio==a&&c[d].video==b)return c[d];return null}function ub(a,b,c){function d(a,b){return null==a?null==b:b.id==a}for(var e=0;e<c.length;e++)if(d(a,c[e].audio)&&d(b,c[e].video))return c[e];return null}function vb(a,b){for(var c=a.periods.length-1;0<c;--c)if(b+qh>=a.periods[c].startTime)return c;return 0}function wb(a,b){for(var c=0;c<a.periods.length;++c){var d=a.periods[c];if("text"==b.type){for(var e=0;e<d.textStreams.length;++e)if(d.textStreams[e]==b)return c}else for(e=0;e<d.variants.length;++e){var f=d.variants[e];if(f.audio==b||f.video==b||f.video&&f.video.trickModeVideo==b)return c}}return-1}function xb(){this.h=null,this.c=!1,this.b=new g,this.g=[],this.i=!1,this.a=this.f=null}function yb(a,b){return b.filter(function(b){return cb(b,a,{width:1/0,height:1/0})}).sort(function(a,b){return a.bandwidth-b.bandwidth})}function zb(a){return JSON.stringify(a,function(a,b){if("manager"!=a&&"function"!=typeof b){if(b instanceof Event||b instanceof U){var c,d={};for(c in b){var e=b[c];e&&"object"==typeof e?"detail"==c&&(d[c]=e):c in Event||(d[c]=e)}return d}if(b instanceof TimeRanges)for(d={__type__:"TimeRanges",length:b.length,start:[],end:[]},c=0;c<b.length;++c)d.start.push(b.start(c)),d.end.push(b.end(c));else d="number"==typeof b?isNaN(b)?"NaN":isFinite(b)?b:0>b?"-Infinity":"Infinity":b;return d}})}function Ab(a){return JSON.parse(a,function(a,b){return"NaN"==b?NaN:"-Infinity"==b?-(1/0):"Infinity"==b?1/0:b&&"object"==typeof b&&"TimeRanges"==b.__type__?Bb(b):b})}function Bb(a){return{length:a.length,start:function(b){return a.start[b]},end:function(b){return a.end[b]}}}function Cb(a,b,c,d,e,f){this.L=a,this.g=b,this.M=c,this.j=!1,this.C=d,this.H=e,this.w=f,this.b=this.h=!1,this.B="",this.i=null,this.l=this.pc.bind(this),this.m=this.Gd.bind(this),this.a={video:{},player:{}},this.v=0,this.c={},this.f=null}function Db(a){var b=Ih;b.removeUpdateListener(a.l),b.removeMessageListener("urn:x-cast:com.google.shaka.v2",a.m)}function Eb(a){for(var b in a.c){var c=a.c[b];delete a.c[b],c.reject(new j(1,7,7e3))}}function Fb(a){a=zb(a),Ih.sendMessage("urn:x-cast:com.google.shaka.v2",a,function(){},i)}function Gb(){this.yb=new O,this.fb=this}function Hb(a,b,c){Gb.call(this),this.c=a,this.b=b,this.i=this.g=this.f=this.j=this.h=null,this.a=new Cb(c,this.Be.bind(this),this.Ce.bind(this),this.De.bind(this),this.Ee.bind(this),this.ic.bind(this)),Ib(this)}function Ib(a){a.a.init(),a.i=new P,wh.forEach(function(a){Q(this.i,this.c,a,this.Re.bind(this))}.bind(a)),Ah.forEach(function(a){Q(this.i,this.b,a,this.be.bind(this))}.bind(a)),a.h={};for(var b in a.c)Object.defineProperty(a.h,b,{configurable:!1,enumerable:!0,get:a.Qe.bind(a,b),set:a.Se.bind(a,b)});a.j={};for(b in a.b)Object.defineProperty(a.j,b,{configurable:!1,enumerable:!0,get:a.ae.bind(a,b)});a.f=new Gb,a.f.fb=a.h,a.g=new Gb,a.g.fb=a.j}function Jb(a,b,c,d){Gb.call(this),this.a=a,this.b=b,this.j={video:a,player:b},this.l=c||function(){},this.m=d||function(a){return a},this.i=!1,this.f=!0,this.h=this.g=this.c=null,Kb(this)}function Kb(b){var c=cast.receiver.CastReceiverManager.getInstance();c.onSenderConnected=b.wc.bind(b),c.onSenderDisconnected=b.wc.bind(b),c.onSystemVolumeChanged=b.ad.bind(b),b.g=c.getCastMessageBus("urn:x-cast:com.google.cast.media"),b.g.onMessage=b.Bd.bind(b),b.c=c.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),b.c.onMessage=b.Pd.bind(b),c.start(),wh.forEach(function(a){this.a.addEventListener(a,this.Ac.bind(this,"video"))}.bind(b)),Ah.forEach(function(a){this.b.addEventListener(a,this.Ac.bind(this,"player"))}.bind(b)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?b.b.Vb(3840,2160):b.b.Vb(1920,1080),b.b.addEventListener("loading",function(){this.f=!1,Lb(this)}.bind(b)),b.a.addEventListener("playing",function(){this.f=!1,Lb(this)}.bind(b)),b.a.addEventListener("pause",function(){Lb(this)}.bind(b)),b.b.addEventListener("unloading",function(){this.f=!0,Lb(this)}.bind(b)),b.a.addEventListener("ended",function(){a.setTimeout(function(){this.a&&this.a.ended&&(this.f=!0,Lb(this))}.bind(this),5e3)}.bind(b))}function Lb(a){Promise.resolve().then(function(){this.dispatchEvent(new U("caststatuschanged")),Ob(this,0)}.bind(a))}function Mb(a,b,c){for(var d in b.player)a.b[d](b.player[d]);a.l(c),c=Promise.resolve();var e=a.a.autoplay;b.manifest&&(a.a.autoplay=!1,c=a.b.load(b.manifest,b.startTime),c["catch"](function(a){this.b.dispatchEvent(new U("error",{detail:a}))}.bind(a))),c.then(function(){var a;for(a in b.video){var c=b.video[a];this.a[a]=c}for(a in b.playerAfterLoad)c=b.playerAfterLoad[a],this.b[a](c);this.a.autoplay=e,b.manifest&&(this.a.play(),Ob(this,0))}.bind(a))}function Nb(a,b,c,d){a.i&&(a=zb(b),d?c.getCastChannel(d).send(a):c.broadcast(a))}function Ob(a,b,c){var d=Jh,d={mediaSessionId:0,playbackRate:a.a.playbackRate,playerState:a.f?d.IDLE:a.b.Ra?d.Oc:a.a.paused?d.Qc:d.Rc,currentTime:a.a.currentTime,supportedMediaCommands:15,volume:{level:a.a.volume,muted:a.a.muted}};c&&(d.media=c),Nb(a,{requestId:b,type:"MEDIA_STATUS",status:[d]},a.g)}function Pb(a,b){var c=Qb(a,b);return 1!=c.length?null:c[0]}function Qb(a,b){return Array.prototype.filter.call(a.childNodes,function(a){return a.tagName==b})}function Rb(a){var b=a.firstChild;return b&&b.nodeType==Node.TEXT_NODE?a.textContent.trim():null}function Sb(a,b,c,d){var e=null;return a=a.getAttribute(b),null!=a&&(e=c(a)),null==e?void 0!=d?d:null:e}function Tb(a){return a?(/^\d+\-\d+\-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a)&&(a+="Z"),a=Date.parse(a),isNaN(a)?null:Math.floor(a/1e3)):null}function Ub(a){return a&&(a=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a))?(a=31536e3*Number(a[1]||null)+2592e3*Number(a[2]||null)+86400*Number(a[3]||null)+3600*Number(a[4]||null)+60*Number(a[5]||null)+Number(a[6]||null),isFinite(a)?a:null):null}function Vb(a){var b=/([0-9]+)-([0-9]+)/.exec(a);return b?(a=Number(b[1]),isFinite(a)?(b=Number(b[2]),isFinite(b)?{start:a,end:b}:null):null):null}function Wb(a){return a=Number(a),a%1?null:a}function Xb(a){return a=Number(a),!(a%1)&&0<a?a:null}function Yb(a){return a=Number(a),!(a%1)&&0<=a?a:null}function Zb(a){var b;return a=(b=a.match(/^(\d+)\/(\d+)$/))?Number(b[1]/b[2]):Number(a),isNaN(a)?null:a}function $b(a,b,c){a=bc(a);var d=null,e=[],f=[],g=a.map(function(a){return a.keyId}).filter(E);if(g.length&&1<g.filter(F).length)throw new j(2,4,4010);c||(f=a.filter(function(a){return"urn:mpeg:dash:mp4protection:2011"!=a.Hc||(d=a.init||d,!1)}),f.length&&(e=ac(d,b,f),e.length||(e=[W("",d)]))),!a.length||!c&&f.length||(e=Y(Kh).map(function(a){return W(a,d)}));var h=g[0]||null;return h&&e.forEach(function(a){a.initData.forEach(function(a){a.keyId=h})}),{ec:h,$e:d,drmInfos:e,gc:!0}}function _b(a,b,c,d){var e=$b(a,b,d);if(c.gc)a=1==c.drmInfos.length&&!c.drmInfos[0].keySystem,b=!e.drmInfos.length,(!c.drmInfos.length||a&&!b)&&(c.drmInfos=e.drmInfos),c.gc=!1;else if(0<e.drmInfos.length&&(c.drmInfos=c.drmInfos.filter(function(a){return e.drmInfos.some(function(b){return b.keySystem==a.keySystem})}),!c.drmInfos.length))throw new j(2,4,4008);return e.ec||c.ec}function ac(a,b,c){return c.map(function(c){var d=Kh[c.Hc];if(d){var e=c.init||a,f="";if(c.node&&c.node.childNodes&&0<c.node.childNodes.length)for(var g=0;g<c.node.childNodes.length;g++){var h=c.node.childNodes[g];"ms:laurl"===h.nodeName&&h instanceof Element&&(f=h.getAttribute("licenseUrl"))}if(!f&&"com.microsoft.playready"===d&&e&&0<e.length&&"cenc"===e[0].initDataType)a:{if((f=e[0].initData)&&!(f.buffer.byteLength%2)&&(f=String.fromCharCode.apply(null,new Uint16Array(f.buffer)),c=f.indexOf("<WRMHEADER"))&&(f=f.substr(c))){if(f=(new DOMParser).parseFromString(f,"application/xml"),f.getElementsByTagName("LA_URL")[0]&&(c=f.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue)){f=c;break a}if(f.getElementsByTagName("LUI_URL")[0]&&(f=f.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue))break a}f=""}return d=W(d,e),d.licenseServerUri=f?f:"",[d]}return b(c.node)||[]}).reduce(C,[])}function bc(a){return a.map(function(a){var b=a.getAttribute("schemeIdUri"),c=a.getAttribute("cenc:default_KID"),d=Qb(a,"cenc:pssh").map(Rb);if(!b)return null;if(b=b.toLowerCase(),c&&(c=c.replace(/-/g,"").toLowerCase(),0<=c.indexOf(" ")))throw new j(2,4,4009);var e=[];try{e=d.map(function(a){return{initDataType:"cenc",initData:ja(a),keyId:null}})}catch(f){throw new j(2,4,4007)}return{node:a,Hc:b,keyId:c,init:0<e.length?e:null}}).filter(E)}function cc(b,c,d,e,f){null!=f&&(f=Math.round(f));var g={RepresentationID:c,Number:d,Bandwidth:e,Time:f};return b.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(b,c,d){if("$$"==b)return"$";var e=g[c];return null==e?b:("RepresentationID"==c&&d&&(d=void 0),b=e.toString(),d=a.parseInt(d,10)||1,Array(Math.max(0,d-b.length)+1).join("0")+b)})}function dc(a,b){var c=ec(a,b,"timescale"),d=1;c&&(d=Xb(c)||1),c=ec(a,b,"duration"),(c=Xb(c||""))&&(c/=d);var e=ec(a,b,"startNumber"),f=Number(ec(a,b,"presentationTimeOffset"))||0,g=Yb(e||"");null!=e&&null!=g||(g=1);var h=fc(a,b,"SegmentTimeline"),e=null;if(h){for(var e=d,i=a.T.duration||1/0,h=Qb(h,"S"),j=[],k=0,l=0;l<h.length;++l){var m=h[l],n=Sb(m,"t",Yb),o=Sb(m,"d",Yb),m=Sb(m,"r",Wb);if(null!=n&&(n-=f),!o)break;if(n=null!=n?n:k,m=m||0,0>m)if(l+1<h.length){if(m=Sb(h[l+1],"t",Yb),null==m)break;if(n>=m)break;m=Math.ceil((m-n)/o)-1}else{if(1/0==i)break;if(n/e>=i)break;m=Math.ceil((i*e-n)/o)-1}0<j.length&&n!=k&&(j[j.length-1].end=n/e);for(var p=0;p<=m;++p)k=n+o,j.push({start:n/e,end:k/e,Oe:n}),n=k}e=j}return{timescale:d,R:c,Aa:g,Y:f/d||0,ac:f,K:e}}function ec(a,b,c){return[b(a.A),b(a.U),b(a.W)].filter(E).map(function(a){return a.getAttribute(c)}).reduce(function(a,b){return a||b})}function fc(a,b,c){return[b(a.A),b(a.U),b(a.W)].filter(E).map(function(a){return Pb(a,c)}).reduce(function(a,b){return a||b})}function gc(a,b){var c=new DOMParser;try{var d=aa(a),e=c.parseFromString(d,"text/xml")}catch(f){}if(e&&e.documentElement.tagName==b)var g=e.documentElement;return g&&0<g.getElementsByTagName("parsererror").length?null:g}function hc(a,b,c,d,e,f){for(var g=a.getAttribute("xlink:href"),h=a.getAttribute("xlink:actuate")||"onRequest",i=0;i<a.attributes.length;i++){var k=a.attributes[i].nodeName;-1!=k.indexOf("xlink:")&&(a.removeAttribute(k),--i)}if(5<=f)return Promise.reject(new j(2,4,4028));if("onLoad"!=h)return Promise.reject(new j(2,4,4027));var l=V([d],[g]);return e.request(0,I(l,b)).then(function(d){if(d=gc(d.data,a.tagName),!d)return Promise.reject(new j(2,4,4001,g));for(;a.childNodes.length;)a.removeChild(a.childNodes[0]);for(;d.childNodes.length;){var h=d.childNodes[0];d.removeChild(h),a.appendChild(h)}for(h=0;h<d.attributes.length;h++){var i=d.attributes[h].nodeName,k=d.getAttribute(i);a.setAttribute(i,k)}return ic(a,b,c,l[0],e,f+1)}.bind(a))}function ic(a,b,c,d,e,f){if(f=f||0,a.getAttribute("xlink:href")){var g=hc(a,b,c,d,e,f);return c&&(g=g["catch"](function(){return ic(a,b,c,d,e,f)})),g}for(g=0;g<a.childNodes.length;g++){var h=a.childNodes[g];h instanceof Element&&"urn:mpeg:dash:resolve-to-zero:2013"==h.getAttribute("xlink:href")&&(a.removeChild(h),--g)}for(var i=[],g=0;g<a.childNodes.length;g++)h=a.childNodes[g],h.nodeType==Node.ELEMENT_NODE&&(h=ic(h,b,c,d,e,f),i.push(h));return Promise.all(i).then(function(){return a})}function jc(a,b,c){this.a=a,this.P=b,this.G=c}function kc(a,b,c,d,e,f){this.position=a,this.startTime=b,this.endTime=c,this.a=d,this.P=e,this.G=f}function lc(a,b){this.I=a,this.a=b==Lh,this.s=0}function mc(){throw new j(2,3,3e3)}function nc(){this.c=[],this.b=[],this.a=!1}function oc(a){for(;a.u.da()&&!a.ba.a;)a.ba.sb(a.start,a.u,a.yc)}function pc(a){for(var b=a.u.D();0<b&&!a.ba.a;--b)a.ba.sb(a.start,a.u,a.yc)}function qc(a){return function(b){a(b.u.La(b.u.I.byteLength-b.u.s))}}function rc(a){for(var b=0,c=0;c<a.length;c++)b=b<<8|a.charCodeAt(c);return b}function sc(a,b,c,d){var e,f=(new nc).$("sidx",function(a){e=tc(b,d,c,a)});if(a&&f.parse(a),e)return e;throw new j(2,3,3004)}function tc(a,b,c,d){var e=[];d.u.J(4);var f=d.u.D();if(!f)throw new j(2,3,3005);if(d.version)var g=d.u.Ma(),h=d.u.Ma();else g=d.u.D(),h=d.u.D();d.u.J(2);var i=d.u.Xa();for(a=a+d.size+h,h=0;h<i;h++){var k=d.u.D(),l=(2147483648&k)>>>31,k=2147483647&k,m=d.u.D();if(d.u.J(4),1==l)throw new j(2,3,3006);e.push(new kc(e.length,g/f-b,(g+m)/f-b,function(){return c},a,a+k-1)),g+=m,a+=k}return d.ba.stop(),e}function uc(a){this.a=a}function vc(a,b){for(var c;a.a.length&&(c=a.a[a.a.length-1],c.startTime>=b);)a.a.pop();for(;a.a.length&&(c=a.a[0],0>=c.endTime);)a.a.shift();a.a.length&&(c=a.a[0],c.startTime<qh&&(a.a[0]=new kc(c.position,0,c.endTime,c.a,c.P,c.G)),c=a.a[a.a.length-1],a.a[a.a.length-1]=new kc(c.position,c.startTime,b,c.a,c.P,c.G))}function wc(a){this.b=a,this.a=new lc(a,0),Mh||(Mh=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function xc(a){var b=yc(a);if(7<b.length)throw new j(2,3,3002);for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c,c=yc(a);a:{for(d=0;d<Mh.length;d++)if(ma(c,Mh[d])){d=!0;break a}d=!1}if(d)c=a.b.byteLength-a.a.s;else{if(8==c.length&&224&c[1])throw new j(2,3,3001);for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];c=d}return c=a.a.s+c<=a.b.byteLength?c:a.b.byteLength-a.a.s,d=new DataView(a.b.buffer,a.b.byteOffset+a.a.s,c),a.a.J(c),new zc(b,d)}function yc(a){var b,c=a.a.X();for(b=1;8>=b&&!(c&1<<8-b);b++);if(8<b)throw new j(2,3,3002);var d=new Uint8Array(b);for(d[0]=c,c=1;c<b;c++)d[c]=a.a.X();return d}function zc(a,b){this.id=a,this.a=b}function Ac(a){if(8<a.a.byteLength)throw new j(2,3,3002);if(8==a.a.byteLength&&224&a.a.getUint8(0))throw new j(2,3,3001);for(var b=0,c=0;c<a.a.byteLength;c++)var d=a.a.getUint8(c),b=256*b+d;return b}function Bc(){}function Cc(a,b,c,d,e,f){function g(){return e}var h=[];a=new wc(a.a);for(var i=null,j=null;a.da();){var k=xc(a);if(187==k.id){var l=Dc(k);l&&(k=c*l.Pe,l=b+l.ie,null!=i&&h.push(new kc(h.length,i-f,k-f,g,j,l-1)),i=k,j=l)}}return null!=i&&h.push(new kc(h.length,i-f,d-f,g,j,null)),h}function Dc(a){var b=new wc(a.a);if(a=xc(b),179!=a.id)throw new j(2,3,3013);if(a=Ac(a),b=xc(b),183!=b.id)throw new j(2,3,3012);for(var b=new wc(b.a),c=0;b.da();){var d=xc(b);if(241==d.id){c=Ac(d);break}}return{Pe:a,ie:c}}function Ec(a,b){var c=fc(a,b,"Initialization");if(!c)return null;var d=a.A.Z,e=c.getAttribute("sourceURL");e&&(d=V(a.A.Z,[e]));var e=0,f=null;return(c=Sb(c,"range",Vb))&&(e=c.start,f=c.end),new jc(function(){return d},e,f)}function Fc(a,b){var c=Number(ec(a,Hc,"presentationTimeOffset"))||0,d=ec(a,Hc,"timescale"),e=1;d&&(e=Xb(d)||1);var c=c/e||0,d=Ec(a,Hc),f=a.A.contentType,e=a.A.mimeType.split("/")[1];if("text"!=f&&"mp4"!=e&&"webm"!=e)throw new j(2,4,4006);if("webm"==e&&!d)throw new j(2,4,4005);var f=fc(a,Hc,"RepresentationIndex"),g=ec(a,Hc,"indexRange"),h=a.A.Z,g=Vb(g||"");if(f){var i=f.getAttribute("sourceURL");i&&(h=V(a.A.Z,[i])),g=Sb(f,"range",Vb,g)}if(!g)throw new j(2,4,4002);return e=Gc(a,b,d,h,g.start,g.end,e,c),{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:d,Y:c}}function Gc(a,b,c,d,e,f,g,h){var i=a.presentationTimeline,j=!a.Ea||!a.T.Db,k=a.T.duration,l=b,m=null;return{createSegmentIndex:function(){var a=[l(d,e,f),"webm"==g?l(c.a(),c.P,c.G):null];return l=null,Promise.all(a).then(function(a){var b=a[0];a=a[1]||null,b="mp4"==g?sc(b,e,d,h):(new Bc).parse(b,a,d,h),i.Ia(0,b),m=new uc(b),j&&vc(m,k)})},findSegmentPosition:function(a){return m.find(a)},getSegmentReference:function(a){return m.get(a)}}}function Hc(a){return a.Ya}function Ic(a,b){var c=Ec(a,Jc),d=Lc(a),e=dc(a,Jc),f=e.Aa;f||(f=1);var g=0;if(e.R?g=e.R*(f-1):e.K&&0<e.K.length&&(g=e.K[0].start),d={R:e.R,startTime:g,Aa:f,Y:e.Y,K:e.K,Ha:d},!d.R&&!d.K&&1<d.Ha.length)throw new j(2,4,4002);if(!d.R&&!a.T.duration&&!d.K&&1==d.Ha.length)throw new j(2,4,4002);if(d.K&&!d.K.length)throw new j(2,4,4002);return f=e=null,a.W.id&&a.A.id&&(f=a.W.id+","+a.A.id,e=b[f]),g=Kc(a.T.duration,d.Aa,a.A.Z,d),e?(e.Gb(g),e.Ab(a.presentationTimeline.ca()-a.T.start)):(a.presentationTimeline.Ia(0,g),e=new uc(g),f&&a.Ea&&(b[f]=e)),a.Ea&&a.T.Db||vc(e,a.T.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e),initSegmentReference:c,Y:d.Y}}function Jc(a){return a.sa}function Kc(a,b,c,d){var e=d.Ha.length;d.K&&d.K.length!=d.Ha.length&&(e=Math.min(d.K.length,d.Ha.length));for(var f=[],g=d.startTime,h=0;h<e;h++){var i=d.Ha[h],j=V(c,[i.wd]),k=null!=d.R?g+d.R:d.K?d.K[h].end:g+a;f.push(new kc(h+b,g,k,function(a){return a}.bind(null,j),i.start,i.end)),g=k}return f}function Lc(a){return[a.A.sa,a.U.sa,a.W.sa].filter(E).map(function(a){return Qb(a,"SegmentURL")}).reduce(function(a,b){return 0<a.length?a:b}).map(function(b){b.getAttribute("indexRange")&&!a.lc&&(a.lc=!0);var c=b.getAttribute("media");return b=Sb(b,"mediaRange",Vb,{start:0,end:null}),{wd:c,start:b.start,end:b.end}})}function Mc(a,b,c,d){var e=Qc(a),f=dc(a,Nc),g=ec(a,Nc,"media"),h=ec(a,Nc,"index");if(f={R:f.R,timescale:f.timescale,Aa:f.Aa,Y:f.Y,ac:f.ac,K:f.K,Fb:g,Ua:h},g=0+(f.Ua?1:0),g+=f.K?1:0,g+=f.R?1:0,!g)throw new j(2,4,4002);if(1!=g&&(f.Ua&&(f.K=null),f.R=null),!f.Ua&&!f.Fb)throw new j(2,4,4002);if(f.Ua){if(c=a.A.mimeType.split("/")[1],"mp4"!=c&&"webm"!=c)throw new j(2,4,4006);if("webm"==c&&!e)throw new j(2,4,4005);d=cc(f.Ua,a.A.id,null,a.bandwidth||null,null),d=V(a.A.Z,[d]),a=Gc(a,b,e,d,0,null,c,f.Y)}else f.R?(d||a.presentationTimeline.Hb(f.R),a=Oc(a,f)):(d=b=null,a.W.id&&a.A.id&&(d=a.W.id+","+a.A.id,b=c[d]),g=Pc(a,f),b?(b.Gb(g),b.Ab(a.presentationTimeline.ca()-a.T.start)):(a.presentationTimeline.Ia(0,g),b=new uc(g),d&&a.Ea&&(c[d]=b)),a.Ea&&a.T.Db||vc(b,a.T.duration),a={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:b.find.bind(b),getSegmentReference:b.get.bind(b)});return{createSegmentIndex:a.createSegmentIndex,findSegmentPosition:a.findSegmentPosition,getSegmentReference:a.getSegmentReference,initSegmentReference:e,Y:f.Y}}function Nc(a){return a.Za}function Oc(a,b){var c=a.T.duration,d=b.R,e=b.Aa,f=b.timescale,g=b.Fb,h=a.bandwidth||null,i=a.A.id,j=a.A.Z;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(a){return 0>a||c&&a>=c?null:Math.floor(a/d)},getSegmentReference:function(a){var b=a*d;return 0>b||c&&b>=c?null:new kc(a,b,b+d,function(){var c=cc(g,i,a+e,h,b*f);return V(j,[c])},0,null)}}}function Pc(a,b){for(var c=[],d=0;d<b.K.length;d++){var e=d+b.Aa;c.push(new kc(e,b.K[d].start,b.K[d].end,function(a,b,c,d,e,f){return a=cc(a,b,e,c,f),V(d,[a]).map(function(a){return a.toString()})}.bind(null,b.Fb,a.A.id,a.bandwidth||null,a.A.Z,e,b.K[d].Oe+b.ac),0,null))}return c}function Qc(a){var b=ec(a,Nc,"initialization");if(!b)return null;var c=a.A.id,d=a.bandwidth||null,e=a.A.Z;return new jc(function(){var a=cc(b,c,null,d,null);return V(e,[a])},0,null)}function Rc(){var a,b={};for(a in Nh)b[a]=!0;for(a in Oh)b[a]=!0;return["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(a){b[a]=!!Nh[a]}),["mpd","m3u8","ism"].forEach(function(a){b[a]=!!Oh[a]}),b}function Sc(a,b,c,d){var e=d;return e||(d=new k(a).V.split("/").pop().split("."),1<d.length&&(d=d.pop().toLowerCase(),e=Oh[d])),e?Promise.resolve(e):(c=I([a],c),c.method="HEAD",b.request(0,c).then(function(b){return(b=b.headers["content-type"])&&(b=b.toLowerCase()),(e=Nh[b])?e:Promise.reject(new j(2,4,4e3,a))},function(a){return a.severity=2,Promise.reject(a)}))}function Tc(a,b){this.c=a,this.j=b,this.f=this.a=1/0,this.b=1,this.i=0,this.h=!0,this.g=0}function Uc(){this.a=this.b=null,this.g=[],this.c=null,this.i=[],this.h=1,this.j={},this.l=0,this.f=null}function Vc(a){return a.a.networkingEngine.request(0,I(a.g,a.b.retryParameters),function(){return!this.a}.bind(a)).then(function(a){if(this.a)return Wc(this,a.data,a.uri)}.bind(a))}function Wc(a,b,c){if(b=gc(b,"MPD"),!b)throw new j(2,4,4001,c);return ic(b,a.b.retryParameters,a.b.dash.xlinkFailGracefully,c,a.a.networkingEngine).then(function(a){return Xc(this,a,c)}.bind(a))}function Xc(a,b,c){var d=[c];c=Qb(b,"Location").map(Rb).filter(E),0<c.length&&(d=a.g=c),c=b.getAttribute("type")||"static";var e=Qb(b,"BaseURL").map(Rb),f=V(d,e),g=Sb(b,"minBufferTime",Ub);a.l=Sb(b,"minimumUpdatePeriod",Ub,-1);var d=Sb(b,"publishTime",Tb),h=Sb(b,"availabilityStartTime",Tb);null==h&&"dynamic"===c&&(h=d);var d=Sb(b,"timeShiftBufferDepth",Ub),i=Sb(b,"suggestedPresentationDelay",Ub),i=a.b.dash.liveDelay?i+a.b.dash.liveDelay:i,e=Sb(b,"maxSegmentDuration",Ub);if(a.c)var j=a.c.presentationTimeline;else{var k=Math.max(10,1.5*g);j=new Tc(h,null!=i?i:k)}var h=Yc(a,{Ea:"static"!=c,presentationTimeline:j,W:null,
T:null,U:null,A:null,bandwidth:0,lc:!1},f,b),i=h.duration,l=h.periods;return j.ub("static"==c),j.ga(i||1/0),j.Wb(null!=d?d:1/0),j.Hb(e||1),a.c?Promise.resolve():(b=Qb(b,"UTCTiming"),fd(a,f,b,j.S()).then(function(a){if(this.a){if(0<f.length&&-1!==f[0].indexOf("&time_shift=")){var b=f[0],c="time_shift".replace(/[\[\]]/g,"\\$&");b=(b=new RegExp("[?&]"+c+"(=([^&#]*)|&|#|$)").exec(b))?b[2]?decodeURIComponent(b[2].replace(/\+/g," ")):"":null,j.Ub(a-1e3*b)}else j.Ub(a);this.c={presentationTimeline:j,periods:l,offlineSessionIds:[],minBufferTime:g||0}}}.bind(a)))}function Yc(a,b,c,d){var e=Sb(d,"mediaPresentationDuration",Ub),f=[],g=0;d=Qb(d,"Period");for(var h=0;h<d.length;h++){var i=d[h],g=Sb(i,"start",Ub,g),j=Sb(i,"duration",Ub),k=null;if(h!=d.length-1){var l=Sb(d[h+1],"start",Ub);null!=l&&(k=l-g)}else null!=e&&(k=e-g);if(null==k&&(k=j),i=Zc(a,b,c,{start:g,duration:k,node:i,Db:null==k||h==d.length-1}),f.push(i),j=b.W.id,-1==a.i.indexOf(j)&&(a.i.push(j),a.c&&(a.a.filterNewPeriod(i),a.c.periods.push(i))),null==k){g=null;break}g+=k}return a.c||a.a.filterAllPeriods(f),null!=e?{periods:f,duration:e}:{periods:f,duration:g}}function Zc(a,b,c,d){b.W=bd(a,d.node,null,c),b.T=d,b.W.id||(b.W.id="__shaka_period_"+d.start),Qb(d.node,"EventStream").forEach(a.Zd.bind(a,d.start,d.duration)),c=Qb(d.node,"AdaptationSet").map(a.Xd.bind(a,b)).filter(E);var e=c.map(function(a){return a.ke}).reduce(C,[]),f=e.filter(F);if(b.Ea&&e.length!=f.length)throw new j(2,4,4018);var g=c.filter(function(a){return!a.$b});if(c.filter(function(a){return a.$b}).forEach(function(a){var b=a.streams[0],c=a.$b;g.forEach(function(a){a.id==c&&a.streams.forEach(function(a){a.trickModeVideo=b})})}),e=$c(g,"video"),f=$c(g,"audio"),!e.length&&!f.length)throw new j(2,4,4004);for(f.length||(f=[null]),e.length||(e=[null]),b=[],c=0;c<f.length;c++)for(var h=0;h<e.length;h++)_c(a,f[c],e[h],b);for(a=$c(g,"text"),e=[],c=0;c<a.length;c++)e.push.apply(e,a[c].streams);return{startTime:d.start,textStreams:e,variants:b}}function $c(a,b){return a.filter(function(a){return a.contentType==b})}function _c(a,b,c,d){if(b||c)if(b&&c){var e=b.drmInfos,f=c.drmInfos;if(e.length&&f.length?0<Fa(e,f).length:1)for(var g=Fa(b.drmInfos,c.drmInfos),e=0;e<b.streams.length;e++)for(var h=0;h<c.streams.length;h++)f=(c.streams[h].bandwidth||0)+(b.streams[e].bandwidth||0),f={id:a.h++,language:b.language,primary:b.Eb||c.Eb,audio:b.streams[e],video:c.streams[h],bandwidth:f,drmInfos:g,allowedByApplication:!0,allowedByKeySystem:!0},d.push(f)}else for(g=b||c,e=0;e<g.streams.length;e++)f=g.streams[e].bandwidth||0,f={id:a.h++,language:g.language||"und",primary:g.Eb,audio:b?g.streams[e]:null,video:c?g.streams[e]:null,bandwidth:f,drmInfos:g.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},d.push(f)}function ad(b,c){0>b.l||(b.f=a.setTimeout(b.Fe.bind(b),1e3*Math.max(Math.max(3,b.l)-c,0)))}function bd(a,b,c,d){c=c||{contentType:"",mimeType:"",codecs:"",containsEmsgBoxes:!1,frameRate:void 0,Ib:null},d=d||c.Z;var e=Qb(b,"BaseURL").map(Rb);if(0<e.length&&a.b.dash.baseUrl){var f=e[0].split("/");""===f[f.length-1]&&(e=[a.b.dash.baseUrl+f[f.length-4]+"/"+f[f.length-3]+"/"+f[f.length-2]+"/"])}a=b.getAttribute("contentType")||c.contentType;var f=b.getAttribute("mimeType")||c.mimeType,g=b.getAttribute("codecs")||c.codecs,h=Sb(b,"frameRate",Zb)||c.frameRate,i=!!Qb(b,"InbandEventStream").length,j=Qb(b,"AudioChannelConfiguration"),j=cd(j)||c.Ib;return a||(a=gd(f,g)),{Z:V(d,e),Ya:Pb(b,"SegmentBase")||c.Ya,sa:Pb(b,"SegmentList")||c.sa,Za:Pb(b,"SegmentTemplate")||c.Za,width:Sb(b,"width",Yb)||c.width,height:Sb(b,"height",Yb)||c.height,contentType:a,mimeType:f,codecs:g,frameRate:h,containsEmsgBoxes:i||c.containsEmsgBoxes,id:b.getAttribute("id"),Ib:j}}function cd(a){for(var b=0;b<a.length;++b){var c=a[b],d=c.getAttribute("schemeIdUri");if(d&&(c=c.getAttribute("value")))switch(d){case"urn:mpeg:dash:outputChannelPositionList:2012":return c.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(d=parseInt(c,10),!d)continue;return d;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(d=parseInt(c,16)){for(a=0;d;)1&d&&++a,d>>=1;return a}}}return null}function dd(a){var b=0+(a.Ya?1:0);return b+=a.sa?1:0,(b+=a.Za?1:0)?(1!=b&&(a.Ya&&(a.sa=null),a.Za=null),!0):"text"==a.contentType||"application"==a.contentType}function ed(a,b,c,d){return b=V(b,[c]),b=I(b,a.b.retryParameters),b.method=d,a.a.networkingEngine.request(0,b).then(function(a){if("HEAD"==d){if(!a.headers||!a.headers.date)return 0;a=a.headers.date}else a=aa(a.data);return a=Date.parse(a),isNaN(a)?0:a-Date.now()})}function fd(a,b,c,d){c=c.map(function(a){return{scheme:a.getAttribute("schemeIdUri"),value:a.getAttribute("value")}});var e=a.b.dash.clockSyncUri;return d&&!c.length&&e&&c.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:e}),B(c,function(a){var c=a.value;switch(a.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return ed(this,b,c,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return ed(this,b,c,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return a=Date.parse(c),isNaN(a)?0:a-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return Promise.reject();default:return Promise.reject()}}.bind(a))["catch"](function(){return 0})}function gd(a,b){return sh[_(a,b)]?"text":a.split("/")[0]}function hd(a,b,c,d){this.uri=a,this.type=b,this.a=c,this.segments=d||null}function id(a,b,c,d){this.id=a,this.name=b,this.a=c,this.value=d||null}function jd(a,b){this.name=a,this.value=b}function kd(a,b,c){return c=c||null,(a=a.getAttribute(b))?a.value:c}function ld(a,b){this.a=b,this.uri=a}function md(a,b){return a.filter(function(a){return a.name==b})}function nd(a,b){var c=md(a,b);return c.length?c[0]:null}function od(a,b,c){return a.filter(function(a){var d=a.getAttribute("TYPE");return a=a.getAttribute("GROUP-ID"),d.value==b&&a.value==c})}function pd(a,b){return V([a],[b])[0]}function qd(a){this.b=a,this.a=0}function rd(a,b){b.lastIndex=a.a;var c=(c=b.exec(a.b))?{position:c.index,length:c[0].length,ne:c}:null;return a.a!=a.b.length&&c&&c.position==a.a?(a.a+=c.length,c.ne):null}function sd(a){return a.a==a.b.length?null:(a=rd(a,/[^ \t\n]*/gm))?a[0]:null}function td(){this.a=0}function ud(a,b,c){b=aa(b),b=b.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var d=b.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(d[0]))throw new j(2,4,4015);b=0;for(var e=[],f=1;f<d.length;)if(/^#(?!EXT)/m.test(d[f]))f+=1;else{var g=d[f];if(g=wd(a.a++,g),0<=Ph.indexOf(g.name))b=1;else if(0<=Qh.indexOf(g.name)){if(1!=b)throw new j(2,4,4017);return d=d.splice(f,d.length-f),a=vd(a,d,e),new hd(c,b,e,a)}e.push(g),f+=1,"EXT-X-STREAM-INF"==g.name&&(g.a.push(new jd("URI",d[f])),f+=1)}return new hd(c,b,e)}function vd(a,b,c){var d=[],e=[];return b.forEach(function(a){/^(#EXT)/.test(a)?(a=wd(this.a++,a),0<=Ph.indexOf(a.name)?c.push(a):e.push(a)):/^#(?!EXT)/m.test(a)||(d.push(new ld(a.trim(),e)),e=[])}.bind(a)),d}function wd(a,b){var c=b.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!c)throw new j(2,4,4016);var d=c[1],e=c[2],c=[];if(e&&0<=e.indexOf("="))for(var f,e=new qd(e),g=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;f=rd(e,g);)c.push(new jd(f[1],f[2]||f[3]));else if(e)return new id(a,d,c,e);return new id(a,d,c)}function xd(a){return new Promise(function(b){var c=xd.parse(a);b({uri:a,data:c.data,headers:{"content-type":c.contentType}})})}function yd(){this.g=this.f=null,this.H=1,this.w={},this.C={},this.M={},this.a={},this.b=null,this.l="",this.v=new td,this.i=this.h=null,this.c=Uh,this.m=null,this.j=0,this.B=1/0}function zd(a,b,c){Wd(a,c).then(function(a){var d=Vh,e=ud(this.v,a.data,c);if(1!=e.type)throw new j(2,4,4017);if(a=nd(e.a,"EXT-X-MEDIA-SEQUENCE"),this.c==d.eb&&!a)throw new j(2,4,4031);var f=b.stream;Nd(this,e,a?Number(a.value):0,f.mimeType,f.codecs).then(function(a){b.tb.replace(a),a=a[a.length-1],nd(e.a,"EXT-X-ENDLIST")&&(Yd(this,d.pa),this.b.ga(a.endTime))}.bind(this))}.bind(a))}function Ad(a,b,c){if(b=ud(a.v,b,c),0!=b.type)throw new j(2,4,4022);return Bd(a,b).then(function(a){if(this.f.filterAllPeriods([a]),this.c!=Vh.pa){var b=3*this.j;this.b.Kc(b),this.h=this.B,this.c==Vh.eb&&this.b.Wb(b)}else{var c,d=1/0,e=1/0;for(c in this.a)b=this.a[c],d=Math.min(d,b.xd),e=Math.min(e,b.duration);this.b.ga(e);for(c in this.a)b=this.a[c],b.stream.presentationTimeOffset=d,b.tb.offset(-d),vc(b.tb,e)}this.m={presentationTimeline:this.b,periods:[a],offlineSessionIds:[],minBufferTime:0}}.bind(a))}function Bd(a,b){var c=b.a,d=md(b.a,"EXT-X-MEDIA").filter(function(a){return"SUBTITLES"==Ud(a,"TYPE")}.bind(a)).map(function(a){return Fd(this,a)}.bind(a));return Promise.all(d).then(function(a){var d=md(c,"EXT-X-STREAM-INF").map(function(a){return Cd(this,a,b)}.bind(this));return Promise.all(d).then(function(b){return{startTime:0,variants:b.reduce(C,[]),textStreams:a}}.bind(this))}.bind(a))}function Cd(a,b,c){var d=kd(b,"CODECS","avc1.42E01E,mp4a.40.2").split(","),e=b.getAttribute("RESOLUTION"),f=null,g=null,h=kd(b,"FRAME-RATE"),i=Number(Ud(b,"BANDWIDTH"));if(e)var j=e.value.split("x"),f=j[0],g=j[1];c=md(c.a,"EXT-X-MEDIA");var k=kd(b,"AUDIO"),l=kd(b,"VIDEO");if(k?c=od(c,"AUDIO",k):l&&(c=od(c,"VIDEO",l)),j=Sd("text",d)){var m=kd(b,"SUBTITLES");m&&(m=od(c,"SUBTITLES",m),m.length&&(a.w[m[0].id].stream.codecs=j)),d.splice(d.indexOf(j),1)}c=c.map(function(a){return Gd(this,a,d)}.bind(a));var n=[],o=[];return Promise.all(c).then(function(a){if(k?n=a:l&&(o=a),n.length||o.length)if(n.length)if(Ud(b,"URI")==n[0].Rb){a="audio";var c=!0}else a="video";else a="audio";else c=!1,1==d.length?(a=Sd("video",d),a=e||h||a?"video":"audio"):(a="video",d=[d.join(",")]);return c?Promise.resolve():Id(this,b,d,a)}.bind(a)).then(function(a){return a&&("audio"==a.stream.type?n=[a]:o=[a]),Dd(this,n,o,i,f,g,h)}.bind(a))}function Dd(a,b,c,d,e,f,g){c.forEach(function(a){(a=a.stream)&&(a.width=Number(e)||void 0,a.height=Number(f)||void 0,a.frameRate=Number(g)||void 0)}.bind(a)),b.length||(b=[null]),c.length||(c=[null]);for(var h=[],i=0;i<b.length;i++)for(var j=0;j<c.length;j++){var k=b[i]?b[i].stream:null,l=c[j]?c[j].stream:null,m=b[i]?b[i].drmInfos:null,n=c[j]?c[j].drmInfos:null;if(k&&l){if(!(m.length&&n.length?0<Fa(m,n).length:1))continue;var o=Fa(m,n)}else k?o=m:l&&(o=n);m=(c[i]?c[i].Rb:"")+" - "+(b[i]?b[i].Rb:""),a.C[m]||(k=Ed(a,k,l,d,o),h.push(k),a.C[m]=k)}return h}function Ed(a,b,c,d,e){return{id:a.H++,language:b?b.language:"und",primary:!!b&&b.primary||!!c&&c.primary,audio:b,video:c,bandwidth:d,drmInfos:e,allowedByApplication:!0,allowedByKeySystem:!0}}function Fd(a,b){return Ud(b,"TYPE"),Gd(a,b,[]).then(function(a){return a.stream})}function Gd(a,b,c){var d=Ud(b,"URI"),d=pd(a.l,d);if(a.a[d])return Promise.resolve(a.a[d]);var e=Ud(b,"TYPE").toLowerCase();"subtitles"==e&&(e="text");var f=bb(kd(b,"LANGUAGE","und")),g=kd(b,"NAME"),h=b.getAttribute("DEFAULT"),i=b.getAttribute("AUTOSELECT"),j=kd(b,"CHANNELS");return Jd(a,d,c,e,f,!!h||!!i,g,"audio"==e?Hd(j):null).then(function(a){return this.a[d]?this.a[d]:(this.w[b.id]=a,this.a[d]=a)}.bind(a))}function Hd(a){return a?(a=a.split("/")[0],parseInt(a,10)):null}function Id(a,b,c,d){var e=Ud(b,"URI"),e=pd(a.l,e);return a.a[e]?Promise.resolve(a.a[e]):Jd(a,e,c,d,"und",!1,null,null).then(function(a){return this.a[e]?this.a[e]:this.a[e]=a}.bind(a))}function Jd(a,b,c,d,e,f,g,h){var i=Vh,k=b;b=pd(a.l,b);var l,m,n="";return Wd(a,b).then(function(a){if(l=ud(this.v,a.data,b),1!=l.type)throw new j(2,4,4017);a=l;var e=Vh,f=nd(a.a,"EXT-X-PLAYLIST-TYPE"),g=nd(a.a,"EXT-X-ENDLIST"),g=f&&"VOD"==f.value||g,f=f&&"EVENT"==f.value&&!g,f=!g&&!f;if(g?Yd(this,e.pa):(f?Yd(this,e.eb):Yd(this,e.Pc),a=Vd(a.a,"EXT-X-TARGETDURATION"),a=Number(a.value),this.j=Math.max(a,this.j),this.B=Math.min(a,this.B)),1==c.length)n=c[0];else{if(a=Sd(d,c),null==a)throw new j(2,4,4025,c);n=a}return Td(this,d,n,l)}.bind(a)).then(function(a){if(m=a,a=nd(l.a,"EXT-X-MEDIA-SEQUENCE"),this.c==i.eb&&!a)throw new j(2,4,4031);return Nd(this,l,a?Number(a.value):0,m,n)}.bind(a)).then(function(a){var b=a[0].startTime,c=a[a.length-1].endTime,i=c-b,o=new uc(a);this.b||Kd(this,c),c=null,"text"!=d&&(c=Ld(l)),this.b.Ia(0,a),a=void 0,"text"==d&&(a="subtitle");var p=[];l.segments.forEach(function(a){a=md(a.a,"EXT-X-KEY"),p.push.apply(p,a)});var q=!1,r=[],s=null;if(p.forEach(function(a){if("NONE"!=Ud(a,"METHOD")){q=!0;var b=Ud(a,"KEYFORMAT");(a=(b=Th[b])?b(a):null)&&(a.keyIds.length&&(s=a.keyIds[0]),r.push(a))}}),q&&!r.length)throw new j(2,4,4026);return a={id:this.H++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:o.find.bind(o),getSegmentReference:o.get.bind(o),initSegmentReference:c,presentationTimeOffset:0,mimeType:m,codecs:n,kind:a,encrypted:q,keyId:s,language:e,label:g||null,type:d,primary:f,trickModeVideo:null,containsEmsgBoxes:!1,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:h},this.M[a.id]=o,{stream:a,tb:o,drmInfos:r,Rb:k,xd:b,duration:i}}.bind(a))}function Kd(a,b){var c=null,d=0;a.c!=Vh.pa&&(c=Date.now()/1e3-b,d=3*a.j),a.b=new Tc(c,d),a.b.ub(a.c==Vh.pa)}function Ld(a){var b=md(a.a,"EXT-X-MAP");if(!b.length)return null;if(1<b.length)throw new j(2,4,4020);var b=b[0],c=Ud(b,"URI"),d=pd(a.uri,c);return a=0,c=null,(b=kd(b,"BYTERANGE"))&&(a=b.split("@"),b=Number(a[0]),a=Number(a[1]),c=a+b-1),new jc(function(){return[d]},a,c)}function Md(a,b,c,d,e){var f=c.a,g=pd(a.uri,c.uri);a=Vd(f,"EXTINF").value.split(","),a=e+Number(a[0]),c=0;var h=null;return(f=nd(f,"EXT-X-BYTERANGE"))&&(c=f.value.split("@"),f=Number(c[0]),c=c[1]?Number(c[1]):b.G+1,h=c+f-1),new kc(d,e,a,function(){return[g]},c,h)}function Nd(a,b,c,d,e){var f=b.segments,g=[],h=pd(b.uri,f[0].uri),i=Md(b,null,f[0],c,0);return Pd(a,b.uri,i,d,e).then(function(a){h.split("/").pop();for(var d=0;d<f.length;++d){var e=g[g.length-1],e=Md(b,e,f[d],c+d,d?e.endTime:a);g.push(e)}return g}.bind(a))}function Od(a,b){var c=a.f.networkingEngine,d=I(b.a(),a.g.retryParameters),e={},f=b.P;e.Range="bytes="+f+"-"+(f+1024-1);var g={};return(f||null!=b.G)&&(f="bytes="+f+"-",null!=b.G&&(f+=b.G),g.Range=f),d.headers=e,c.request(1,d)["catch"](function(){return h("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",d.uris[0]),d.headers=g,c.request(1,d)})}function Pd(a,b,c,d,e){return a.m&&(b=a.a[b].tb.get(c.position))?Promise.resolve(b.startTime):Od(a,c).then(function(a){if("video/mp4"==d||"audio/mp4"==d)return Qd(a.data);if("video/mp2t"==d)return Rd(a.data);if("application/mp4"!=d&&d.indexOf("text/"))throw new j(2,4,4030);a=a.data;var b=_(d,e);if(sh[b]){var c=new Na(null);c.c=new sh[b],b={periodStart:0,segmentStart:0,segmentEnd:0};try{var f=c.c.parseMedia(new Uint8Array(a),b)[0].startTime}catch(g){throw new j(2,2,2009,g)}}else f=0;return f}.bind(a))}function Qd(a){var b=0,c=!1;if((new nc).F("moof",oc).F("traf",oc).$("tfdt",function(a){b=(a.version?a.u.Ma():a.u.D())/9e4,c=!0,a.ba.stop()}).parse(a,!0),!c)throw new j(2,4,4030);return b}function Rd(a){function b(){throw new j(2,4,4030)}a=new lc(new DataView(a),0);for(var c=0;;){c=a.s;var d=a.X();if(71!=d&&b(),16384&a.Xa()||b(),(d=(48&a.X())>>4)&&2!=d||b(),3==d&&(d=a.X(),a.J(d)),1==a.D()>>8)return a.J(3),(c=a.X()>>6)&&1!=c||b(),a.X()||b(),c=a.X(),d=a.Xa(),a=a.Xa(),(1073741824*((14&c)>>1)+((65534&d)<<14|(65534&a)>>1))/9e4;a.seek(c+188),d=a.X(),71!=d&&(a.seek(c+192),d=a.X()),71!=d&&(a.seek(c+204),d=a.X()),71!=d&&b(),a.Gc(1)}}function Sd(a,b){for(var c=Rh[a],d=0;d<c.length;d++)for(var e=0;e<b.length;e++)if(c[d].test(b[e].trim()))return b[e].trim();return"text"==a?"":null}function Td(a,b,c,d){d=pd(d.uri,d.segments[0].uri);var e=new k(d).V.split(".").pop(),f=Sh[b][e];return f?Promise.resolve(f):"text"==b?c&&"vtt"!=c?Promise.resolve("application/mp4"):Promise.resolve("text/vtt"):(b=I([d],a.g.retryParameters),b.method="HEAD",a.f.networkingEngine.request(1,b).then(function(a){if(a=a.headers["content-type"],!a)throw new j(2,4,4021,e);return a.split(";")[0]}))}function Ud(a,b){var c=a.getAttribute(b);if(!c)throw new j(2,4,4023,b);return c.value}function Vd(a,b){var c=nd(a,b);if(!c)throw new j(2,4,4024,b);return c}function Wd(a,b){return a.f.networkingEngine.request(0,I([b],a.g.retryParameters),function(){return!this.f}.bind(a))}function Xd(b,c){null!=b.h&&null!=c&&(b.i=a.setTimeout(b.L.bind(b),1e3*c))}function Yd(b,c){b.c=c,b.b&&b.b.ub(b.c==Vh.pa),b.c==Vh.pa&&null!=b.i&&(a.clearTimeout(b.i),b.i=null,b.h=null)}function Zd(a,b,c,d,e,f){this.a=a,this.c=b,this.l=c,this.B=d,this.L=e,this.H=f,this.b=new P,this.i=!1,this.h=1,this.g=this.f=null,this.C=a.readyState,this.j=!1,this.w=this.M=-1,this.m=this.v=!1,0<a.readyState?this.sc():R(this.b,a,"loadedmetadata",this.sc.bind(this)),b=this.uc.bind(this),Q(this.b,a,"ratechange",this.Ld.bind(this)),Q(this.b,a,"waiting",b),this.g=new fa(b),ha(this.g,.25)}function $d(a,b){0<a.a.readyState?a.a.currentTime=ee(a,b):a.B=b}function _d(a){return 0<a.a.readyState?ee(a,a.a.currentTime):ae(a)}function ae(a){return null!=a.B?ee(a,a.B):(a=a.c.presentationTimeline,1/0>a.ka()?a.ca():a.qb())}function be(a,b){a.f&&(a.f.cancel(),a.f=null),a.h=b,a.a.playbackRate=a.i||0>b?0:b,!a.i&&0>b&&(a.f=new fa(function(){this.a.currentTime+=b/4}.bind(a)),ha(a.f,.25))}function ce(a,b){var c=Ha.bind(null,a.a.buffered),d=1*Math.max(a.c.minBufferTime||0,a.l.rebufferingGoal),e=a.c.presentationTimeline,f=e.qa(),g=e.Fa(d),h=e.Fa(5),d=e.Fa(d+5);return b>f?f:b<e.Fa(0)?c(h)?h:d:b>=g||c(b)?b:d}function de(a,b,c){a.a.currentTime=c;var d=0,e=function(){!this.a||10<=d++||this.a.currentTime!=b||(this.a.currentTime=c,setTimeout(e,100))}.bind(a);setTimeout(e,100)}function ee(a,b){var c=a.c.presentationTimeline.ca();return b<c?c:(c=a.c.presentationTimeline.qa(),b>=c?c?c-.1:0:b)}function fe(a,b,c,d,e,f,g){this.a=a,this.B=b,this.g=c,this.w=d,this.l=e,this.h=f,this.C=g,this.c=[],this.j=new P,this.b=!1,this.i=-1,this.f=null,he(this)}function ge(a){var b=A(a);return b.eventElement=a.eventElement,b}function he(b){ie(b),b.f=a.setTimeout(b.H.bind(b),250)}function ie(b){b.f&&(a.clearTimeout(b.f),b.f=null)}function je(a,b){this.a=b,this.b=a,this.h=null,this.i=1,this.m=Promise.resolve(),this.g=[],this.j={},this.c={},this.v=!1,this.w=null,this.f=this.l=!1}function ke(a){return a.b.periods[vb(a.b,_d(a.a.Wa))]}function le(a){var b=a.c.video||a.c.audio;return b?a.b.periods[b.ya]:null}function me(a){return oe(a,"audio")}function ne(a){return oe(a,"video")}function oe(a,b){var c=a.c[b];return c?c.ra||c.stream:null}function pe(a,b){var c=a.c.video;if(c){var d=c.stream;if(d)if(b){var e=d.trickModeVideo;if(e){var f=c.ra;f||(re(a,e,!1),c.ra=d)}}else(f=c.ra)&&(c.ra=null,re(a,f,!0))}}function qe(a,b,c){b.video&&re(a,b.video,c),b.audio&&re(a,b.audio,c)}function re(a,b,c){var d=a.c[b.type];if(!d&&"text"==b.type&&a.h.ignoreTextStreamFailures)ue(a,{text:b});else if(d){var e=wb(a.b,b);c&&e!=d.ya?te(a):(d.ra&&(b.trickModeVideo?(d.ra=b,b=b.trickModeVideo):d.ra=null),(e=a.g[e])&&e.Na&&(e=a.j[b.id])&&e.Na&&d.stream!=b&&("text"==b.type&&Ta(a.a.N,_(b.mimeType,b.codecs)),d.stream=b,d.rb=!0,c&&(d.va?d.wb=!0:d.za?(d.ua=!0,d.wb=!0):(Le(d),Je(a,d,!0)))))}}function se(a){var b=_d(a.a.Wa);Object.keys(a.c).every(function(a){var c=this.a.N;return"text"==a?(a=c.a,a=b>=a.a&&b<a.b):(a=Va(c,a),a=Ha(a,b)),a}.bind(a))||te(a)}function te(a){for(var b in a.c){var c=a.c[b];c.va||c.ua||(c.za?c.ua=!0:null==Ua(a.a.N,b)?null==c.ta&&Ke(a,c,0):(Le(c),Je(a,c,!1)))}}function ue(a,b,c){var d=vb(a.b,_d(a.a.Wa)),e={},f=[];return b.variant&&b.variant.audio&&(e.audio=b.variant.audio,f.push(b.variant.audio)),b.variant&&b.variant.video&&(e.video=b.variant.video,f.push(b.variant.video)),b.text&&(e.text=b.text,f.push(b.text)),a.a.N.init(e),xe(a),we(a,f).then(function(){if(!this.f)for(var a in e){var b=e[a];this.c[a]||(this.c[a]={stream:b,type:a,Ga:null,la:null,ra:null,rb:!0,ya:d,endOfStream:!1,za:!1,ta:null,ua:!1,wb:!1,va:!1,Qb:!1,Ta:!1,Ec:c||0},Ke(this,this.c[a],0))}}.bind(a))}function ve(a,b){var c=a.g[b];if(c)return c.O;c={O:new t,Na:!1},a.g[b]=c;var d=a.b.periods[b].variants.map(function(a){var b=[];return a.audio&&b.push(a.audio),a.video&&b.push(a.video),a.video&&a.video.trickModeVideo&&b.push(a.video.trickModeVideo),b}).reduce(C,[]).filter(F);return d.push.apply(d,a.b.periods[b].textStreams),a.m=a.m.then(function(){if(!this.f)return we(this,d)}.bind(a)).then(function(){this.f||(this.g[b].O.resolve(),this.g[b].Na=!0)}.bind(a))["catch"](function(a){this.f||(this.g[b].O.reject(),delete this.g[b],this.a.onError(a))}.bind(a)),c.O}function we(a,b){b.map(function(a){return a.id}).filter(F);for(var c=[],d=0;d<b.length;++d){var e=b[d],f=a.j[e.id];f?c.push(f.O):(a.j[e.id]={O:new t,Na:!1},c.push(e.createSegmentIndex()))}return Promise.all(c).then(function(){if(!this.f)for(var a=0;a<b.length;++a){var c=this.j[b[a].id];c.Na||(c.O.resolve(),c.Na=!0)}}.bind(a))["catch"](function(a){if(!this.f)return this.j[e.id].O.reject(),delete this.j[e.id],Promise.reject(a)}.bind(a))}function xe(a){var b=a.b.presentationTimeline.ka();1/0>b?a.a.N.ga(b):a.a.N.ga(Math.pow(2,32))}function ye(a,b){var c=_d(a.a.Wa),d=b.Ga&&b.la?a.b.periods[wb(a.b,b.Ga)].startTime+b.la.endTime:Math.max(c,b.Ec),e=wb(a.b,b.stream),f=vb(a.b,d),g=a.a.N,h=b.type;return"text"==h?(g=g.a,g=null==g.b||g.b<c?0:g.b-Math.max(c,g.a)):(g=Va(g,h),g=Ia(g,c)),h=Math.max(a.i*Math.max(a.b.minBufferTime||0,a.h.rebufferingGoal),a.i*a.h.bufferingGoal),d>=a.b.presentationTimeline.ka()?(b.endOfStream=!0,null):(b.endOfStream=!1,b.ya=f,f!=e?null:g>=h?.5:(d=a.a.N,f=b.type,d="text"==f?d.a.b:Ga(Va(d,f)),b.la&&b.stream==b.Ga?(f=b.la.position+1,d=ze(a,b,e,f)):(f=b.la?b.stream.findSegmentPosition(Math.max(0,a.b.periods[wb(a.b,b.Ga)].startTime+b.la.endTime-a.b.periods[e].startTime)):b.stream.findSegmentPosition(Math.max(0,(d||c)-a.b.periods[e].startTime)),null==f?d=null:(g=null,null==d&&(g=ze(a,b,e,Math.max(0,f-1))),d=g||ze(a,b,e,f))),d?(b.Ec=0,Ae(a,b,c,e,d),null):1))}function ze(a,b,c,d){return c=a.b.periods[c],(b=b.stream.getSegmentReference(d))?(a=a.b.presentationTimeline,d=a.qa(),c.startTime+b.endTime<a.ca()||c.startTime+b.startTime>d?null:b):null}function Ae(a,b,c,d,e){var f=a.b.periods[d],g=b.stream,h=a.b.presentationTimeline.ka(),i=a.b.periods[d+1];d=Ce(a,b,d,f.startTime,i?i.startTime:h),b.za=!0,b.rb=!1,h=Ie(a,e),Promise.all([d,h]).then(function(a){if(!this.f&&!this.l)return De(this,b,c,f,g,e,a[1])}.bind(a)).then(function(){this.f||this.l||(b.za=!1,b.Qb=!1,b.ua||this.a.Lb(),Ke(this,b,0),Fe(this,g))}.bind(a))["catch"](function(a){this.f||this.l||(b.za=!1,"text"==b.type&&this.h.ignoreTextStreamFailures?delete this.c.text:3017==a.code?Be(this,b,a):(b.Ta=!0,a.severity=2,Me(this,a)))}.bind(a))}function Be(a,b,c){if(!Y(a.c).some(function(a){return a!=b&&a.Qb})){var d=Math.round(100*a.i);if(20<d)a.i-=.2;else{if(!(4<d))return b.Ta=!0,a.l=!0,void a.a.onError(c);a.i-=.04}b.Qb=!0}Ke(a,b,4)}function Ce(a,b,c,d,e){return b.rb?(c=Ya(a.a.N,b.type,a.b.periods[c].startTime-b.stream.presentationTimeOffset,d,e),b.stream.initSegmentReference?(a=Ie(a,b.stream.initSegmentReference).then(function(a){if(!this.f)return Wa(this.a.N,b.type,a,null,null)}.bind(a))["catch"](function(a){return b.rb=!0,Promise.reject(a)}),Promise.all([c,a])):c):Promise.resolve()}function De(a,b,c,d,e,f,g){return e.containsEmsgBoxes&&(new nc).$("emsg",a.Yd.bind(a,d,f)).parse(g),Ee(a,b,c).then(function(){if(!this.f)return Wa(this.a.N,b.type,g,f.startTime+d.startTime,f.endTime+d.startTime)}.bind(a)).then(function(){if(!this.f)return b.Ga=e,b.la=f,Promise.resolve()}.bind(a))}function Ee(a,b,c){var d=Ua(a.a.N,b.type);return null==d?Promise.resolve():(c=c-d-a.h.bufferBehind,0>=c?Promise.resolve():a.a.N.remove(b.type,d,d+c).then(function(){}.bind(a)))}function Fe(a,b){if(!a.v&&(a.v=Y(a.c).every(function(a){return"text"==a.type||!a.ua&&!a.va&&a.la}),a.v)){var c=wb(a.b,b);for(a.g[c]||ve(a,c).then(function(){this.a.mc()}.bind(a))["catch"](D),c=0;c<a.b.periods.length;++c)ve(a,c)["catch"](D);a.a.Qd&&a.a.Qd()}}function Ge(a,b){if(b.ya!=wb(a.b,b.stream)){var c=b.ya,d=Y(a.c);d.every(function(a){return a.ya==c})&&d.every(He)&&ve(a,c).then(function(){if(!this.f&&d.every(function(a){var b=wb(this.b,a.stream);return He(a)&&a.ya==c&&b!=c}.bind(this))){var a=this.b.periods[c],b=this.a.nc(a),e={};b.variant&&b.variant.video&&(e.video=b.variant.video),b.variant&&b.variant.audio&&(e.audio=b.variant.audio),b.text&&(e.text=b.text);for(var f in this.c)if(!e[f]&&"text"!=f)return void this.a.onError(new j(2,5,5005));for(f in e)if(!this.c[f]){if("text"!=f)return void this.a.onError(new j(2,5,5005));ue(this,{text:e.text},a.startTime),delete e[f]}for(f in this.c)(a=e[f])?(re(this,a,!1),Ke(this,this.c[f],0)):delete this.c[f];this.a.mc()}}.bind(a))["catch"](D)}}function He(a){return!a.za&&null==a.ta&&!a.ua&&!a.va}function Ie(a,b){var c=I(b.a(),a.h.retryParameters);if(b.P||null!=b.G){var d="bytes="+b.P+"-";null!=b.G&&(d+=b.G),c.headers.Range=d}return a.a.Va.request(1,c).then(function(a){return a.data})}function Je(a,b,c){b.ua=!1,b.wb=!1,b.va=!0,Xa(a.a.N,b.type).then(function(){if(!this.f&&c){var a=this.a.N,d=b.type;return"text"==d?Promise.resolve():Za(a,d,a.bd.bind(a,d))}}.bind(a)).then(function(){this.f||(b.Ga=null,b.la=null,b.va=!1,b.endOfStream=!1,Ke(this,b,0))}.bind(a))}function Ke(b,c,d){c.ta=a.setTimeout(b.He.bind(b,c),1e3*d)}function Le(b){null!=b.ta&&(a.clearTimeout(b.ta),b.ta=null)}function Me(a,b){v(a.w).then(function(){this.a.onError(b),b.handled||this.h.failureCallback(b)}.bind(a))}function Ne(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open(b.method,a,!0),e.responseType="arraybuffer",e.timeout=b.retryParameters.timeout,e.withCredentials=b.allowCrossSiteCredentials,e.onload=function(b){b=b.target;var e=b.getAllResponseHeaders().split("\r\n").reduce(function(a,b){var c=b.split(": ");return a[c[0].toLowerCase()]=c.slice(1).join(": "),a},{});if(200<=b.status&&299>=b.status&&202!=b.status)b.responseURL&&(a=b.responseURL),c({uri:a,data:b.response,headers:e,fromCache:!!e["x-shaka-from-cache"]});else{var f=null;try{f=ca(b.response)}catch(g){}d(new j(401==b.status||403==b.status?2:1,1,1001,a,b.status,f,e))}},e.onerror=function(){d(new j(1,1,1002,a))},e.ontimeout=function(){d(new j(1,1,1003,a))};for(var f in b.headers)e.setRequestHeader(f,b.headers[f]);e.send(b.body)})}function Oe(){this.b=null,this.a=[],this.c={}}function Pe(a,b,c){return Se(a,b,"readwrite",function(a){a.put(c)})}function Qe(a,b,c){return Se(a,"segment","readwrite",function(a){for(var d=0;d<b.length;d++)a["delete"](b[d]).onsuccess=c||function(){}})}function Re(a,b){var c=0;return Se(a,b,"readonly",function(a){a.openCursor(null,"prev").onsuccess=function(a){(a=a.target.result)&&(c=a.key+1)}}).then(function(){return c})}function Se(a,b,c,d){var e={transaction:a.b.transaction([b],c),O:new t};return e.transaction.oncomplete=function(){this.a.splice(this.a.indexOf(e),1),e.O.resolve()}.bind(a),e.transaction.onabort=function(a){this.a.splice(this.a.indexOf(e),1),Ue(e.transaction,e.O,a)}.bind(a),e.transaction.onerror=function(a){a.preventDefault()}.bind(a),b=e.transaction.objectStore(b),d(b),a.a.push(e),e.O}function Te(b,c,d){var e=a.indexedDB.open("shaka_offline_db",1),f=!1,g=new t;return e.onupgradeneeded=function(a){f=!0,a=a.target.result;for(var b in c)a.createObjectStore(b,{keyPath:c[b]})},e.onsuccess=function(a){d&&!f?(a.target.result.close(),setTimeout(function(){Te(this,c,d-1).then(g.resolve,g.reject)}.bind(this),1e3)):(this.b=a.target.result,g.resolve())}.bind(b),e.onerror=Ue.bind(null,e,g),g}function Ue(a,b,c){a.error?b.reject(new j(2,9,9001,a.error)):b.reject(new j(2,9,9002)),c.preventDefault()}function Ve(){if(!a.indexedDB)return Promise.reject(new j(2,9,9e3));var b=new Oe;return b.init({manifest:"key",segment:"key"}).then(function(){return b})}function We(a){if(null!=We.a(a))return We.g(a);var b=We.b(a);return null!=b?We.h(b,a):Promise.reject(new j(2,1,9004,a))}function Xe(a){var b=Ye(a.periods[0],[],new Tc(null,0)),b=ib(b);return{offlineUri:We.f(a.key),originalManifestUri:a.originalManifestUri,duration:a.duration,size:a.size,expiration:void 0==a.expiration?1/0:a.expiration,tracks:b,appMetadata:a.appMetadata}}function Ye(a,b,c){var d=a.streams.filter(af),e=a.streams.filter(bf);return b=$e(d,e,b),d=a.streams.filter(cf).map(_e),a.streams.forEach(function(a){a=Ze(a),c.Ia(0,a)}),{startTime:a.startTime,variants:b,textStreams:d}}function Ze(a){return a.segments.map(function(a,b){return new kc(b,a.startTime,a.endTime,function(){return[a.uri]},0,null)})}function $e(a,b,c){var d=[];d.push.apply(d,a),d.push.apply(d,b);var e=d.every(function(a){return!a.variantIds});if(d.every(function(a){return!!a.variantIds}),e){d.forEach(function(a){a.variantIds=[]});var f=0;a.length&&b.length?a.forEach(function(a){b.forEach(function(b){a.variantIds.push(f),b.variantIds.push(f),f++})}):d.forEach(function(a){a.variantIds.push(f),f++})}var g={};return d.forEach(function(a){a.variantIds.forEach(function(a){g[a]||(g[a]={id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:c,allowedByApplication:!0,allowedByKeySystem:!0})})}),a.forEach(function(a){var b=_e(a);a.variantIds.forEach(function(a){a=g[a],a.language=b.language,a.primary=a.primary||b.primary,a.audio=b})}),b.forEach(function(a){var b=_e(a);a.variantIds.forEach(function(a){a=g[a],a.primary=a.primary||b.primary,a.video=b})}),Y(g)}function _e(a){var b=Ze(a),b=new uc(b);return{id:a.id,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:b.find.bind(b),getSegmentReference:b.get.bind(b),initSegmentReference:a.initSegmentUri?new jc(function(){return[a.initSegmentUri]},0,null):null,presentationTimeOffset:a.presentationTimeOffset,mimeType:a.mimeType,codecs:a.codecs,width:a.width||void 0,height:a.height||void 0,frameRate:a.frameRate||void 0,kind:a.kind,encrypted:a.encrypted,keyId:a.keyId,language:a.language,label:a.label||null,type:a.contentType,primary:a.primary,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null}}function af(a){return"audio"==a.contentType}function bf(a){return"video"==a.contentType}function cf(a){return"text"==a.contentType}function df(a,b,c,d){this.b={},this.l=[],this.m=d,this.j=a,this.v=b,this.w=c,this.i=this.a=null,this.f=this.g=this.h=this.c=0}function ef(a,b,c,d,e){a.b[b]=a.b[b]||[],a.b[b].push({uris:c.a(),P:c.P,G:c.G,dc:d,Sb:e})}function ff(a,b){a.c=0,a.h=0,a.g=0,a.f=0,Y(a.b).forEach(function(a){a.forEach(function(a){null!=a.G?this.c+=a.G-a.P+1:this.g+=a.dc}.bind(this))}.bind(a)),a.a=b,a.a.size=a.c;var c=Y(a.b).map(function(a){var b=0,c=function(){if(!this.m)return Promise.reject(new j(2,9,9002));if(b>=a.length)return Promise.resolve();var d=a[b++];return gf(this,d).then(c)}.bind(this);return c()}.bind(a));return a.b={},a.i=Promise.all(c).then(function(){return Pe(this.j,"manifest",b)}.bind(a)).then(function(){this.l=[]}.bind(a)),a.i}function gf(a,b){var c=I(b.uris,a.w);(b.P||null!=b.G)&&(c.headers.Range="bytes="+b.P+"-"+(null==b.G?"":b.G));var d;return a.v.request(1,c).then(function(a){return this.a?(d=a.data.byteLength,this.l.push(b.Sb.key),b.Sb.data=a.data,Pe(this.j,"segment",b.Sb)):Promise.reject(new j(2,9,9002))}.bind(a)).then(function(){if(!this.a)return Promise.reject(new j(2,9,9002));null==b.G?(this.a.size+=d,this.f+=b.dc):this.h+=d;var a=(this.h+this.f)/(this.c+this.g),c=Xe(this.a);this.m.progressCallback(c,a)}.bind(a))}function hf(){this.a=-1}function jf(a){var b=new Tc(null,0);b.ga(a.duration);var c=a.drmInfo?[a.drmInfo]:[];return{presentationTimeline:b,minBufferTime:10,offlineSessionIds:a.sessionIds,periods:a.periods.map(function(a){return Ye(a,c,b)})}}function kf(a){this.a=null;for(var b=0;b<a.textTracks.length;++b){var c=a.textTracks[b];c.mode="disabled","Shaka Player TextTrack"==c.label&&(this.a=c)}this.a||(this.a=a.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden",0<this.a.cues.length&&this.remove(0,1/0),this.b=this.a.cues}function lf(b){
if(b.startTime>=b.endTime)return null;var c=new VTTCue(b.startTime,b.endTime,b.payload);c.id=b.id,c.lineAlign=b.lineAlign,c.positionAlign=b.positionAlign,c.size=b.size;try{c.align=b.textAlign}catch(d){}if("center"==b.textAlign&&"center"!=c.align&&(c.align="middle"),b.writingDirection==ji?c.vertical="lr":b.writingDirection==ki&&(c.vertical="rl"),b.lineInterpretation==mi&&(c.snapToLines=!1),null!=b.line&&(c.line=b.line),null!=b.position&&(c.position=b.position),a.VTTRegion&&b.region){var e=new VTTRegion;e.viewportAnchorX=b.region.x,e.viewportAnchorY=b.region.y,e.width=b.region.width,e.height=b.region.height,c.region=e}return c}function mf(a,b){for(var c=a.b,d=[],e=0;e<c.length;++e)b(c[e])&&d.push(c[e]);for(e=0;e<d.length;++e)a.a.removeCue(d[e])}function nf(){this.a=Promise.resolve(),this.b=this.c=this.f=!1,this.i=new Promise(function(a){this.g=a}.bind(this))}function of(a){return a.f||(a.a=a.a.then(function(a){return this.c=!0,Promise.resolve(a)}.bind(a),function(a){return this.c=!0,this.b?(this.g(),Promise.reject(this.h)):Promise.reject(a)}.bind(a))),a.f=!0,a.a}function pf(a,b){Gb.call(this),this.C=!1,this.f=a,this.mb=!1,this.w=null,this.m=new P,this.g=this.lb=this.b=this.i=this.a=this.B=this.h=this.jb=this.L=this.M=this.l=this.v=null,this.Sc=1e9,this.hb=[],this.Ra=!1,this.Da=!0,this.Qa=this.Sa=this.ia=null,this.bc=!1,this.ha=null,this.kb=[],this.H={},this.c=Bf(this),this.ib={width:1/0,height:1/0},this.j=Cf(),this.gb=0,this.Pa=this.c.preferredAudioLanguage,this.bb=this.c.preferredTextLanguage,this.xb=this.cb="",this.cc=!0,b&&b(this),this.v=new G(this.Ae.bind(this)),this.jb=sf(this),Q(this.m,this.f,"error",this.Sd.bind(this))}function qf(a){if(!a.ia)return Promise.resolve();var b=Promise.resolve();return a.i&&(b=a.i.stop(),a.i=null),a=a.ia.cancel(new j(2,7,7e3)),Promise.all([b,a])}function rf(a){function b(a){return(a.video?a.video.codecs.split(".")[0]:"")+"-"+(a.audio?a.audio.codecs.split(".")[0]:"")}var c={};a.b.periods.forEach(function(a){a.variants.forEach(function(a){var d=b(a);d in c||(c[d]=[]),c[d].push(a)})});var d=null,e=1/0;$(c,function(a,b){var c=0,f=0;b.forEach(function(a){c+=a.bandwidth||0,++f});var g=c/f;g<e&&(d=a,e=g)}),a.b.periods.forEach(function(a){a.variants=a.variants.filter(function(a){return b(a)==d})})}function sf(b){b.M=new MediaSource;var c=new t;return Q(b.m,b.M,"sourceopen",c.resolve),b.f.src=a.URL.createObjectURL(b.M),c}function tf(a,b){if(a.i&&a.i.configure(a.c.manifest),a.l&&a.l.configure(a.c.drm),a.a){a.a.configure(a.c.streaming);try{a.b.periods.forEach(a.nb.bind(a))}catch(c){a.Oa(c)}Hf(a,ke(a.a),b)}a.g&&(uf(a),a.c.abr.enabled&&!a.Da?a.g.enable():a.g.disable())}function uf(a){a.g.configure?a.g.configure(a.c.abr):(h("AbrManager API has changed. AbrManager.setDefaultEstimate() and AbrManager.setRestrictions() are deprecated. AbrManager.configure() is used instead. Please upgrade to the new API. The old API will be removed in v2.3."),a.g.setDefaultEstimate(a.c.abr.defaultBandwidthEstimate),a.g.setRestrictions(a.c.abr.restrictions))}function vf(a,b,c){b.video&&xf(a,b.video),b.audio&&xf(a,b.audio);var d=le(a.a);b!=tb(me(a.a),ne(a.a),d?d.variants:[])&&a.j.switchHistory.push({timestamp:Date.now()/1e3,id:b.id,type:"variant",fromAdaptation:c,bandwidth:b.bandwidth})}function wf(a,b,c){xf(a,b),a.j.switchHistory.push({timestamp:Date.now()/1e3,id:b.id,type:"text",fromAdaptation:c,bandwidth:null})}function xf(a,b){var c=wb(a.b,b);a.H[c]||(a.H[c]={}),a.H[c][b.type]=b.id}function yf(a){a.m&&(a.m.na(a.M,"sourceopen"),a.m.na(a.f,"loadeddata"),a.m.na(a.f,"playing"),a.m.na(a.f,"pause"),a.m.na(a.f,"ended")),a.f&&(a.f.removeAttribute("src"),a.f.load());var b=Promise.all([a.g?a.g.stop():null,a.l?a.l.o():null,a.L?a.L.o():null,a.h?a.h.o():null,a.B?a.B.o():null,a.a?a.a.o():null,a.i?a.i.stop():null,a.w?a.w.o():null]);return a.l=null,a.L=null,a.h=null,a.B=null,a.a=null,a.i=null,a.w=null,a.b=null,a.lb=null,a.jb=null,a.M=null,a.kb=[],a.H={},a.j=Cf(),b}function zf(a){return a.i?yf(a).then(function(){this.C||(this.Lc(!1),this.jb=sf(this))}.bind(a)):Promise.resolve()}function Af(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0)}}}function Bf(a){return{drm:{retryParameters:w(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},manifest:{retryParameters:w(),dash:{customScheme:function(a){if(a)return null},clockSyncUri:"",liveDelay:0,baseUrl:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1}},streaming:{retryParameters:w(),failureCallback:a.Zc.bind(a),rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1},abrFactory:xb,textDisplayFactory:function(a){return new kf(a)}.bind(null,a.f),abr:{enabled:!0,defaultBandwidthEstimate:5e5,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0}}function Cf(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:0,bufferingTime:0,switchHistory:[],stateHistory:[]}}function Df(a,b,c){a.Da?(a.Qa=b,a.bc=c||!1):qe(a.a,b,c||!1)}function Ef(a){if(a.b){var b=Date.now()/1e3;a.Ra?a.j.bufferingTime+=b-a.gb:a.j.playTime+=b-a.gb,a.gb=b}}function Ff(a,b){function c(a,b){if(!a)return null;var c=a.findSegmentPosition(b-e.startTime);return null==c?null:(c=a.getSegmentReference(c))?c.startTime+e.startTime:null}var d=ne(a.a),e=ke(a.a),f=c(me(a.a),b),d=c(d,b);return null!=d&&null!=f?Math.max(d,f):null!=d?d:null!=f?f:b}function Gf(a,b){if(!b||!b.length)return a.Oa(new j(2,4,4012)),null;if(a.g.setVariants(b),a.g.chooseStreams){h("AbrManager API has changed. AbrManager.chooseStreams() is deprecated. Please implement AbrManager.chooseVariant() to upgrade. The old API will be removed in v2.3.");var c=a.g.chooseStreams(["video","audio"]);return tb(c.audio,c.video,b)}return a.g.chooseVariant()}function Hf(a,b,c){var d=pb(b,a.Pa,a.cb);b=qb(b,a.bb,a.xb),(d=Gf(a,d))&&(vf(a,d,!0),Df(a,d,c)),(c=b[0])&&(wf(a,c,!0),a.Da?a.ha=c:re(a.a,c,!0)),If(a)}function If(a){Promise.resolve().then(function(){this.C||this.dispatchEvent(new U("adaptation"))}.bind(a))}function Jf(a){Promise.resolve().then(function(){this.C||this.dispatchEvent(new U("trackschanged"))}.bind(a))}function Kf(a){a.dispatchEvent(new U("texttrackvisibility"))}function Lf(a,b){var c=I(b.a(),w());if(b.P||null!=b.G){var d="bytes="+b.P+"-";null!=b.G&&(d+=b.G),c.headers.Range=d}return a.v.request(1,c).then(function(a){return a.data})}function Mf(a){if(!a||a.constructor!=pf)throw new j(2,9,9008);this.a=null,this.b=a,this.c=Pf(this),this.f=null,this.v=!1,this.j=null,this.i=-1,this.l=0,this.h=this.g=null}function Nf(){return!!a.indexedDB}function Of(a,b,c,d){function e(){}var f,g,h,i=a.b.v,j=a.b.getConfiguration();return Sc(b,i,j.manifest.retryParameters,d).then(function(a){return Uf(this),h=new a,h.configure(j.manifest),h.start(b,{networkingEngine:i,filterAllPeriods:this.m.bind(this),filterNewPeriod:this.w.bind(this),onTimelineRegionAdded:function(){},onEvent:function(){},onError:c})}.bind(a)).then(function(a){return Uf(this),f=a,g=new oa({Va:i,onError:c,Kb:e,onExpirationUpdated:function(){},onEvent:function(){}}),g.configure(j.drm),g.init(f,this.c.usePersistentLicense||!1)}.bind(a)).then(function(){return Uf(this),Sf(f)}.bind(a)).then(function(){return Uf(this),ra(g)}.bind(a)).then(function(){return Uf(this),h.stop()}.bind(a)).then(function(){return Uf(this),{manifest:f,$c:g}}.bind(a))["catch"](function(a){if(h)return h.stop().then(function(){throw a});throw a})}function Pf(a){return{trackSelectionCallback:a.B.bind(a),progressCallback:function(a,b){if(a||b)return null},usePersistentLicense:!0}}function Qf(b){if(!a.indexedDB)return Promise.reject(new j(2,9,9e3));if(b.a)return Promise.resolve();var c=b.b.v,d=b.b.getConfiguration().streaming.retryParameters,e=b.c;return Ve().then(function(a){this.a=a,this.h=new df(a,c,d,e)}.bind(b))}function Rf(a){var b=a.f?a.f.o():Promise.resolve();return a.f=null,a.g=null,a.v=!1,a.j=null,a.i=-1,b}function Sf(a){var b=a.periods.map(function(a){return a.variants}).reduce(C,[]).map(function(a){var b=[];return a.audio&&b.push(a.audio),a.video&&b.push(a.video),b}).reduce(C,[]).filter(F);return a=a.periods.map(function(a){return a.textStreams}).reduce(C,[]),b.push.apply(b,a),Promise.all(b.map(function(a){return a.createSegmentIndex()}))}function Tf(a,b,c,d,e){for(var f=[],g=a.g.presentationTimeline.ca(),h=g,i=c.findSegmentPosition(g),j=null!=i?c.getSegmentReference(i):null;j;)h=a.a.c.segment++,ef(a.h,c.type,j,(j.endTime-j.startTime)*d/8,{key:h,data:null,manifestKey:a.i,streamNumber:c.id,segmentNumber:h}),f.push({startTime:j.startTime,endTime:j.endTime,uri:We.c(a.i,c.id,h)}),h=j.endTime+b.startTime,j=c.getSegmentReference(++i);return a.l=Math.max(a.l,h-g),b=null,c.initSegmentReference&&(h=a.a.c.segment++,b=We.c(a.i,c.id,h),ef(a.h,c.contentType,c.initSegmentReference,0,{key:h,data:null,manifestKey:a.i,streamNumber:c.id,segmentNumber:-1})),a=[],null!=e&&a.push(e),{id:c.id,primary:c.primary,presentationTimeOffset:c.presentationTimeOffset||0,contentType:c.type,mimeType:c.mimeType,codecs:c.codecs,frameRate:c.frameRate,kind:c.kind,language:c.language,label:c.label,width:c.width||null,height:c.height||null,initSegmentUri:b,encrypted:c.encrypted,keyId:c.keyId,segments:f,variantIds:a}}function Uf(a){if(!a.b)throw new j(2,9,9002)}function Vf(a){Xh.push(a)}function Wf(a,b,c){if("input"==a)switch(this.type){case"range":a="change"}Yh.call(this,a,b,c)}function Xf(a){this.f=[],this.b=[],this.a=[],(new nc).$("pssh",this.c.bind(this)).parse(a.buffer)}function Yf(a,b){try{var c=new Zf(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function Zf(a,b){this.keySystem=a;for(var c=!1,d=0;d<b.length;++d){var e=b[d],f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label},g=!1;if(e.audioCapabilities)for(var h=0;h<e.audioCapabilities.length;++h){var i=e.audioCapabilities[h];if(i.contentType){g=!0;var j=i.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,j)&&(f.audioCapabilities.push(i),c=!0)}}if(e.videoCapabilities)for(h=0;h<e.videoCapabilities.length;++h)i=e.videoCapabilities[h],i.contentType&&(g=!0,j=i.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,j)&&(f.videoCapabilities.push(i),c=!0));if(g||(c=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==e.persistentState&&(c=!1),c)return void(this.a=f)}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function $f(a){var b=this.mediaKeys;return b&&b!=a&&ag(b,null),delete this.mediaKeys,(this.mediaKeys=a)?ag(a,this):Promise.resolve()}function _f(a){this.a=new MSMediaKeys(a),this.b=new P}function ag(a,b){function c(){b.msSetMediaKeys(d.a),b.removeEventListener("loadedmetadata",c)}if(S(a.b),!b)return Promise.resolve();Q(a.b,b,"msneedkey",cg);var d=a;try{return 1<=b.readyState?b.msSetMediaKeys(a.a):b.addEventListener("loadedmetadata",c),Promise.resolve()}catch(e){return Promise.reject(e)}}function bg(a){Gb.call(this),this.c=null,this.g=a,this.b=this.a=null,this.f=new P,this.sessionId="",this.expiration=NaN,this.closed=new t,this.keyStatuses=new fg}function cg(a){var b=document.createEvent("CustomEvent");b.initCustomEvent("encrypted",!1,!1,null),b.initDataType="cenc";var c=a.initData;if(c){var d=new Xf(c);if(1>=d.a.length)a=c;else{var e=[];for(a=0;a<d.a.length;a++)e.push(c.subarray(d.a[a].start,d.a[a].end+1));for(c=K(e,dg),a=d=0;a<c.length;a++)d+=c[a].length;for(d=new Uint8Array(d),a=e=0;a<c.length;a++)d.set(c[a],e),e+=c[a].length;a=d}}else a=c;b.initData=a,this.dispatchEvent(b)}function dg(a,b){return ma(a,b)}function eg(a,b){var c=a.keyStatuses;c.size=void 0==b?0:1,c.a=b,a.dispatchEvent(new U("keystatuseschange"))}function fg(){this.size=0,this.a=void 0}function gg(){return Promise.reject(Error("The key system specified is not supported."))}function hg(a){return a?Promise.reject(Error("MediaKeys not supported.")):Promise.resolve()}function ig(){throw new TypeError("Illegal constructor.")}function jg(){throw new TypeError("Illegal constructor.")}function kg(b){$h=b,_h=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=mg,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ng,a.MediaKeys=pg,a.MediaKeySystemAccess=og}function lg(a){var b=$h;return b?b+a.charAt(0).toUpperCase()+a.slice(1):a}function mg(a,b){try{var c=new og(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function ng(a){var b=this.mediaKeys;return b&&b!=a&&qg(b,null),delete this.mediaKeys,(this.mediaKeys=a)&&qg(a,this),Promise.resolve()}function og(a,b){this.a=this.keySystem=a;var c=!1;"org.w3.clearkey"==a&&(this.a="webkit-org.w3.clearkey",c=!1);for(var d=!1,e=document.getElementsByTagName("video"),f=e.length?e[0]:document.createElement("video"),g=0;g<b.length;++g){e=b[g];var h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label},i=!1;if(e.audioCapabilities)for(var j=0;j<e.audioCapabilities.length;++j){var k=e.audioCapabilities[j];if(k.contentType){var i=!0,l=k.contentType.split(";")[0];f.canPlayType(l,this.a)&&(h.audioCapabilities.push(k),d=!0)}}if(e.videoCapabilities)for(j=0;j<e.videoCapabilities.length;++j)k=e.videoCapabilities[j],k.contentType&&(i=!0,f.canPlayType(k.contentType,this.a)&&(h.videoCapabilities.push(k),d=!0));if(i||(d=f.canPlayType("video/mp4",this.a)||f.canPlayType("video/webm",this.a)),"required"==e.persistentState&&(c?(h.persistentState="required",h.sessionTypes=["persistent-license"]):d=!1),d)return void(this.b=h)}throw c="Unsupported keySystem","org.w3.clearkey"!=a&&"com.widevine.alpha"!=a||(c="None of the requested configurations were supported."),c=Error(c),c.name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c}function pg(a){this.g=a,this.b=null,this.a=new P,this.c=[],this.f={}}function qg(a,b){a.b=b,S(a.a);var c=$h;b&&(Q(a.a,b,c+"needkey",a.Wd.bind(a)),Q(a.a,b,c+"keymessage",a.Vd.bind(a)),Q(a.a,b,c+"keyadded",a.Td.bind(a)),Q(a.a,b,c+"keyerror",a.Ud.bind(a)))}function rg(a,b){var c=a.f[b];return c?c:(c=a.c.shift())?(c.sessionId=b,a.f[b]=c):null}function sg(a,b,c){Gb.call(this),this.f=a,this.h=!1,this.a=this.b=null,this.c=b,this.g=c,this.sessionId="",this.expiration=NaN,this.closed=new t,this.keyStatuses=new vg}function tg(a,b,c){if(a.h)return Promise.reject(Error("The session is already initialized."));a.h=!0;try{if("persistent-license"==a.g)if(c)var d=new Uint8Array(da("LOAD_SESSION|"+c));else{var e=da("PERSISTENT|"),f=new Uint8Array(e.byteLength+b.byteLength);f.set(new Uint8Array(e),0),f.set(new Uint8Array(b),e.byteLength),d=f}else d=new Uint8Array(b)}catch(g){return Promise.reject(g)}a.b=new t;var h=lg("generateKeyRequest");try{a.f[h](a.c,d)}catch(g){if("InvalidStateError"!=g.name)return a.b=null,Promise.reject(g);setTimeout(function(){try{this.f[h](this.c,d)}catch(a){this.b.reject(a),this.b=null}}.bind(a),10)}return a.b}function ug(a,b){var c=a.keyStatuses;c.size=void 0==b?0:1,c.a=b,a.dispatchEvent(new U("keystatuseschange"))}function vg(){this.size=0,this.a=void 0}function wg(){var a=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var b=a.apply(this,arguments);return b.abort=function(){},b}}function xg(){var a=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(b,c){return a.call(this,b,c-.001)}}function yg(){var a=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(){for(var b,c=0,d=0;d<this.sourceBuffers.length;++d)b=this.sourceBuffers[d],b=b.buffered.end(b.buffered.length-1),c=Math.max(c,b);if(!isNaN(this.duration)&&c<this.duration)for(this.kc=!0,d=0;d<this.sourceBuffers.length;++d)b=this.sourceBuffers[d],b.fc=!1;return a.apply(this,arguments)};var b=!1,c=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var a=c.apply(this,arguments);return a.mediaSource_=this,a.addEventListener("updateend",zg,!1),b||(this.addEventListener("sourceclose",Ag,!1),b=!0),a}}function zg(a){var b=a.target,c=b.mediaSource_;if(c.kc){for(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),b.fc=!0,a=0;a<c.sourceBuffers.length;++a)if(0==c.sourceBuffers[a].fc)return;c.kc=!1}}function Ag(a){a=a.target;for(var b=0;b<a.sourceBuffers.length;++b)a.sourceBuffers[b].removeEventListener("updateend",zg,!1);a.removeEventListener("sourceclose",Ag,!1)}function Bg(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){return"mp2t"!=b.split(/ *; */)[0].split("/")[1]&&a(b)}}function Cg(){var a=MediaSource.isTypeSupported,b=/^dv(?:he|av)\./;MediaSource.isTypeSupported=function(c){for(var d,e,f=c.split(/ *; */),g=f[0],h={},i=1;i<f.length;++i)d=f[i].split("="),e=d[0],d=d[1].replace(/"(.*)"/,"$1"),h[e]=d;if(d=h.codecs,!d)return a(c);var j=!1,k=!1;c=d.split(",").filter(function(a){return b.test(a)?(k=!0,!1):(/^(hev|hvc)1\.2/.test(a)&&(j=!0),!0)}),k&&(j=!1),h.codecs=c.join(","),j&&(h.eotf="smpte2084");for(e in h)d=h[e],g+="; "+e+'="'+d+'"';return cast.__platform__.canDisplayType(g)}}function Dg(a){if(this.c=[],this.b=[],this.Ba=ai,a)try{a(this.ma.bind(this),this.a.bind(this))}catch(b){this.a(b)}}function Eg(a){var b=new Dg;return b.ma(void 0),b.then(function(){return a})}function Fg(a){var b=new Dg;return b.a(a),b}function Gg(a){function b(a,b,c){a.Ba==ai&&(e[b]=c,d++,d==e.length&&a.ma(e))}var c=new Dg;if(!a.length)return c.ma([]),c;for(var d=0,e=Array(a.length),f=c.a.bind(c),g=0;g<a.length;++g)a[g]&&a[g].then?a[g].then(b.bind(null,c,g),f):b(c,g,a[g]);return c}function Hg(a){for(var b=new Dg,c=b.ma.bind(b),d=b.a.bind(b),e=0;e<a.length;++e)a[e]&&a[e].then?a[e].then(c,d):c(a[e]);return b}function Ig(a,b,c){ci.push(function(){if(c&&"function"==typeof c){try{var a=c(this.f)}catch(d){return void b.a(d)}try{var e=a&&a.then}catch(d){return void b.a(d)}a instanceof Dg?a==b?b.a(new TypeError("Chaining cycle detected")):a.then(b.ma.bind(b),b.a.bind(b)):e?Jg(a,e,b):b.ma(a)}else 1==this.Ba?b.ma(this.f):b.a(this.f)}.bind(a)),null==bi&&(bi=Lg(Kg))}function Jg(a,b,c){try{var d=!1;b.call(a,function(a){if(!d){d=!0;try{var b=a&&a.then}catch(e){return void c.a(e)}b?Jg(a,b,c):c.ma(a)}},c.a.bind(c))}catch(e){c.a(e)}}function Kg(){for(;ci.length;){null!=bi&&(Mg(bi),bi=null);var a=ci;ci=[];for(var b=0;b<a.length;++b)a[b]()}}function Lg(){return 0}function Mg(){}function Ng(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Og(b,c,d){return new a.TextTrackCue(b,c,d)}function Pg(b,c,d){return new a.TextTrackCue(b+"-"+c+"-"+d,b,c,d)}function Qg(a,b,c){this.startTime=a,this.endTime=b,this.payload=c,this.region={x:0,y:0,width:100,height:100},this.position=null,this.positionAlign=di,this.size=100,this.textAlign=ei,this.writingDirection=ii,this.lineInterpretation=li,this.line=null,this.lineHeight="",this.lineAlign=ni,this.displayAlign=gi,this.fontSize=this.backgroundColor=this.color="",this.fontWeight=pi,this.fontStyle=qi,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""}function Rg(){}function Sg(a){var b=[];if(!a)return b;for(var c=a.childNodes,d=0;d<c.length;d++){var e="span"==c[d].nodeName&&"p"==a.nodeName;c[d].nodeType!=Node.ELEMENT_NODE||"br"==c[d].nodeName||e||(e=Sg(c[d]),b=b.concat(e))}return b.length||b.push(a),b}function Tg(a,b){for(var c=a.childNodes,d=0;d<c.length;d++)if("br"==c[d].nodeName&&0<d)c[d-1].textContent+="\n";else if(0<c[d].childNodes.length)Tg(c[d],b);else if(b){var e=c[d].textContent.trim(),e=e.replace(/\s+/g," ");c[d].textContent=e}}function Ug(a,b){for(var c=b.split(" "),d=0;d<c.length;d++)switch(c[d]){case"underline":0>a.textDecoration.indexOf("underline")&&a.textDecoration.push("underline");break;case"noUnderline":0<=a.textDecoration.indexOf("underline")&&M(a.textDecoration,"underline");break;case"lineThrough":0>a.textDecoration.indexOf("lineThrough")&&a.textDecoration.push("lineThrough");break;case"noLineThrough":0<=a.textDecoration.indexOf("lineThrough")&&M(a.textDecoration,"lineThrough");break;case"overline":0>a.textDecoration.indexOf("overline")&&a.textDecoration.push("overline");break;case"noOverline":0<=a.textDecoration.indexOf("overline")&&M(a.textDecoration,"overline")}}function Vg(a,b,c,d){return(a=Xg(a,c,d))?a:Wg(b,c,d)}function Wg(a,b,c){for(var d=Sg(a),e=0;e<d.length;e++){var f=d[e].getAttribute(c);if(f)return f}return(a=Yg(a,"style",b))?a.getAttribute(c):null}function Xg(a,b,c){return(a=Yg(a,"style",b))?a.getAttribute(c):null}function Yg(a,b,c){if(!a||1>c.length)return null;var d=null,e=a;for(a=null;e&&!(a=e.getAttribute(b))&&(e=e.parentNode,e instanceof Element););if(b=a)for(a=0;a<c.length;a++)if(c[a].getAttribute("xml:id")==b){d=c[a];break}return d}function Zg(a,b){var c=null;if(si.test(a))var c=si.exec(a),d=Number(c[1]),e=Number(c[2]),f=Number(c[3]),g=Number(c[4]),g=g+(Number(c[5])||0)/b.b,f=f+g/b.frameRate,c=f+60*e+3600*d;else ti.test(a)?c=$g(ti,a):ui.test(a)?c=$g(ui,a):vi.test(a)?(c=vi.exec(a),c=Number(c[1])/b.frameRate):wi.test(a)?(c=wi.exec(a),c=Number(c[1])/b.a):xi.test(a)&&(c=$g(xi,a));return c}function $g(a,b){var c=a.exec(b);return c&&""!=c[0]?(Number(c[4])||0)/1e3+(Number(c[3])||0)+60*(Number(c[2])||0)+3600*(Number(c[1])||0):null}function _g(a,b,c,d){this.frameRate=Number(a)||30,this.b=Number(b)||1,this.a=Number(d),this.a||(this.a=a?this.frameRate*this.b:1),c&&(a=/^(\d+) (\d+)$/g.exec(c))&&(this.frameRate*=a[1]/a[2])}function ah(){this.a=new Rg}function bh(){}function ch(a,b){var c;(c=/^align:(start|middle|center|end|left|right)$/.exec(b))?(c=c[1],"middle"==c?a.textAlign=ei:a.textAlign=fi[c.toUpperCase()]):(c=/^vertical:(lr|rl)$/.exec(b))?a.writingDirection="lr"==c[1]?ji:ki:(c=/^size:([\d\.]+)%$/.exec(b))?a.size=Number(c[1]):(c=/^position:([\d\.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(b))?(a.position=Number(c[1]),c[2]&&(c=c[2],a.positionAlign="line-left"==c||"start"==c?"line-left":"line-right"==c||"end"==c?"line-right":"center")):(c=/^line:([\d\.]+)%(?:,(start|end|center))?$/.exec(b))?(a.lineInterpretation=mi,a.line=Number(c[1]),c[2]&&(a.lineAlign=oi[c[2].toUpperCase()])):(c=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(b))&&(a.lineInterpretation=li,a.line=Number(c[1]),c[2]&&(a.lineAlign=oi[c[2].toUpperCase()]))}function dh(a){if(a=rd(a,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g),!a)return null;var b=Number(a[2]),c=Number(a[3]);return 59<b||59<c?null:Number(a[4])/1e3+c+60*b+3600*(Number(a[1])||0)}function eh(){this.a=null}function fh(a,b,c){var d,e,f;return(new nc).F("payl",qc(function(a){d=aa(a)})).F("iden",qc(function(a){e=aa(a)})).F("sttg",qc(function(a){f=aa(a)})).parse(a),d?gh(d,e,f,b,c):null}function gh(a,b,c,d,e){if(a=new Qg(d,e,a),b&&(a.id=b),c)for(b=new qd(c),c=sd(b);c;)ch(a,c),rd(b,/[ \t]+/gm),c=sd(b);return a}var hh,ih=this;ih.Ve=!0,g.prototype.getBandwidthEstimate=function(a){return 128e3>this.a?a:Math.min(f(this.b),f(this.c))},a.console&&a.console.log.bind&&(h=void 0),b("shaka.util.Error",j),j.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},j.Severity={RECOVERABLE:1,CRITICAL:2},j.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},j.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,HLS_MEDIA_SEQUENCE_REQUIRED_IN_LIVE_STREAMS:4031,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,CONTENT_UNSUPPORTED_BY_BROWSER:9009};var jh=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;hh=k.prototype,hh.ea="",hh.Ca="",hh.ja="",hh.Ka=null,hh.V="",hh.wa="",hh.toString=function(){var a=[],b=this.ea;if(b&&a.push(p(b,kh,!0),":"),b=this.ja){a.push("//");var c=this.Ca;c&&a.push(p(c,kh,!0),"@"),a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.Ka,null!=b&&a.push(":",String(b))}return(b=this.V)&&(this.ja&&"/"!=b.charAt(0)&&a.push("/"),a.push(p(b,"/"==b.charAt(0)?mh:lh,!0))),(b=this.a.toString())&&a.push("?",b),(b=this.wa)&&a.push("#",p(b,oh)),a.join("")},hh.resolve=function(a){var b=new k(this);"data"===b.ea&&(b=new k);var c=!!a.ea;c?l(b,a.ea):c=!!a.Ca,c?b.Ca=a.Ca:c=!!a.ja,c?b.ja=a.ja:c=null!=a.Ka;var d=a.V;if(c)m(b,a.Ka);else if(c=!!a.V){if("/"!=d.charAt(0))if(this.ja&&!this.V)d="/"+d;else{var e=b.V.lastIndexOf("/");-1!=e&&(d=b.V.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=!d.lastIndexOf("/",0),d=d.split("/"),f=[],g=0;g<d.length;){var h=d[g++];"."==h?e&&g==d.length&&f.push(""):".."==h?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),e&&g==d.length&&f.push("")):(f.push(h),e=!0)}d=f.join("/")}}return c?b.V=d:c=""!==a.a.toString(),c?n(b,s(a.a)):c=!!a.wa,c&&(b.wa=a.wa),b};var kh=/[#\/\?@]/g,lh=/[\#\?:]/g,mh=/[\#\?]/g,nh=/[\#\?@]/g,oh=/#/g;r.prototype.a=null,r.prototype.c=null,r.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var a,b=[];for(a in this.a)for(var c=encodeURIComponent(a),d=this.a[a],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e])),b.push(f)}return this.b=b.join("&")},b("shaka.net.NetworkingEngine",G),G.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3},G.PluginPriority={We:1,Ye:2,Te:3};var ph={};G.registerScheme=H,G.unregisterScheme=function(a){delete ph[a]},G.prototype.ge=function(a){this.b.push(a)},G.prototype.registerRequestFilter=G.prototype.ge,G.prototype.Me=function(a){var b=this.b;a=b.indexOf(a),0<=a&&b.splice(a,1)},G.prototype.unregisterRequestFilter=G.prototype.Me,G.prototype.Xc=function(){this.b=[]},G.prototype.clearAllRequestFilters=G.prototype.Xc,G.prototype.he=function(a){this.c.push(a)},G.prototype.registerResponseFilter=G.prototype.he,G.prototype.Ne=function(a){var b=this.c;a=b.indexOf(a),0<=a&&b.splice(a,1)},G.prototype.unregisterResponseFilter=G.prototype.Ne,G.prototype.Yc=function(){this.c=[]},G.prototype.clearAllResponseFilters=G.prototype.Yc,G.prototype.o=function(){this.f=!0,this.b=[],this.c=[];for(var a=[],b=0;b<this.a.length;++b)a.push(this.a[b]["catch"](D));return Promise.all(a)},G.prototype.destroy=G.prototype.o,G.prototype.request=function(a,b,c){var d=c||function(){return!1};if(this.f)return Promise.reject();b.method=b.method||"GET",b.headers=b.headers||{},b.retryParameters=b.retryParameters?A(b.retryParameters):w(),b.uris=A(b.uris);var e=Date.now(),f=Promise.resolve();return this.b.forEach(function(c){f=f.then(c.bind(null,a,b))}),f=f["catch"](function(a){throw new j(2,1,1006,a)}),f=f.then(function(){var f=Date.now()-e,g=new u(b.retryParameters,(!1),c);return v(g).then(function(){return J(this,a,b,g,0,f,d)}.bind(this))}.bind(this)),this.a.push(f),f.then(function(b){return 0<=this.a.indexOf(f)&&this.a.splice(this.a.indexOf(f),1),this.g&&!b.fromCache&&1==a&&this.g(b.timeMs,b.data.byteLength),b}.bind(this))["catch"](function(a){return a&&(a.severity=2),0<=this.a.indexOf(f)&&this.a.splice(this.a.indexOf(f),1),Promise.reject(a)}.bind(this))},G.prototype.request=G.prototype.request,O.prototype.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]},O.prototype.get=function(a){return(a=this.a[a])?a.slice():null},O.prototype.remove=function(a,b){var c=this.a[a];if(c)for(var d=0;d<c.length;++d)c[d]==b&&(c.splice(d,1),--d)},P.prototype.o=function(){return S(this),this.a=null,Promise.resolve()},P.prototype.na=function(a,b){if(this.a)for(var c=this.a.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.na(),this.a.remove(b,e))}},T.prototype.na=function(){this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null},U.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},U.prototype.stopImmediatePropagation=function(){this.a=!0},U.prototype.stopPropagation=function(){};var qh=1/15,rh={codecs:"codecs",frameRate:"framerate",bandwidth:"bitrate",width:"width",height:"height",channelsCount:"channels"};b("shaka.util.StringUtils.fromUTF8",aa),b("shaka.util.StringUtils.fromUTF16",ba),b("shaka.util.StringUtils.fromBytesAutoDetect",ca),b("shaka.util.StringUtils.toUTF8",da),fa.prototype.cancel=function(){null!=this.a&&(clearTimeout(this.a),this.a=null)},b("shaka.util.Uint8ArrayUtils.toBase64",ia),b("shaka.util.Uint8ArrayUtils.fromBase64",ja),b("shaka.util.Uint8ArrayUtils.fromHex",ka),b("shaka.util.Uint8ArrayUtils.toHex",la),b("shaka.util.Uint8ArrayUtils.equal",ma),b("shaka.util.Uint8ArrayUtils.concat",na),hh=oa.prototype,hh.o=function(){this.c=!0;var a=this.a.map(function(a){return(a.fa.close()||Promise.resolve())["catch"](D)});return this.i.reject(),this.f&&a.push(this.f.o()),this.l&&a.push(this.l.setMediaKeys(null)["catch"](D)),this.B&&(this.B.cancel(),this.B=null),this.H&&(this.H.cancel(),this.H=null),this.f=this.l=this.j=this.w=this.b=null,this.a=[],this.m=[],this.v=this.g=this.h=null,Promise.all(a)},hh.configure=function(a){this.h=a},hh.init=function(a,b){var c={},d=[];
return this.ia=b,this.m=a.offlineSessionIds,ta(this,a,b||0<a.offlineSessionIds.length,c,d),d.length?ua(this,c,d):(this.M=!0,Promise.resolve())},hh.keySystem=function(){return this.b?this.b.keySystem:""},hh.pb=function(){var a=this.a.map(function(a){return a=a.fa.expiration,isNaN(a)?1/0:a});return Math.min.apply(Math,a)},hh.zd=function(a){for(var b=new Uint8Array(a.initData),c=0;c<this.a.length;++c)if(ma(b,this.a[c].initData))return;Aa(this,a.initDataType,b)},hh.xc=function(a){this.h.delayLicenseRequestUntilPlayed&&this.l.paused&&!this.ha?this.L.push(a):Ba(this,a)},hh.rc=function(a){a=a.target;var b;for(b=0;b<this.a.length&&this.a[b].fa!=a;++b);if(b!=this.a.length){var c=!1;a.keyStatuses.forEach(function(a,d){if("string"==typeof d){var e=d;d=a,a=e}if("com.microsoft.playready"==this.b.keySystem&&16==d.byteLength){var e=new DataView(d),f=e.getUint32(0,!0),g=e.getUint16(4,!0),h=e.getUint16(6,!0);e.setUint32(0,f,!1),e.setUint16(4,g,!1),e.setUint16(6,h,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==a&&(a="usable"),"status-pending"!=a&&(this.a[b].loaded=!0,this.a.every(function(a){return a.loaded})&&this.i.resolve()),"expired"==a&&(c=!0),e=la(new Uint8Array(d)),this.C[e]=a}.bind(this));var d=a.expiration-Date.now();(0>d||c&&1e3>d)&&!this.a[b].oa&&(this.a.splice(b,1),a.close()),ga(this.H)}},hh.fe=function(){function a(a,b){return"expired"==b}!X(this.C)&&Z(this.C,a)&&this.g(new j(2,6,6014)),this.v.Kb(this.C)},hh.Kd=function(){for(var a=0;a<this.L.length;a++)Ba(this,this.L[a]);this.ha=!0,this.L=[]},hh.de=function(){this.a.forEach(function(a){var b=a.Jb,c=a.fa.expiration;isNaN(c)&&(c=1/0),c!=b&&(this.v.onExpirationUpdated(a.fa.sessionId,c),a.Jb=c)}.bind(this))},Ka.prototype.o=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Ka.prototype.h=function(a){var b=new Uint8Array(a.data.byteLength+a.initSegment.byteLength);b.set(a.initSegment,0),b.set(a.data,a.initSegment.byteLength),this.c.push(b)},Ka.prototype.g=function(){var a=na.apply(null,this.c);this.b.resolve(a)};var sh={};b("shaka.text.TextEngine.registerParser",Oa),b("shaka.text.TextEngine.unregisterParser",function(a){delete sh[a]}),Na.prototype.o=function(){return this.f=this.c=null,Promise.resolve()},Na.prototype.ve=function(a){this.f=a},Na.prototype.setDisplayer=Na.prototype.ve,Na.prototype.remove=function(a,b){return Promise.resolve().then(function(){!this.f||!this.f.remove(a,b)||null==this.a||b<=this.a||a>=this.b||(a<=this.a&&b>=this.b?this.a=this.b=null:a<=this.a&&b<this.b?this.a=b:a>this.a&&b>=this.b&&(this.b=a))}.bind(this))},Qa.prototype.parseInit=function(a){this.ba(a,0,null,null)},Qa.prototype.parseMedia=function(a,b){if(a.byteLength!=a.buffer.byteLength||a.byteOffset){var c=new Uint8Array(a.byteLength);c.set(a),c=c.buffer}else c=a.buffer;return this.ba(c,b.periodStart,b.segmentStart,b.segmentEnd)},hh=Ra.prototype,hh.o=function(){this.j=!0;var a,b=[];for(a in this.c){var c=this.c[a],d=c[0];for(this.c[a]=c.slice(0,1),d&&b.push(d.p["catch"](D)),d=1;d<c.length;++d)c[d].p["catch"](D),c[d].p.reject()}this.a&&b.push(this.a.o());for(a in this.h)b.push(this.h[a].o());return Promise.all(b).then(function(){this.i.o(),this.l=this.a=this.f=this.g=this.i=null,this.b={},this.h={},this.c={}}.bind(this))},hh.init=function(b){for(var c in b){var d=b[c],d=_(d.mimeType,d.codecs);"text"==c?Ta(this,d):(!MediaSource.isTypeSupported(d)&&a.muxjs&&"mp2t"==d.split(";")[0].split("/")[1]&&MediaSource.isTypeSupported(La(c,d))&&(this.h[c]=new Ka,d=La(c,d)),d=this.f.addSourceBuffer(d),Q(this.i,d,"error",this.Ge.bind(this,c)),Q(this.i,d,"updateend",this.Ja.bind(this,c)),this.b[c]=d,this.c[c]=[])}},hh.Bb=function(){var a=this.a&&null!=this.a.a?[{start:this.a.a,end:this.a.b}]:[];return{total:Ja(this.g.buffered),audio:Ja(Va(this,"audio")),video:Ja(Va(this,"video")),text:a}},hh.remove=function(a,b,c){return"text"==a?this.a.remove(b,c):Za(this,a,this.Dc.bind(this,a,b,c))},hh.endOfStream=function(a){return $a(this,function(){a?this.f.endOfStream(a):this.f.endOfStream()}.bind(this))},hh.ga=function(a){return $a(this,function(){this.f.duration=a}.bind(this))},hh.ka=function(){return this.f.duration},hh.Nc=function(a,b){this.b[a].appendBuffer(b)},hh.Dc=function(a,b,c){c<=b?this.Ja(a):this.b[a].remove(b,c)},hh.Tc=function(a){var b=this.b[a].appendWindowStart,c=this.b[a].appendWindowEnd;this.b[a].abort(),this.b[a].appendWindowStart=b,this.b[a].appendWindowEnd=c,this.Ja(a)},hh.bd=function(a){this.g.currentTime-=.001,this.Ja(a)},hh.xe=function(a,b){this.b[a].timestampOffset=b,this.Ja(a)},hh.ue=function(a,b,c){this.b[a].appendWindowStart=0,this.b[a].appendWindowEnd=c,this.b[a].appendWindowStart=b,this.Ja(a)},hh.Ge=function(a){this.c[a][0].p.reject(new j(2,3,3014,this.g.error?this.g.error.code:0))},hh.Ja=function(a){var b=this.c[a][0];b&&(b.p.resolve(),_a(this,a))};var th=1,uh=2,vh={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};b("shaka.abr.SimpleAbrManager",xb),xb.prototype.stop=function(){this.h=null,this.c=!1,this.g=[],this.f=null},xb.prototype.stop=xb.prototype.stop,xb.prototype.init=function(a){this.h=a},xb.prototype.init=xb.prototype.init,xb.prototype.chooseVariant=function(){var a=yb(this.a.restrictions,this.g),b=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);if(this.g.length&&!a.length)throw new j(2,4,4012);for(var c=a[0]||null,d=0;d<a.length;++d){var e=a[d],f=(a[d+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;b>=e.bandwidth/this.a.bandwidthDowngradeTarget&&b<=f&&(c=e)}return this.f=Date.now(),c},xb.prototype.chooseVariant=xb.prototype.chooseVariant,xb.prototype.enable=function(){this.c=!0},xb.prototype.enable=xb.prototype.enable,xb.prototype.disable=function(){this.c=!1},xb.prototype.disable=xb.prototype.disable,xb.prototype.segmentDownloaded=function(a,b){var c=this.b;if(!(16e3>b)){var d=8e3*b/a,f=a/1e3;c.a+=b,e(c.b,f,d),e(c.c,f,d)}if(null!=this.f&&this.c)a:{if(this.i){if(Date.now()-this.f<1e3*this.a.switchInterval)break a}else{if(!(128e3<=this.b.a))break a;this.i=!0}c=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(c)}},xb.prototype.segmentDownloaded=xb.prototype.segmentDownloaded,xb.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},xb.prototype.getBandwidthEstimate=xb.prototype.getBandwidthEstimate,xb.prototype.setVariants=function(a){this.g=a},xb.prototype.setVariants=xb.prototype.setVariants,xb.prototype.configure=function(a){this.a=a},xb.prototype.configure=xb.prototype.configure;var wh="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),xh="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),yh=["loop","playbackRate"],zh=["pause","play"],Ah="adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading".split(" "),Bh="drmInfo getAudioLanguages getBufferedInfo getConfiguration getExpiration getManifest getManifestUri getPlaybackRate getTextLanguages getTextTracks getStats getVariantTracks isAudioOnly isBuffering isInProgress isLive isTextTrackVisible keySystem seekRange".split(" "),Ch=["getPlayheadTimeAsDate","getPresentationStartTimeAsDate"],Dh=[["getConfiguration","configure"]],Eh=[["isTextTrackVisible","setTextTrackVisibility"]],Fh="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),Gh=["load","unload"],Hh=!1,Ih=null;hh=Cb.prototype,hh.o=function(){return Eb(this),Ih&&Db(this),this.H=this.C=this.g=null,this.b=this.h=!1,this.m=this.l=this.f=this.c=this.a=this.i=null,Promise.resolve()},hh.aa=function(){return this.b},hh.Pb=function(){return this.B},hh.init=function(){if(a.chrome&&chrome.cast&&chrome.cast.isAvailable){delete a.__onGCastApiAvailable,this.h=!0,this.g();var b=new chrome.cast.SessionRequest(this.L),b=new chrome.cast.ApiConfig(b,this.qc.bind(this),this.Md.bind(this),"origin_scoped");chrome.cast.initialize(b,function(){},function(){}),Hh&&setTimeout(this.g.bind(this),20),(b=Ih)&&b.status!=chrome.cast.SessionStatus.STOPPED?this.qc(b):Ih=null}else a.__onGCastApiAvailable=function(a){a&&this.init()}.bind(this)},hh.Tb=function(a){this.i=a,this.b&&Fb({type:"appData",appData:this.i})},hh.cast=function(a){return this.h?Hh?this.b?Promise.reject(new j(1,8,8002)):(this.f=new t,chrome.cast.requestSession(this.Mb.bind(this,a),this.oc.bind(this)),this.f):Promise.reject(new j(1,8,8001)):Promise.reject(new j(1,8,8e3))},hh.ob=function(){this.b&&(Eb(this),Ih&&(Db(this),Ih.stop(function(){},function(){}),Ih=null))},hh.get=function(a,b){if("video"==a){if(0<=zh.indexOf(b))return this.Cc.bind(this,a,b)}else if("player"==a){if(0<=Ch.indexOf(b)&&!this.get("player","isLive")())return function(){};if(0<=Fh.indexOf(b))return this.Cc.bind(this,a,b);if(0<=Gh.indexOf(b))return this.je.bind(this,a,b);if(0<=Bh.indexOf(b))return this.zc.bind(this,a,b)}return this.zc(a,b)},hh.set=function(a,b,c){this.a[a][b]=c,Fb({type:"set",targetName:a,property:b,value:c})},hh.Mb=function(a,b){Ih=b,b.addUpdateListener(this.l),b.addMessageListener("urn:x-cast:com.google.shaka.v2",this.m),this.pc(),Fb({type:"init",initState:a,appData:this.i}),this.f.resolve()},hh.oc=function(a){var b=8003;switch(a.code){case"cancel":b=8004;break;case"timeout":b=8005;break;case"receiver_unavailable":b=8006}this.f.reject(new j(2,8,b,a))},hh.zc=function(a,b){return this.a[a][b]},hh.Cc=function(a,b){Fb({type:"call",targetName:a,methodName:b,args:Array.prototype.slice.call(arguments,2)})},hh.je=function(a,b){var c=Array.prototype.slice.call(arguments,2),d=new t,e=this.v.toString();return this.v++,this.c[e]=d,Fb({type:"asyncCall",targetName:a,methodName:b,args:c,id:e}),d},hh.qc=function(a){var b=this.w();this.f=new t,this.j=!0,this.Mb(b,a)},hh.Md=function(a){Hh="available"==a,this.g()},hh.pc=function(){var a=!!Ih&&"connected"==Ih.status;if(this.b&&!a){this.H();for(var b in this.a)this.a[b]={};Eb(this)}this.B=(this.b=a)?Ih.receiver.friendlyName:"",this.g()},hh.Gd=function(a,b){var c=Ab(b);switch(c.type){case"event":var d=c.targetName,e=c.event;this.C(d,new U(e.type,e));break;case"update":e=c.update;for(d in e){var c=this.a[d]||{};for(f in e[d])c[f]=e[d][f]}this.j&&(this.M(),this.j=!1);break;case"asyncComplete":d=c.id;var f=c.error;if(c=this.c[d],delete this.c[d],c)if(f){d=new j(f.severity,f.category,f.code);for(e in f)d[e]=f[e];c.reject(d)}else c.resolve()}},Gb.prototype.addEventListener=function(a,b){this.yb.push(a,b)},Gb.prototype.removeEventListener=function(a,b){this.yb.remove(a,b)},Gb.prototype.dispatchEvent=function(a){for(var b=this.yb.get(a.type)||[],c=0;c<b.length;++c){a.target=this.fb,a.currentTarget=this.fb;var d=b[c];try{d.handleEvent?d.handleEvent(a):d.call(this,a)}catch(e){}if(a.a)break}return a.defaultPrevented},c(Hb),b("shaka.cast.CastProxy",Hb),Hb.prototype.o=function(a){return a&&this.a&&this.a.ob(),a=[this.i?this.i.o():null,this.b?this.b.o():null,this.a?this.a.o():null],this.a=this.i=this.j=this.h=this.b=this.c=null,Promise.all(a)},Hb.prototype.destroy=Hb.prototype.o,Hb.prototype.rd=function(){return this.h},Hb.prototype.getVideo=Hb.prototype.rd,Hb.prototype.hd=function(){return this.j},Hb.prototype.getPlayer=Hb.prototype.hd,Hb.prototype.Uc=function(){return!!this.a&&(this.a.h&&Hh)},Hb.prototype.canCast=Hb.prototype.Uc,Hb.prototype.aa=function(){return!!this.a&&this.a.aa()},Hb.prototype.isCasting=Hb.prototype.aa,Hb.prototype.Pb=function(){return this.a?this.a.Pb():""},Hb.prototype.receiverName=Hb.prototype.Pb,Hb.prototype.cast=function(){var a=this.ic();return this.a.cast(a).then(function(){return this.b.vb()}.bind(this))},Hb.prototype.cast=Hb.prototype.cast,Hb.prototype.Tb=function(a){this.a.Tb(a)},Hb.prototype.setAppData=Hb.prototype.Tb,Hb.prototype.Je=function(){var a=this.a;if(a.b){var b=a.w();chrome.cast.requestSession(a.Mb.bind(a,b),a.oc.bind(a))}},Hb.prototype.suggestDisconnect=Hb.prototype.Je,Hb.prototype.ob=function(){this.a.ob()},Hb.prototype.forceDisconnect=Hb.prototype.ob,hh=Hb.prototype,hh.ic=function(){var a={video:{},player:{},playerAfterLoad:{},manifest:this.b.lb,startTime:null};return this.c.pause(),yh.forEach(function(b){a.video[b]=this.c[b]}.bind(this)),this.c.ended||(a.startTime=this.c.currentTime),Dh.forEach(function(b){var c=b[1];b=this.b[b[0]](),a.player[c]=b}.bind(this)),Eh.forEach(function(b){var c=b[1];b=this.b[b[0]](),a.playerAfterLoad[c]=b}.bind(this)),a},hh.Be=function(){this.dispatchEvent(new U("caststatuschanged"))},hh.Ce=function(){this.f.dispatchEvent(new U(this.h.paused?"pause":"play"))},hh.Ee=function(){Dh.forEach(function(a){var b=a[1];a=this.a.get("player",a[0])(),this.b[b](a)}.bind(this));var a=this.a.get("player","getManifestUri")(),b=this.a.get("video","ended"),c=Promise.resolve(),d=this.c.autoplay,e=null;b||(e=this.a.get("video","currentTime")),a&&(this.c.autoplay=!1,c=this.b.load(a,e),c["catch"](function(a){this.b.dispatchEvent(new U("error",{detail:a}))}.bind(this)));var f={};yh.forEach(function(a){f[a]=this.a.get("video",a)}.bind(this)),c.then(function(){yh.forEach(function(a){this.c[a]=f[a]}.bind(this)),Eh.forEach(function(a){var b=a[1];a=this.a.get("player",a[0])(),this.b[b](a)}.bind(this)),this.c.autoplay=d,a&&this.c.play()}.bind(this))},hh.Qe=function(a){if("addEventListener"==a)return this.f.addEventListener.bind(this.f);if("removeEventListener"==a)return this.f.removeEventListener.bind(this.f);if(this.a.aa()&&!Object.keys(this.a.a.video).length){var b=this.c[a];if("function"!=typeof b)return b}return this.a.aa()?this.a.get("video",a):(b=this.c[a],"function"==typeof b&&(b=b.bind(this.c)),b)},hh.Se=function(a,b){this.a.aa()?this.a.set("video",a,b):this.c[a]=b},hh.Re=function(a){this.a.aa()||this.f.dispatchEvent(new U(a.type,a))},hh.ae=function(a){return"addEventListener"==a?this.g.addEventListener.bind(this.g):"removeEventListener"==a?this.g.removeEventListener.bind(this.g):"getMediaElement"==a?function(){return this.h}.bind(this):"getNetworkingEngine"==a?this.b.jc.bind(this.b):this.a.aa()&&!Object.keys(this.a.a.video).length&&0<=Bh.indexOf(a)||!this.a.aa()?(a=this.b[a],a.bind(this.b)):this.a.get("player",a)},hh.be=function(a){this.a.aa()||this.g.dispatchEvent(a)},hh.De=function(a,b){this.a.aa()&&("video"==a?this.f.dispatchEvent(b):"player"==a&&this.g.dispatchEvent(b))},c(Jb),b("shaka.cast.CastReceiver",Jb),Jb.prototype.isConnected=function(){return this.i},Jb.prototype.isConnected=Jb.prototype.isConnected,Jb.prototype.ud=function(){return this.f},Jb.prototype.isIdle=Jb.prototype.ud,Jb.prototype.o=function(){var b=this.b?this.b.o():Promise.resolve();return null!=this.h&&a.clearTimeout(this.h),this.l=this.j=this.b=this.a=null,this.i=!1,this.f=!0,this.h=this.g=this.c=null,b.then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})},Jb.prototype.destroy=Jb.prototype.o,hh=Jb.prototype,hh.wc=function(){this.i=!!cast.receiver.CastReceiverManager.getInstance().getSenders().length,Lb(this)},hh.Ac=function(a,b){this.Nb(),Nb(this,{type:"event",targetName:a,event:b},this.c)},hh.Nb=function(){null!=this.h&&a.clearTimeout(this.h),this.h=a.setTimeout(this.Nb.bind(this),500);var b={video:{},player:{}};xh.forEach(function(a){b.video[a]=this.a[a]}.bind(this));var c=Bh;this.b.S()&&(c=c.concat(Ch)),c.forEach(function(a){b.player[a]=this.b[a]()}.bind(this)),(c=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(b.video.volume=c.level,b.video.muted=c.muted),Nb(this,{type:"update",update:b},this.c)},hh.ad=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();a&&Nb(this,{type:"update",update:{video:{volume:a.level,muted:a.muted}}},this.c),Nb(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.c)},hh.Pd=function(a){var b=Ab(a.data);switch(b.type){case"init":Mb(this,b.initState,b.appData),this.Nb();break;case"appData":this.l(b.appData);break;case"set":var c=b.targetName,d=b.property,e=b.value;if("video"==c){if(b=cast.receiver.CastReceiverManager.getInstance(),"volume"==d){b.setSystemVolumeLevel(e);break}if("muted"==d){b.setSystemVolumeMuted(e);break}}this.j[c][d]=e;break;case"call":c=b.targetName,d=b.methodName,e=b.args,c=this.j[c],c[d].apply(c,e);break;case"asyncCall":c=b.targetName,d=b.methodName,e=b.args,b=b.id,a=a.senderId,c=this.j[c],c[d].apply(c,e).then(this.Ic.bind(this,a,b,null),this.Ic.bind(this,a,b))}},hh.Bd=function(a){var b=Ab(a.data);switch(b.type){case"PLAY":this.a.play(),Ob(this,0);break;case"PAUSE":this.a.pause(),Ob(this,0);break;case"SEEK":a=b.currentTime;var c=b.resumeState;null!=a&&(this.a.currentTime=Number(a)),c&&"PLAYBACK_START"==c?(this.a.play(),Ob(this,0)):c&&"PLAYBACK_PAUSE"==c&&(this.a.pause(),Ob(this,0));break;case"STOP":this.b.vb().then(function(){Ob(this,0)}.bind(this));break;case"GET_STATUS":Ob(this,Number(b.requestId));break;case"VOLUME":c=b.volume,a=c.level;var c=c.muted,d=this.a.volume,e=this.a.muted;null!=a&&(this.a.volume=Number(a)),null!=c&&(this.a.muted=c),d==this.a.volume&&e==this.a.muted||Ob(this,0);break;case"LOAD":c=b.media.contentId,a=b.currentTime;var f=this.m(c);this.a.autoplay=!0,this.b.load(f,a).then(function(){Ob(this,0,{contentId:f,streamType:this.b.S()?"LIVE":"BUFFERED",contentType:""})}.bind(this))["catch"](function(a){var c="LOAD_FAILED";7==a.category&&7e3==a.code&&(c="LOAD_CANCELLED"),Nb(this,{requestId:Number(b.requestId),type:c},this.g)}.bind(this));break;default:Nb(this,{requestId:Number(b.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.g)}},hh.Ic=function(a,b,c){Nb(this,{type:"asyncComplete",id:b,error:c},this.c,a)};var Jh={IDLE:"IDLE",Rc:"PLAYING",Oc:"BUFFERING",Qc:"PAUSED"},Kh={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};b("shaka.media.InitSegmentReference",jc),b("shaka.media.SegmentReference",kc),b("shaka.util.DataViewReader",lc);var Lh=1;lc.Endianness={Ue:0,Xe:Lh},lc.prototype.da=function(){return this.s<this.I.byteLength},lc.prototype.hasMoreData=lc.prototype.da,lc.prototype.kd=function(){return this.s},lc.prototype.getPosition=lc.prototype.kd,lc.prototype.dd=function(){return this.I.byteLength},lc.prototype.getLength=lc.prototype.dd,lc.prototype.X=function(){try{var a=this.I.getUint8(this.s)}catch(b){mc()}return this.s+=1,a},lc.prototype.readUint8=lc.prototype.X,lc.prototype.Xa=function(){try{var a=this.I.getUint16(this.s,this.a)}catch(b){mc()}return this.s+=2,a},lc.prototype.readUint16=lc.prototype.Xa,lc.prototype.D=function(){try{var a=this.I.getUint32(this.s,this.a)}catch(b){mc()}return this.s+=4,a},lc.prototype.readUint32=lc.prototype.D,lc.prototype.Bc=function(){try{var a=this.I.getInt32(this.s,this.a)}catch(b){mc()}return this.s+=4,a},lc.prototype.readInt32=lc.prototype.Bc,lc.prototype.Ma=function(){try{if(this.a)var a=this.I.getUint32(this.s,!0),b=this.I.getUint32(this.s+4,!0);else b=this.I.getUint32(this.s,!1),a=this.I.getUint32(this.s+4,!1)}catch(c){mc()}if(2097151<b)throw new j(2,3,3001);return this.s+=8,b*Math.pow(2,32)+a},lc.prototype.readUint64=lc.prototype.Ma,lc.prototype.La=function(a){this.s+a>this.I.byteLength&&mc();var b=new Uint8Array(this.I.buffer,this.I.byteOffset+this.s,a);return this.s+=a,new Uint8Array(b)},lc.prototype.readBytes=lc.prototype.La,lc.prototype.J=function(a){this.s+a>this.I.byteLength&&mc(),this.s+=a},lc.prototype.skip=lc.prototype.J,lc.prototype.Gc=function(a){this.s<a&&mc(),this.s-=a},lc.prototype.rewind=lc.prototype.Gc,lc.prototype.seek=function(a){(0>a||a>this.I.byteLength)&&mc(),this.s=a},lc.prototype.seek=lc.prototype.seek,lc.prototype.Ob=function(){for(var a=this.s;this.da()&&this.I.getUint8(this.s);)this.s+=1;return a=new Uint8Array(this.I.buffer,this.I.byteOffset+a,this.s-a),this.s+=1,aa(a)},lc.prototype.readTerminatedString=lc.prototype.Ob,b("shaka.util.Mp4Parser",nc),nc.prototype.F=function(a,b){var c=rc(a);return this.c[c]=0,this.b[c]=b,this},nc.prototype.box=nc.prototype.F,nc.prototype.$=function(a,b){var c=rc(a);return this.c[c]=1,this.b[c]=b,this},nc.prototype.fullBox=nc.prototype.$,nc.prototype.stop=function(){this.a=!0},nc.prototype.stop=nc.prototype.stop,nc.prototype.parse=function(a,b){var c=new Uint8Array(a),c=new lc(new DataView(c.buffer,c.byteOffset,c.byteLength),0);for(this.a=!1;c.da()&&!this.a;)this.sb(0,c,b)},nc.prototype.parse=nc.prototype.parse,nc.prototype.sb=function(a,b,c){var d=b.s,e=b.D(),f=b.D();switch(e){case 0:e=b.I.byteLength-d;break;case 1:e=b.Ma()}var g=this.b[f];if(g){var h=null,i=null;1==this.c[f]&&(i=b.D(),h=i>>>24,i&=16777215),f=d+e,c&&f>b.I.byteLength&&(f=b.I.byteLength),f-=b.s,b=0<f?b.La(f):new Uint8Array(0),b=new lc(new DataView(b.buffer,b.byteOffset,b.byteLength),0),g({ba:this,yc:c||!1,version:h,hc:i,u:b,size:e,start:d+a})}else b.J(d+e-b.s)},nc.prototype.parseNext=nc.prototype.sb,nc.children=oc,nc.sampleDescription=pc,nc.allData=qc,b("shaka.media.SegmentIndex",uc),uc.prototype.o=function(){return this.a=null,Promise.resolve()},uc.prototype.destroy=uc.prototype.o,uc.prototype.find=function(a){for(var b=this.a.length-1;0<=b;--b){var c=this.a[b];if(a>=c.startTime&&a<c.endTime)return c.position}return this.a.length&&a<this.a[0].startTime?this.a[0].position:null},uc.prototype.find=uc.prototype.find,uc.prototype.get=function(a){return this.a.length?(a-=this.a[0].position,0>a||a>=this.a.length?null:this.a[a]):null},uc.prototype.get=uc.prototype.get,uc.prototype.offset=function(a){for(var b=0;b<this.a.length;++b)this.a[b].startTime+=a,this.a[b].endTime+=a},uc.prototype.offset=uc.prototype.offset,uc.prototype.Gb=function(a){for(var b,c,d,e=[],f=b=0;b<this.a.length&&f<a.length;)c=this.a[b],d=a[f],c.startTime<d.startTime?(e.push(c),b++):(c.startTime>d.startTime?b||e.push(d):(.1<Math.abs(c.endTime-d.endTime)?(d=new kc(c.position,d.startTime,d.endTime,d.a,d.P,d.G),e.push(d)):e.push(c),b++),f++);for(;b<this.a.length;)e.push(this.a[b++]);if(e.length)for(b=e[e.length-1].position+1;f<a.length;)d=a[f++],d=new kc((b++),d.startTime,d.endTime,d.a,d.P,d.G),e.push(d);else e=a;this.a=e},uc.prototype.merge=uc.prototype.Gb,uc.prototype.replace=function(a){this.a=a},uc.prototype.Ab=function(a){for(var b=0;b<this.a.length&&!(this.a[b].endTime>a);++b);this.a.splice(0,b)},uc.prototype.evict=uc.prototype.Ab;var Mh;wc.prototype.da=function(){return this.a.da()},Bc.prototype.parse=function(a,b,c,d){var e;if(b=new wc(new DataView(b)),440786851!=xc(b).id)throw new j(2,3,3008);var f=xc(b);if(408125543!=f.id)throw new j(2,3,3009);for(b=f.a.byteOffset,f=new wc(f.a),e=null;f.da();){var g=xc(f);if(357149030==g.id){e=g;break}}if(!e)throw new j(2,3,3010);for(f=new wc(e.a),e=1e6,g=null;f.da();){var h=xc(f);if(2807729==h.id)e=Ac(h);else if(17545==h.id)if(g=h,4==g.a.byteLength)g=g.a.getFloat32(0);else{if(8!=g.a.byteLength)throw new j(2,3,3003);g=g.a.getFloat64(0)}}if(null==g)throw new j(2,3,3011);if(f=e/1e9,e=g*f,a=xc(new wc(new DataView(a))),475249515!=a.id)throw new j(2,3,3007);return Cc(a,b,f,e,c,d)};var Nh={},Oh={};b("shaka.media.ManifestParser.registerParserByExtension",function(a,b){Oh[a]=b}),b("shaka.media.ManifestParser.registerParserByMime",function(a,b){Nh[a]=b}),b("shaka.media.PresentationTimeline",Tc),Tc.prototype.ka=function(){return this.a},Tc.prototype.getDuration=Tc.prototype.ka,Tc.prototype.ga=function(a){this.a=a},Tc.prototype.setDuration=Tc.prototype.ga,Tc.prototype.ld=function(){return this.c},Tc.prototype.getPresentationStartTime=Tc.prototype.ld,Tc.prototype.Ub=function(a){this.i=a},Tc.prototype.setClockOffset=Tc.prototype.Ub,Tc.prototype.ub=function(a){this.h=a},Tc.prototype.setStatic=Tc.prototype.ub,Tc.prototype.nd=function(){return this.f},Tc.prototype.getSegmentAvailabilityDuration=Tc.prototype.nd,Tc.prototype.Wb=function(a){this.f=a},Tc.prototype.setSegmentAvailabilityDuration=Tc.prototype.Wb,Tc.prototype.Kc=function(a){this.j=a},Tc.prototype.setDelay=Tc.prototype.Kc,Tc.prototype.Ia=function(a,b){b.length&&(this.b=b.reduce(function(a,b){return Math.max(a,b.endTime-b.startTime)},this.b))},Tc.prototype.notifySegments=Tc.prototype.Ia,Tc.prototype.Hb=function(a){this.b=Math.max(this.b,a)},Tc.prototype.notifyMaxSegmentDuration=Tc.prototype.Hb,Tc.prototype.S=function(){return 1/0==this.a&&!this.h},Tc.prototype.isLive=Tc.prototype.S,Tc.prototype.xa=function(){return 1/0!=this.a&&!this.h},Tc.prototype.isInProgress=Tc.prototype.xa,Tc.prototype.ca=function(){return this.Fa(0)},Tc.prototype.getSegmentAvailabilityStart=Tc.prototype.ca,Tc.prototype.Fa=function(a){if(1/0==this.f)return this.g;var b=this.qa();return Math.max(this.g,Math.min(b-this.f+a,b))},Tc.prototype.getSafeAvailabilityStart=Tc.prototype.Fa,Tc.prototype.Jc=function(a){this.g=a},Tc.prototype.setAvailabilityStart=Tc.prototype.Jc,Tc.prototype.qa=function(){return this.S()||this.xa()?Math.min(Math.max(0,(Date.now()+this.i)/1e3-this.b-this.c),this.a):this.a},Tc.prototype.getSegmentAvailabilityEnd=Tc.prototype.qa,Tc.prototype.qb=function(){return Math.max(0,this.qa()-(this.S()||this.xa()?this.j:0))},Tc.prototype.getSeekRangeEnd=Tc.prototype.qb,b("shaka.dash.DashParser",Uc),hh=Uc.prototype,hh.configure=function(a){this.b=a},hh.start=function(a,b){return this.g=[a],this.a=b,Vc(this).then(function(){return this.a&&ad(this,0),this.c}.bind(this))},hh.stop=function(){return this.b=this.a=null,this.g=[],this.c=null,this.i=[],this.j={},null!=this.f&&(a.clearTimeout(this.f),this.f=null),Promise.resolve()},hh.update=function(){Vc(this)["catch"](function(a){this.a&&this.a.onError(a)}.bind(this))},hh.onExpirationUpdated=function(){},hh.Xd=function(a,b){a.U=bd(this,b,a.W,null);var c=!1,d=Qb(b,"Role"),e=d.map(function(a){return a.getAttribute("value")}).filter(E),f=void 0;"text"==a.U.contentType&&(f="subtitle");for(var g=0;g<d.length;g++){var h=d[g].getAttribute("schemeIdUri");if(null==h||"urn:mpeg:dash:role:2011"==h)switch(h=d[g].getAttribute("value")){case"main":c=!0;break;case"caption":case"subtitle":f=h}}var i=null,k=!1;if(Qb(b,"EssentialProperty").forEach(function(a){"http://dashif.org/guidelines/trickmode"==a.getAttribute("schemeIdUri")?i=a.getAttribute("value"):k=!0}),k)return null;var d=Qb(b,"ContentProtection"),l=$b(d,this.b.dash.customScheme,this.b.dash.ignoreDrmInfo),d=bb(b.getAttribute("lang")||"und"),h=b.getAttribute("label"),g=Qb(b,"Representation"),e=g.map(this.$d.bind(this,a,l,f,d,h,c,e)).filter(function(a){return!!a});if(!e.length)throw new j(2,4,4003);return a.U.contentType&&"application"!=a.U.contentType||(a.U.contentType=gd(e[0].mimeType,e[0].codecs),e.forEach(function(b){b.type=a.U.contentType})),e.forEach(function(a){l.drmInfos.forEach(function(b){a.keyId&&b.keyIds.push(a.keyId)})}),f=g.map(function(a){return a.getAttribute("id")}).filter(E),{id:a.U.id||"__fake__"+this.h++,contentType:a.U.contentType,language:d,Eb:c,streams:e,drmInfos:l.drmInfos,$b:i,ke:f}},hh.$d=function(a,b,c,d,e,f,g,h){if(a.A=bd(this,h,a.U,null),!dd(a.A))return null;a.bandwidth=Sb(h,"bandwidth",Xb)||0;var i=this.le.bind(this);if(a.A.Ya)i=Fc(a,i);else if(a.A.sa)i=Ic(a,this.j);else if(a.A.Za)i=Mc(a,i,this.j,!!this.c);else{var j=a.A.Z,k=a.T.duration||0;i={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(a){return 0<=a&&a<k?1:null},getSegmentReference:function(a){return 1!=a?null:new kc(1,0,k,function(){return j},0,null)},initSegmentReference:null,Y:0}}return h=Qb(h,"ContentProtection"),h=_b(h,this.b.dash.customScheme,b,this.b.dash.ignoreDrmInfo),{id:this.h++,createSegmentIndex:i.createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:i.initSegmentReference,presentationTimeOffset:i.Y,mimeType:a.A.mimeType,codecs:a.A.codecs,frameRate:a.A.frameRate,bandwidth:a.bandwidth,width:a.A.width,height:a.A.height,kind:c,encrypted:0<b.drmInfos.length,keyId:h,language:d,label:e,type:a.U.contentType,primary:f,trickModeVideo:null,containsEmsgBoxes:a.A.containsEmsgBoxes,roles:g,channelsCount:a.A.Ib}},hh.Fe=function(){this.f=null;var a=Date.now();Vc(this).then(function(){this.a&&ad(this,(Date.now()-a)/1e3)}.bind(this))["catch"](function(a){this.a&&(a.severity=1,this.a.onError(a),ad(this,0))}.bind(this))},hh.Zd=function(a,b,c){var d=c.getAttribute("schemeIdUri")||"",e=c.getAttribute("value")||"",f=Sb(c,"timescale",Yb)||1;Qb(c,"Event").forEach(function(c){var g=Sb(c,"presentationTime",Yb)||0,h=Sb(c,"duration",Yb)||0,g=g/f+a,h=g+h/f;null!=b&&(g=Math.min(g,a+b),h=Math.min(h,a+b)),c={schemeIdUri:d,value:e,startTime:g,endTime:h,id:c.getAttribute("id")||"",eventElement:c},this.a.onTimelineRegionAdded(c)}.bind(this))},hh.le=function(a,b,c){return a=I(a,this.b.retryParameters),null!=b&&(a.headers.Range="bytes="+b+"-"+(null!=c?c:"")),this.a.networkingEngine.request(1,a).then(function(a){return a.data})},Oh.mpd=Uc,Nh["application/dash+xml"]=Uc,id.prototype.toString=function(){function a(a){return a.name+'="'+a.value+'"'}return this.value?"#"+this.name+":"+this.value:0<this.a.length?"#"+this.name+":"+this.a.map(a).join(","):"#"+this.name},id.prototype.getAttribute=function(a){var b=this.a.filter(function(b){return b.name==a});return b.length?b[0]:null};var Ph="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Qh="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");b("shaka.net.DataUriPlugin",xd),xd.parse=function(b){var c=b.split(":");if(2>c.length||"data"!=c[0])throw new j(2,1,1004,b);if(c=c.slice(1).join(":").split(","),2>c.length)throw new j(2,1,1004,b);var d=c[0],c=a.decodeURIComponent(c.slice(1).join(",")),d=d.split(";"),e=null;if(1<d.length&&(e=d[1]),"base64"==e)b=ja(c).buffer;else{if(e)throw new j(2,1,1005,b);b=da(c)}return{data:b,contentType:d[0]}},H("data",xd),b("shaka.hls.HlsParser",yd),hh=yd.prototype,hh.configure=function(a){this.g=a},hh.start=function(a,b){return this.f=b,this.l=a,Wd(this,a).then(function(b){return Ad(this,b.data,a).then(function(){return Xd(this,this.h),this.m}.bind(this))}.bind(this))},hh.stop=function(){return this.g=this.f=null,this.w={},this.C={},this.m=null,Promise.resolve()},hh.update=function(){if(this.c!=Vh.pa){
var a,b=[];for(a in this.a)b.push(zd(this,this.a[a],a));return Promise.all(b)}},hh.onExpirationUpdated=function(){};var Rh={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},Sh={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};yd.prototype.L=function(){this.f&&(this.i=null,this.update().then(function(){Xd(this,this.h)}.bind(this))["catch"](function(a){this.f&&(a.severity=1,this.f.onError(a),Xd(this,0))}.bind(this)))};var Th={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(a){if("SAMPLE-AES-CENC"!=Ud(a,"METHOD"))return null;var b=Ud(a,"URI"),b=xd.parse(b),b=new Uint8Array(b.data),b=W("com.widevine.alpha",[{initDataType:"cenc",initData:b}]);return(a=kd(a,"KEYID"))&&(b.keyIds=[a.substr(2).toLowerCase()]),b}},Uh="VOD",Vh={pa:Uh,Pc:"EVENT",eb:"LIVE"};Oh.m3u8=yd,Nh["application/x-mpegurl"]=yd,Nh["application/vnd.apple.mpegurl"]=yd,hh=Zd.prototype,hh.o=function(){var a=this.b.o();return this.b=null,this.f&&(this.f.cancel(),this.f=null),this.g&&(this.g.cancel(),this.g=null),this.H=this.L=this.l=this.c=this.a=null,a},hh.Cb=function(){return this.h},hh.Lb=function(){this.m=!0,this.uc()},hh.Ld=function(){var a=this.i||0>this.h?0:this.h;this.a.playbackRate&&this.a.playbackRate!=a&&be(this,this.a.playbackRate)},hh.sc=function(){var a=ae(this);.001>Math.abs(this.a.currentTime-a)?(Q(this.b,this.a,"seeking",this.vc.bind(this)),Q(this.b,this.a,"playing",this.tc.bind(this))):(R(this.b,this.a,"seeking",this.Nd.bind(this)),this.a.currentTime=a)},hh.Nd=function(){Q(this.b,this.a,"seeking",this.vc.bind(this)),Q(this.b,this.a,"playing",this.tc.bind(this))},hh.uc=function(){if(this.a.readyState&&!this.a.seeking&&!this.a.paused){this.a.readyState!=this.C&&(this.j=!1,this.C=this.a.readyState);var a=this.l.smallGapLimit,b=this.a.currentTime,c=this.a.buffered;if(b<this.c.presentationTimeline.ca())c=ce(this,b),de(this,b,c);else{a:{if(c&&c.length&&!(1==c.length&&1e-6>c.end(0)-c.start(0))){var d=.1;/(Edge\/|Trident\/|Tizen)/.test(navigator.userAgent)&&(d=.5);for(var e=0;e<c.length;e++)if(c.start(e)>b&&(!e||c.end(e-1)-b<=d)){d=e;break a}}d=null}if(null==d){if(3>this.a.readyState&&0<this.a.playbackRate)if(this.w!=b)this.w=b,this.M=Date.now(),this.v=!1;else if(!this.v&&this.M<Date.now()-1e3)for(d=0;d<c.length;d++)if(b>=c.start(d)&&b<c.end(d)-.5){this.a.currentTime+=.1,this.w=this.a.currentTime,this.v=!0;break}}else if((d||this.m)&&(e=c.start(d),!(e>=this.c.presentationTimeline.qb()))){var f=e-b,a=f<=a,g=!1;a||this.j||(this.j=!0,f=new U("largegap",{currentTime:b,gapSize:f}),f.cancelable=!0,this.H(f),this.l.jumpLargeGaps&&!f.defaultPrevented&&(g=!0)),(a||g)&&(d&&c.end(d-1),de(this,b,e))}}}},hh.vc=function(){this.m=!1;var a=this.a.currentTime,b=ce(this,a);.001<Math.abs(b-a)?de(this,a,b):(this.j=!1,this.L())},hh.tc=function(){var a=this.a.currentTime,b=ce(this,a);.001<Math.abs(b-a)&&de(this,a,b)},fe.prototype.o=function(){var a=this.j?this.j.o():Promise.resolve();return this.j=null,ie(this),this.C=this.h=this.l=this.w=this.g=this.B=this.a=null,this.c=[],a},fe.prototype.v=function(a){if(!this.c.some(function(b){return b.info.schemeIdUri==a.schemeIdUri&&b.info.startTime==a.startTime&&b.info.endTime==a.endTime})){var b={info:a,status:1};this.c.push(b);var c=new U("timelineregionadded",{detail:ge(a)});this.h(c),this.m(!0,b)}},fe.prototype.m=function(a,b){var c=b.info.startTime>this.a.currentTime?1:b.info.endTime<this.a.currentTime?3:2,d=2==b.status,e=2==c;c!=b.status&&((!a||d||e)&&(d||this.h(new U("timelineregionenter",{detail:ge(b.info)})),e||this.h(new U("timelineregionexit",{detail:ge(b.info)}))),b.status=c)},fe.prototype.H=function(){this.f=null,he(this);var a=vb(this.g,this.a.currentTime);a!=this.i&&(-1!=this.i&&this.C(),this.i=a);var a=Ia(this.a.buffered,this.a.currentTime),b=Ga(this.a.buffered),c=this.g.presentationTimeline,d=c.qa(),e="ended"==this.B.readyState,b=c.S()&&b>=d||this.a.ended||e;this.b?(c=1*Math.max(this.g.minBufferTime||0,this.w.rebufferingGoal),(b||a>=c)&&0!=this.b&&(this.b=!1,this.l(!1))):!b&&.5>a&&1!=this.b&&(this.b=!0,this.l(!0)),this.c.forEach(this.m.bind(this,!1))},hh=je.prototype,hh.o=function(){for(var a in this.c)Le(this.c[a]);return this.h=this.c=this.j=this.g=this.m=this.b=this.a=null,this.f=!0,Promise.resolve()},hh.configure=function(a){this.h=a,this.w=new u({maxAttempts:Math.max(a.retryParameters.maxAttempts,2),baseDelay:a.retryParameters.baseDelay,backoffFactor:a.retryParameters.backoffFactor,fuzzFactor:a.retryParameters.fuzzFactor,timeout:0},(!0))},hh.init=function(){var a=this.a.nc(this.b.periods[vb(this.b,_d(this.a.Wa))]);return a.variant||a.text?ue(this,a).then(function(){this.a&&this.a.Cd&&this.a.Cd()}.bind(this)):Promise.reject(new j(2,5,5005))},hh.He=function(a){if(!this.f&&!a.za&&null!=a.ta&&!a.va)if(a.ta=null,a.ua)Je(this,a,a.wb);else{try{var b=ye(this,a);null!=b&&(Ke(this,a,b),a.Ta=!1)}catch(c){return void Me(this,c)}b=Y(this.c),Ge(this,a),b.every(function(a){return a.endOfStream})&&this.a.N.endOfStream().then(function(){this.b.presentationTimeline.ga(this.a.N.ka())}.bind(this))}},hh.Yd=function(a,b,c){var d=c.u.Ob(),e=c.u.Ob(),f=c.u.D(),g=c.u.D(),h=c.u.D(),i=c.u.D(),j=c.u.La(c.u.I.byteLength-c.u.s);a=a.startTime+b.startTime+g/f,"urn:mpeg:dash:event:2012"==d?this.a.Ed():this.a.onEvent(new U("emsg",{detail:{startTime:a,endTime:a+h/f,schemeIdUri:d,value:e,timescale:f,presentationTimeDelta:g,eventDuration:h,id:i,messageData:j}})),c.ba.stop()},b("shaka.net.HttpPlugin",Ne),H("http",Ne,1),H("https",Ne,1),hh=Oe.prototype,hh.init=function(a,b){return Te(this,a,b).then(function(){var b=Object.keys(a);return Promise.all(b.map(function(a){return Re(this,a).then(function(b){this.c[a]=b}.bind(this))}.bind(this)))}.bind(this))},hh.o=function(){return Promise.all(this.a.map(function(a){try{a.transaction.abort()}catch(b){}return a.O["catch"](D)})).then(function(){this.b&&(this.b.close(),this.b=null)}.bind(this))},hh.get=function(a,b){var c;return Se(this,a,"readonly",function(a){c=a.get(b)}).then(function(){return c.result})},hh.forEach=function(a,b){return Se(this,a,"readonly",function(a){a.openCursor().onsuccess=function(a){(a=a.target.result)&&(b(a.value),a["continue"]())}})},hh.remove=function(a,b){return Se(this,a,"readwrite",function(a){a["delete"](b)})},b("shaka.offline.OfflineScheme",We),We.g=function(a){return a={uri:a,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},Promise.resolve(a)},We.h=function(a,b){var c,d;return Ve().then(function(b){return c=b,c.get("segment",a)}).then(function(a){return d=a,c.o()}).then(function(){if(!d)throw new j(2,9,9003,a);return{uri:b,data:d.data,headers:{}}})},We.f=function(a){return"offline:"+a},We.a=function(a){return(a=/^offline:([0-9]+)$/.exec(a))?Number(a[1]):null},We.c=function(a,b,c){return"offline:"+a+"/"+b+"/"+c},We.b=function(a){return(a=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a))?Number(a[1]):null},H("offline",We),df.prototype.o=function(){var a=this.j,b=this.l,c=this.i||Promise.resolve();return b.length&&(c=c.then(function(){return Qe(a,b)})),this.b={},this.l=[],this.i=this.a=this.w=this.v=this.j=this.m=null,c},hh=hf.prototype,hh.configure=function(){},hh.start=function(a){var b=We.a(a);if(null==b)return Promise.reject(new j(2,1,9004,a));this.a=b;var c;return Ve().then(function(a){return c=a,c.get("manifest",this.a)}.bind(this)).then(function(a){if(!a)throw new j(2,9,9003,b);return jf(a)}).then(function(a){return c.o().then(function(){return a})},function(a){return c.o().then(function(){throw a})})},hh.stop=function(){return Promise.resolve()},hh.update=function(){},hh.onExpirationUpdated=function(a,b){var c,d=this.a;Ve().then(function(a){return c=a,c.get("manifest",d)}).then(function(d){if(d&&!(0>d.sessionIds.indexOf(a))&&(void 0==d.expiration||d.expiration>b))return d.expiration=b,Pe(c,"manifest",d)})["catch"](function(){}).then(function(){return c.o()})},Nh["application/x-offline-manifest"]=hf,b("shaka.text.SimpleTextDisplayer",kf),kf.prototype.remove=function(a,b){return!!this.a&&(mf(this,function(c){return!(c.startTime>=b||c.endTime<=a)}),!0)},kf.prototype.remove=kf.prototype.remove,kf.prototype.append=function(a){this.a.cues.length&&a.length&&"EMPTY"!=a[0].id&&""!=a[0].id&&this.a.cues[this.a.cues.length-1].id==a[0].id&&a.shift();for(var b=[],c=0;c<a.length;c++){var d=lf(a[c]);d&&(this.a.cues.getCueById&&this.a.cues.getCueById(d.id)||b.push(d))}b.slice().sort(function(a,c){return a.startTime!=c.startTime?a.startTime-c.startTime:a.endTime!=c.endTime?a.endTime-c.startTime:b.indexOf(c)-b.indexOf(a)}).forEach(function(a){this.a.addCue(a)}.bind(this))},kf.prototype.append=kf.prototype.append,kf.prototype.o=function(){return this.a&&mf(this,function(){return!0}),this.a=null,Promise.resolve()},kf.prototype.destroy=kf.prototype.o,kf.prototype.isTextVisible=function(){return"showing"==this.a.mode},kf.prototype.isTextVisible=kf.prototype.isTextVisible,kf.prototype.setTextVisibility=function(a){this.a.mode=a?"showing":"hidden"},kf.prototype.setTextVisibility=kf.prototype.setTextVisibility,nf.prototype.then=function(a){return this.a=this.a.then(a).then(function(a){return this.b?(this.g(),Promise.reject(this.h)):Promise.resolve(a)}.bind(this)),this},nf.prototype.cancel=function(a){return this.c?Promise.resolve():(this.b=!0,this.h=a,this.i)},c(pf),b("shaka.Player",pf),pf.prototype.o=function(){return this.C=!0,qf(this).then(function(){var a=Promise.all([this.Sa,yf(this),this.m?this.m.o():null,this.v?this.v.o():null]);return this.f=null,this.mb=!1,this.c=this.v=this.g=this.m=null,a}.bind(this))},pf.prototype.destroy=pf.prototype.o,pf.version="v2.2.6-6-g57905e2";var Wh={};pf.registerSupportPlugin=function(a,b){Wh[a]=b},pf.isBrowserSupported=function(){return!!(a.Promise&&a.Uint8Array&&Array.prototype.forEach&&a.MediaSource&&MediaSource.isTypeSupported&&a.MediaKeys&&a.navigator&&a.navigator.requestMediaKeySystemAccess&&a.MediaKeySystemAccess&&a.MediaKeySystemAccess.prototype.getConfiguration)},pf.probeSupport=function(){return Da().then(function(a){var b=Rc(),c=Sa();a={manifest:b,media:c,drm:a};for(var d in Wh)a[d]=Wh[d]();return a})},pf.prototype.load=function(a,b,c){var d=this.vb(),e=new nf;this.ia=e,this.dispatchEvent(new U("loading"));var f=Date.now();return of(e.then(function(){return d}).then(function(){return this.j=Cf(),Q(this.m,this.f,"playing",this.ab.bind(this)),Q(this.m,this.f,"pause",this.ab.bind(this)),Q(this.m,this.f,"ended",this.ab.bind(this)),this.g=new this.c.abrFactory,uf(this),this.w=new this.c.textDisplayFactory,this.w.setTextVisibility(this.mb),Sc(a,this.v,this.c.manifest.retryParameters,c)}.bind(this)).then(function(b){return this.i=new b,this.i.configure(this.c.manifest),b={networkingEngine:this.v,filterNewPeriod:this.nb.bind(this),filterAllPeriods:this.Xb.bind(this),onTimelineRegionAdded:this.Rd.bind(this),onEvent:this.$a.bind(this),onError:this.Oa.bind(this)},2<this.i.start.length?(h("The ManifestParser interface has changed. Please upgrade your plugin to accept the PlayerInterface structure. See the ManifestParser documentation for details."),this.i.start(a,this.v,b.filterNewPeriod,b.onError,b.onEvent)):this.i.start(a,b)}.bind(this)).then(function(b){if(b.periods.some(function(a){return a.variants.some(function(a){return a.video&&a.audio})})&&b.periods.forEach(function(a){a.variants=a.variants.filter(function(a){return a.video&&a.audio})}),0==b.periods.length)throw new j(2,4,4014);return this.b=b,this.lb=a,this.l=new oa({Va:this.v,onError:this.Oa.bind(this),Kb:this.Dd.bind(this),onExpirationUpdated:this.Ad.bind(this),onEvent:this.$a.bind(this)}),this.l.configure(this.c.drm),this.l.init(b,!1)}.bind(this)).then(function(){this.Xb(this.b.periods),this.gb=Date.now()/1e3,this.Pa=this.c.preferredAudioLanguage,this.bb=this.c.preferredTextLanguage;var a=this.b.presentationTimeline.ka(),b=this.c.playRangeEnd,c=this.c.playRangeStart;return 0<c&&(this.S()||this.b.presentationTimeline.Jc(c)),b<a&&(this.S()||this.b.presentationTimeline.ga(b)),Promise.all([pa(this.l,this.f),this.jb])}.bind(this)).then(function(){return this.g.chooseStreams?(h("AbrManager API has changed. The SwitchCallback signature has changed to accept a variant instead of a map. Please update your AbrManager. The old API will be removed in v2.3."),this.g.init(this.Ke.bind(this))):this.g.init(this.Mc.bind(this)),this.h=new Zd(this.f,this.b,this.c.streaming,void 0==b?null:b,this.ze.bind(this),this.$a.bind(this)),this.B=new fe(this.f,this.M,this.b,this.c.streaming,this.Lc.bind(this),this.$a.bind(this),this.ye.bind(this)),this.L=new Ra(this.f,this.M,this.w),this.a=new je(this.b,{Wa:this.h,N:this.L,Va:this.v,nc:this.yd.bind(this),mc:this.Vc.bind(this),onError:this.Oa.bind(this),onEvent:this.$a.bind(this),Ed:this.Fd.bind(this),Lb:this.Od.bind(this),filterNewPeriod:this.nb.bind(this),filterAllPeriods:this.Xb.bind(this)}),this.a.configure(this.c.streaming),this.dispatchEvent(new U("streaming")),rf(this),this.a.init()}.bind(this)).then(function(){if(this.c.streaming.startAtSegmentBoundary){var a=Ff(this,_d(this.h));$d(this.h,a)}this.b.periods.forEach(this.nb.bind(this)),Jf(this),If(this);var a=ke(this.a),b=pb(a,this.Pa,this.cb);this.g.setVariants(b),a.variants.some(function(a){return a.primary}),this.kb.forEach(this.B.v.bind(this.B)),this.kb=[],R(this.m,this.f,"loadeddata",function(){this.j.loadLatency=(Date.now()-f)/1e3}.bind(this)),this.ia=null}.bind(this)))["catch"](function(a){return this.ia==e&&(this.ia=null,this.dispatchEvent(new U("unloading"))),Promise.reject(a)}.bind(this))},pf.prototype.load=pf.prototype.load,pf.prototype.configure=function(a){if(a.abr&&a.abr.manager){h("AbrManager configuration has changed. Please use abrFactory instead of abr.manager. The old API will be removed in v2.3.");var b=a.abr.manager;delete a.abr.manager,a.abrFactory=function(){return b}}a.streaming&&null!=a.streaming.infiniteRetriesForLiveStreams&&(h("Streaming configuration has changed. Please use streaming.failureCallback instead of streaming.infiniteRetriesForLiveStreams. The old API will be removed in v2.3."),this.cc=!!a.streaming.infiniteRetriesForLiveStreams,delete a.streaming.infiniteRetriesForLiveStreams),z(this.c,a,Bf(this),Af(),""),tf(this,"restrictions"in a)},pf.prototype.configure=pf.prototype.configure,pf.prototype.getConfiguration=function(){var a=Bf(this);return z(a,this.c,Bf(this),Af(),""),a},pf.prototype.getConfiguration=pf.prototype.getConfiguration,pf.prototype.me=function(){this.c=Bf(this),tf(this,!0)},pf.prototype.resetConfiguration=pf.prototype.me,pf.prototype.gd=function(){return this.f},pf.prototype.getMediaElement=pf.prototype.gd,pf.prototype.jc=function(){return this.v},pf.prototype.getNetworkingEngine=pf.prototype.jc,pf.prototype.fd=function(){return this.lb},pf.prototype.getManifestUri=pf.prototype.fd,pf.prototype.S=function(){return!!this.b&&this.b.presentationTimeline.S()},pf.prototype.isLive=pf.prototype.S,pf.prototype.xa=function(){return!!this.b&&this.b.presentationTimeline.xa()},pf.prototype.isInProgress=pf.prototype.xa,pf.prototype.sd=function(){if(!this.b||!this.b.periods.length)return!1;var a=this.b.periods[0].variants;return!!a.length&&!a[0].video},pf.prototype.isAudioOnly=pf.prototype.sd,pf.prototype.oe=function(){var a=0,b=0;return this.b&&(b=this.b.presentationTimeline,a=b.ca(),b=b.qb()),{start:a,end:b}},pf.prototype.seekRange=pf.prototype.oe,pf.prototype.keySystem=function(){return this.l?this.l.keySystem():""},pf.prototype.keySystem=pf.prototype.keySystem,pf.prototype.drmInfo=function(){return this.l?this.l.b:null},pf.prototype.drmInfo=pf.prototype.drmInfo,pf.prototype.pb=function(){return this.l?this.l.pb():1/0},pf.prototype.getExpiration=pf.prototype.pb,pf.prototype.td=function(){return this.Ra},pf.prototype.isBuffering=pf.prototype.td,pf.prototype.vb=function(){return this.C?Promise.resolve():(this.dispatchEvent(new U("unloading")),qf(this).then(function(){return this.Sa||(this.Sa=zf(this).then(function(){this.Sa=null}.bind(this))),this.Sa}.bind(this)))},pf.prototype.unload=pf.prototype.vb,pf.prototype.Cb=function(){return this.h?this.h.Cb():0},pf.prototype.getPlaybackRate=pf.prototype.Cb,pf.prototype.Le=function(a){this.h&&be(this.h,a),this.a&&pe(this.a,1!=a)},pf.prototype.trickPlay=pf.prototype.Le,pf.prototype.Wc=function(){this.h&&be(this.h,1),this.a&&pe(this.a,!1)},pf.prototype.cancelTrickPlay=pf.prototype.Wc,pf.prototype.qd=function(){if(!this.b)return[];var a=vb(this.b,_d(this.h)),b=this.H[a]||{};return jb(this.b.periods[a],b.audio,b.video)},pf.prototype.getVariantTracks=pf.prototype.qd,pf.prototype.pd=function(){if(!this.b)return[];var a=vb(this.b,_d(this.h));return kb(this.b.periods[a],(this.H[a]||{}).text).filter(function(a){return 0>this.hb.indexOf(a.id)}.bind(this))},pf.prototype.getTextTracks=pf.prototype.pd,pf.prototype.se=function(a){this.a&&(a=mb(ke(this.a),a))&&(wf(this,a,!1),this.Da?this.ha=a:re(this.a,a,!0))},pf.prototype.selectTextTrack=pf.prototype.se,pf.prototype.te=function(a,b){if(this.a){this.c.abr.enabled&&h("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var c=lb(ke(this.a),a);c&&nb(c)&&(vf(this,c,!1),Df(this,c,b))}},pf.prototype.selectVariantTrack=pf.prototype.te,pf.prototype.cd=function(){return this.a?ob(ke(this.a).variants).map(function(a){return a.language}).filter(F):[]},pf.prototype.getAudioLanguages=pf.prototype.cd,pf.prototype.od=function(){return this.a?ke(this.a).textStreams.map(function(a){return a.language}).filter(F):[]},pf.prototype.getTextLanguages=pf.prototype.od,pf.prototype.qe=function(a,b){if(this.a){var c=ke(this.a);this.Pa=a,this.cb=b||"",Hf(this,c,!0)}},pf.prototype.selectAudioLanguage=pf.prototype.qe,pf.prototype.re=function(a,b){if(this.a){var c=ke(this.a);this.bb=a,this.xb=b||"",Hf(this,c,!0)}},pf.prototype.selectTextLanguage=pf.prototype.re,pf.prototype.vd=function(){return this.w?this.w.isTextVisible():this.mb},pf.prototype.isTextTrackVisible=pf.prototype.vd,pf.prototype.we=function(a){this.w?this.w.setTextVisibility(a):this.mb=a,Kf(this)},pf.prototype.setTextTrackVisibility=pf.prototype.we,pf.prototype.jd=function(){return this.b?new Date(1e3*this.b.presentationTimeline.c+1e3*this.f.currentTime):null},pf.prototype.getPlayheadTimeAsDate=pf.prototype.jd,pf.prototype.md=function(){return this.b?new Date(1e3*this.b.presentationTimeline.c):null},pf.prototype.getPresentationStartTimeAsDate=pf.prototype.md,pf.prototype.Bb=function(){return this.L?this.L.Bb():{total:[],audio:[],video:[],text:[]}},pf.prototype.getBufferedInfo=pf.prototype.Bb,pf.prototype.getStats=function(){Ef(this),this.ab();var a=null,b=null,c=this.f,c=c&&c.getVideoPlaybackQuality?c.getVideoPlaybackQuality():{};return this.h&&this.b&&(a=vb(this.b,_d(this.h)),b=this.H[a],b=ub(b.audio,b.video,this.b.periods[a].variants),a=b.video||{}),a||(a={}),b||(b={}),{width:a.width||0,height:a.height||0,streamBandwidth:b.bandwidth||0,decodedFrames:Number(c.totalVideoFrames),droppedFrames:Number(c.droppedVideoFrames),estimatedBandwidth:this.g?this.g.getBandwidthEstimate():NaN,loadLatency:this.j.loadLatency,playTime:this.j.playTime,bufferingTime:this.j.bufferingTime,switchHistory:A(this.j.switchHistory),stateHistory:A(this.j.stateHistory)}},pf.prototype.getStats=pf.prototype.getStats,pf.prototype.addTextTrack=function(a,b,c,d,e,f){if(!this.a)return Promise.reject();for(var g,h=ke(this.a),i=0;i<this.b.periods.length;i++)if(this.b.periods[i]==h){if(i==this.b.periods.length-1){if(g=this.b.presentationTimeline.ka()-h.startTime,1/0==g)return Promise.reject()}else g=this.b.periods[i+1].startTime-h.startTime;break}var j={id:this.Sc++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(b){return 1!=b?null:new kc(1,0,g,function(){return[a]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:d,codecs:e||"",kind:c,encrypted:!1,keyId:null,language:b,label:f||null,type:"text",primary:!1,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null};return this.hb.push(j.id),h.textStreams.push(j),ue(this.a,{text:j}).then(function(){if(!this.C){var a=this.b.periods.indexOf(h),d=oe(this.a,"text");return d&&(this.H[a].text=d.id),this.hb.splice(this.hb.indexOf(j.id),1),Hf(this,h,!0),Jf(this),{id:j.id,active:!1,type:"text",bandwidth:0,language:b,label:f||null,kind:c,width:null,height:null}}}.bind(this))},pf.prototype.addTextTrack=pf.prototype.addTextTrack,pf.prototype.Vb=function(a,b){this.ib.width=a,this.ib.height=b},pf.prototype.setMaxHardwareResolution=pf.prototype.Vb,pf.prototype.Fc=function(){if(this.a){var a=this.a;if(a.f)a=!1;else if(a.l)a=!1;else{for(var b in a.c){var c=a.c[b];c.Ta&&(c.Ta=!1,Ke(a,c,.1))}a=!0}}else a=!1;return a},pf.prototype.retryStreaming=pf.prototype.Fc,pf.prototype.ed=function(){return this.b},pf.prototype.getManifest=pf.prototype.ed,hh=pf.prototype,hh.Zc=function(a){var b=[1001,1002,1003];this.S()&&this.cc&&0<=b.indexOf(a.code)&&(a.severity=1,this.Fc())},hh.Xb=function(a){a.forEach(eb.bind(null,this.l,this.a?me(this.a):null,this.a?ne(this.a):null));var b=N(a,function(a){return a.variants.some(nb)});if(!b)throw new j(2,4,9009);if(b<a.length)throw new j(2,4,4011);a.forEach(function(a){if(db(a,this.c.restrictions,this.ib)&&this.a&&ke(this.a)==a&&Jf(this),!a.variants.some(nb))throw new j(2,4,4012)}.bind(this))},hh.nb=function(a){eb(this.l,this.a?me(this.a):null,this.a?ne(this.a):null,a);var b=a.variants,c=b.some(nb);if(db(a,this.c.restrictions,this.ib)&&this.a&&ke(this.a)==a&&Jf(this),a=b.some(nb),!c)throw new j(2,4,4011);if(!a)throw new j(2,4,4012)},hh.Ae=function(a,b){this.g&&this.g.segmentDownloaded(a,b)},hh.Lc=function(a){if(Ef(this),this.Ra=a,this.ab(),this.h){var b=this.h;a!=b.i&&(b.i=a,be(b,b.h))}this.dispatchEvent(new U("buffering",{buffering:a}))},hh.ye=function(){Jf(this)},hh.ab=function(){if(!this.C){var a=this.Ra?"buffering":this.f.ended?"ended":this.f.paused?"paused":"playing",b=Date.now()/1e3;if(this.j.stateHistory.length){var c=this.j.stateHistory[this.j.stateHistory.length-1];if(c.duration=b-c.timestamp,a==c.state)return}this.j.stateHistory.push({timestamp:b,state:a,duration:0})}},hh.ze=function(){if(this.B){var a=this.B;a.c.forEach(a.m.bind(a,!0))}this.a&&se(this.a)},hh.yd=function(a){this.Da=!0,this.g.disable();var b={audio:!1,text:!1},c=pb(a,this.Pa,this.cb,b);return a=qb(a,this.bb,this.xb,b),c=Gf(this,c),a=a[0]||null,this.ha=this.Qa=null,c&&vf(this,c,!0),a&&(wf(this,a,!0),!le(this.a)&&c&&c.audio&&b.text&&a.language!=c.audio.language&&(this.w.setTextVisibility(!0),Kf(this))),{variant:c,text:a}},hh.Vc=function(){this.Da=!1,this.c.abr.enabled&&this.g.enable(),this.Qa&&(qe(this.a,this.Qa,this.bc),this.Qa=null),this.ha&&(re(this.a,this.ha,!0),this.ha=null)},hh.Fd=function(){this.i&&this.i.update&&this.i.update()},hh.Od=function(){this.h&&this.h.Lb()},hh.Mc=function(a,b){vf(this,a,!0),this.a&&(qe(this.a,a,b||!1),If(this))},hh.Ke=function(a,b){if(this.a){var c=le(this.a);(c=tb(a.audio,a.video,c?c.variants:[]))&&this.Mc(c,b)}},hh.Oa=function(a){if(!this.C){var b=new U("error",{detail:a});this.dispatchEvent(b),b.defaultPrevented&&(a.handled=!0)}},hh.Rd=function(a){this.B?this.B.v(a):this.kb.push(a)},hh.$a=function(a){this.dispatchEvent(a)},hh.Sd=function(){if(this.f.error){var a=this.f.error.code;if(1!=a){var b=this.f.error.msExtendedCode;b&&(0>b&&(b+=Math.pow(2,32)),b=b.toString(16)),this.Oa(new j(2,3,3016,a,b,this.f.error.message))}}},hh.Dd=function(a){var b=["output-restricted","internal-error"],c=ke(this.a),d=!1,e=1==Object.keys(a).length&&"00"==Object.keys(a)[0];c.variants.forEach(function(c){var f=[];c.audio&&f.push(c.audio),c.video&&f.push(c.video),f.forEach(function(f){var g=c.allowedByKeySystem;f.keyId&&(f=a[e?"00":f.keyId],c.allowedByKeySystem=!!f&&0>b.indexOf(f)),g!=c.allowedByKeySystem&&(d=!0)})});var f=tb(me(this.a),ne(this.a),c.variants);f&&!f.allowedByKeySystem&&Hf(this,c,!0),d&&Jf(this)},hh.Ad=function(a,b){this.i&&this.i.onExpirationUpdated&&this.i.onExpirationUpdated(a,b),this.dispatchEvent(new U("expirationupdated"))},hh.pe=function(a){if(this.C)return Promise.resolve();if(this.b&&this.b.presentationTimeline){if(a<this.b.presentationTimeline.ca()||a>this.b.presentationTimeline.qa())return Promise.reject();var b=ne(this.a);if(!b){a:{for(b=this.b.periods.length-1;0<b;--b)if(a>=this.b.periods[b].startTime)break a;b=0}b=this.b.periods[b].variants[0].video}return a=b.findSegmentPosition(a),(a=null!=a?b.getSegmentReference(a):null)?Lf(this,a):Promise.reject()}return Promise.resolve()},pf.prototype.segmentExist=pf.prototype.pe,b("shaka.offline.Storage",Mf),Mf.support=Nf,Mf.prototype.o=function(){var a=this.a,b=this.h?this.h.o()["catch"](function(){}).then(function(){if(a)return a.o()}):Promise.resolve();return this.c=this.b=this.h=this.a=null,b},Mf.prototype.destroy=Mf.prototype.o,Mf.prototype.configure=function(a){z(this.c,a,Pf(this),{},"")},Mf.prototype.configure=Mf.prototype.configure,Mf.prototype.Ie=function(a,b,c){function d(a){f=a}if(this.v)return Promise.reject(new j(2,9,9006));this.v=!0;var e,f=null;return Qf(this).then(function(){return Uf(this),Of(this,a,d,c)}.bind(this)).then(function(c){if(Uf(this),this.g=c.manifest,this.f=c.$c,this.g.presentationTimeline.S()||this.g.presentationTimeline.xa())throw new j(2,9,9005,a);this.m(this.g.periods),this.i=this.a.c.manifest++,this.l=0,c=b||{};var d=this.g.periods.map(this.C.bind(this)),f=this.f.b,g=sa(this.f);if(f){if(!g.length)throw new j(2,9,9007,a);f.initData=[]}return e={key:this.i,originalManifestUri:a,duration:this.l,size:0,expiration:this.f.pb(),periods:d,sessionIds:this.c.usePersistentLicense?g:[],drmInfo:f,appMetadata:c},ff(this.h,e)}.bind(this)).then(function(){if(Uf(this),f)throw f;return Rf(this)}.bind(this)).then(function(){return Xe(e)}.bind(this))["catch"](function(a){return Rf(this)["catch"](D).then(function(){throw a})}.bind(this))},Mf.prototype.store=Mf.prototype.Ie,Mf.prototype.remove=function(a){function b(a){6013!=a.code&&(g=a)}var c=a.offlineUri,d=We.a(c);if(null==d)return Promise.reject(new j(2,9,9004,c));var e,f,g=null;return Qf(this).then(function(){return Uf(this),this.a.get("manifest",d)}.bind(this)).then(function(a){if(Uf(this),!a)throw new j(2,9,9003,c);return e=a,a=jf(e),f=new oa({Va:this.b.v,onError:b,Kb:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),f.configure(this.b.getConfiguration().drm),f.init(a,this.c.usePersistentLicense||!1)}.bind(this)).then(function(){return qa(f,e.sessionIds)}.bind(this)).then(function(){return f.o()}.bind(this)).then(function(){if(Uf(this),g)throw g;var b=e.periods.map(function(a){return a.streams.map(function(a){var b=a.segments.map(function(a){return We.b(a.uri)});return a.initSegmentUri&&b.push(We.b(a.initSegmentUri)),b}).reduce(C,[])}).reduce(C,[]),c=0,d=b.length,f=this.c.progressCallback;return Qe(this.a,b,function(){c++,f(a,c/d)})}.bind(this)).then(function(){return Uf(this),this.c.progressCallback(a,1),this.a.remove("manifest",d)}.bind(this))},Mf.prototype.remove=Mf.prototype.remove,Mf.prototype.list=function(){var a=[];return Qf(this).then(function(){return Uf(this),this.a.forEach("manifest",function(b){a.push(Xe(b))})}.bind(this)).then(function(){return a})},Mf.prototype.list=Mf.prototype.list,Mf.prototype.B=function(a){for(var b,c=[],d=bb(this.b.getConfiguration().preferredAudioLanguage),e=[0,th,uh],f=a.filter(function(a){return"variant"==a.type}),e=e.map(function(a){return f.filter(function(b){return b=bb(b.language),ab(a,d,b)})}),g=0;g<e.length;g++)if(e[g].length){b=e[g];break}b||(e=f.filter(function(a){return a.primary}),e.length&&(b=e)),b||(b=f,f.map(function(a){return a.language}).filter(F));var h=b.filter(function(a){return a.height&&480>=a.height});return h.length&&(h.sort(function(a,b){return b.height-a.height}),b=h.filter(function(a){return a.height==h[0].height})),b.sort(function(a,b){return a.bandwidth-b.bandwidth}),b.length&&c.push(b[Math.floor(b.length/2)]),c.push.apply(c,a.filter(function(a){return"text"==a.type})),c},Mf.prototype.m=function(a){a.forEach(this.w.bind(this))},Mf.prototype.w=function(a){var b=null;if(this.j){var c=this.j.filter(function(a){return"variant"==a.type})[0];c&&(b=lb(a,c))}var d=c=null;b&&(b.audio&&(c=b.audio),b.video&&(d=b.video)),eb(this.f,c,d,a),db(a,this.b.getConfiguration().restrictions,{width:1/0,height:1/0})},Mf.prototype.C=function(a){var b,c,d=jb(a,null,null),e=kb(a,null),d=this.c.trackSelectionCallback(d.concat(e));for(this.j||(this.j=d,this.m(this.g.periods)),e=d.length-1;0<e;--e){var f=!1;for(c=e-1;0<=c;--c)if(d[e].type==d[c].type&&d[e].kind==d[c].kind&&d[e].language==d[c].language){f=!0;break}if(f)break}for(f=[],e=0;e<d.length;e++)(b=lb(a,d[e]))?(b.audio&&((c=f.filter(function(a){return a.id==b.audio.id})[0])?c.variantIds.push(b.id):(c=b.video?b.bandwidth/2:b.bandwidth,f.push(Tf(this,a,b.audio,c,b.id)))),b.video&&((c=f.filter(function(a){return a.id==b.video.id})[0])?c.variantIds.push(b.id):(c=b.audio?b.bandwidth/2:b.bandwidth,f.push(Tf(this,a,b.video,c,b.id))))):f.push(Tf(this,a,mb(a,d[e]),0));return{startTime:a.startTime,streams:f}},Wh.offline=Nf,b("shaka.polyfill.installAll",function(){for(var a=0;a<Xh.length;++a)Xh[a]()});var Xh=[];b("shaka.polyfill.register",Vf),Vf(function(){var b=navigator.userAgent;b&&0<=b.indexOf("CrKey")&&delete a.indexedDB});var Yh;Vf(function(){0>navigator.userAgent.indexOf("Trident/")||HTMLInputElement.prototype.addEventListener==Wf||(Yh=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Wf)}),Vf(function(){if(4503599627370497!=Math.round(4503599627370497)){var a=Math.round;Math.round=function(b){var c=b;return 4503599627370496>=b&&(c=a(b)),c}}}),Xf.prototype.c=function(a){if(!(1<a.version)){var b=la(a.u.La(16)),c=[];if(0<a.version)for(var d=a.u.D(),e=0;e<d;++e){var f=la(a.u.La(16));c.push(f)}d=a.u.D(),a.u.J(d),this.b.push.apply(this.b,c),this.f.push(b),this.a.push({start:a.start,end:a.start+a.size-1})}},Zf.prototype.createMediaKeys=function(){var a=new _f(this.keySystem);return Promise.resolve(a)},Zf.prototype.getConfiguration=function(){return this.a},_f.prototype.createSession=function(a){if("temporary"!=(a||"temporary"))throw new TypeError("Session type "+a+" is unsupported on this platform.");return new bg(this.a)},_f.prototype.setServerCertificate=function(){return Promise.resolve(!1)},c(bg),hh=bg.prototype,hh.generateRequest=function(a,b){this.a=new t;try{this.c=this.g.createSession("video/mp4",new Uint8Array(b),null),Q(this.f,this.c,"mskeymessage",this.Jd.bind(this)),Q(this.f,this.c,"mskeyadded",this.Hd.bind(this)),Q(this.f,this.c,"mskeyerror",this.Id.bind(this)),eg(this,"status-pending")}catch(c){this.a.reject(c)}return this.a},hh.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},hh.update=function(a){this.b=new t;try{this.c.update(new Uint8Array(a))}catch(b){this.b.reject(b)}return this.b},hh.close=function(){try{this.c.close(),this.closed.resolve(),S(this.f)}catch(a){this.closed.reject(a)}return this.closed},hh.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},hh.Jd=function(a){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new U("message",{messageType:void 0==this.keyStatuses.a?"licenserequest":"licenserenewal",message:a.message.buffer}))},hh.Hd=function(){this.a?(eg(this,"usable"),this.a.resolve(),this.a=null):this.b&&(eg(this,"usable"),this.b.resolve(),this.b=null)},hh.Id=function(){var a=Error("EME PatchedMediaKeysMs key error");if(a.errorCode=this.c.error,this.a)this.a.reject(a),this.a=null;else if(this.b)this.b.reject(a),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:eg(this,"output-not-allowed");default:eg(this,"internal-error");
}};var Zh;hh=fg.prototype,hh.forEach=function(a){this.a&&a(this.a,Zh)},hh.get=function(a){if(this.has(a))return this.a},hh.has=function(a){var b=Zh;return!(!this.a||!ma(new Uint8Array(a),new Uint8Array(b)))},hh.entries=function(){},hh.keys=function(){},hh.values=function(){},ig.prototype.createSession=function(){},ig.prototype.setServerCertificate=function(){},jg.prototype.getConfiguration=function(){},jg.prototype.createMediaKeys=function(){};var $h="";og.prototype.createMediaKeys=function(){var a=new pg(this.a);return Promise.resolve(a)},og.prototype.getConfiguration=function(){return this.b},hh=pg.prototype,hh.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");return a=this.b||document.createElement("video"),a.src||(a.src="about:blank"),b=new sg(a,this.g,b),this.c.push(b),b},hh.setServerCertificate=function(){return Promise.resolve(!1)},hh.Wd=function(a){var b=document.createEvent("CustomEvent");b.initCustomEvent("encrypted",!1,!1,null),b.initDataType="webm",b.initData=a.initData,this.b.dispatchEvent(b)},hh.Vd=function(a){var b=rg(this,a.sessionId);b&&(a=new U("message",{messageType:void 0==b.keyStatuses.a?"licenserequest":"licenserenewal",message:a.message}),b.b&&(b.b.resolve(),b.b=null),b.dispatchEvent(a))},hh.Td=function(a){(a=rg(this,a.sessionId))&&(ug(a,"usable"),a.a&&a.a.resolve(),a.a=null)},hh.Ud=function(a){var b=rg(this,a.sessionId);if(b){var c=Error("EME v0.1b key error");c.errorCode=a.errorCode,c.errorCode.systemCode=a.systemCode,!a.sessionId&&b.b?(c.method="generateRequest",45==a.systemCode&&(c.message="Unsupported session type."),b.b.reject(c),b.b=null):a.sessionId&&b.a?(c.method="update",b.a.reject(c),b.a=null):(c=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?ug(b,"output-restricted"):1==c?ug(b,"expired"):ug(b,"internal-error"))}},c(sg),hh=sg.prototype,hh.Yb=function(a,b){if(this.a)this.a.then(this.Yb.bind(this,a,b))["catch"](this.Yb.bind(this,a,b));else{if(this.a=a,"webkit-org.w3.clearkey"==this.c){var c=aa(b),d=JSON.parse(c);"oct"!=d.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),c=ja(d.keys[0].k),d=ja(d.keys[0].kid)}else c=new Uint8Array(b),d=null;var e=lg("addKey");try{this.f[e](this.c,c,d,this.sessionId)}catch(f){this.a.reject(f),this.a=null}}},hh.generateRequest=function(a,b){return tg(this,b,null)},hh.load=function(a){return"persistent-license"==this.g?tg(this,null,a):Promise.reject(Error("Not a persistent session."))},hh.update=function(a){var b=new t;return this.Yb(b,a),b},hh.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var a=lg("cancelKeyRequest");try{this.f[a](this.c,this.sessionId)}catch(b){}}return this.closed.resolve(),this.closed},hh.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()};var _h;hh=vg.prototype,hh.forEach=function(a){this.a&&a(this.a,_h)},hh.get=function(a){if(this.has(a))return this.a},hh.has=function(a){var b=_h;return!(!this.a||!ma(new Uint8Array(a),new Uint8Array(b)))},hh.entries=function(){},hh.keys=function(){},hh.values=function(){},Vf(function(){!a.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?kg("webkit"):HTMLMediaElement.prototype.generateKeyRequest?kg(""):a.MSMediaKeys?(Zh=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=$f,a.MediaKeys=_f,a.MediaKeySystemAccess=Zf,navigator.requestMediaKeySystemAccess=Yf):(navigator.requestMediaKeySystemAccess=gg,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=hg,a.MediaKeys=ig,a.MediaKeySystemAccess=jg))}),Vf(function(){if(a.MediaSource)if(a.cast&&cast.__platform__&&cast.__platform__.canDisplayType)Cg();else if(navigator.vendor&&0<=navigator.vendor.indexOf("Apple")){var b=navigator.appVersion;Bg(),0<=b.indexOf("Version/8")?a.MediaSource=null:0<=b.indexOf("Version/9")?wg():0<=b.indexOf("Version/10")?(wg(),yg()):0<=b.indexOf("Version/11")&&(wg(),xg())}});var ai=0;Dg.prototype.then=function(a,b){var c=new Dg;switch(this.Ba){case 1:Ig(this,c,a);break;case 2:Ig(this,c,b);break;case ai:this.c.push({O:c,zb:a}),this.b.push({O:c,zb:b})}return c},Dg.prototype["catch"]=function(a){return this.then(void 0,a)},Dg.prototype.ma=function(a){if(this.Ba==ai){for(this.f=a,this.Ba=1,a=0;a<this.c.length;++a)Ig(this,this.c[a].O,this.c[a].zb);this.c=[],this.b=[]}},Dg.prototype.a=function(a){if(this.Ba==ai){for(this.f=a,this.Ba=2,a=0;a<this.b.length;++a)Ig(this,this.b[a].O,this.b[a].zb);this.c=[],this.b=[]}};var bi=null,ci=[];Vf(function(b){a.setImmediate?(Lg=function(b){return a.setImmediate(b)},Mg=function(b){return a.clearImmediate(b)}):(Lg=function(b){return a.setTimeout(b,0)},Mg=function(b){return a.clearTimeout(b)}),a.Promise&&!b||(a.Promise=Dg,a.Promise.resolve=Eg,a.Promise.reject=Fg,a.Promise.all=Gg,a.Promise.race=Hg,a.Promise.prototype.then=Dg.prototype.then,a.Promise.prototype["catch"]=Dg.prototype["catch"])}),Vf(function(){if(a.HTMLMediaElement){var b=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var a=b.apply(this,arguments);return a&&a["catch"](function(){}),a}}}),Vf(function(){if(a.HTMLVideoElement){var b=HTMLVideoElement.prototype;!b.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in b&&(b.getVideoPlaybackQuality=Ng)}}),Vf(function(){var b=a.navigator.userAgent.indexOf("Edge/");if((-1!=a.navigator.userAgent.indexOf("Trident/")||-1!=b||!a.VTTCue)&&a.TextTrackCue)if(b=TextTrackCue.length,3==b)a.VTTCue=Og;else if(6==b)a.VTTCue=Pg;else{try{var c=!!Og(1,2,"")}catch(d){c=!1}c&&(a.VTTCue=Og)}}),b("shaka.text.Cue",Qg);var di="auto";Qg.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:di};var ei="center",fi={LEFT:"left",RIGHT:"right",CENTER:ei,START:"start",END:"end"};Qg.textAlign=fi;var gi="before",hi={BEFORE:gi,CENTER:"center",AFTER:"after"};Qg.displayAlign=hi;var ii=0,ji=2,ki=3;Qg.writingDirection={HORIZONTAL_LEFT_TO_RIGHT:ii,HORIZONTAL_RIGHT_TO_LEFT:1,VERTICAL_LEFT_TO_RIGHT:ji,VERTICAL_RIGHT_TO_LEFT:ki};var li=0,mi=1;Qg.lineInterpretation={LINE_NUMBER:li,PERCENTAGE:mi};var ni="center",oi={CENTER:ni,START:"start",END:"end"};Qg.lineAlign=oi;var pi=400;Qg.fontWeight={NORMAL:pi,BOLD:700};var qi="normal",ri={NORMAL:qi,ITALIC:"italic",OBLIQUE:"oblique"};Qg.fontStyle=ri,Qg.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},Rg.prototype.parseInit=function(){},Rg.prototype.parseMedia=function(a,b){var c=aa(a),d=[],e=new DOMParser,f=null;try{f=e.parseFromString(c,"text/xml")}catch(g){throw new j(2,2,2005)}if(f){var h=f.getElementsByTagName("tt")[0];if(!h)throw new j(2,2,2005);e=h.getAttribute("ttp:frameRate"),f=h.getAttribute("ttp:subFrameRate");var i=h.getAttribute("ttp:frameRateMultiplier"),k=h.getAttribute("ttp:tickRate");if(c=h.getAttribute("xml:space")||"default","default"!=c&&"preserve"!=c)throw new j(2,2,2005);for(c="default"==c,e=new _g(e,f,i,k),f=Sg(h.getElementsByTagName("styling")[0]),i=Sg(h.getElementsByTagName("layout")[0]),h=Sg(h.getElementsByTagName("body")[0]),k=0;k<h.length;k++){var l=h[k],m=b.periodStart,n=e,o=f,p=i,q=c;if(l.hasAttribute("begin")||l.hasAttribute("end")||!/^\s*$/.test(l.textContent)){Tg(l,q);var q=Zg(l.getAttribute("begin"),n),r=Zg(l.getAttribute("end"),n),n=Zg(l.getAttribute("dur"),n),s=l.textContent;if(null==r&&null!=n&&(r=q+n),null==q||null==r)throw new j(2,2,2001);m=new Qg(q+m,r+m,s),q=Yg(l,"region",p),p=m,"rtl"==Vg(l,q,o,"tts:direction")&&(p.writingDirection=1),r=Vg(l,q,o,"tts:writingMode"),"tb"==r||"tblr"==r?p.writingDirection=ji:"tbrl"==r?p.writingDirection=ki:"rltb"==r||"rl"==r?p.writingDirection=1:r&&(p.writingDirection=ii),(r=Vg(l,q,o,"tts:origin"))&&(r=yi.exec(r))&&(p.region.x=Number(r[1]),p.region.y=Number(r[2])),(r=Vg(l,q,o,"tts:extent"))&&(r=yi.exec(r))&&(p.region.width=Number(r[1]),p.region.height=Number(r[2])),(r=Vg(l,q,o,"tts:textAlign"))&&(p.positionAlign=Bi[r],p.lineAlign=Ai[r],p.textAlign=fi[r.toUpperCase()]),(r=Vg(l,q,o,"tts:displayAlign"))&&(p.displayAlign=hi[r.toUpperCase()]),(r=Vg(l,q,o,"tts:color"))&&(p.color=r),(r=Vg(l,q,o,"tts:backgroundColor"))&&(p.backgroundColor=r),(r=Vg(l,q,o,"tts:fontFamily"))&&(p.fontFamily=r),(r=Vg(l,q,o,"tts:fontWeight"))&&"bold"==r&&(p.fontWeight=700),(r=Vg(l,q,o,"tts:wrapOption"))&&"noWrap"==r&&(p.wrapLine=!1),(r=Vg(l,q,o,"tts:lineHeight"))&&r.match(zi)&&(p.lineHeight=r),(r=Vg(l,q,o,"tts:fontSize"))&&r.match(zi)&&(p.fontSize=r),(r=Vg(l,q,o,"tts:fontStyle"))&&(p.fontStyle=ri[r.toUpperCase()]),(q=Wg(q,o,"tts:textDecoration"))&&Ug(p,q),(l=Xg(l,o,"tts:textDecoration"))&&Ug(p,l)}else m=null;m&&d.push(m)}}return d};var si=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ti=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,ui=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,vi=/^(\d*\.?\d*)f$/,wi=/^(\d*\.?\d*)t$/,xi=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,yi=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,zi=/^(\d+px|\d+em)$/,Ai={left:"start",center:"center",right:"end",start:"start",end:"end"},Bi={left:"line-left",center:"center",right:"line-right"};Oa("application/ttml+xml",Rg),ah.prototype.parseInit=function(a){var b=!1;if((new nc).F("moov",oc).F("trak",oc).F("mdia",oc).F("minf",oc).F("stbl",oc).$("stsd",pc).F("stpp",function(a){b=!0,a.ba.stop()}).parse(a),!b)throw new j(2,2,2007)},ah.prototype.parseMedia=function(a,b){var c=!1,d=[];if((new nc).F("mdat",qc(function(a){c=!0,d=d.concat(this.a.parseMedia(a,b))}.bind(this))).parse(a),!c)throw new j(2,2,2007);return d},Oa('application/mp4; codecs="stpp"',ah),Oa('application/mp4; codecs="stpp.TTML.im1t"',ah),bh.prototype.parseInit=function(){},bh.prototype.parseMedia=function(a,b){var c=aa(a),c=c.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),c=c.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(c[0]))throw new j(2,2,2e3);for(var d=b.segmentStart,e=[],f=1;f<c.length;f++){var g=c[f].split("\n"),h=d;if(1==g.length&&!g[0]||/^NOTE($|[ \t])/.test(g[0]))var i=null;else{i=null,0>g[0].indexOf("-->")&&(i=g[0],g.splice(0,1));var k=new qd(g[0]),l=dh(k),m=rd(k,/[ \t]+--\x3e[ \t]+/g),n=dh(k);if(null==l||!m||null==n)throw new j(2,2,2001);for(g=new Qg(l+h,n+h,g.slice(1).join("\n").trim()),rd(k,/[ \t]+/gm),h=sd(k);h;)ch(g,h),rd(k,/[ \t]+/gm),h=sd(k);null!=i&&(g.id=i),i=g}i&&e.push(i)}return e},Oa("text/vtt",bh),Oa('text/vtt; codecs="vtt"',bh),eh.prototype.parseInit=function(a){var b=!1;if((new nc).F("moov",oc).F("trak",oc).F("mdia",oc).$("mdhd",function(a){0==a.version?(a.u.J(4),a.u.J(4),this.a=a.u.D(),a.u.J(4)):(a.u.J(8),a.u.J(8),this.a=a.u.D(),a.u.J(8)),a.u.J(4)}.bind(this)).F("minf",oc).F("stbl",oc).$("stsd",pc).F("wvtt",function(){b=!0}).parse(a),!this.a)throw new j(2,2,2008);if(!b)throw new j(2,2,2008)},eh.prototype.parseMedia=function(a,b){if(!this.a)throw new j(2,2,2008);var c=0,d=[],e=[],f=[],g=!1,h=!1,i=!1,k=null;if((new nc).F("moof",oc).F("traf",oc).$("tfdt",function(a){g=!0,c=a.version?a.u.Ma():a.u.D()}).$("tfhd",function(a){var b=a.hc;a=a.u,a.J(4),1&b&&a.J(8),2&b&&a.J(4),k=8&b?a.D():null}).$("trun",function(a){h=!0;var b=a.version,c=a.hc;a=a.u;var e=a.D();1&c&&a.J(4),4&c&&a.J(4);for(var f=[],g=0;g<e;g++){var i={duration:null,Zb:null};256&c&&(i.duration=a.D()),512&c&&a.J(4),1024&c&&a.J(4),2048&c&&(i.Zb=b?a.Bc():a.D()),f.push(i)}d=f}).F("vtte",function(){e.push(null)}).F("vttc",qc(function(a){e.push(a)})).F("mdat",function(a){i=!0,oc(a)}).parse(a),!i&&!g&&!h)throw new j(2,2,2008);for(var l=c,m=0;m<d.length;m++){var n=d[m],o=e[m],p=n.duration||k;p&&(n=n.Zb?c+n.Zb:l,l=n+p,o&&f.push(fh(o,b.periodStart+n/this.a,b.periodStart+l/this.a)))}return f.filter(E)},Oa('application/mp4; codecs="wvtt"',eh)}).call(b,this),a.exports?a.exports=b.shaka:this.shaka=b.shaka}()}),J=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},K=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),L=function(){function a(){J(this,a)}return K(a,[{key:"init",value:function(a,b,c){if(this.mixins=a,this.context=b,this.opt={warn:!0,mergeDuplicates:!0},this.contextMethods=Object.getOwnPropertyNames(this.context.constructor.prototype),this.reactMethods=["componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"],c&&(this.opt.warn=void 0!==c.warn?c.warn:this.opt.warn,this.opt.mergeDuplicates=void 0!==c.mergeDuplicates?c.mergeDuplicates:this.opt.mergeDuplicates),this.mixins.constructor===Array)a.map(function(a){this.grabMethods(a)},this);else{if("function"!=typeof a&&"object"!=typeof a)throw"mixins expects a function, an array, or an object. Please and thank you";this.grabMethods(a)}}},{key:"addNewMethod",value:function(a,b){this.mixins.prototype?this.context.constructor.prototype[a]=this.mixins.prototype[a]:this.context.constructor.prototype[a]="object"==typeof b?b[a]:b.prototype[a],this.contextMethods=Object.getOwnPropertyNames(this.context.constructor.prototype)}},{key:"extendMethod",value:function(a,b,c){var d=this.context[b],e="object"==typeof c?c[a]:c.prototype[a];this.context[a]=function(){e.call(this,arguments),d.call(this,arguments)}}},{key:"grabMethods",value:function(a){var b=this,c=a,d="object"==typeof a?Object.getOwnPropertyNames(a):Object.getOwnPropertyNames(a.prototype);d.map(function(a){"constructor"!==a&&"render"!==a&&b.checkForMatch(a,c)},this)}},{key:"checkForMatch",value:function(a,b){var c=this;this.contextMethods.map(function(d){a===d&&(c.reactMethods.indexOf(a)>-1?c.extendMethod(a,d,b):(c.opt.warn,c.opt.mergeDuplicates&&c.extendMethod(a,d,b)))}),this.addNewMethod(a,b)}}]),a}(),M=new L,N=M.init.bind(M);i.prototype.from3to1=function(a){return this.hasOwnProperty(a)?this[a]["ISO_639-1"]:null},window.iso639Converter=new i;var O={ab:{name:"Abkhaz",nativeName:""},aa:{name:"Afar",nativeName:"Afaraf"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},sq:{name:"Albanian",nativeName:"Shqip"},am:{name:"Amharic",nativeName:""},ar:{name:"Arabic",nativeName:""},an:{name:"Aragonese",nativeName:"Aragons"},hy:{name:"Armenian",nativeName:""},as:{name:"Assamese",nativeName:""},av:{name:"Avaric",nativeName:" ,  "},ae:{name:"Avestan",nativeName:"avesta"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"azrbaycan dili"},bm:{name:"Bambara",nativeName:"bamanankan"},ba:{name:"Bashkir",nativeName:" "},eu:{name:"Basque",nativeName:"euskara, euskera"},be:{name:"Belarusian",nativeName:""},bn:{name:"Bengali",nativeName:""},bh:{name:"Bihari",nativeName:""},bi:{name:"Bislama",nativeName:"Bislama"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},br:{name:"Breton",nativeName:"brezhoneg"},bg:{name:"Bulgarian",nativeName:" "},my:{name:"Burmese",nativeName:""},ca:{name:"Catalan; Valencian",nativeName:"Catal"},ch:{name:"Chamorro",nativeName:"Chamoru"},ce:{name:"Chechen",nativeName:" "},ny:{name:"Chichewa; Chewa; Nyanja",nativeName:"chiChea, chinyanja"},zh:{name:"Chinese",nativeName:" (Zhngwn), , "},cv:{name:"Chuvash",nativeName:" "},kw:{name:"Cornish",nativeName:"Kernewek"},co:{name:"Corsican",nativeName:"corsu, lingua corsa"},cr:{name:"Cree",nativeName:""},hr:{name:"Croatian",nativeName:"hrvatski"},cs:{name:"Czech",nativeName:"esky, etina"},da:{name:"Danish",nativeName:"dansk"},dv:{name:"Divehi; Dhivehi; Maldivian;",nativeName:""},nl:{name:"Dutch",nativeName:"Nederlands, Vlaams"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},et:{name:"Estonian",nativeName:"eesti, eesti keel"},ee:{name:"Ewe",nativeName:"Eegbe"},fo:{name:"Faroese",nativeName:"froyskt"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fi:{name:"Finnish",nativeName:"suomi, suomen kieli"},fr:{name:"French",nativeName:"franais, langue franaise"},ff:{name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular"},gl:{name:"Galician",nativeName:"Galego"},ka:{name:"Georgian",nativeName:""},de:{name:"German",nativeName:"Deutsch"},el:{name:"Greek, Modern",nativeName:""},gn:{name:"Guaran",nativeName:"Avae"},gu:{name:"Gujarati",nativeName:""},ht:{name:"Haitian; Haitian Creole",nativeName:"Kreyl ayisyen"},ha:{name:"Hausa",nativeName:"Hausa, "},he:{name:"Hebrew (modern)",nativeName:""},hz:{name:"Herero",nativeName:"Otjiherero"},hi:{name:"Hindi",nativeName:", "},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hu:{name:"Hungarian",nativeName:"Magyar"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Originally called Occidental; then Interlingue after WWII"},ga:{name:"Irish",nativeName:"Gaeilge"},ig:{name:"Igbo",nativeName:"Ass Igbo"},ik:{name:"Inupiaq",nativeName:"Iupiaq, Iupiatun"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"slenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:""},ja:{name:"Japanese",nativeName:" ()"},jv:{name:"Javanese",nativeName:"basa Jawa"},kl:{name:"Kalaallisut, Greenlandic",nativeName:"kalaallisut, kalaallit oqaasii"},kn:{name:"Kannada",nativeName:""},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:", "},kk:{name:"Kazakh",nativeName:" "},km:{name:"Khmer",nativeName:""},ki:{name:"Kikuyu, Gikuyu",nativeName:"Gky"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},ky:{name:"Kirghiz, Kyrgyz",nativeName:" "},kv:{name:"Komi",nativeName:" "},kg:{name:"Kongo",nativeName:"KiKongo"},ko:{name:"Korean",nativeName:" (),  ()"},ku:{name:"Kurdish",nativeName:"Kurd, "},kj:{name:"Kwanyama, Kuanyama",nativeName:"Kuanyama"},la:{name:"Latin",nativeName:"latine, lingua latina"},lb:{name:"Luxembourgish, Letzeburgesch",nativeName:"Ltzebuergesch"},lg:{name:"Luganda",nativeName:"Luganda"},li:{name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Lingla"},lo:{name:"Lao",nativeName:""},lt:{name:"Lithuanian",nativeName:"lietuvi kalba"},lu:{name:"Luba-Katanga",nativeName:""},lv:{name:"Latvian",nativeName:"latvieu valoda"},gv:{name:"Manx",nativeName:"Gaelg, Gailck"},mk:{name:"Macedonian",nativeName:" "},mg:{name:"Malagasy",nativeName:"Malagasy fiteny"},ms:{name:"Malay",nativeName:"bahasa Melayu,  "},ml:{name:"Malayalam",nativeName:""},mt:{name:"Maltese",nativeName:"Malti"},mi:{name:"Mori",nativeName:"te reo Mori"},mr:{name:"Marathi (Marh)",nativeName:""},mh:{name:"Marshallese",nativeName:"Kajin Maje"},mn:{name:"Mongolian",nativeName:""},na:{name:"Nauru",nativeName:"Ekakair Naoero"},nv:{name:"Navajo, Navaho",nativeName:"Din bizaad, Dinkeh"},nb:{name:"Norwegian Bokml",nativeName:"Norsk bokml"},nd:{name:"North Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:""},ng:{name:"Ndonga",nativeName:"Owambo"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},ii:{name:"Nuosu",nativeName:" Nuosuhxop"},nr:{name:"South Ndebele",nativeName:"isiNdebele"},oc:{name:"Occitan",nativeName:"Occitan"},oj:{name:"Ojibwe, Ojibwa",nativeName:""},cu:{name:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic",nativeName:" "},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:""},os:{name:"Ossetian, Ossetic",nativeName:" "},pa:{name:"Panjabi, Punjabi",nativeName:", "},pi:{name:"Pli",nativeName:""},fa:{name:"Persian",nativeName:""},pl:{name:"Polish",nativeName:"polski"},ps:{name:"Pashto, Pushto",nativeName:""},pt:{name:"Portuguese",nativeName:"Portugus"},qu:{name:"Quechua",nativeName:"Runa Simi, Kichwa"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"kiRundi"},ro:{name:"Romanian, Moldavian, Moldovan",nativeName:"romn"},ru:{name:"Russian",nativeName:" "},sa:{name:"Sanskrit (Saskta)",nativeName:""},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:",  "},se:{name:"Northern Sami",nativeName:"Davvismegiella"},sm:{name:"Samoan",nativeName:"gagana faa Samoa"},sg:{name:"Sango",nativeName:"yng t sng"},sr:{name:"Serbian",nativeName:" "},gd:{name:"Scottish Gaelic; Gaelic",nativeName:"Gidhlig"},sn:{name:"Shona",nativeName:"chiShona"},si:{name:"Sinhala, Sinhalese",nativeName:""},sk:{name:"Slovak",nativeName:"slovenina"},sl:{name:"Slovene",nativeName:"slovenina"},so:{name:"Somali",nativeName:"Soomaaliga, af Soomaali"},st:{name:"Southern Sotho",nativeName:"Sesotho"},es:{name:"Spanish; Castilian",nativeName:"espaol, castellano"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sw:{name:"Swahili",nativeName:"Kiswahili"},ss:{name:"Swati",nativeName:"SiSwati"},sv:{name:"Swedish",nativeName:"svenska"},ta:{name:"Tamil",nativeName:""},te:{name:"Telugu",nativeName:""},tg:{name:"Tajik",nativeName:", toik, "},th:{name:"Thai",nativeName:""},ti:{name:"Tigrinya",nativeName:""},bo:{name:"Tibetan Standard, Tibetan, Central",nativeName:""},tk:{name:"Turkmen",nativeName:"Trkmen, "},tl:{name:"Tagalog",nativeName:"Wikang Tagalog,  "},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga (Tonga Islands)",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"Trke"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:", tatara, "},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uighur, Uyghur",nativeName:"Uyurq, "},uk:{name:"Ukrainian",nativeName:""},ur:{name:"Urdu",nativeName:""},uz:{name:"Uzbek",nativeName:"zbek, , "},ve:{name:"Venda",nativeName:"Tshivena"},vi:{name:"Vietnamese",nativeName:"Ting Vit"},vo:{name:"Volapk",nativeName:"Volapk"},wa:{name:"Walloon",nativeName:"Walon"},cy:{name:"Welsh",nativeName:"Cymraeg"},wo:{name:"Wolof",nativeName:"Wollof"},fy:{name:"Western Frisian",nativeName:"Frysk"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:""},yo:{name:"Yoruba",nativeName:"Yorb"},za:{name:"Zhuang, Chuang",nativeName:"Sa cue, Saw cuengh"}},P=n.shaka?n.shaka:I,Q=B.getTech("Html5"),R=B.getComponent("Tech"),S="EmpShaka",T=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};u(this,b);var e=x(this,a.call(this,c,d));return e.base||N(H,e,{mergeDuplicates:!1}),e.isDispose_=!1,e.edgeIELoadingBugWorkaround_(),P.polyfill.installAll(),e.textTrackChangeBind=e.textTrackChange.bind(e),e.textTracks().on("selectedlanguagechange",e.textTrackChangeBind),e.textTrackAddedBind=e.textTrackAdded.bind(e),e.textTracks().on(z.ADD_TRACK,e.textTrackAddedBind),e.audioTrackChangeBind=e.audioTrackChange.bind(e),e.audioTracks().on(z.CHANGE,e.audioTrackChangeBind),e.audioTrackAddedBind=e.audioTrackAdded.bind(e),e.audioTracks().on(z.ADD_TRACK,e.audioTrackAddedBind),e.onEndedBind=e.onEnded.bind(e),e.el_.addEventListener(z.ENDED,e.onEndedBind),e.preActiveVariantTrack=null,e.preActiveTextTrack=null,e.onLoadStartBind=e.onLoadStart.bind(e),e.on(e,z.LOAD_START,e.onLoadStartBind),e}return w(b,a),b.prototype.onLoadStart=function(a){this.hasMetadata_=!0,E("onLoadStart"),this.stopped_&&(a.stopImmediatePropagation(),this.trigger({type:z.ENDED,bubbles:!0}))},b.prototype.disableTimeShift=function(a){this.options_?this.options_.timeShiftDisabled=a:this.options_={timeShiftDisabled:a},this.trigger(z.DURATION_CHANGE)},b.prototype.handleSource=function(a){var b=this;this.stopTrackingDuration&&this.stopTrackingDuration(),this.stopped_=!1,this.ended_=!1,this.hasStarted_=!1,this.hasMetadata_=!1,this.preActiveVariantTrack=null,this.preActiveTextTrack=null;var c=this.options_;c.source=a,this.options_=Object.assign(this.options_,a.options),this.currentProgram_=null;var d=void 0;if(a.src){this.playToken=a.playToken,d=a.src,a.live&&a.src.indexOf("dynamic")===-1&&!a.isDynamicCachupAsLive&&(d+=a.src.indexOf("?")>=0?"&dynamic":"?dynamic"),this.isDispose_=!1,this.shakaPlayer_?this.el_.paused||this.el_.pause():this.createPlayer_(),this.shakaPlayer_.resetConfiguration();var e=this.options_.audioLanguage||this.options_.language,f=this.options_.subtitleLanguage||this.options_.language;f="None"!==f?f:"",E("preferredAudioLanguage",e),E("preferredTextLanguage",f),this.clearTracks(["text"]);var g={streaming:{},abr:{},restrictions:{},preferredAudioLanguage:e,preferredTextLanguage:f};if(g.abr.enabled=!0,a.minBitrate&&(g.restrictions.minBandwidth=1e3*a.minBitrate),a.maxBitrate&&(g.restrictions.maxBandwidth=1e3*a.maxBitrate),a.maxResWidth&&(g.restrictions.maxWidth=a.maxResWidth),a.maxResHeight&&(g.restrictions.maxHeight=a.maxResHeight),c.maxBitrate&&(g.restrictions.maxBandwidth=1e3*c.maxBitrate),g.manifest={dash:{}},c.clockSyncUri&&(g.manifest.dash.clockSyncUri=c.clockSyncUri),a.baseUrl){var h=a.baseUrl.split("/");h.pop(),h.pop();var i=h.join("/")+"/";g.manifest.dash.baseUrl=i}void 0!==c.liveDelay&&(g.manifest.dash.liveDelay=c.liveDelay),c.abr&&(c.abr.defaultBandwidthEstimate&&(g.abr.defaultBandwidthEstimate=c.abr.defaultBandwidthEstimate),c.abr.bandwidth_upgrade_target&&(g.abr.bandwidthUpgradeTarget=c.abr.bandwidth_upgrade_target),c.abr.bandwidth_downgrade_target&&(g.abr.bandwidthDowngradeTarget=c.abr.bandwidth_downgrade_target),c.abr.switch_interval_ms&&(g.abr.switchInterval=c.abr.switch_interval_ms/1e3)),g.streaming={retryParameters:{maxAttempts:6,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:this.streamingFailureCallback.bind(this),ignoreTextStreamFailures:!0},n.navigator.userAgent.indexOf("Android")===-1?g.drm={advanced:{"com.widevine.alpha":{videoRobustness:"SW_SECURE_DECODE",audioRobustness:"SW_SECURE_CRYPTO"}}}:g.drm={advanced:{"com.widevine.alpha":{videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"}}},a.licenseServer?g.drm.servers={"com.widevine.alpha":a.licenseServer,"com.microsoft.playready":a.licenseServer,"com.adobe.primetime":a.licenseServer}:a.licenseServers&&(g.drm.servers=a.licenseServers),this.shakaPlayer_.configure(g),this.shakaPlayer_.setTextTrackVisibility(""!==f);var j=this.shakaPlayer_.getNetworkingEngine();if(j.clearAllRequestFilters(),j.clearAllResponseFilters(),this.playToken){var k={Authorization:"Bearer "+this.playToken},l=this.addLicenseRequestHeaders.bind(null,k);j.registerRequestFilter(l)}var m;this.options_.startTime>0&&(this.options._timeShiftDisabled||(m=this.options_.startTime)),E("before load stream"),this.shakaPlayer_.load(d,m).then(function(){E("after load stream"),b.triggerReady(),b.trackDuration()})["catch"](function(a){a.code===P.util.Error.Code.LOAD_INTERRUPTED?E("Shaka load() interrupted"):b.checkForRecoverableErrors(a)})}},b.prototype.streamingFailureCallback=function(a){E(S,"Streaming Failure",a)},b.prototype.techVersion=function(){return P&&P.Player?P.Player.version||"N/A":"N/A"},b.prototype.edgeIELoadingBugWorkaround_=function(){this.on(z.SEEKED,function(){var a=s.getElementsByClassName("vjs-waiting");[].forEach.call(a,function(a){a&&a.classList&&a.classList.remove("vjs-waiting")})})},b.prototype.createPlayer_=function(){var a=this;E("createPlayer Shaka"),this.shakaPlayer_=new P.Player(this.el_),this.shakaPlayer_.addEventListener("texttrackvisibility",function(b){E("texttrackvisibility",a.hasMetadata_,a.shakaPlayer_.isTextTrackVisible()),a.hasMetadata_&&a.syncVideojsTexttrackVisibility()}),this.shakaPlayer_.addEventListener("adaptation",function(b){if(E("Shaka adaptationchanged"),a.hasMetadata_){var c=a.getActiveVariantTrack(),d=a.getActiveTextTrack();null!==a.preActiveVariantTrack&&c.language===a.preActiveVariantTrack.language||(a.blockLocalTrackChange=!0,a.configureVideojsAudioTracks()),(null===a.preActiveTextTrack||d&&d.language!==a.preActiveTextTrack.language)&&(null===a.preActiveTextTrack&&""===a.shakaPlayer_.getConfiguration().preferredTextLanguage&&a.shakaPlayer_.isTextTrackVisible()&&a.shakaPlayer_.setTextTrackVisibility(!1),(a.shakaPlayer_.getTextTracks().length||a.textTracks().length)&&(a.blockLocalTrackChange=!0,a.configureVideojsTextTracks())),a.preActiveVariantTrack&&c.videoBandwidth!==a.preActiveVariantTrack.videoBandwidth&&(E("BITRATE_CHANGED",c.videoBandwidth),a.trigger({type:z.BITRATE_CHANGED,bubbles:!0},{bitrate:c.videoBandwidth,auto:!1})),a.stopBlockLocalTrackChange("adaptationchanged"),a.preActiveVariantTrack=c,a.preActiveTextTrack=d}}),this.shakaPlayer_.addEventListener("trackschanged",function(a){E("Shaka trackschanged",a)}),this.shakaPlayer_.addEventListener("error",function(b){a.checkForRecoverableErrors(b.detail)}),this.shakaPlayer_.addEventListener("buffering",function(b){a.stopped_||a.ended_||(E("buffering",b,b?b.buffering:null),b.buffering?a.trigger({type:z.WAITING,bubbles:!0}):a.paused()?a.trigger({type:z.PAUSE,bubbles:!0}):a.trigger({type:z.PLAYING,bubbles:!0}))})},b.prototype.addErrorMessage=function(a){if(!a.message){var b="UNKNOWN",c="UNKNOWN";for(var d in P.util.Error.Category)P.util.Error.Category[d]===a.category&&(b=d);for(var e in P.util.Error.Code)P.util.Error.Code[e]===a.code&&(c=e);a.message=b+" "+c}},b.prototype.checkForRecoverableErrors=function(a){switch(this.addErrorMessage(a),a&&a.data&&a.data.length>0&&E.error(S,a.code,a.data,a.message),a.category){case 1:if(1002===a.code){this.triggerRecoverableError(a);break}case 3:if(3015===a.code)return;this.triggerRecoverableError(a);break;case 4:this.triggerRecoverableError(a);break;case 6:this.triggerRecoverableError(a);break;default:this.trigger(z.ERROR,a)}},b.prototype.stop=function(a){var b=this;this.stopped_=!0,this.stopTrackingDuration(),this.shakaPlayer_&&(this.hasMetadata_=!1,this.shakaPlayer_.unload().then(function(){b.clearTracks(["text"]),b.clearTracks(["audio"]),b.trigger({type:z.PAUSE,bubbles:!0}),b.trigger({type:z.ABORT,bubbles:!0}),b.trigger({type:z.STOPPED,bubbles:!0}),a&&a()}))},b.prototype.onEnded=function(a){this.ended_=!0,this.stopTrackingDuration(),this.shakaPlayer_&&this.reset()},b.prototype.reset=function(){this.hasMetadata_=!1,this.clearTracks(["text"]),this.clearTracks(["audio"]),a.prototype.reset.call(this)},b.prototype.addLicenseRequestHeaders=function(a,b,c){if(b===P.net.NetworkingEngine.RequestType.LICENSE)for(var d in a)c.headers[d]=a[d]},b.prototype.live=function(){return this.shakaPlayer_?this.shakaPlayer_.isLive():!(!this.options_||!this.options_.source)&&this.options_.source.live},b.prototype.duration=function c(){if(this.live()){if(this.timeShiftEnabled()){if(!this.shakaPlayer_)return 0;var b=this.shakaPlayer_.seekRange(),c=b.end;return c}return 1/0}return a.prototype.duration.call(this)},b.prototype.currentTime=function d(){if(!this.shakaPlayer_)return 0;var d=a.prototype.currentTime.call(this);if(this.live()&&this.duration()!==1/0){var b=this.shakaPlayer_.seekRange(),c=Math.floor(b.end-d),e=this.duration();d=Math.max(0,e-c)}return d},b.prototype.baseCurrentTime=function(){return a.prototype.currentTime.call(this)},b.prototype.setAbsoluteTime=function(a){E("setAbsoluteTime",a.date);try{if(this.live()){var b=(a.date-this.startTimeLive())/1e3;E("setAbsoluteTime setCurrentTime",b),this.setCurrentTime(b)}else this.setCurrentTime(a.date/1e3)}catch(c){E.error(c)}},b.prototype.getAbsoluteTime=function(){return this.shakaPlayer_?this.shakaPlayer_.getPlayheadTimeAsDate():0},b.prototype.timeBehindLive=function(){if(!this.shakaPlayer_||!this.live())return 0;
var b=this.shakaPlayer_.seekRange(),c=a.prototype.currentTime.call(this);return Math.floor(b.end-c)},b.prototype.startTimeLive=function(){return this.shakaPlayer_&&this.shakaPlayer_.getPresentationStartTimeAsDate()?this.shakaPlayer_.getPresentationStartTimeAsDate().getTime():0},b.prototype.allowJump_=function(a){var b=this.shakaPlayer_.seekRange();return a>b.end-2||a<2},b.prototype.setCurrentTime=function(b){var c=this;if(this.options_.source){if(this.options_.source.ffEnabled===!1&&!this.allowJump_(b)&&this.currentTime()<=b)return;if(this.options_.source.rwEnabled===!1&&!this.allowJump_(b)&&this.currentTime()>=b)return}if(this.live()){var d=this.shakaPlayer_.seekRange();b=b>d.start?b:d.start,b=b<d.end?b:d.end,a.prototype.setCurrentTime.call(this,b)}else this.shakaPlayer_.segmentExist(b).then(function(){E("segmentExist sucess"),a.prototype.setCurrentTime.call(c,b)})["catch"](function(a){E("segmentExist faild",a),this.trigger({type:z.SEGMENT_MISSING,bubbles:!0})}.bind(this))},b.prototype.timeShiftEnabled=function(){return this.options_.timeShiftDisabled===!1},b.prototype.bitrates=function(){if(!this.shakaPlayer_)return[];var a=this.getActiveVariantTrack(),b=this.getVariantTracks(),c=[];return b.forEach(function(b){b.language===a.language&&c.indexOf(b.videoBandwidth)===-1&&c.push(b.videoBandwidth)}),c=c.reverse()},b.prototype.bitrate=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,b=this.getActiveVariantTrack();if(null==a){var c=this.shakaPlayer_.getConfiguration();return c.abr.enabled?0:b?b.videoBandwidth:0}if(0===a)return this.shakaPlayer_.configure({abr:{enabled:!0}}),void this.trigger({type:z.BITRATE_CHANGED,bubbles:!0},{bitrate:a,auto:!1});for(var d=this.getVariantTracks(),e=null,f=0;f<d.length;f++){var g=d[f];if(g.videoBandwidth===a&&g.language===b.language){e=g;break}}if(null===e)throw new TypeError("Invalid bitrate specified.");this.shakaPlayer_.configure({abr:{enabled:!1}}),this.shakaPlayer_.selectVariantTrack(e,!0),this.trigger({type:z.BITRATE_CHANGED,bubbles:!0},{bitrate:a,auto:!1})},b.prototype.getBitrate=function(){var a=this.getActiveVariantTrack();return a?a.videoBandwidth:0},b.isSupported=function(){if(!B.getTech("Html5").isSupported())return!1;var a="WebKitMediaSource"in n,b="MediaSource"in n;return a||b},b.prototype.setMaxBitrate=function(a){if(this.shakaPlayer_){isNaN(a)&&(a=Number.POSITIVE_INFINITY);var b={restrictions:{maxBandwidth:a}};this.shakaPlayer_.configure(b),this.trigger(z.LOADED_DATA)}else this.options_.maxBitrate=a},b.prototype.getMaxBitrate=function(){if(this.shakaPlayer_){var a=this.shakaPlayer_.getConfiguration();return a.restrictions.maxBandwidth?a.restrictions.maxBandwidth/1e3:a.restrictions.maxBandwidth}return this.options_.maxBitrate},b.prototype.canRestart=function(){return!this.live()||this.timeShiftEnabled()},b.prototype.getActiveVariantTrack=function(){for(var a=this.getVariantTracks(),b=0;b<a.length;b++){var c=a[b];if(c.active)return c}return null},b.prototype.getVariantTracks=function(){var a=this.shakaPlayer_.getVariantTracks();return a},b.prototype.isAudioTrackSynchronized=function(){var a=this.shakaPlayer_.getVariantTracks().map(function(a){return a.language}).filter(function(a,b,c){return c.indexOf(a)===b});a=a.sort();for(var b=this.audioTracks(),c=[],d=0;d<b.length;d++)c.push(b[d].language);c=c.sort();var e=a.join()===c.join();return E("isAudioTrackSynchronized",e),e},b.prototype.configureVideojsAudioTracks=function(){var a=this;if(this.isAudioTrackSynchronized())return void this.selectVideojsAudioLanguage(this.getSelectedShakaAudioLanguage());E("configureVideojsAudioTracks");var b=this.getVariantTracks();this.clearTracks(["audio"]);var c={};b.forEach(function(a){var b=a.language;if(c.hasOwnProperty(b)){var d=c[b];a.audioBandwidth>d.audioBandwidth&&(c[b]=a)}else c[b]=a});var d=this.getActiveVariantTrack();Object.keys(c).forEach(function(b){var e=c[b];a.addAudioTrack(e.kind,j(e.language).split(";")[0],e.language,e.language===d.language)})},b.prototype.selectShakaAudioLanguage=function(a){a&&(this.options_?this.options_.audioLanguage=a:this.options_={audioLanguage:a},a!==this.getSelectedShakaAudioLanguage()&&(E("selectShakaAudioLanguage",a),this.shakaPlayer_.selectAudioLanguage(a)))},b.prototype.getSelectedShakaAudioLanguage=function(){if(!this.shakaPlayer_)return null;var a=this.getActiveVariantTrack();return a?a.language:null},b.prototype.audioTrackChange=function(a){if(this.blockLocalTrackChange)return void E("blockLocalTrackChange","audioTrackChange");E("onAudioTrackChange");for(var b=this.audioTracks(),c=b.length;c--;){var d=b[c];if(d.enabled)return void this.selectShakaAudioLanguage(d.language)}},b.prototype.selectVideojsAudioLanguage=function(a){if(E("selectVideojsAudioLanguage",a),a){for(var b=this.audioTracks(),c=b.length;c--;){var d=b[c];if(d.language===a&&!d.enabled)return this.blockLocalTrackChange=!0,void(d.enabled=!0)}this.stopBlockLocalTrackChange("selectVideojsAudioLanguage")}},b.prototype.audioTrackAdded=function(a){E("videojs audioTrackAdded",a)},b.prototype.getActiveTextTrack=function(){var a=this.shakaPlayer_.getTextTracks(),b=a.filter(function(a){return a.active});return b.length>0?b[0]:null},b.prototype.getSelectedShakaTextLanguage=function(){if(!this.shakaPlayer_)return null;var a=this.getActiveTextTrack();return a&&this.shakaPlayer_.isTextTrackVisible()?a.language:null},b.prototype.isTextTrackSynchronized=function(){var a=this.shakaPlayer_.getTextTracks().map(function(a){return a.language});a=a.sort();for(var b=this.textTracks(),c=[],d=0;d<b.length;d++)c.push(b[d].language);c=c.sort();var e=a.join()===c.join();return E("isTextTrackSynchronized",e),e},b.prototype.syncVideojsTexttrackVisibility=function(){E("syncVideojsTexttrackVisibility"),this.blockLocalTrackChange=!0;var a=this.textTracks(),b=a.length;if(this.shakaPlayer_.isTextTrackVisible())for(var c=this.getSelectedShakaTextLanguage();b--;){var d=a[b];d.language===c&&"showing"!==d.mode?d.mode="showing":d.language!==c&&"disabled"!==d.mode&&(d.mode="disabled")}else for(;b--;){var d=a[b];"showing"===d.mode&&(d.mode="hidden")}this.stopBlockLocalTrackChange("syncVideojsTexttrackVisibility")},b.prototype.configureVideojsTextTracks=function(){var a=this;if(this.isTextTrackSynchronized())return void this.selectVideojsTextLanguage(this.getSelectedShakaTextLanguage());this.blockLocalTrackChange=!0,E("configureVideojsTextTracks"),this.clearTracks(["text"]);var b=this.shakaPlayer_.getTextTracks(),c=void 0,d=this.getSelectedShakaTextLanguage();b.forEach(function(b){var e=a.addTextTrack(b.kind?b.kind:"subtitles",j(b.language).split(";")[0],b.language);d===b.language&&(c=e)}),c?(c.mode="showing",this.shakaPlayer_.isTextTrackVisible()||this.shakaPlayer_.setTextTrackVisibility(!0)):this.shakaPlayer_.setTextTrackVisibility(!0)},b.prototype.selectVideojsTextLanguage=function(a){E("selectVideojsTextLanguage",a);for(var b=this.textTracks(),c=b.length;c--;){var d=b[c];if(a===d.language&&"showing"!==d.mode)this.blockLocalTrackChange=!0,"showing"===d.mode;else if(a!==d.language&&"showing"===d.mode)return this.blockLocalTrackChange=!0,void("disabled"===d.mode)}this.stopBlockLocalTrackChange("selectVideojsAudioLanguage")},b.prototype.textTrackChange=function(a){if(this.blockLocalTrackChange)return void E("blockLocalTrackChange","textTrackChange");E("ontextTrackChange");for(var b=this.textTracks(),c=b.length;c--;){var d=b[c];if("showing"===d.mode)return void this.deferredSelectTextTrack(d.language)}this.deferredSelectTextTrack(null)},b.prototype.deferredSelectTextTrack=function(a){E("deferredSelectTextTrack enter",a),this.deferredTextTrackChangeTimeOut&&clearTimeout(this.deferredTextTrackChangeTimeOut),this.deferredTextTrackChangeTimeOut=setTimeout(function(){E("update texttrack"),clearTimeout(this.deferredTextTrackChangeTimeOut),this.deferredTextTrackChangeTimeOut=null,this.isDispose_||(this.blockLocalTrackChange=!0,this.selectShakaTextLanguage(a),this.stopBlockLocalTrackChange("deferredSelectTextTrack exit"))}.bind(this),1e3)},b.prototype.selectShakaTextLanguage=function(a){a?(this.getSelectedShakaTextLanguage()!==a&&(E("select Shaka texttrack",a),this.shakaPlayer_.selectTextLanguage(a)),this.shakaPlayer_.isTextTrackVisible()||(E("Shaka texttrack","show"),this.shakaPlayer_.setTextTrackVisibility(!0))):this.shakaPlayer_.isTextTrackVisible()&&(E("Shaka texttrack","hide"),this.shakaPlayer_.setTextTrackVisibility(!1)),a=a?a:"None",this.options_?this.options_.subtitleLanguage=a:this.options_={subtitleLanguage:a}},b.prototype.textTrackAdded=function(a){E("videojs textTrackAdded",a)},b.prototype.stopBlockLocalTrackChange=function(a){this.blockLocalTrackChange&&(this.blockLocalTrackChangeTimeOut&&clearTimeout(this.blockLocalTrackChangeTimeOut),this.blockLocalTrackChangeTimeOut=setTimeout(function(){try{clearTimeout(this.blockLocalTrackChangeTimeOut),this.blockLocalTrackChangeTimeOut=null,E(a+" TRACK_CHANGE"),this.trigger(z.TRACK_CHANGE),this.blockLocalTrackChange=!1}catch(b){}}.bind(this),1e3))},b.prototype.play=function(){if(this.stopped_||this.ended_)this.trigger({type:z.REPLAY,bubbles:!0});else if(!this.options_.autoplay&&this.el_.networkState>this.el_.HAVE_METADATA||this.hasStarted_&&this.el_.networkState>this.el_.HAVE_METADATA)return a.prototype.play.call(this)},b.prototype.pause=function(){this.live()&&this.options_.timeShiftDisabled||(a.prototype.pause.call(this),this.trigger({type:z.PAUSE,bubbles:!0}))},b.prototype.dispose=function(){E("dispose "+S),this.stopTrackingDuration(),this.textTracks().off("selectedlanguagechange",this.textTrackChangeBind),this.textTracks().off("addtrack",this.textTrackAddedBind),this.audioTracks().off("change",this.audioTrackChangeBind),this.audioTracks().off("addtrack",this.audioTrackAddedBind),this.el_.removeEventListener("ended",this.onEndedBind),this.off(z.LOAD_START,this.onLoadStartBind),this.shakaPlayer_&&this.shakaPlayer_.destroy(),a.prototype.dispose.call(this),this.isDispose_=!0},b.prototype.program=function(a){a&&(this.currentProgram_=a)},b.prototype.seekable=function(){if(this.shakaPlayer_){var a=this.shakaPlayer_.seekRange(),b=a.start;return this.options_.source&&this.options_.source.isDynamicCachupAsLive&&(b=this.options_.source.streamInfo.startTime/1e3),e(b,a.end)}return e(0,0)},b.prototype.triggerRecoverableError=function(a){this.triggerRecoverableTechError(a,S)},v(b,null,[{key:"nativeSourceHandler",get:function(){return{canHandleSource:function(a){var c=/\.mpd/i;return b.nativeSourceHandler.canPlayType(a.type)?"probably":c.test(a.src)?"maybe":""},handleSource:function(a,b){b.handleSource(a)},canPlayType:function(a){var b=/^application\/dash\+xml/i;return b.test(a)&&P.Player.isBrowserSupported()?"probably":""}}}},{key:"entitlementPlayRequest",get:function(){return{drm:"CENC",format:"DASH",type:"application/dash+xml"}}},{key:"log",get:function(){return E}}]),b}(Q);return T.prototype.featuresNativeTextTracks=!1,R.withSourceHandlers(T),T.VERSION="2.79.2",T.sourceHandlers=[],T.registerSourceHandler(T.nativeSourceHandler),R.getTech(S)?(B.log.warn("Not using "+S+" as it appears to already be registered"),B.log.warn(S+" should only be used with emp-player@2 and above")):R.registerTech(S,T),T})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,b,c){"use strict";var d=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"init",value:function(a,b,c){if(this.mixins=a,this.context=b,this.opt={warn:!0,mergeDuplicates:!0},this.contextMethods=Object.getOwnPropertyNames(this.context.constructor.prototype),this.reactMethods=["componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","componentWillUnmount"],c&&(this.opt.warn=void 0!==c.warn?c.warn:this.opt.warn,this.opt.mergeDuplicates=void 0!==c.mergeDuplicates?c.mergeDuplicates:this.opt.mergeDuplicates),this.mixins.constructor===Array)a.map(function(a){this.grabMethods(a)},this);else{if("function"!=typeof a&&"object"!=typeof a)throw"mixins expects a function, an array, or an object. Please and thank you";this.grabMethods(a)}}},{key:"addNewMethod",value:function(a,b){this.mixins.prototype?this.context.constructor.prototype[a]=this.mixins.prototype[a]:this.context.constructor.prototype[a]="object"==typeof b?b[a]:b.prototype[a],this.contextMethods=Object.getOwnPropertyNames(this.context.constructor.prototype)}},{key:"extendMethod",value:function(a,b,c){var d=this.context[b],e="object"==typeof c?c[a]:c.prototype[a];this.context[a]=function(){e.call(this,arguments),d.call(this,arguments)}}},{key:"grabMethods",value:function(a){var b=this,c=a,d="object"==typeof a?Object.getOwnPropertyNames(a):Object.getOwnPropertyNames(a.prototype);d.map(function(a){"constructor"!==a&&"render"!==a&&b.checkForMatch(a,c)},this)}},{key:"checkForMatch",value:function(a,b){var c=this;this.contextMethods.map(function(d){a===d&&(c.reactMethods.indexOf(a)>-1?c.extendMethod(a,d,b):(c.opt.warn,c.opt.mergeDuplicates&&c.extendMethod(a,d,b)))}),this.addNewMethod(a,b)}}]),a}(),g=new f;b.exports=g.init.bind(g)},{}],5:[function(a,b,c){function d(a,b,c){if(!h(b))throw new TypeError("iterator must be a function");arguments.length<3&&(c=this),"[object Array]"===i.call(a)?e(a,b,c):"string"==typeof a?f(a,b,c):g(a,b,c)}function e(a,b,c){for(var d=0,e=a.length;d<e;d++)j.call(a,d)&&b.call(c,a[d],d,a)}function f(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c,a.charAt(d),d,a)}function g(a,b,c){for(var d in a)j.call(a,d)&&b.call(c,a[d],d,a)}var h=a("is-function");b.exports=d;var i=Object.prototype.toString,j=Object.prototype.hasOwnProperty},{"is-function":9}],6:[function(a,b,c){(function(c){var d,e="undefined"!=typeof c?c:"undefined"!=typeof window?window:{},f=a("min-document");"undefined"!=typeof document?d=document:(d=e["__GLOBAL_DOCUMENT_CACHE@4"],d||(d=e["__GLOBAL_DOCUMENT_CACHE@4"]=f)),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":1}],7:[function(a,b,c){(function(a){var c;c="undefined"!=typeof window?window:"undefined"!=typeof a?a:"undefined"!=typeof self?self:{},b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;i<d;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;i<d;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,"function"==typeof console.trace)}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],9:[function(a,b,c){function d(a){var b=e.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}b.exports=d;var e=Object.prototype.toString},{}],10:[function(a,b,c){var d=a("trim"),e=a("for-each"),f=function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.exports=function(a){if(!a)return{};var b={};return e(d(a).split("\n"),function(a){var c=a.indexOf(":"),e=d(a.slice(0,c)).toLowerCase(),g=d(a.slice(c+1));"undefined"==typeof b[e]?b[e]=g:f(b[e])?b[e].push(g):b[e]=[b[e],g]}),b}},{"for-each":5,trim:12}],11:[function(a,b,c){function d(a,b){var c,d=null;try{c=JSON.parse(a,b)}catch(e){d=e}return[d,c]}b.exports=d},{}],12:[function(a,b,c){function d(a){return a.replace(/^\s*|\s*$/g,"")}c=b.exports=d,c.left=function(a){return a.replace(/^\s*/,"")},c.right=function(a){return a.replace(/\s*$/,"")}},{}],13:[function(a,b,c){function d(a){return a.replace(/\n\r?\s*/g,"")}b.exports=function(a){for(var b="",c=0;c<arguments.length;c++)b+=d(a[c])+(arguments[c+1]||"");return b}},{}],14:[function(a,b,c){function d(a){return a&&"object"==typeof a&&"default"in a?a["default"]:a}function e(a,b){ib(a).forEach(function(c){return b(a[c],c)})}function f(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ib(a).reduce(function(c,d){return b(c,a[d],d)},c)}function g(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return Object.assign?Object.assign.apply(Object,[a].concat(c)):(c.forEach(function(b){b&&e(b,function(b,c){a[c]=b})}),a)}function h(a){return!!a&&"object"===("undefined"==typeof a?"undefined":cb(a))}function i(a){return h(a)&&"[object Object]"===hb.call(a)&&a.constructor===Object}function j(a,b){if(!a||!b)return"";if("function"==typeof Aa.getComputedStyle){var c=Aa.getComputedStyle(a);return c?c[b]:""}return a.currentStyle[b]||""}function k(a){return"string"==typeof a&&/\S/.test(a)}function l(a){if(/\s/.test(a))throw new Error("class has illegal whitespace characters")}function m(a){return new RegExp("(^|\\s)"+a+"($|\\s)")}function n(){return Ba===Aa.document&&"undefined"!=typeof Ba.createElement}function o(a){return h(a)&&1===a.nodeType}function p(){try{return Aa.parent!==Aa.self}catch(a){return!0}}function q(a){return function(b,c){if(!k(b))return Ba[a](null);k(c)&&(c=Ba.querySelector(c));var d=o(c)?c:Ba;return d[a]&&d[a](b)}}function r(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=arguments[3],e=Ba.createElement(a);return Object.getOwnPropertyNames(b).forEach(function(a){var c=b[a];a.indexOf("aria-")!==-1||"role"===a||"type"===a?(nb.warn(Ca(ob,a,c)),e.setAttribute(a,c)):"textContent"===a?s(e,c):e[a]=c}),Object.getOwnPropertyNames(c).forEach(function(a){e.setAttribute(a,c[a])}),d&&L(e,d),e}function s(a,b){return"undefined"==typeof a.textContent?a.innerText=b:a.textContent=b,a}function t(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function u(a,b){return l(b),a.classList?a.classList.contains(b):m(b).test(a.className)}function v(a,b){return a.classList?a.classList.add(b):u(a,b)||(a.className=(a.className+" "+b).trim()),a}function w(a,b){return a.classList?a.classList.remove(b):(l(b),a.className=a.className.split(/\s+/).filter(function(a){return a!==b}).join(" ")),a}function x(a,b,c){var d=u(a,b);if("function"==typeof c&&(c=c(a,b)),"boolean"!=typeof c&&(c=!d),c!==d)return c?v(a,b):w(a,b),a}function y(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var d=b[c];null===d||"undefined"==typeof d||d===!1?a.removeAttribute(c):a.setAttribute(c,d===!0?"":d)})}function z(a){var b={},c=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(a&&a.attributes&&a.attributes.length>0)for(var d=a.attributes,e=d.length-1;e>=0;e--){var f=d[e].name,g=d[e].value;"boolean"!=typeof a[f]&&c.indexOf(","+f+",")===-1||(g=null!==g),b[f]=g}return b}function A(a,b){return a.getAttribute(b)}function B(a,b,c){a.setAttribute(b,c)}function C(a,b){a.removeAttribute(b)}function D(){Ba.body.focus(),Ba.onselectstart=function(){return!1}}function E(){Ba.onselectstart=function(){return!0}}function F(a){if(a&&a.getBoundingClientRect&&a.parentNode){var b=a.getBoundingClientRect(),c={};return["bottom","height","left","right","top","width"].forEach(function(a){void 0!==b[a]&&(c[a]=b[a])}),c.height||(c.height=parseFloat(j(a,"height"))),c.width||(c.width=parseFloat(j(a,"width"))),c}}function G(a){var b=void 0;if(a.getBoundingClientRect&&a.parentNode&&(b=a.getBoundingClientRect()),!b)return{left:0,top:0};var c=Ba.documentElement,d=Ba.body,e=c.clientLeft||d.clientLeft||0,f=Aa.pageXOffset||d.scrollLeft,g=b.left+f-e,h=c.clientTop||d.clientTop||0,i=Aa.pageYOffset||d.scrollTop,j=b.top+i-h;return{left:Math.round(g),top:Math.round(j)}}function H(a,b){var c={},d=G(a),e=a.offsetWidth,f=a.offsetHeight,g=d.top,h=d.left,i=b.pageY,j=b.pageX;return b.changedTouches&&(j=b.changedTouches[0].pageX,i=b.changedTouches[0].pageY),c.y=Math.max(0,Math.min(1,(g-i+f)/f)),c.x=Math.max(0,Math.min(1,(j-h)/e)),c}function I(a){return h(a)&&3===a.nodeType}function J(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function K(a){return"function"==typeof a&&(a=a()),(Array.isArray(a)?a:[a]).map(function(a){return"function"==typeof a&&(a=a()),o(a)||I(a)?a:"string"==typeof a&&/\S/.test(a)?Ba.createTextNode(a):void 0}).filter(function(a){return a})}function L(a,b){return K(b).forEach(function(b){return a.appendChild(b)}),a}function M(a,b){return L(J(a),b)}function N(a){return void 0===a.button&&void 0===a.buttons||(0===a.button&&void 0===a.buttons||(9===Ya||0===a.button&&1===a.buttons))}function O(){return sb++}function P(a){var b=a[ub];return b||(b=a[ub]=O()),tb[b]||(tb[b]={}),tb[b]}function Q(a){var b=a[ub];return!!b&&!!Object.getOwnPropertyNames(tb[b]).length}function R(a){var b=a[ub];if(b){delete tb[b];try{delete a[ub]}catch(c){a.removeAttribute?a.removeAttribute(ub):a[ub]=null}}}function S(a,b){var c=P(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher)),Object.getOwnPropertyNames(c.handlers).length<=0&&(delete c.handlers,delete c.dispatcher,delete c.disabled),0===Object.getOwnPropertyNames(c).length&&R(a)}function T(a,b,c,d){c.forEach(function(c){a(b,c,d)})}function U(a){function b(){return!0}function c(){return!1}if(!a||!a.isPropagationStopped){var d=a||Aa.event;a={};for(var e in d)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&("returnValue"===e&&d.preventDefault||(a[e]=d[e]));if(a.target||(a.target=a.srcElement||Ba),a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),a.preventDefault=function(){d.preventDefault&&d.preventDefault(),a.returnValue=!1,d.returnValue=!1,a.defaultPrevented=!0},a.defaultPrevented=!1,a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation(),a.cancelBubble=!0,d.cancelBubble=!0,a.isPropagationStopped=b},a.isPropagationStopped=c,a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation(),a.isImmediatePropagationStopped=b,a.stopPropagation()},a.isImmediatePropagationStopped=c,null!==a.clientX&&void 0!==a.clientX){var f=Ba.documentElement,g=Ba.body;a.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}a.which=a.charCode||a.keyCode,null!==a.button&&void 0!==a.button&&(a.button=1&a.button?0:4&a.button?1:2&a.button?2:0)}return a}function V(a,b,c){if(Array.isArray(b))return T(V,a,b,c);var d=P(a);if(d.handlers||(d.handlers={}),d.handlers[b]||(d.handlers[b]=[]),c.guid||(c.guid=O()),d.handlers[b].push(c),d.dispatcher||(d.disabled=!1,d.dispatcher=function(b,c){if(!d.disabled){b=U(b);var e=d.handlers[b.type];if(e)for(var f=e.slice(0),g=0,h=f.length;g<h&&!b.isImmediatePropagationStopped();g++)try{f[g].call(a,b,c)}catch(i){nb.error(i)}}}),1===d.handlers[b].length)if(a.addEventListener){var e=!1;vb&&wb.indexOf(b)>-1&&(e={passive:!0}),a.addEventListener(b,d.dispatcher,e)}else a.attachEvent&&a.attachEvent("on"+b,d.dispatcher)}function W(a,b,c){if(Q(a)){var d=P(a);if(d.handlers){if(Array.isArray(b))return T(W,a,b,c);var e=function(a,b){d.handlers[b]=[],S(a,b)};if(void 0!==b){var f=d.handlers[b];if(f){if(!c)return void e(a,b);if(c.guid)for(var g=0;g<f.length;g++)f[g].guid===c.guid&&f.splice(g--,1);S(a,b)}}else for(var h in d.handlers)Object.prototype.hasOwnProperty.call(d.handlers||{},h)&&e(a,h)}}}function X(a,b,c){var d=Q(a)?P(a):{},e=a.parentNode||a.ownerDocument;if("string"==typeof b&&(b={type:b,target:a}),b=U(b),d.dispatcher&&d.dispatcher.call(a,b,c),e&&!b.isPropagationStopped()&&b.bubbles===!0)X.call(null,e,b,c);else if(!e&&!b.defaultPrevented){var f=P(b.target);b.target[b.type]&&(f.disabled=!0,"function"==typeof b.target[b.type]&&b.target[b.type](),f.disabled=!1)}return!b.defaultPrevented}function Y(a,b,c){if(Array.isArray(b))return T(Y,a,b,c);var d=function e(){W(a,b,e),c.apply(this,arguments)};d.guid=c.guid=c.guid||O(),V(a,b,d)}function Z(a,b){b&&(zb=b),Aa.setTimeout(Ab,a)}function $(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.eventBusKey;if(c){if(!a[c].nodeName)throw new Error('The eventBusKey "'+c+'" does not refer to an element.');a.eventBusEl_=a[c]}else a.eventBusEl_=r("span",{className:"vjs-event-bus"});return g(a,Nb),a.on("dispose",function(){a.off(),Aa.setTimeout(function(){a.eventBusEl_=null},0)}),a}function _(a,b){return g(a,Ob),a.state=g({},a.state,b),"function"==typeof a.handleStateChanged&&Gb(a)&&a.on("statechanged",a.handleStateChanged),a}function aa(a){return"string"!=typeof a?a:a.charAt(0).toUpperCase()+a.slice(1)}function ba(a,b){return aa(a)===aa(b)}function ca(){for(var a={},b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return c.forEach(function(b){b&&e(b,function(b,c){return i(b)?(i(a[c])||(a[c]={}),void(a[c]=ca(a[c],b))):void(a[c]=b)})}),a}function da(a,b,c){if("number"!=typeof b||b<0||b>c)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+b+") is non-numeric or out of bounds (0-"+c+").")}function ea(a,b,c,d){return da(a,d,c.length-1),c[d][b]}function fa(a){return void 0===a||0===a.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:a.length,start:ea.bind(null,"start",0,a),end:ea.bind(null,"end",1,a)}}function ga(a,b){return Array.isArray(a)?fa(a):void 0===a||void 0===b?fa():fa([[a,b]])}function ha(a,b){var c=0,d=void 0,e=void 0;if(!b)return 0;a&&a.length||(a=ga(0,0));for(var f=0;f<a.length;f++)d=a.start(f),e=a.end(f),e>b&&(e=b),c+=e-d;return c/b}function ia(a){return a instanceof ia?a:("number"==typeof a?this.code=a:"string"==typeof a?this.message=a:h(a)&&("number"==typeof a.code&&(this.code=a.code),g(this,a)),void(this.message||(this.message=ia.defaultMessages[this.code]||"")))}function ja(a){return void 0!==a&&"function"==typeof a.then}function ka(a){ja(a)&&a.then(null,function(a){})}function la(a,b,c,d){var e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},f=a.textTracks();e.kind=b,c&&(e.label=c),d&&(e.language=d),e.tech=a;var g=new Hc.text.TrackClass(e);return f.addTrack(g),g}function ma(a,b){Jc[a]=Jc[a]||[],Jc[a].push(b)}function na(a,b,c){a.setTimeout(function(){return sa(b,Jc[b.type],c,a)},1)}function oa(a,b){a.forEach(function(a){return a.setTech&&a.setTech(b)})}function pa(a,b,c){return a.reduceRight(ra(c),b[c]())}function qa(a,b,c,d){return b[c](a.reduce(ra(c),d))}function ra(a){return function(b,c){return c[a]?c[a](b):b}}function sa(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments[2],d=arguments[3],e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],f=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=b[0],i=b.slice(1);if("string"==typeof h)sa(a,Jc[h],c,d,e,f);else if(h){var j=h(d);j.setSource(g({},a),function(b,g){return b?sa(a,i,c,d,e,f):(e.push(j),void sa(g,a.type===g.type?i:Jc[g.type],c,d,e,f))})}else i.length?sa(a,i,c,d,e,f):f?c(a,e):sa(a,Jc["*"],c,d,e,!0)}function ta(a,b){return"rgba("+parseInt(a[1]+a[1],16)+","+parseInt(a[2]+a[2],16)+","+parseInt(a[3]+a[3],16)+","+b+")"}function ua(a,b,c){try{a.style[b]=c}catch(d){return}}function va(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;a=a<0?0:a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||a===1/0)&&(e=d=c="-"),e=e>0||g>0?e+":":"",d=((e||f>=10)&&d<10?"0"+d:d)+":",c=c<10?"0"+c:c,e+d+c}function wa(a,b){if(b&&(a=b(a)),a&&"none"!==a)return a}function xa(a,b){var c=a.options[a.options.selectedIndex].value;return wa(c,b)}function ya(a,b,c){if(b)for(var d=0;d<a.options.length;d++)if(wa(a.options[d].value,c)===b){a.selectedIndex=d;break}}function za(a,b,c){var d=void 0;if("string"==typeof a){var e=za.getPlayers();if(0===a.indexOf("#")&&(a=a.slice(1)),e[a])return b&&nb.warn('Player "'+a+'" is already initialised. Options will not be applied.'),c&&e[a].ready(c),e[a];d=pb("#"+a)}else d=a;if(!d||!d.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");if(d.player||ke.players[d.playerId])return d.player||ke.players[d.playerId];o(d)&&!Ba.body.contains(d)&&nb.warn("The element supplied is not included in the DOM"),b=b||{},za.hooks("beforesetup").forEach(function(a){var c=a(d,ca(b));return!h(c)||Array.isArray(c)?void nb.error("please return an object in beforesetup hooks"):void(b=ca(b,c))});var f=Pb.getComponent("Player"),g=new f(d,b,c);return za.hooks("setup").forEach(function(a){return a(g)}),g}var Aa=d(a("global/window")),Ba=d(a("global/document")),Ca=d(a("tsml")),Da=d(a("safe-json-parse/tuple")),Ea=d(a("xhr")),Fa=d(a("videojs-vtt.js")),Ga="6.6.3",Ha=Aa.navigator&&Aa.navigator.userAgent||"",Ia=/AppleWebKit\/([\d.]+)/i.exec(Ha),Ja=Ia?parseFloat(Ia.pop()):null,Ka=/iPad/i.test(Ha),La=/iPhone/i.test(Ha)&&!Ka,Ma=/iPod/i.test(Ha),Na=La||Ka||Ma,Oa=function(){
var a=Ha.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),Pa=/Android/i.test(Ha),Qa=function(){var a=Ha.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);return b&&c?parseFloat(a[1]+"."+a[2]):b?b:null}(),Ra=Pa&&/webkit/i.test(Ha)&&Qa<2.3,Sa=Pa&&Qa<5&&Ja<537,Ta=/Firefox/i.test(Ha),Ua=/Edge/i.test(Ha),Va=!Ua&&/Chrome/i.test(Ha),Wa=function(){var a=Ha.match(/Chrome\/(\d+)/);return a&&a[1]?parseFloat(a[1]):null}(),Xa=/MSIE\s8\.0/.test(Ha),Ya=function(){var a=/MSIE\s(\d+)\.\d/.exec(Ha),b=a&&parseFloat(a[1]);return!b&&/Trident\/7.0/i.test(Ha)&&/rv:11.0/.test(Ha)&&(b=11),b}(),Za=/Safari/i.test(Ha)&&!Va&&!Pa&&!Ua,$a=Za||Na,_a=n()&&("ontouchstart"in Aa||Aa.DocumentTouch&&Aa.document instanceof Aa.DocumentTouch),ab=n()&&"backgroundSize"in Aa.document.createElement("video").style,bb=(Object.freeze||Object)({IS_IPAD:Ka,IS_IPHONE:La,IS_IPOD:Ma,IS_IOS:Na,IOS_VERSION:Oa,IS_ANDROID:Pa,ANDROID_VERSION:Qa,IS_OLD_ANDROID:Ra,IS_NATIVE_ANDROID:Sa,IS_FIREFOX:Ta,IS_EDGE:Ua,IS_CHROME:Va,CHROME_VERSION:Wa,IS_IE8:Xa,IE_VERSION:Ya,IS_SAFARI:Za,IS_ANY_SAFARI:$a,TOUCH_ENABLED:_a,BACKGROUND_SIZE_SUPPORTED:ab}),cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},db=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},eb=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},fb=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b},gb=function(a,b){return a.raw=b,a},hb=Object.prototype.toString,ib=function(a){return h(a)?Object.keys(a):[]},jb=void 0,kb="info",lb=[],mb=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!!Ya&&Ya<11,d=jb.levels[kb],e=new RegExp("^("+d+")$");if("log"!==a&&b.unshift(a.toUpperCase()+":"),lb&&lb.push([].concat(b)),b.unshift("VIDEOJS:"),Aa.console){var f=Aa.console[a];f||"debug"!==a||(f=Aa.console.info||Aa.console.log),f&&d&&e.test(a)&&(c&&(b=b.map(function(a){if(h(a)||Array.isArray(a))try{return JSON.stringify(a)}catch(b){return String(a)}return String(a)}).join(" ")),f.apply?f[Array.isArray(b)?"apply":"call"](Aa.console,b):f(b))}};jb=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];mb("log",b)},jb.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:kb},jb.level=function(a){if("string"==typeof a){if(!jb.levels.hasOwnProperty(a))throw new Error('"'+a+'" in not a valid log level');kb=a}return kb},jb.history=function(){return lb?[].concat(lb):[]},jb.history.clear=function(){lb&&(lb.length=0)},jb.history.disable=function(){null!==lb&&(lb.length=0,lb=null)},jb.history.enable=function(){null===lb&&(lb=[])},jb.error=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return mb("error",b)},jb.warn=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return mb("warn",b)},jb.debug=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return mb("debug",b)};var nb=jb,ob=gb(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),pb=q("querySelector"),qb=q("querySelectorAll"),rb=(Object.freeze||Object)({isReal:n,isEl:o,isInFrame:p,createEl:r,textContent:s,prependTo:t,hasClass:u,addClass:v,removeClass:w,toggleClass:x,setAttributes:y,getAttributes:z,getAttribute:A,setAttribute:B,removeAttribute:C,blockTextSelection:D,unblockTextSelection:E,getBoundingClientRect:F,findPosition:G,getPointerPosition:H,isTextNode:I,emptyEl:J,normalizeContent:K,appendContent:L,insertContent:M,isSingleLeftClick:N,$:pb,$$:qb}),sb=1,tb={},ub="vdata"+(new Date).getTime(),vb=!1;!function(){try{var a=Object.defineProperty({},"passive",{get:function(){vb=!0}});Aa.addEventListener("test",null,a),Aa.removeEventListener("test",null,a)}catch(b){}}();var wb=["touchstart","touchmove"],xb=(Object.freeze||Object)({fixEvent:U,on:V,off:W,trigger:X,one:Y}),yb=!1,zb=void 0,Ab=function(){if(n()){var a=Ba.getElementsByTagName("video"),b=Ba.getElementsByTagName("audio"),c=Ba.getElementsByTagName("video-js"),d=[];if(a&&a.length>0)for(var e=0,f=a.length;e<f;e++)d.push(a[e]);if(b&&b.length>0)for(var g=0,h=b.length;g<h;g++)d.push(b[g]);if(c&&c.length>0)for(var i=0,j=c.length;i<j;i++)d.push(c[i]);if(d&&d.length>0)for(var k=0,l=d.length;k<l;k++){var m=d[k];if(!m||!m.getAttribute){Z(1);break}if(void 0===m.player){var o=m.getAttribute("data-setup");null!==o&&zb(m)}}else yb||Z(1)}};n()&&"complete"===Ba.readyState?yb=!0:Y(Aa,"load",function(){yb=!0});var Bb=function(a){var b=Ba.createElement("style");return b.className=a,b},Cb=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b},Db=function(a,b,c){b.guid||(b.guid=O());var d=function(){return b.apply(a,arguments)};return d.guid=c?c+"_"+b.guid:b.guid,d},Eb=function(a,b){var c=Date.now(),d=function(){var d=Date.now();d-c>=b&&(a.apply(void 0,arguments),c=d)};return d},Fb=function(){};Fb.prototype.allowedEvents_={},Fb.prototype.on=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},V(this,a,b),this.addEventListener=c},Fb.prototype.addEventListener=Fb.prototype.on,Fb.prototype.off=function(a,b){W(this,a,b)},Fb.prototype.removeEventListener=Fb.prototype.off,Fb.prototype.one=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},Y(this,a,b),this.addEventListener=c},Fb.prototype.trigger=function(a){var b=a.type||a;"string"==typeof a&&(a={type:b}),a=U(a),this.allowedEvents_[b]&&this["on"+b]&&this["on"+b](a),X(this,a)},Fb.prototype.dispatchEvent=Fb.prototype.trigger;var Gb=function(a){return a instanceof Fb||!!a.eventBusEl_&&["on","one","off","trigger"].every(function(b){return"function"==typeof a[b]})},Hb=function(a){return"string"==typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length},Ib=function(a){if(!a.nodeName&&!Gb(a))throw new Error("Invalid target; must be a DOM node or evented object.")},Jb=function(a){if(!Hb(a))throw new Error("Invalid event type; must be a non-empty string or array.")},Kb=function(a){if("function"!=typeof a)throw new Error("Invalid listener; must be a function.")},Lb=function(a,b){var c=b.length<3||b[0]===a||b[0]===a.eventBusEl_,d=void 0,e=void 0,f=void 0;return c?(d=a.eventBusEl_,b.length>=3&&b.shift(),e=b[0],f=b[1]):(d=b[0],e=b[1],f=b[2]),Ib(d),Jb(e),Kb(f),f=Db(a,f),{isTargetingSelf:c,target:d,type:e,listener:f}},Mb=function(a,b,c,d){Ib(a),a.nodeName?xb[b](a,c,d):a[b](c,d)},Nb={on:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=Lb(this,c),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(Mb(g,"on",h,i),!f){var j=function(){return a.off(g,h,i)};j.guid=i.guid;var k=function(){return a.off("dispose",j)};k.guid=i.guid,Mb(this,"on","dispose",j),Mb(g,"on","dispose",k)}},one:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=Lb(this,c),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(f)Mb(g,"one",h,i);else{var j=function k(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];a.off(g,h,k),i.apply(null,c)};j.guid=i.guid,Mb(g,"one",h,j)}},off:function(a,b,c){if(!a||Hb(a))W(this.eventBusEl_,a,b);else{var d=a,e=b;Ib(d),Jb(e),Kb(c),c=Db(this,c),this.off("dispose",c),d.nodeName?(W(d,e,c),W(d,"dispose",c)):Gb(d)&&(d.off(e,c),d.off("dispose",c))}},trigger:function(a,b){return X(this.eventBusEl_,a,b)}},Ob={state:{},setState:function(a){var b=this;"function"==typeof a&&(a=a());var c=void 0;return e(a,function(a,d){b.state[d]!==a&&(c=c||{},c[d]={from:b.state[d],to:a}),b.state[d]=a}),c&&Gb(this)&&this.trigger({changes:c,type:"statechanged"}),c}},Pb=function(){function a(b,c,d){if(db(this,a),!b&&this.play?this.player_=b=this:this.player_=b,this.options_=ca({},this.options_),c=this.options_=ca(this.options_,c),this.id_=c.id||c.el&&c.el.id,!this.id_){var e=b&&b.id&&b.id()||"no_player";this.id_=e+"_component_"+O()}this.name_=c.name||null,c.el?this.el_=c.el:c.createEl!==!1&&(this.el_=this.createEl()),c.evented!==!1&&$(this,{eventBusKey:this.el_?"el_":null}),_(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},c.initChildren!==!1&&this.initChildren(),this.ready(d),c.reportTouchActivity!==!1&&this.enableTouchActivity()}return a.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),R(this.el_),this.el_=null),this.player_=null},a.prototype.player=function(){return this.player_},a.prototype.options=function(a){return nb.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),a?(this.options_=ca(this.options_,a),this.options_):this.options_},a.prototype.el=function(){return this.el_},a.prototype.createEl=function(a,b,c){return r(a,b,c)},a.prototype.localize=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,d=this.player_.language&&this.player_.language(),e=this.player_.languages&&this.player_.languages(),f=e&&e[d],g=d&&d.split("-")[0],h=e&&e[g],i=c;return f&&f[a]?i=f[a]:h&&h[a]&&(i=h[a]),b&&(i=i.replace(/\{(\d+)\}/g,function(a,c){var d=b[c-1],e=d;return"undefined"==typeof d&&(e=a),e})),i},a.prototype.contentEl=function(){return this.contentEl_||this.el_},a.prototype.id=function(){return this.id_},a.prototype.name=function(){return this.name_},a.prototype.children=function(){return this.children_},a.prototype.getChildById=function(a){return this.childIndex_[a]},a.prototype.getChild=function(a){if(a)return a=aa(a),this.childNameIndex_[a]},a.prototype.addChild=function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,e=void 0,f=void 0;if("string"==typeof b){f=aa(b);var g=c.componentClass||f;c.name=f;var h=a.getComponent(g);if(!h)throw new Error("Component "+g+" does not exist");if("function"!=typeof h)return null;e=new h(this.player_||this,c)}else e=b;if(this.children_.splice(d,0,e),"function"==typeof e.id&&(this.childIndex_[e.id()]=e),f=f||e.name&&aa(e.name()),f&&(this.childNameIndex_[f]=e),"function"==typeof e.el&&e.el()){var i=this.contentEl().children,j=i[d]||null;this.contentEl().insertBefore(e.el(),j)}return e},a.prototype.removeChild=function(a){if("string"==typeof a&&(a=this.getChild(a)),a&&this.children_){for(var b=!1,c=this.children_.length-1;c>=0;c--)if(this.children_[c]===a){b=!0,this.children_.splice(c,1);break}if(b){this.childIndex_[a.id()]=null,this.childNameIndex_[a.name()]=null;var d=a.el();d&&d.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el())}}},a.prototype.initChildren=function(){var b=this,c=this.options_.children;if(c){var d=this.options_,e=function(a){var c=a.name,e=a.opts;if(void 0!==d[c]&&(e=d[c]),e!==!1){e===!0&&(e={}),e.playerOptions=b.options_.playerOptions;var f=b.addChild(c,e);f&&(b[c]=f)}},f=void 0,g=a.getComponent("Tech");f=Array.isArray(c)?c:Object.keys(c),f.concat(Object.keys(this.options_).filter(function(a){return!f.some(function(b){return"string"==typeof b?a===b:a===b.name})})).map(function(a){var d=void 0,e=void 0;return"string"==typeof a?(d=a,e=c[d]||b.options_[d]||{}):(d=a.name,e=a),{name:d,opts:e}}).filter(function(b){var c=a.getComponent(b.opts.componentClass||aa(b.name));return c&&!g.isTech(c)}).forEach(e)}},a.prototype.buildCSSClass=function(){return""},a.prototype.ready=function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a)return this.isReady_?void(b?a.call(this):this.setTimeout(a,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(a))},a.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var a=this.readyQueue_;this.readyQueue_=[],a&&a.length>0&&a.forEach(function(a){a.call(this)},this),this.trigger("ready")},1)},a.prototype.$=function(a,b){return pb(a,b||this.contentEl())},a.prototype.$$=function(a,b){return qb(a,b||this.contentEl())},a.prototype.hasClass=function(a){return u(this.el_,a)},a.prototype.addClass=function(a){v(this.el_,a)},a.prototype.removeClass=function(a){w(this.el_,a)},a.prototype.toggleClass=function(a,b){x(this.el_,a,b)},a.prototype.show=function(){this.removeClass("vjs-hidden")},a.prototype.hide=function(){this.addClass("vjs-hidden")},a.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},a.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},a.prototype.getAttribute=function(a){return A(this.el_,a)},a.prototype.setAttribute=function(a,b){B(this.el_,a,b)},a.prototype.removeAttribute=function(a){C(this.el_,a)},a.prototype.width=function(a,b){return this.dimension("width",a,b)},a.prototype.height=function(a,b){return this.dimension("height",a,b)},a.prototype.dimensions=function(a,b){this.width(a,!0),this.height(b)},a.prototype.dimension=function(a,b,c){if(void 0!==b)return null!==b&&b===b||(b=0),(""+b).indexOf("%")!==-1||(""+b).indexOf("px")!==-1?this.el_.style[a]=b:"auto"===b?this.el_.style[a]="":this.el_.style[a]=b+"px",void(c||this.trigger("componentresize"));if(!this.el_)return 0;var d=this.el_.style[a],e=d.indexOf("px");return e!==-1?parseInt(d.slice(0,e),10):parseInt(this.el_["offset"+aa(a)],10)},a.prototype.currentDimension=function(a){var b=0;if("width"!==a&&"height"!==a)throw new Error("currentDimension only accepts width or height value");if("function"==typeof Aa.getComputedStyle){var c=Aa.getComputedStyle(this.el_);b=c.getPropertyValue(a)||c[a]}if(b=parseFloat(b),0===b){var d="offset"+aa(a);b=this.el_[d]}return b},a.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},a.prototype.currentWidth=function(){return this.currentDimension("width")},a.prototype.currentHeight=function(){return this.currentDimension("height")},a.prototype.focus=function(){this.el_.focus()},a.prototype.blur=function(){this.el_.blur()},a.prototype.emitTapEvents=function(){var a=0,b=null,c=10,d=200,e=void 0;this.on("touchstart",function(c){1===c.touches.length&&(b={pageX:c.touches[0].pageX,pageY:c.touches[0].pageY},a=(new Date).getTime(),e=!0)}),this.on("touchmove",function(a){if(a.touches.length>1)e=!1;else if(b){var d=a.touches[0].pageX-b.pageX,f=a.touches[0].pageY-b.pageY,g=Math.sqrt(d*d+f*f);g>c&&(e=!1)}});var f=function(){e=!1};this.on("touchleave",f),this.on("touchcancel",f),this.on("touchend",function(c){if(b=null,e===!0){var f=(new Date).getTime()-a;f<d&&(c.preventDefault(),this.trigger("tap"))}})},a.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var a=Db(this.player(),this.player().reportUserActivity),b=void 0;this.on("touchstart",function(){a(),this.clearInterval(b),b=this.setInterval(a,250)});var c=function(c){a(),this.clearInterval(b)};this.on("touchmove",a),this.on("touchend",c),this.on("touchcancel",c)}},a.prototype.setTimeout=function(a,b){var c=this;a=Db(this,a);var d=Aa.setTimeout(a,b),e=function(){return c.clearTimeout(d)};return e.guid="vjs-timeout-"+d,this.on("dispose",e),d},a.prototype.clearTimeout=function(a){Aa.clearTimeout(a);var b=function(){};return b.guid="vjs-timeout-"+a,this.off("dispose",b),a},a.prototype.setInterval=function(a,b){var c=this;a=Db(this,a);var d=Aa.setInterval(a,b),e=function(){return c.clearInterval(d)};return e.guid="vjs-interval-"+d,this.on("dispose",e),d},a.prototype.clearInterval=function(a){Aa.clearInterval(a);var b=function(){};return b.guid="vjs-interval-"+a,this.off("dispose",b),a},a.prototype.requestAnimationFrame=function(a){var b=this;if(this.supportsRaf_){a=Db(this,a);var c=Aa.requestAnimationFrame(a),d=function(){return b.cancelAnimationFrame(c)};return d.guid="vjs-raf-"+c,this.on("dispose",d),c}return this.setTimeout(a,1e3/60)},a.prototype.cancelAnimationFrame=function(a){if(this.supportsRaf_){Aa.cancelAnimationFrame(a);var b=function(){};return b.guid="vjs-raf-"+a,this.off("dispose",b),a}return this.clearTimeout(a)},a.registerComponent=function(b,c){if("string"!=typeof b||!b)throw new Error('Illegal component name, "'+b+'"; must be a non-empty string.');var d=a.getComponent("Tech"),e=d&&d.isTech(c),f=a===c||a.prototype.isPrototypeOf(c.prototype);if(e||!f){var g=void 0;throw g=e?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+b+'"; '+g+".")}b=aa(b),a.components_||(a.components_={});var h=a.getComponent("Player");if("Player"===b&&h&&h.players){var i=h.players,j=Object.keys(i);if(i&&j.length>0&&j.map(function(a){return i[a]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return a.components_[b]=c,c},a.getComponent=function(b){if(b)return b=aa(b),a.components_&&a.components_[b]?a.components_[b]:void 0},a}();Pb.prototype.supportsRaf_="function"==typeof Aa.requestAnimationFrame&&"function"==typeof Aa.cancelAnimationFrame,Pb.registerComponent("Component",Pb);for(var Qb={},Rb=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Sb=Rb[0],Tb=void 0,Ub=0;Ub<Rb.length;Ub++)if(Rb[Ub][1]in Ba){Tb=Rb[Ub];break}if(Tb)for(var Vb=0;Vb<Tb.length;Vb++)Qb[Sb[Vb]]=Tb[Vb];ia.prototype.code=0,ia.prototype.message="",ia.prototype.status=null,ia.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],ia.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Wb=0;Wb<ia.errorTypes.length;Wb++)ia[ia.errorTypes[Wb]]=Wb,ia.prototype[ia.errorTypes[Wb]]=Wb;var Xb=function(a){var b=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(b,c,d){return a[c]&&(b[c]=a[c]),b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,endTime:a.endTime,text:a.text,id:a.id}})});return b},Yb=function(a){var b=a.$$("track"),c=Array.prototype.map.call(b,function(a){return a.track}),d=Array.prototype.map.call(b,function(a){var b=Xb(a.track);return a.src&&(b.src=a.src),b});return d.concat(Array.prototype.filter.call(a.textTracks(),function(a){return c.indexOf(a)===-1}).map(Xb))},Zb=function(a,b){return a.forEach(function(a){var c=b.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(function(a){return c.addCue(a)})}),b.textTracks()},$b={textTracksToJson:Yb,jsonToTextTracks:Zb,trackToJson_:Xb},_b="vjs-modal-dialog",ac=27,bc=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.opened_=e.hasBeenOpened_=e.hasBeenFilled_=!1,e.closeable(!e.options_.uncloseable),e.content(e.options_.content),e.contentEl_=r("div",{className:_b+"-content"},{role:"document"}),e.descEl_=r("p",{className:_b+"-description vjs-control-text",id:e.el().getAttribute("aria-describedby")}),s(e.descEl_,e.description()),e.el_.appendChild(e.descEl_),e.el_.appendChild(e.contentEl_),e}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},b.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,a.prototype.dispose.call(this)},b.prototype.buildCSSClass=function(){return _b+" vjs-hidden "+a.prototype.buildCSSClass.call(this)},b.prototype.handleKeyPress=function(a){a.which===ac&&this.closeable()&&this.close()},b.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},b.prototype.description=function(){var a=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),a},b.prototype.open=function(){if(!this.opened_){var a=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!a.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",Db(this,this.handleKeyPress)),this.hadControls_=a.controls(),a.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},b.prototype.opened=function(a){return"boolean"==typeof a&&this[a?"open":"close"](),this.opened_},b.prototype.close=function(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&a.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",Db(this,this.handleKeyPress)),this.hadControls_&&a.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},b.prototype.closeable=function c(a){if("boolean"==typeof a){var c=this.closeable_=!!a,b=this.getChild("closeButton");if(c&&!b){var d=this.contentEl_;this.contentEl_=this.el_,b=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=d,this.on(b,"close",this.close)}!c&&b&&(this.off(b,"close",this.close),this.removeChild(b),b.dispose())}return this.closeable_},b.prototype.fill=function(){this.fillWith(this.content())},b.prototype.fillWith=function(a){var b=this.contentEl(),c=b.parentNode,d=b.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,c.removeChild(b),this.empty(),M(b,a),this.trigger("modalfill"),d?c.insertBefore(b,d):c.appendChild(b);var e=this.getChild("closeButton");e&&c.appendChild(e.el_)},b.prototype.empty=function(){this.trigger("beforemodalempty"),J(this.contentEl()),this.trigger("modalempty")},b.prototype.content=function(a){return"undefined"!=typeof a&&(this.content_=a),this.content_},b.prototype.conditionalFocus_=function(){var a=Ba.activeElement,b=this.player_.el_;this.previouslyActiveEl_=null,(b.contains(a)||b===a)&&(this.previouslyActiveEl_=a,this.focus(),this.on(Ba,"keydown",this.handleKeyDown))},b.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(Ba,"keydown",this.handleKeyDown)},b.prototype.handleKeyDown=function(a){if(9===a.which){for(var b=this.focusableEls_(),c=this.el_.querySelector(":focus"),d=void 0,e=0;e<b.length;e++)if(c===b[e]){d=e;break}Ba.activeElement===this.el_&&(d=0),a.shiftKey&&0===d?(b[b.length-1].focus(),a.preventDefault()):a.shiftKey||d!==b.length-1||(b[0].focus(),a.preventDefault())}},b.prototype.focusableEls_=function(){var a=this.el_.querySelectorAll("*");return Array.prototype.filter.call(a,function(a){return(a instanceof Aa.HTMLAnchorElement||a instanceof Aa.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof Aa.HTMLInputElement||a instanceof Aa.HTMLSelectElement||a instanceof Aa.HTMLTextAreaElement||a instanceof Aa.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof Aa.HTMLIFrameElement||a instanceof Aa.HTMLObjectElement||a instanceof Aa.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable")})},b}(Pb);bc.prototype.options_={pauseOnOpen:!0,temporary:!0},Pb.registerComponent("ModalDialog",bc);var cc=function(a){function b(){var c,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;db(this,b);var f=fb(this,a.call(this));if(!e&&(e=f,Xa)){e=Ba.createElement("custom");for(var g in b.prototype)"constructor"!==g&&(e[g]=b.prototype[g])}e.tracks_=[],Object.defineProperty(e,"length",{get:function(){return this.tracks_.length}});for(var h=0;h<d.length;h++)e.addTrack(d[h]);return c=e,fb(f,c)}return eb(b,a),b.prototype.addTrack=function(a){var b=this.tracks_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.tracks_[b]}}),this.tracks_.indexOf(a)===-1&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack"}))},b.prototype.removeTrack=function(a){for(var b=void 0,c=0,d=this.length;c<d;c++)if(this[c]===a){b=this[c],b.off&&b.off(),this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack"})},b.prototype.getTrackById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},b}(Fb);cc.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var dc in cc.prototype.allowedEvents_)cc.prototype["on"+dc]=null;var ec=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].enabled=!1)},fc=function(a){function b(){var c,d,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];db(this,b);for(var f=void 0,g=e.length-1;g>=0;g--)if(e[g].enabled){ec(e,e[g]);break}if(Xa){f=Ba.createElement("custom");for(var h in cc.prototype)"constructor"!==h&&(f[h]=cc.prototype[h]);for(var i in b.prototype)"constructor"!==i&&(f[i]=b.prototype[i])}return f=c=fb(this,a.call(this,e,f)),f.changing_=!1,d=f,fb(c,d)}return eb(b,a),b.prototype.addTrack=function(b){var c=this;b.enabled&&ec(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&b.addEventListener("enabledchange",function(){c.changing_||(c.changing_=!0,ec(c,b),c.changing_=!1,c.trigger("change"))})},b}(cc),gc=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)},hc=function(a){function b(){var c,d,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];db(this,b);for(var f=void 0,g=e.length-1;g>=0;g--)if(e[g].selected){gc(e,e[g]);break}if(Xa){f=Ba.createElement("custom");for(var h in cc.prototype)"constructor"!==h&&(f[h]=cc.prototype[h]);for(var i in b.prototype)"constructor"!==i&&(f[i]=b.prototype[i])}return f=c=fb(this,a.call(this,e,f)),f.changing_=!1,Object.defineProperty(f,"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}}),d=f,fb(c,d)}return eb(b,a),b.prototype.addTrack=function(b){var c=this;b.selected&&gc(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&b.addEventListener("selectedchange",function(){c.changing_||(c.changing_=!0,gc(c,b),c.changing_=!1,c.trigger("change"))})},b}(cc),ic=function(a){function b(){var c,d,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];db(this,b);var f=void 0;if(Xa){f=Ba.createElement("custom");for(var g in cc.prototype)"constructor"!==g&&(f[g]=cc.prototype[g]);for(var h in b.prototype)"constructor"!==h&&(f[h]=b.prototype[h])}return f=c=fb(this,a.call(this,e,f)),d=f,fb(c,d)}return eb(b,a),b.prototype.addTrack=function(b){a.prototype.addTrack.call(this,b),b.addEventListener("modechange",Db(this,function(){this.trigger("change")}));var c=["metadata","chapters"];c.indexOf(b.kind)===-1&&b.addEventListener("modechange",Db(this,function(){this.trigger("selectedlanguagechange")}))},b}(cc),jc=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];db(this,a);var c=this;if(Xa){c=Ba.createElement("custom");for(var d in a.prototype)"constructor"!==d&&(c[d]=a.prototype[d])}c.trackElements_=[],Object.defineProperty(c,"length",{get:function(){return this.trackElements_.length}});for(var e=0,f=b.length;e<f;e++)c.addTrackElement_(b[e]);if(Xa)return c}return a.prototype.addTrackElement_=function(a){var b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}}),this.trackElements_.indexOf(a)===-1&&this.trackElements_.push(a)},a.prototype.getTrackElementByTrack_=function(a){for(var b=void 0,c=0,d=this.trackElements_.length;c<d;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b},a.prototype.removeTrackElement_=function(a){for(var b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_.splice(b,1);break}},a}(),kc=function(){function a(b){db(this,a);var c=this;if(Xa){c=Ba.createElement("custom");for(var d in a.prototype)"constructor"!==d&&(c[d]=a.prototype[d])}if(a.prototype.setCues_.call(c,b),Object.defineProperty(c,"length",{get:function(){return this.length_}}),Xa)return c}return a.prototype.setCues_=function(a){var b=this.length||0,c=0,d=a.length;this.cues_=a,this.length_=a.length;var e=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})};if(b<d)for(c=b;c<d;c++)e.call(this,c)},a.prototype.getCueById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},a}(),lc={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},mc={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},nc={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},oc={disabled:"disabled",hidden:"hidden",showing:"showing"},pc=function(a){function b(){var c,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};db(this,b);var e=fb(this,a.call(this)),f=e;if(Xa){f=Ba.createElement("custom");for(var g in b.prototype)"constructor"!==g&&(f[g]=b.prototype[g])}var h={id:d.id||"vjs_track_"+O(),kind:d.kind||"",label:d.label||"",language:d.language||""},i=function(a){Object.defineProperty(f,a,{get:function(){return h[a]},set:function(){}})};for(var j in h)i(j);return c=f,fb(e,c)}return eb(b,a),b}(Fb),qc=function(a){var b=["protocol","hostname","port","pathname","search","hash","host"],c=Ba.createElement("a");c.href=a;var d=""===c.host&&"file:"!==c.protocol,e=void 0;d&&(e=Ba.createElement("div"),e.innerHTML='<a href="'+a+'"></a>',c=e.firstChild,e.setAttribute("style","display:none; position:absolute;"),Ba.body.appendChild(e));for(var f={},g=0;g<b.length;g++)f[b[g]]=c[b[g]];return"http:"===f.protocol&&(f.host=f.host.replace(/:80$/,"")),"https:"===f.protocol&&(f.host=f.host.replace(/:443$/,"")),f.protocol||(f.protocol=Aa.location.protocol),d&&Ba.body.removeChild(e),f},rc=function(a){if(!a.match(/^https?:\/\//)){var b=Ba.createElement("div");b.innerHTML='<a href="'+a+'">x</a>',a=b.firstChild.href}return a},sc=function(a){if("string"==typeof a){
var b=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,c=b.exec(a);if(c)return c.pop().toLowerCase()}return""},tc=function(a){var b=Aa.location,c=qc(a),d=":"===c.protocol?b.protocol:c.protocol,e=d+c.host!==b.protocol+b.host;return e},uc=(Object.freeze||Object)({parseUrl:qc,getAbsoluteURL:rc,getFileExtension:sc,isCrossOrigin:tc}),vc=function(a,b){var c=new Aa.WebVTT.Parser(Aa,Aa.vttjs,Aa.WebVTT.StringDecoder()),d=[];c.oncue=function(a){b.addCue(a)},c.onparsingerror=function(a){d.push(a)},c.onflush=function(){b.trigger({type:"loadeddata",target:b})},c.parse(a),d.length>0&&(Aa.console&&Aa.console.groupCollapsed&&Aa.console.groupCollapsed("Text Track parsing errors for "+b.src),d.forEach(function(a){return nb.error(a)}),Aa.console&&Aa.console.groupEnd&&Aa.console.groupEnd()),c.flush()},wc=function(a,b){var c={uri:a},d=tc(a);d&&(c.cors=d),Ea(c,Db(this,function(a,c,d){if(a)return nb.error(a,c);if(b.loaded_=!0,"function"!=typeof Aa.WebVTT){if(b.tech_){var e=function(){return vc(d,b)};b.tech_.on("vttjsloaded",e),b.tech_.on("vttjserror",function(){nb.error("vttjs failed to load, stopping trying to process "+b.src),b.tech_.off("vttjsloaded",e)})}}else vc(d,b)}))},xc=function(a){function b(){var c,d,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(db(this,b),!e.tech)throw new Error("A tech was not provided.");var f=ca(e,{kind:nc[e.kind]||"subtitles",language:e.language||e.srclang||""}),g=oc[f.mode]||"disabled",h=f["default"];"metadata"!==f.kind&&"chapters"!==f.kind||(g="hidden");var i=c=fb(this,a.call(this,f));if(i.tech_=f.tech,Xa)for(var j in b.prototype)"constructor"!==j&&(i[j]=b.prototype[j]);i.cues_=[],i.activeCues_=[];var k=new kc(i.cues_),l=new kc(i.activeCues_),m=!1,n=Db(i,function(){this.activeCues,m&&(this.trigger("cuechange"),m=!1)});return"disabled"!==g&&i.tech_.ready(function(){i.tech_.on("timeupdate",n)},!0),Object.defineProperty(i,"default",{get:function(){return h},set:function(){}}),Object.defineProperty(i,"mode",{get:function(){return g},set:function(a){var b=this;oc[a]&&(g=a,"showing"===g&&this.tech_.ready(function(){b.tech_.on("timeupdate",n)},!0),this.trigger("modechange"))}}),Object.defineProperty(i,"cues",{get:function(){return this.loaded_?k:null},set:function(){}}),Object.defineProperty(i,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return l;for(var a=this.tech_.currentTime(),b=[],c=0,d=this.cues.length;c<d;c++){var e=this.cues[c];e.startTime<=a&&e.endTime>=a?b.push(e):e.startTime===e.endTime&&e.startTime<=a&&e.startTime+.5>=a&&b.push(e)}if(m=!1,b.length!==this.activeCues_.length)m=!0;else for(var f=0;f<b.length;f++)this.activeCues_.indexOf(b[f])===-1&&(m=!0);return this.activeCues_=b,l.setCues_(this.activeCues_),l},set:function(){}}),f.src?(i.src=f.src,wc(f.src,i)):i.loaded_=!0,d=i,fb(c,d)}return eb(b,a),b.prototype.addCue=function(a){var b=a;if(Aa.vttjs&&!(a instanceof Aa.vttjs.VTTCue)){b=new Aa.vttjs.VTTCue(a.startTime,a.endTime,a.text);for(var c in a)c in b||(b[c]=a[c]);b.id=a.id,b.originalCue_=a}for(var d=this.tech_.textTracks(),e=0;e<d.length;e++)d[e]!==this&&d[e].removeCue(b);this.cues_.push(b),this.cues.setCues_(this.cues_)},b.prototype.removeCue=function(a){for(var b=this.cues_.length;b--;){var c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1),this.cues.setCues_(this.cues_);break}}},b}(pc);xc.prototype.allowedEvents_={cuechange:"cuechange"};var yc=function(a){function b(){var c,d,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};db(this,b);var f=ca(e,{kind:mc[e.kind]||""}),g=c=fb(this,a.call(this,f)),h=!1;if(Xa)for(var i in b.prototype)"constructor"!==i&&(g[i]=b.prototype[i]);return Object.defineProperty(g,"enabled",{get:function(){return h},set:function(a){"boolean"==typeof a&&a!==h&&(h=a,this.trigger("enabledchange"))}}),f.enabled&&(g.enabled=f.enabled),g.loaded_=!0,d=g,fb(c,d)}return eb(b,a),b}(pc),zc=function(a){function b(){var c,d,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};db(this,b);var f=ca(e,{kind:lc[e.kind]||""}),g=c=fb(this,a.call(this,f)),h=!1;if(Xa)for(var i in b.prototype)"constructor"!==i&&(g[i]=b.prototype[i]);return Object.defineProperty(g,"selected",{get:function(){return h},set:function(a){"boolean"==typeof a&&a!==h&&(h=a,this.trigger("selectedchange"))}}),f.selected&&(g.selected=f.selected),d=g,fb(c,d)}return eb(b,a),b}(pc),Ac=0,Bc=1,Cc=2,Dc=3,Ec=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};db(this,b);var d=fb(this,a.call(this)),e=void 0,f=d;if(Xa){f=Ba.createElement("custom");for(var g in b.prototype)"constructor"!==g&&(f[g]=b.prototype[g])}var h=new xc(c);if(f.kind=h.kind,f.src=h.src,f.srclang=h.language,f.label=h.label,f["default"]=h["default"],Object.defineProperty(f,"readyState",{get:function(){return e}}),Object.defineProperty(f,"track",{get:function(){return h}}),e=Ac,h.addEventListener("loadeddata",function(){e=Cc,f.trigger({type:"load",target:f})}),Xa){var i;return i=f,fb(d,i)}return d}return eb(b,a),b}(Fb);Ec.prototype.allowedEvents_={load:"load"},Ec.NONE=Ac,Ec.LOADING=Bc,Ec.LOADED=Cc,Ec.ERROR=Dc;var Fc={audio:{ListClass:fc,TrackClass:yc,capitalName:"Audio"},video:{ListClass:hc,TrackClass:zc,capitalName:"Video"},text:{ListClass:ic,TrackClass:xc,capitalName:"Text"}};Object.keys(Fc).forEach(function(a){Fc[a].getterName=a+"Tracks",Fc[a].privateName=a+"Tracks_"});var Gc={remoteText:{ListClass:ic,TrackClass:xc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:jc,TrackClass:Ec,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Hc=ca(Fc,Gc);Gc.names=Object.keys(Gc),Fc.names=Object.keys(Fc),Hc.names=[].concat(Gc.names).concat(Fc.names);var Ic=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};db(this,b),c.reportTouchActivity=!1;var e=fb(this,a.call(this,null,c,d));return e.hasStarted_=!1,e.on("playing",function(){this.hasStarted_=!0}),e.on("loadstart",function(){this.hasStarted_=!1}),Hc.names.forEach(function(a){var b=Hc[a];c&&c[b.getterName]&&(e[b.privateName]=c[b.getterName])}),e.featuresProgressEvents||e.manualProgressOn(),e.featuresTimeupdateEvents||e.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){c["native"+a+"Tracks"]===!1&&(e["featuresNative"+a+"Tracks"]=!1)}),c.nativeCaptions===!1||c.nativeTextTracks===!1?e.featuresNativeTextTracks=!1:c.nativeCaptions!==!0&&c.nativeTextTracks!==!0||(e.featuresNativeTextTracks=!0),e.featuresNativeTextTracks||e.emulateTextTracks(),e.autoRemoteTextTracks_=new Hc.text.ListClass,e.initTrackListeners(),c.nativeControlsForTouch||e.emitTapEvents(),e.constructor&&(e.name_=e.constructor.name||"Unknown Tech"),e}return eb(b,a),b.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},b.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},b.prototype.trackProgress=function(a){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Db(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,1===a&&this.stopTrackingProgress()}),500)},b.prototype.onDurationChange=function(a){this.duration_=this.duration()},b.prototype.buffered=function(){return ga(0,0)},b.prototype.bufferedPercent=function(){return ha(this.buffered(),this.duration_)},b.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},b.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},b.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},b.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},b.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},b.prototype.dispose=function(){this.clearTracks(Fc.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),a.prototype.dispose.call(this)},b.prototype.clearTracks=function(a){var b=this;a=[].concat(a),a.forEach(function(a){for(var c=b[a+"Tracks"]()||[],d=c.length;d--;){var e=c[d];"text"===a&&b.removeRemoteTextTrack(e),c.removeTrack(e)}})},b.prototype.cleanupAutoTextTracks=function(){for(var a=this.autoRemoteTextTracks_||[],b=a.length;b--;){var c=a[b];this.removeRemoteTextTrack(c)}},b.prototype.reset=function(){},b.prototype.error=function(a){return void 0!==a&&(this.error_=new ia(a),this.trigger("error")),this.error_},b.prototype.played=function(){return this.hasStarted_?ga(0,0):ga()},b.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},b.prototype.initTrackListeners=function(){var a=this;Fc.names.forEach(function(b){var c=Fc[b],d=function(){a.trigger(b+"trackchange")},e=a[c.getterName]();e.addEventListener("removetrack",d),e.addEventListener("addtrack",d),a.on("dispose",function(){e.removeEventListener("removetrack",d),e.removeEventListener("addtrack",d)})})},b.prototype.addWebVttScript_=function(){var a=this;if(!Aa.WebVTT)if(Ba.body.contains(this.el())){if(!this.options_["vtt.js"]&&i(Fa)&&Object.keys(Fa).length>0)return void this.trigger("vttjsloaded");var b=Ba.createElement("script");b.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",b.onload=function(){a.trigger("vttjsloaded")},b.onerror=function(){a.trigger("vttjserror")},this.on("dispose",function(){b.onload=null,b.onerror=null}),Aa.WebVTT=!0,this.el().parentNode.appendChild(b)}else this.ready(this.addWebVttScript_)},b.prototype.emulateTextTracks=function(){var a=this,b=this.textTracks(),c=this.remoteTextTracks(),d=function(a){return b.addTrack(a.track)},e=function(a){return b.removeTrack(a.track)};c.on("addtrack",d),c.on("removetrack",e),this.addWebVttScript_();var f=function(){return a.trigger("texttrackchange")},g=function(){f();for(var a=0;a<b.length;a++){var c=b[a];c.removeEventListener("cuechange",f),"showing"===c.mode&&c.addEventListener("cuechange",f)}};g(),b.addEventListener("change",g),b.addEventListener("addtrack",g),b.addEventListener("removetrack",g),this.on("dispose",function(){c.off("addtrack",d),c.off("removetrack",e),b.removeEventListener("change",g),b.removeEventListener("addtrack",g),b.removeEventListener("removetrack",g);for(var a=0;a<b.length;a++){var h=b[a];h.removeEventListener("cuechange",f)}})},b.prototype.addTextTrack=function(a,b,c){if(!a)throw new Error("TextTrack kind is required but was not provided");return la(this,a,b,c)},b.prototype.createRemoteTextTrack=function(a){var b=ca(a,{tech:this});return new Gc.remoteTextEl.TrackClass(b)},b.prototype.addRemoteTextTrack=function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments[1],d=this.createRemoteTextTrack(b);return c!==!0&&c!==!1&&(nb.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),c=!0),this.remoteTextTrackEls().addTrackElement_(d),this.remoteTextTracks().addTrack(d.track),c!==!0&&this.ready(function(){return a.autoRemoteTextTracks_.addTrack(d.track)}),d},b.prototype.removeRemoteTextTrack=function(a){var b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b),this.remoteTextTracks().removeTrack(a),this.autoRemoteTextTracks_.removeTrack(a)},b.prototype.getVideoPlaybackQuality=function(){return{}},b.prototype.setPoster=function(){},b.prototype.playsinline=function(){},b.prototype.setPlaysinline=function(){},b.prototype.canPlayType=function(){return""},b.canPlayType=function(){return""},b.canPlaySource=function(a,c){return b.canPlayType(a.type)},b.isTech=function(a){return a.prototype instanceof b||a instanceof b||a===b},b.registerTech=function(a,c){if(b.techs_||(b.techs_={}),!b.isTech(c))throw new Error("Tech "+a+" must be a Tech");if(!b.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!b.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return a=aa(a),b.techs_[a]=c,"Tech"!==a&&b.defaultTechOrder_.push(a),c},b.getTech=function(a){if(a)return a=aa(a),b.techs_&&b.techs_[a]?b.techs_[a]:Aa&&Aa.videojs&&Aa.videojs[a]?(nb.warn("The "+a+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Aa.videojs[a]):void 0},b}(Pb);Hc.names.forEach(function(a){var b=Hc[a];Ic.prototype[b.getterName]=function(){return this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName]}}),Ic.prototype.featuresVolumeControl=!0,Ic.prototype.featuresFullscreenResize=!1,Ic.prototype.featuresPlaybackRate=!1,Ic.prototype.featuresProgressEvents=!1,Ic.prototype.featuresTimeupdateEvents=!1,Ic.prototype.featuresNativeTextTracks=!1,Ic.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){var d=a.sourceHandlers;d||(d=a.sourceHandlers=[]),void 0===c&&(c=d.length),d.splice(c,0,b)},a.canPlayType=function(b){for(var c=a.sourceHandlers||[],d=void 0,e=0;e<c.length;e++)if(d=c[e].canPlayType(b))return d;return""},a.selectSourceHandler=function(b,c){for(var d=a.sourceHandlers||[],e=void 0,f=0;f<d.length;f++)if(e=d[f].canHandleSource(b,c))return d[f];return null},a.canPlaySource=function(b,c){var d=a.selectSourceHandler(b,c);return d?d.canHandleSource(b,c):""};var b=["seekable","duration"];b.forEach(function(a){var b=this[a];"function"==typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(b){var c=a.selectSourceHandler(b,this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:nb.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),c!==a.nativeSourceHandler&&(this.currentSource_=b),this.sourceHandler_=c.handleSource(b,this,this.options_),this.on("dispose",this.disposeSourceHandler)},a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Pb.registerComponent("Tech",Ic),Ic.registerTech("Tech",Ic),Ic.defaultTechOrder_=[];var Jc={},Kc={buffered:1,currentTime:1,duration:1,seekable:1,played:1},Lc={setCurrentTime:1},Mc=function Ae(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){a=Ae(a),Array.isArray(a)?b=b.concat(a):h(a)&&b.push(a)}),a=b}else a="string"==typeof a&&a.trim()?[{src:a}]:h(a)&&"string"==typeof a.src&&a.src&&a.src.trim()?[a]:[];return a},Nc=function(a){function b(c,d,e){db(this,b);var f=ca({createEl:!1},d),g=fb(this,a.call(this,c,f,e));if(d.playerOptions.sources&&0!==d.playerOptions.sources.length)c.src(d.playerOptions.sources);else for(var h=0,i=d.playerOptions.techOrder;h<i.length;h++){var j=aa(i[h]),k=Ic.getTech(j);if(j||(k=Pb.getComponent(j)),k&&k.isSupported()){c.loadTech_(j);break}}return g}return eb(b,a),b}(Pb);Pb.registerComponent("MediaLoader",Nc);var Oc=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.emitTapEvents(),e.enable(),e}return eb(b,a),b.prototype.createEl=function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};c=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},c),"button"===b&&nb.error("Creating a ClickableComponent with an HTML element of "+b+" is not supported; use a Button instead."),d=g({role:"button","aria-live":"polite"},d),this.tabIndex_=c.tabIndex;var e=a.prototype.createEl.call(this,b,c,d);return this.createControlTextEl(e),e},b.prototype.dispose=function(){this.controlTextEl_=null,a.prototype.dispose.call(this)},b.prototype.createControlTextEl=function(a){return this.controlTextEl_=r("span",{className:"vjs-control-text"}),a&&a.appendChild(this.controlTextEl_),this.controlText(this.controlText_,a),this.controlTextEl_},b.prototype.controlText=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===a)return this.controlText_||"Need Text";var c=this.localize(a);this.controlText_=a,s(this.controlTextEl_,c),this.nonIconControl||b.setAttribute("title",c)},b.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)},b.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},b.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},b.prototype.handleClick=function(a){},b.prototype.handleFocus=function(a){V(Ba,"keydown",Db(this,this.handleKeyPress))},b.prototype.handleKeyPress=function(b){32===b.which||13===b.which?(b.preventDefault(),this.trigger("click")):a.prototype.handleKeyPress&&a.prototype.handleKeyPress.call(this,b)},b.prototype.handleBlur=function(a){W(Ba,"keydown",Db(this,this.handleKeyPress))},b}(Pb);Pb.registerComponent("ClickableComponent",Oc);var Pc=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.update(),c.on("posterchange",Db(e,e.update)),e}return eb(b,a),b.prototype.dispose=function(){this.player().off("posterchange",this.update),a.prototype.dispose.call(this)},b.prototype.createEl=function(){var a=r("div",{className:"vjs-poster",tabIndex:-1});return ab||(this.fallbackImg_=r("img"),a.appendChild(this.fallbackImg_)),a},b.prototype.update=function(a){var b=this.player().poster();this.setSrc(b),b?this.show():this.hide()},b.prototype.setSrc=function(a){if(this.fallbackImg_)this.fallbackImg_.src=a;else{var b="";a&&(b='url("'+a+'")'),this.el_.style.backgroundImage=b}},b.prototype.handleClick=function(a){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},b}(Oc);Pb.registerComponent("PosterImage",Pc);var Qc="#222",Rc="#ccc",Sc={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Tc=function(a){function b(c,d,e){db(this,b);var f=fb(this,a.call(this,c,d,e));return c.on("loadstart",Db(f,f.toggleDisplay)),c.on("texttrackchange",Db(f,f.updateDisplay)),c.on("loadstart",Db(f,f.preselectTrack)),c.ready(Db(f,function(){if(c.tech_&&c.tech_.featuresNativeTextTracks)return void this.hide();c.on("fullscreenchange",Db(this,this.updateDisplay));for(var a=this.options_.playerOptions.tracks||[],b=0;b<a.length;b++)this.player_.addRemoteTextTrack(a[b],!0);this.preselectTrack()})),f}return eb(b,a),b.prototype.preselectTrack=function(){for(var a={captions:1,subtitles:1},b=this.player_.textTracks(),c=this.player_.cache_.selectedLanguage,d=void 0,e=void 0,f=void 0,g=0;g<b.length;g++){var h=b[g];c&&c.enabled&&c.language===h.language?h.kind===c.kind?f=h:f||(f=h):c&&!c.enabled?(f=null,d=null,e=null):h["default"]&&("descriptions"!==h.kind||d?h.kind in a&&!e&&(e=h):d=h)}f?f.mode="showing":e?e.mode="showing":d&&(d.mode="showing")},b.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},b.prototype.clearDisplay=function(){"function"==typeof Aa.WebVTT&&Aa.WebVTT.processCues(Aa,[],this.el_)},b.prototype.updateDisplay=function(){var a=this.player_.textTracks();this.clearDisplay();for(var b=null,c=null,d=a.length;d--;){var e=a[d];"showing"===e.mode&&("descriptions"===e.kind?b=e:c=e)}c?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):b&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(b))},b.prototype.updateForTrack=function(a){if("function"==typeof Aa.WebVTT&&a.activeCues){for(var b=this.player_.textTrackSettings.getValues(),c=[],d=0;d<a.activeCues.length;d++)c.push(a.activeCues[d]);Aa.WebVTT.processCues(Aa,c,this.el_);for(var e=c.length;e--;){var f=c[e];if(f){var g=f.displayState;if(b.color&&(g.firstChild.style.color=b.color),b.textOpacity&&ua(g.firstChild,"color",ta(b.color||"#fff",b.textOpacity)),b.backgroundColor&&(g.firstChild.style.backgroundColor=b.backgroundColor),b.backgroundOpacity&&ua(g.firstChild,"backgroundColor",ta(b.backgroundColor||"#000",b.backgroundOpacity)),b.windowColor&&(b.windowOpacity?ua(g,"backgroundColor",ta(b.windowColor,b.windowOpacity)):g.style.backgroundColor=b.windowColor),b.edgeStyle&&("dropshadow"===b.edgeStyle?g.firstChild.style.textShadow="2px 2px 3px "+Qc+", 2px 2px 4px "+Qc+", 2px 2px 5px "+Qc:"raised"===b.edgeStyle?g.firstChild.style.textShadow="1px 1px "+Qc+", 2px 2px "+Qc+", 3px 3px "+Qc:"depressed"===b.edgeStyle?g.firstChild.style.textShadow="1px 1px "+Rc+", 0 1px "+Rc+", -1px -1px "+Qc+", 0 -1px "+Qc:"uniform"===b.edgeStyle&&(g.firstChild.style.textShadow="0 0 4px "+Qc+", 0 0 4px "+Qc+", 0 0 4px "+Qc+", 0 0 4px "+Qc)),b.fontPercent&&1!==b.fontPercent){var h=Aa.parseFloat(g.style.fontSize);g.style.fontSize=h*b.fontPercent+"px",g.style.height="auto",g.style.top="auto",g.style.bottom="2px"}b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?g.firstChild.style.fontVariant="small-caps":g.firstChild.style.fontFamily=Sc[b.fontFamily])}}}},b}(Pb);Pb.registerComponent("TextTrackDisplay",Tc);var Uc=function(a){function b(){return db(this,b),fb(this,a.apply(this,arguments))}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},b}(Pb);Pb.registerComponent("LoadingSpinner",Uc);var Vc=function(a){function b(){return db(this,b),fb(this,a.apply(this,arguments))}return eb(b,a),b.prototype.createEl=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a="button",b=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},b),c=g({type:"button","aria-live":"polite"},c);var d=Pb.prototype.createEl.call(this,a,b,c);return this.createControlTextEl(d),d},b.prototype.addChild=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=this.constructor.name;return nb.warn("Adding an actionable (user controllable) child to a Button ("+c+") is not supported; use a ClickableComponent instead."),Pb.prototype.addChild.call(this,a,b)},b.prototype.enable=function(){a.prototype.enable.call(this),this.el_.removeAttribute("disabled")},b.prototype.disable=function(){a.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},b.prototype.handleKeyPress=function(b){32!==b.which&&13!==b.which&&a.prototype.handleKeyPress.call(this,b)},b}(Oc);Pb.registerComponent("Button",Vc);var Wc=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.mouseused_=!1,e.on("mousedown",e.handleMouseDown),e}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-big-play-button"},b.prototype.handleClick=function(a){var b=this.player_.play();if(!(this.mouseused_&&a.clientX&&a.clientY)){var c=this.player_.getChild("controlBar"),d=c&&c.getChild("playToggle");if(!d)return void this.player_.focus();var e=function(){return d.focus()};ja(b)?b.then(e,function(){}):this.setTimeout(e,1)}},b.prototype.handleKeyPress=function(b){this.mouseused_=!1,a.prototype.handleKeyPress.call(this,b)},b.prototype.handleMouseDown=function(a){this.mouseused_=!0},b}(Vc);Wc.prototype.controlText_="Play Video",Pb.registerComponent("BigPlayButton",Wc);var Xc=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.controlText(d&&d.controlText||e.localize("Close")),e}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(a){this.trigger({type:"close",bubbles:!1})},b}(Vc);Pb.registerComponent("CloseButton",Xc);var Yc=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.on(c,"play",e.handlePlay),e.on(c,"pause",e.handlePause),e.on(c,"ended",e.handleEnded),e}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(a){this.player_.paused()?this.player_.play():this.player_.pause()},b.prototype.handleSeeked=function(a){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(a):this.handlePlay(a)},b.prototype.handlePlay=function(a){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},b.prototype.handlePause=function(a){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},b.prototype.handleEnded=function(a){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},b}(Vc);Yc.prototype.controlText_="Play",Pb.registerComponent("PlayToggle",Yc);var Zc=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.throttledUpdateContent=Eb(Db(e,e.updateContent),25),e.on(c,"timeupdate",e.throttledUpdateContent),e}return eb(b,a),b.prototype.createEl=function(b){var c=this.buildCSSClass(),d=a.prototype.createEl.call(this,"div",{className:c+" vjs-time-control vjs-control"});return this.contentEl_=r("div",{className:c+"-display"},{"aria-live":"off"},r("span",{className:"vjs-control-text",textContent:this.localize(this.controlText_)})),this.updateTextNode_(),d.appendChild(this.contentEl_),d},b.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,a.prototype.dispose.call(this)},b.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=Ba.createTextNode(this.formattedTime_||"0:00"),this.contentEl_.appendChild(this.textNode_)}},b.prototype.formatTime_=function(a){return va(a)},b.prototype.updateFormattedTime_=function(a){var b=this.formatTime_(a);b!==this.formattedTime_&&(this.formattedTime_=b,this.requestAnimationFrame(this.updateTextNode_))},b.prototype.updateContent=function(a){},b}(Pb);Zc.prototype.controlText_="Time",Pb.registerComponent("TimeDisplay",Zc);var $c=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.on(c,"ended",e.handleEnded),e}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-current-time"},b.prototype.updateContent=function(a){var b=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(b)},b.prototype.handleEnded=function(a){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},b}(Zc);$c.prototype.controlText_="Current Time",Pb.registerComponent("CurrentTimeDisplay",$c);var _c=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.on(c,"durationchange",e.updateContent),e.on(c,"loadedmetadata",e.throttledUpdateContent),e}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-duration"},b.prototype.updateContent=function(a){var b=this.player_.duration();b&&this.duration_!==b&&(this.duration_=b,this.updateFormattedTime_(b))},b}(Zc);_c.prototype.controlText_="Duration Time",Pb.registerComponent("DurationDisplay",_c);var ad=function(a){function b(){return db(this,b),fb(this,a.apply(this,arguments))}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},b}(Pb);Pb.registerComponent("TimeDivider",ad);var bd=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.on(c,"durationchange",e.throttledUpdateContent),e.on(c,"ended",e.handleEnded),e}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-remaining-time"},b.prototype.formatTime_=function(b){return"-"+a.prototype.formatTime_.call(this,b)},b.prototype.updateContent=function(a){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},b.prototype.handleEnded=function(a){this.player_.duration()&&this.updateFormattedTime_(0)},b}(Zc);bd.prototype.controlText_="Remaining Time",Pb.registerComponent("RemainingTimeDisplay",bd);var cd=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.updateShowing(),e.on(e.player(),"durationchange",e.updateShowing),e}return eb(b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=r("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),b.appendChild(this.contentEl_),b},b.prototype.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},b.prototype.updateShowing=function(a){this.player().duration()===1/0?this.show():this.hide()},b}(Pb);Pb.registerComponent("LiveDisplay",cd);var dd=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.bar=e.getChild(e.options_.barName),e.vertical(!!e.options_.vertical),e.enable(),e}return eb(b,a),b.prototype.enabled=function(){return this.enabled_},b.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},b.prototype.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(a,"mousemove",this.handleMouseMove),this.off(a,"mouseup",this.handleMouseUp),this.off(a,"touchmove",this.handleMouseMove),this.off(a,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},b.prototype.createEl=function(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};
return c.className=c.className+" vjs-slider",c=g({tabIndex:0},c),d=g({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},d),a.prototype.createEl.call(this,b,c,d)},b.prototype.handleMouseDown=function(a){var b=this.bar.el_.ownerDocument;a.preventDefault(),D(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(b,"mousemove",this.handleMouseMove),this.on(b,"mouseup",this.handleMouseUp),this.on(b,"touchmove",this.handleMouseMove),this.on(b,"touchend",this.handleMouseUp),this.handleMouseMove(a)},b.prototype.handleMouseMove=function(a){},b.prototype.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;E(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(a,"mousemove",this.handleMouseMove),this.off(a,"mouseup",this.handleMouseUp),this.off(a,"touchmove",this.handleMouseMove),this.off(a,"touchend",this.handleMouseUp),this.update()},b.prototype.update=function(){if(this.el_){var a=this.getPercent(),b=this.bar;if(b){("number"!=typeof a||a!==a||a<0||a===1/0)&&(a=0);var c=(100*a).toFixed(2)+"%",d=b.el().style;return this.vertical()?d.height=c:d.width=c,a}}},b.prototype.calculateDistance=function(a){var b=H(this.el_,a);return this.vertical()?b.y:b.x},b.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},b.prototype.handleKeyPress=function(a){37===a.which||40===a.which?(a.preventDefault(),this.stepBack()):38!==a.which&&39!==a.which||(a.preventDefault(),this.stepForward())},b.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},b.prototype.handleClick=function(a){a.stopImmediatePropagation(),a.preventDefault()},b.prototype.vertical=function(a){return void 0===a?this.vertical_||!1:(this.vertical_=!!a,void(this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")))},b}(Pb);Pb.registerComponent("Slider",dd);var ed=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.partEls_=[],e.on(c,"progress",e.update),e}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},b.prototype.dispose=function(){this.partEls_=null,a.prototype.dispose.call(this)},b.prototype.update=function(a){var b=this.player_.buffered(),c=this.player_.duration(),d=this.player_.bufferedEnd(),e=this.partEls_,f=function(a,b){var c=a/b||0;return 100*(c>=1?1:c)+"%"};this.el_.style.width=f(d,c);for(var g=0;g<b.length;g++){var h=b.start(g),i=b.end(g),j=e[g];j||(j=this.el_.appendChild(r()),e[g]=j),j.style.left=f(h,d),j.style.width=f(i-h,d)}for(var k=e.length;k>b.length;k--)this.el_.removeChild(e[k-1]);e.length=b.length},b}(Pb);Pb.registerComponent("LoadProgressBar",ed);var fd=function(a){function b(){return db(this,b),fb(this,a.apply(this,arguments))}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},b.prototype.update=function(a,b,c){var d=F(this.el_),e=F(this.player_.el()),f=a.width*b;if(e&&d){var g=a.left-e.left+f,h=a.width-f+(e.right-a.right),i=d.width/2;g<i?i+=i-g:h<i&&(i=h),i<0?i=0:i>d.width&&(i=d.width),this.el_.style.right="-"+i+"px",s(this.el_,c)}},b}(Pb);Pb.registerComponent("TimeTooltip",fd);var gd=function(a){function b(){return db(this,b),fb(this,a.apply(this,arguments))}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},b.prototype.update=function(a,b){var c=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var d=c.player_.scrubbing()?c.player_.getCache().currentTime:c.player_.currentTime(),e=va(d,c.player_.duration()),f=c.getChild("timeTooltip");f&&f.update(a,b,e)})},b}(Pb);gd.prototype.options_={children:[]},Ya&&!(Ya>8)||Na||Pa||gd.prototype.options_.children.push("timeTooltip"),Pb.registerComponent("PlayProgressBar",gd);var hd=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.update=Eb(Db(e,e.update),25),e}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},b.prototype.update=function(a,b){var c=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var d=c.player_.duration(),e=va(b*d,d);c.el_.style.left=a.width*b+"px",c.getChild("timeTooltip").update(a,b,e)})},b}(Pb);hd.prototype.options_={children:["timeTooltip"]},Pb.registerComponent("MouseTimeDisplay",hd);var id=5,jd=30,kd=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.update=Eb(Db(e,e.update),jd),e.on(c,"timeupdate",e.update),e.on(c,"ended",e.handleEnded),e.updateInterval=null,e.on(c,["playing"],function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},jd)}),e.on(c,["ended","pause","waiting"],function(){e.clearInterval(e.updateInterval)}),e.on(c,["timeupdate","ended"],e.update),e}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},b.prototype.update_=function(a,b){var c=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*b).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[va(a,c),va(c,c)],"{1} of {2}")),this.bar.update(F(this.el_),b)},b.prototype.update=function(b){var c=a.prototype.update.call(this);return this.update_(this.getCurrentTime_(),c),c},b.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},b.prototype.handleEnded=function(a){this.update_(this.player_.duration(),1)},b.prototype.getPercent=function(){var a=this.getCurrentTime_()/this.player_.duration();return a>=1?1:a},b.prototype.handleMouseDown=function(b){N(b)&&(this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b))},b.prototype.handleMouseMove=function(a){if(N(a)){var b=this.calculateDistance(a)*this.player_.duration();b===this.player_.duration()&&(b-=.1),this.player_.currentTime(b)}},b.prototype.enable=function(){a.prototype.enable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.show()},b.prototype.disable=function(){a.prototype.disable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.hide()},b.prototype.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&ka(this.player_.play())},b.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+id)},b.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-id)},b.prototype.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()},b.prototype.handleKeyPress=function(b){32===b.which||13===b.which?(b.preventDefault(),this.handleAction(b)):a.prototype.handleKeyPress&&a.prototype.handleKeyPress.call(this,b)},b}(dd);kd.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ya&&!(Ya>8)||Na||Pa||kd.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),kd.prototype.playerEvent="timeupdate",Pb.registerComponent("SeekBar",kd);var ld=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.handleMouseMove=Eb(Db(e,e.handleMouseMove),25),e.throttledHandleMouseSeek=Eb(Db(e,e.handleMouseSeek),25),e.enable(),e}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},b.prototype.handleMouseMove=function(a){var b=this.getChild("seekBar"),c=b.getChild("mouseTimeDisplay"),d=b.el(),e=F(d),f=H(d,a).x;f>1?f=1:f<0&&(f=0),c&&c.update(e,f)},b.prototype.handleMouseSeek=function(a){var b=this.getChild("seekBar");b.handleMouseMove(a)},b.prototype.enabled=function(){return this.enabled_},b.prototype.disable=function(){this.children().forEach(function(a){return a.disable&&a.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},b.prototype.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},b.prototype.handleMouseDown=function(a){var b=this.el_.ownerDocument;this.on(b,"mousemove",this.throttledHandleMouseSeek),this.on(b,"touchmove",this.throttledHandleMouseSeek),this.on(b,"mouseup",this.handleMouseUp),this.on(b,"touchend",this.handleMouseUp)},b.prototype.handleMouseUp=function(a){var b=this.el_.ownerDocument;this.off(b,"mousemove",this.throttledHandleMouseSeek),this.off(b,"touchmove",this.throttledHandleMouseSeek),this.off(b,"mouseup",this.handleMouseUp),this.off(b,"touchend",this.handleMouseUp)},b}(Pb);ld.prototype.options_={children:["seekBar"]},Pb.registerComponent("ProgressControl",ld);var md=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.on(c,"fullscreenchange",e.handleFullscreenChange),e}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},b.prototype.handleClick=function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},b}(Vc);md.prototype.controlText_="Fullscreen",Pb.registerComponent("FullscreenToggle",md);var nd=function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},od=function(a){function b(){return db(this,b),fb(this,a.apply(this,arguments))}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},b}(Pb);Pb.registerComponent("VolumeLevel",od);var pd=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.on("slideractive",e.updateLastVolume_),e.on(c,"volumechange",e.updateARIAAttributes),c.ready(function(){return e.updateARIAAttributes()}),e}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},b.prototype.handleMouseDown=function(b){N(b)&&a.prototype.handleMouseDown.call(this,b)},b.prototype.handleMouseMove=function(a){N(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))},b.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},b.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},b.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},b.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},b.prototype.updateARIAAttributes=function(a){var b=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",b),this.el_.setAttribute("aria-valuetext",b+"%")},b.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},b.prototype.updateLastVolume_=function(){var a=this,b=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(b)})},b}(dd);pd.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},pd.prototype.playerEvent="volumechange",Pb.registerComponent("VolumeBar",pd);var qd=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};db(this,b),d.vertical=d.vertical||!1,("undefined"==typeof d.volumeBar||i(d.volumeBar))&&(d.volumeBar=d.volumeBar||{},d.volumeBar.vertical=d.vertical);var e=fb(this,a.call(this,c,d));return nd(e,c),e.throttledHandleMouseMove=Eb(Db(e,e.handleMouseMove),25),e.on("mousedown",e.handleMouseDown),e.on("touchstart",e.handleMouseDown),e.on(e.volumeBar,["focus","slideractive"],function(){e.volumeBar.addClass("vjs-slider-active"),e.addClass("vjs-slider-active"),e.trigger("slideractive")}),e.on(e.volumeBar,["blur","sliderinactive"],function(){e.volumeBar.removeClass("vjs-slider-active"),e.removeClass("vjs-slider-active"),e.trigger("sliderinactive")}),e}return eb(b,a),b.prototype.createEl=function(){var b="vjs-volume-horizontal";return this.options_.vertical&&(b="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+b})},b.prototype.handleMouseDown=function(a){var b=this.el_.ownerDocument;this.on(b,"mousemove",this.throttledHandleMouseMove),this.on(b,"touchmove",this.throttledHandleMouseMove),this.on(b,"mouseup",this.handleMouseUp),this.on(b,"touchend",this.handleMouseUp)},b.prototype.handleMouseUp=function(a){var b=this.el_.ownerDocument;this.off(b,"mousemove",this.throttledHandleMouseMove),this.off(b,"touchmove",this.throttledHandleMouseMove),this.off(b,"mouseup",this.handleMouseUp),this.off(b,"touchend",this.handleMouseUp)},b.prototype.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)},b}(Pb);qd.prototype.options_={children:["volumeBar"]},Pb.registerComponent("VolumeControl",qd);var rd=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return nd(e,c),e.on(c,["loadstart","volumechange"],e.update),e}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},b.prototype.handleClick=function(a){var b=this.player_.volume(),c=this.player_.lastVolume_();if(0===b){var d=c<.1?.1:c;this.player_.volume(d),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},b.prototype.update=function(a){this.updateIcon_(),this.updateControlText_()},b.prototype.updateIcon_=function(){var a=this.player_.volume(),b=3;0===a||this.player_.muted()?b=0:a<.33?b=1:a<.67&&(b=2);for(var c=0;c<4;c++)w(this.el_,"vjs-vol-"+c);v(this.el_,"vjs-vol-"+b)},b.prototype.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume(),b=a?"Unmute":"Mute";this.controlText()!==b&&this.controlText(b)},b}(Vc);rd.prototype.controlText_="Mute",Pb.registerComponent("MuteToggle",rd);var sd=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};db(this,b),"undefined"!=typeof d.inline?d.inline=d.inline:d.inline=!0,("undefined"==typeof d.volumeControl||i(d.volumeControl))&&(d.volumeControl=d.volumeControl||{},d.volumeControl.vertical=!d.inline);var e=fb(this,a.call(this,c,d));return nd(e,c),e.on(e.volumeControl,["slideractive"],e.sliderActive_),e.on(e.volumeControl,["sliderinactive"],e.sliderInactive_),e}return eb(b,a),b.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},b.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},b.prototype.createEl=function(){var b="vjs-volume-panel-horizontal";return this.options_.inline||(b="vjs-volume-panel-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+b})},b}(Pb);sd.prototype.options_={children:["muteToggle","volumeControl"]},Pb.registerComponent("VolumePanel",sd);var td=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return d&&(e.menuButton_=d.menuButton),e.focusedChild_=-1,e.on("keydown",e.handleKeyPress),e}return eb(b,a),b.prototype.addItem=function(a){this.addChild(a),a.on("click",Db(this,function(b){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==a.name()&&this.menuButton_.focus())}))},b.prototype.createEl=function(){var b=this.options_.contentElType||"ul";this.contentEl_=r(b,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var c=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return c.appendChild(this.contentEl_),V(c,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),c},b.prototype.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},b.prototype.handleKeyPress=function(a){37===a.which||40===a.which?(a.preventDefault(),this.stepForward()):38!==a.which&&39!==a.which||(a.preventDefault(),this.stepBack())},b.prototype.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1),this.focus(a)},b.prototype.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1),this.focus(a)},b.prototype.focus=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=this.children().slice(),c=b.length&&b[0].className&&/vjs-menu-title/.test(b[0].className);c&&b.shift(),b.length>0&&(a<0?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())},b}(Pb);Pb.registerComponent("Menu",td);var ud=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};db(this,b);var e=fb(this,a.call(this,c,d));e.menuButton_=new Vc(c,d),e.menuButton_.controlText(e.controlText_),e.menuButton_.el_.setAttribute("aria-haspopup","true");var f=Vc.prototype.buildCSSClass();return e.menuButton_.el_.className=e.buildCSSClass()+" "+f,e.menuButton_.removeClass("vjs-control"),e.addChild(e.menuButton_),e.update(),e.enabled_=!0,e.on(e.menuButton_,"tap",e.handleClick),e.on(e.menuButton_,"click",e.handleClick),e.on(e.menuButton_,"focus",e.handleFocus),e.on(e.menuButton_,"blur",e.handleBlur),e.on("keydown",e.handleSubmenuKeyPress),e}return eb(b,a),b.prototype.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=a,this.addChild(a),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},b.prototype.createMenu=function(){var a=new td(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var b=r("li",{className:"vjs-menu-title",innerHTML:aa(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,a.children_.unshift(b),t(b,a.contentEl())}if(this.items=this.createItems(),this.items)for(var c=0;c<this.items.length;c++)a.addItem(this.items[c]);return a},b.prototype.createItems=function(){},b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},b.prototype.buildWrapperCSSClass=function(){var b="vjs-menu-button";b+=this.options_.inline===!0?"-inline":"-popup";var c=Vc.prototype.buildCSSClass();return"vjs-menu-button "+b+" "+c+" "+a.prototype.buildCSSClass.call(this)},b.prototype.buildCSSClass=function(){var b="vjs-menu-button";return b+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+b+" "+a.prototype.buildCSSClass.call(this)},b.prototype.controlText=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(a,b)},b.prototype.handleClick=function(a){this.one(this.menu.contentEl(),"mouseleave",Db(this,function(a){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},b.prototype.focus=function(){this.menuButton_.focus()},b.prototype.blur=function(){this.menuButton_.blur()},b.prototype.handleFocus=function(){V(Ba,"keydown",Db(this,this.handleKeyPress))},b.prototype.handleBlur=function(){W(Ba,"keydown",Db(this,this.handleKeyPress))},b.prototype.handleKeyPress=function(a){27===a.which||9===a.which?(this.buttonPressed_&&this.unpressButton(),9!==a.which&&(a.preventDefault(),this.menuButton_.el_.focus())):38!==a.which&&40!==a.which||this.buttonPressed_||(this.pressButton(),a.preventDefault())},b.prototype.handleSubmenuKeyPress=function(a){27!==a.which&&9!==a.which||(this.buttonPressed_&&this.unpressButton(),9!==a.which&&(a.preventDefault(),this.menuButton_.el_.focus()))},b.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Na&&p())return;this.menu.focus()}},b.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},b.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},b.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},b}(Pb);Pb.registerComponent("MenuButton",ud);var vd=function(a){function b(c,d){db(this,b);var e=d.tracks,f=fb(this,a.call(this,c,d));if(f.items.length<=1&&f.hide(),!e)return fb(f);var g=Db(f,f.update);return e.addEventListener("removetrack",g),e.addEventListener("addtrack",g),f.player_.on("ready",g),f.player_.on("dispose",function(){e.removeEventListener("removetrack",g),e.removeEventListener("addtrack",g)}),f}return eb(b,a),b}(ud);Pb.registerComponent("TrackButton",vd);var wd=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.selectable=d.selectable,e.selected(d.selected),e.selectable?e.el_.setAttribute("role","menuitemcheckbox"):e.el_.setAttribute("role","menuitem"),e}return eb(b,a),b.prototype.createEl=function(b,c,d){return this.nonIconControl=!0,a.prototype.createEl.call(this,"li",g({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},c),d)},b.prototype.handleClick=function(a){this.selected(!0)},b.prototype.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText("")))},b}(Oc);Pb.registerComponent("MenuItem",wd);var xd=function(a){function b(c,d){db(this,b);var e=d.track,f=c.textTracks();d.label=e.label||e.language||"Unknown",d.selected="showing"===e.mode;var g=fb(this,a.call(this,c,d));g.track=e;var h=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];g.handleTracksChange.apply(g,b)},i=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];g.handleSelectedLanguageChange.apply(g,b)};if(c.on(["loadstart","texttrackchange"],h),f.addEventListener("change",h),f.addEventListener("selectedlanguagechange",i),g.on("dispose",function(){c.off(["loadstart","texttrackchange"],h),f.removeEventListener("change",h),f.removeEventListener("selectedlanguagechange",i)}),void 0===f.onchange){var j=void 0;g.on(["tap","click"],function(){if("object"!==cb(Aa.Event))try{j=new Aa.Event("change")}catch(a){}j||(j=Ba.createEvent("Event"),j.initEvent("change",!0,!0)),f.dispatchEvent(j)})}return g.handleTracksChange(),g}return eb(b,a),b.prototype.handleClick=function(b){var c=this.track.kind,d=this.track.kinds,e=this.player_.textTracks();if(d||(d=[c]),a.prototype.handleClick.call(this,b),e)for(var f=0;f<e.length;f++){var g=e[f];g===this.track&&d.indexOf(g.kind)>-1?"showing"!==g.mode&&(g.mode="showing"):"disabled"!==g.mode&&(g.mode="disabled")}},b.prototype.handleTracksChange=function(a){this.selected("showing"===this.track.mode)},b.prototype.handleSelectedLanguageChange=function(a){if("showing"===this.track.mode){var b=this.player_.cache_.selectedLanguage;if(b&&b.enabled&&b.language===this.track.language&&b.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},b.prototype.dispose=function(){this.track=null,a.prototype.dispose.call(this)},b}(wd);Pb.registerComponent("TextTrackMenuItem",xd);var yd=function(a){function b(c,d){return db(this,b),d.track={player:c,kind:d.kind,kinds:d.kinds,"default":!1,mode:"disabled"},d.kinds||(d.kinds=[d.kind]),d.label?d.track.label=d.label:d.track.label=d.kinds.join(" and ")+" off",d.selectable=!0,fb(this,a.call(this,c,d))}return eb(b,a),b.prototype.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){var f=b[d];if(this.options_.kinds.indexOf(f.kind)>-1&&"showing"===f.mode){c=!1;break}}this.selected(c)},b.prototype.handleSelectedLanguageChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){var f=b[d];if(["captions","descriptions","subtitles"].indexOf(f.kind)>-1&&"showing"===f.mode){c=!1;break}}c&&(this.player_.cache_.selectedLanguage={enabled:!1})},b}(xd);Pb.registerComponent("OffTextTrackMenuItem",yd);var zd=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return db(this,b),d.tracks=c.textTracks(),fb(this,a.call(this,c,d))}return eb(b,a),b.prototype.createItems=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xd,c=void 0;this.label_&&(c=this.label_+" off"),a.push(new yd(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c})),this.hideThreshold_+=1;var d=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var e=0;e<d.length;e++){var f=d[e];if(this.kinds_.indexOf(f.kind)>-1){var g=new b(this.player_,{track:f,selectable:!0});g.addClass("vjs-"+f.kind+"-menu-item"),a.push(g)}}return a},b}(vd);Pb.registerComponent("TextTrackButton",zd);var Ad=function(a){function b(c,d){db(this,b);var e=d.track,f=d.cue,g=c.currentTime();d.selectable=!0,d.label=f.text,d.selected=f.startTime<=g&&g<f.endTime;var h=fb(this,a.call(this,c,d));return h.track=e,h.cue=f,e.addEventListener("cuechange",Db(h,h.update)),h}return eb(b,a),b.prototype.handleClick=function(b){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},b.prototype.update=function(a){var b=this.cue,c=this.player_.currentTime();this.selected(b.startTime<=c&&c<b.endTime)},b}(wd);Pb.registerComponent("ChaptersTrackMenuItem",Ad);var Bd=function(a){function b(c,d,e){return db(this,b),fb(this,a.call(this,c,d,e))}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},b.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)},b.prototype.update=function(b){this.track_&&(!b||"addtrack"!==b.type&&"removetrack"!==b.type)||this.setTrack(this.findChaptersTrack()),a.prototype.update.call(this)},b.prototype.setTrack=function(a){if(this.track_!==a){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=a,this.track_){this.track_.mode="hidden";var c=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);c&&c.addEventListener("load",this.updateHandler_)}}},b.prototype.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],b=a.length-1;b>=0;b--){var c=a[b];if(c.kind===this.kind_)return c}},b.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(aa(this.kind_))},b.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),a.prototype.createMenu.call(this)},b.prototype.createItems=function(){var a=[];if(!this.track_)return a;var b=this.track_.cues;if(!b)return a;for(var c=0,d=b.length;c<d;c++){var e=b[c],f=new Ad(this.player_,{track:this.track_,cue:e});a.push(f)}return a},b}(zd);Bd.prototype.kind_="chapters",Bd.prototype.controlText_="Chapters",Pb.registerComponent("ChaptersButton",Bd);var Cd=function(a){function b(c,d,e){db(this,b);var f=fb(this,a.call(this,c,d,e)),g=c.textTracks(),h=Db(f,f.handleTracksChange);return g.addEventListener("change",h),f.on("dispose",function(){g.removeEventListener("change",h)}),f}return eb(b,a),b.prototype.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!1,d=0,e=b.length;d<e;d++){var f=b[d];if(f.kind!==this.kind_&&"showing"===f.mode){c=!0;break}}c?this.disable():this.enable()},b.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},b.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(zd);Cd.prototype.kind_="descriptions",Cd.prototype.controlText_="Descriptions",Pb.registerComponent("DescriptionsButton",Cd);var Dd=function(a){function b(c,d,e){return db(this,b),fb(this,a.call(this,c,d,e))}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},b.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(zd);Dd.prototype.kind_="subtitles",Dd.prototype.controlText_="Subtitles",Pb.registerComponent("SubtitlesButton",Dd);var Ed=function(a){function b(c,d){db(this,b),d.track={player:c,kind:d.kind,label:d.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},d.selectable=!1,d.name="CaptionSettingsMenuItem";var e=fb(this,a.call(this,c,d));return e.addClass("vjs-texttrack-settings"),e.controlText(", opens "+d.kind+" settings dialog"),e}return eb(b,a),b.prototype.handleClick=function(a){this.player().getChild("textTrackSettings").open()},b}(xd);Pb.registerComponent("CaptionSettingsMenuItem",Ed);var Fd=function(a){function b(c,d,e){return db(this,b),fb(this,a.call(this,c,d,e))}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},b.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)},b.prototype.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||(b.push(new Ed(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,b)},b}(zd);Fd.prototype.kind_="captions",Fd.prototype.controlText_="Captions",Pb.registerComponent("CaptionsButton",Fd);var Gd=function(a){function b(){return db(this,b),fb(this,a.apply(this,arguments))}return eb(b,a),b.prototype.createEl=function(b,c,d){var e='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&(e+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),e+="</span>";var f=a.prototype.createEl.call(this,b,g({innerHTML:e},c),d);return f},b}(xd);Pb.registerComponent("SubsCapsMenuItem",Gd);var Hd=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};db(this,b);var e=fb(this,a.call(this,c,d));return e.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(e.player_.language_)>-1&&(e.label_="captions"),e.menuButton_.controlText(aa(e.label_)),e}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)},b.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)},b.prototype.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||(b.push(new Ed(this.player_,{kind:this.label_})),this.hideThreshold_+=1),b=a.prototype.createItems.call(this,b,Gd)},b}(zd);Hd.prototype.kinds_=["captions","subtitles"],Hd.prototype.controlText_="Subtitles",Pb.registerComponent("SubsCapsButton",Hd);var Id=function(a){function b(c,d){db(this,b);var e=d.track,f=c.audioTracks();d.label=e.label||e.language||"Unknown",d.selected=e.enabled;
var g=fb(this,a.call(this,c,d));g.track=e;var h=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];g.handleTracksChange.apply(g,b)};return f.addEventListener("change",h),g.on("dispose",function(){f.removeEventListener("change",h)}),g}return eb(b,a),b.prototype.handleClick=function(b){var c=this.player_.audioTracks();a.prototype.handleClick.call(this,b);for(var d=0;d<c.length;d++){var e=c[d];e.enabled=e===this.track}},b.prototype.handleTracksChange=function(a){this.selected(this.track.enabled)},b}(wd);Pb.registerComponent("AudioTrackMenuItem",Id);var Jd=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return db(this,b),d.tracks=c.audioTracks(),fb(this,a.call(this,c,d))}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)},b.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)},b.prototype.createItems=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var b=this.player_.audioTracks(),c=0;c<b.length;c++){var d=b[c];a.push(new Id(this.player_,{track:d,selectable:!0}))}return a},b}(vd);Jd.prototype.controlText_="Audio Track",Pb.registerComponent("AudioTrackButton",Jd);var Kd=function(a){function b(c,d){db(this,b);var e=d.rate,f=parseFloat(e,10);d.label=e,d.selected=1===f,d.selectable=!0;var g=fb(this,a.call(this,c,d));return g.label=e,g.rate=f,g.on(c,"ratechange",g.update),g}return eb(b,a),b.prototype.handleClick=function(b){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},b.prototype.update=function(a){this.selected(this.player().playbackRate()===this.rate)},b}(wd);Kd.prototype.contentElType="button",Pb.registerComponent("PlaybackRateMenuItem",Kd);var Ld=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.updateVisibility(),e.updateLabel(),e.on(c,"loadstart",e.updateVisibility),e.on(c,"ratechange",e.updateLabel),e}return eb(b,a),b.prototype.createEl=function(){var b=a.prototype.createEl.call(this);return this.labelEl_=r("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),b.appendChild(this.labelEl_),b},b.prototype.dispose=function(){this.labelEl_=null,a.prototype.dispose.call(this)},b.prototype.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},b.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)},b.prototype.createMenu=function(){var a=new td(this.player()),b=this.playbackRates();if(b)for(var c=b.length-1;c>=0;c--)a.addChild(new Kd(this.player(),{rate:b[c]+"x"}));return a},b.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},b.prototype.handleClick=function(a){for(var b=this.player().playbackRate(),c=this.playbackRates(),d=c[0],e=0;e<c.length;e++)if(c[e]>b){d=c[e];break}this.player().playbackRate(d)},b.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},b.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},b.prototype.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},b.prototype.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},b}(ud);Ld.prototype.controlText_="Playback Rate",Pb.registerComponent("PlaybackRateMenuButton",Ld);var Md=function(a){function b(){return db(this,b),fb(this,a.apply(this,arguments))}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)},b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},b}(Pb);Pb.registerComponent("Spacer",Md);var Nd=function(a){function b(){return db(this,b),fb(this,a.apply(this,arguments))}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},b.prototype.createEl=function(){var b=a.prototype.createEl.call(this,{className:this.buildCSSClass()});return b.innerHTML="",b},b}(Md);Pb.registerComponent("CustomControlSpacer",Nd);var Od=function(a){function b(){return db(this,b),fb(this,a.apply(this,arguments))}return eb(b,a),b.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},b}(Pb);Od.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Pb.registerComponent("ControlBar",Od);var Pd=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d));return e.on(c,"error",e.open),e}return eb(b,a),b.prototype.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},b.prototype.content=function(){var a=this.player().error();return a?this.localize(a.message):""},b}(bc);Pd.prototype.options_=ca(bc.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Pb.registerComponent("ErrorDisplay",Pd);var Qd="vjs-text-track-settings",Rd=["#000","Black"],Sd=["#00F","Blue"],Td=["#0FF","Cyan"],Ud=["#0F0","Green"],Vd=["#F0F","Magenta"],Wd=["#F00","Red"],Xd=["#FFF","White"],Yd=["#FF0","Yellow"],Zd=["1","Opaque"],$d=["0.5","Semi-Transparent"],_d=["0","Transparent"],ae={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Rd,Xd,Wd,Ud,Sd,Yd,Vd,Td]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Zd,$d,_d]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Xd,Rd,Wd,Ud,Sd,Yd,Vd,Td]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Zd,$d]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[_d,$d,Zd]}};ae.windowColor.options=ae.backgroundColor.options;var be=function(a){function b(c,d){db(this,b),d.temporary=!1;var f=fb(this,a.call(this,c,d));return f.updateDisplay=Db(f,f.updateDisplay),f.fill(),f.hasBeenOpened_=f.hasBeenFilled_=!0,f.endDialog=r("p",{className:"vjs-control-text",textContent:f.localize("End of dialog window.")}),f.el().appendChild(f.endDialog),f.setDefaults(),void 0===d.persistTextTrackSettings&&(f.options_.persistTextTrackSettings=f.options_.playerOptions.persistTextTrackSettings),f.on(f.$(".vjs-done-button"),"click",function(){f.saveSettings(),f.close()}),f.on(f.$(".vjs-default-button"),"click",function(){f.setDefaults(),f.updateDisplay()}),e(ae,function(a){f.on(f.$(a.selector),"change",f.updateDisplay)}),f.options_.persistTextTrackSettings&&f.restoreSettings(),f}return eb(b,a),b.prototype.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},b.prototype.createElSelect_=function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",e=ae[a],f=e.id.replace("%s",this.id_);return["<"+d+' id="'+f+'" class="'+("label"===d?"vjs-label":"")+'">',this.localize(e.label),"</"+d+">",'<select aria-labelledby="'+(""!==c?c+" ":"")+f+'">'].concat(e.options.map(function(a){var d=f+"-"+a[1];return['<option id="'+d+'" value="'+a[0]+'" ','aria-labelledby="'+(""!==c?c+" ":"")+f+" "+d+'">',b.localize(a[1]),"</option>"].join("")})).concat("</select>").join("")},b.prototype.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span>","</fieldset>"].join("")},b.prototype.createElBgColor_=function(){var a="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span>","</fieldset>"].join("")},b.prototype.createElWinColor_=function(){var a="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span>","</fieldset>"].join("")},b.prototype.createElColors_=function(){return r("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},b.prototype.createElFont_=function(){return r("div",{className:'vjs-track-settings-font">',innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},b.prototype.createElControls_=function(){var a=this.localize("restore all settings to the default values");return r("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},b.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},b.prototype.label=function(){return this.localize("Caption Settings Dialog")},b.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},b.prototype.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},b.prototype.getValues=function(){var a=this;return f(ae,function(b,c,d){var e=xa(a.$(c.selector),c.parser);return void 0!==e&&(b[d]=e),b},{})},b.prototype.setValues=function(a){var b=this;e(ae,function(c,d){ya(b.$(c.selector),a[d],c.parser)})},b.prototype.setDefaults=function(){var a=this;e(ae,function(b){var c=b.hasOwnProperty("default")?b["default"]:0;a.$(b.selector).selectedIndex=c})},b.prototype.restoreSettings=function(){var a=void 0;try{a=JSON.parse(Aa.localStorage.getItem(Qd))}catch(b){nb.warn(b)}a&&this.setValues(a)},b.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?Aa.localStorage.setItem(Qd,JSON.stringify(a)):Aa.localStorage.removeItem(Qd)}catch(b){nb.warn(b)}}},b.prototype.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()},b.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(Ba,"keydown",this.handleKeyDown);var a=this.player_.controlBar,b=a&&a.subsCapsButton,c=a&&a.captionsButton;b?b.focus():c&&c.focus()},b}(bc);Pb.registerComponent("TextTrackSettings",be);var ce=gb(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),de=function(a){function b(c,d){db(this,b);var e=fb(this,a.call(this,c,d)),f=c.source,g=!1;if(f&&(e.el_.currentSrc!==f.src||c.tag&&3===c.tag.initNetworkState_)?e.setSource(f):e.handleLateInit_(e.el_),e.el_.hasChildNodes()){for(var h=e.el_.childNodes,i=h.length,j=[];i--;){var k=h[i],l=k.nodeName.toLowerCase();"track"===l&&(e.featuresNativeTextTracks?(e.remoteTextTrackEls().addTrackElement_(k),e.remoteTextTracks().addTrack(k.track),e.textTracks().addTrack(k.track),g||e.el_.hasAttribute("crossorigin")||!tc(k.src)||(g=!0)):j.push(k))}for(var m=0;m<j.length;m++)e.el_.removeChild(j[m])}return e.proxyNativeTracks_(),e.featuresNativeTextTracks&&g&&nb.warn(Ca(ce)),e.restoreMetadataTracksInIOSNativePlayer_(),(_a||La||Sa)&&c.nativeControlsForTouch===!0&&e.setControls(!0),e.proxyWebkitFullscreen_(),e.triggerReady(),e}return eb(b,a),b.prototype.dispose=function(){b.disposeMediaElement(this.el_),this.options_=null,a.prototype.dispose.call(this)},b.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var a=this.textTracks(),b=void 0,c=function(){b=[];for(var c=0;c<a.length;c++){var d=a[c];"metadata"===d.kind&&b.push({track:d,storedMode:d.mode})}};c(),a.addEventListener("change",c),this.on("dispose",function(){return a.removeEventListener("change",c)});var d=function e(){for(var c=0;c<b.length;c++){var d=b[c];"disabled"===d.track.mode&&d.track.mode!==d.storedMode&&(d.track.mode=d.storedMode)}a.removeEventListener("change",e)};this.on("webkitbeginfullscreen",function(){a.removeEventListener("change",c),a.removeEventListener("change",d),a.addEventListener("change",d)}),this.on("webkitendfullscreen",function(){a.removeEventListener("change",c),a.addEventListener("change",c),a.removeEventListener("change",d)})},b.prototype.proxyNativeTracks_=function(){var a=this;Fc.names.forEach(function(b){var c=Fc[b],d=a.el()[c.getterName],e=a[c.getterName]();if(a["featuresNative"+c.capitalName+"Tracks"]&&d&&d.addEventListener){var f={change:function(a){e.trigger({type:"change",target:e,currentTarget:e,srcElement:e})},addtrack:function(a){e.addTrack(a.track)},removetrack:function(a){e.removeTrack(a.track)}},g=function(){for(var a=[],b=0;b<e.length;b++){for(var c=!1,f=0;f<d.length;f++)if(d[f]===e[b]){c=!0;break}c||a.push(e[b])}for(;a.length;)e.removeTrack(a.shift())};Object.keys(f).forEach(function(b){var c=f[b];d.addEventListener(b,c),a.on("dispose",function(a){return d.removeEventListener(b,c)})}),a.on("loadstart",g),a.on("dispose",function(b){return a.off("loadstart",g)})}})},b.prototype.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var c=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(c,a),b.disposeMediaElement(a),a=c}else{a=Ba.createElement("video");var d=this.options_.tag&&z(this.options_.tag),e=ca({},d);_a&&this.options_.nativeControlsForTouch===!0||delete e.controls,y(a,g(e,{id:this.options_.techId,"class":"vjs-tech"}))}a.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&B(a,"preload",this.options_.preload);for(var f=["loop","muted","playsinline","autoplay"],h=0;h<f.length;h++){var i=f[h],j=this.options_[i];"undefined"!=typeof j&&(j?B(a,i,i):C(a,i),a[i]=j)}return a},b.prototype.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState){if(0===a.readyState){var b=!1,c=function(){b=!0};this.on("loadstart",c);var d=function(){b||this.trigger("loadstart")};return this.on("loadedmetadata",d),void this.ready(function(){this.off("loadstart",c),this.off("loadedmetadata",d),b||this.trigger("loadstart")})}var e=["loadstart"];e.push("loadedmetadata"),a.readyState>=2&&e.push("loadeddata"),a.readyState>=3&&e.push("canplay"),a.readyState>=4&&e.push("canplaythrough"),this.ready(function(){e.forEach(function(a){this.trigger(a)},this)})}},b.prototype.setCurrentTime=function(a){try{this.el_.currentTime=a}catch(b){nb(b,"Video is not ready. (Video.js)")}},b.prototype.duration=function(){var a=this;if(this.el_.duration===1/0&&Pa&&Va&&0===this.el_.currentTime){var b=function c(){a.el_.currentTime>0&&(a.el_.duration===1/0&&a.trigger("durationchange"),a.off("timeupdate",c))};return this.on("timeupdate",b),NaN}return this.el_.duration||NaN},b.prototype.width=function(){return this.el_.offsetWidth},b.prototype.height=function(){return this.el_.offsetHeight},b.prototype.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},c=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",c),this.on("dispose",function(){a.off("webkitbeginfullscreen",c),a.off("webkitendfullscreen",b)})}},b.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var a=Aa.navigator&&Aa.navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1},b.prototype.enterFullScreen=function(){var a=this.el_;a.paused&&a.networkState<=a.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){a.pause(),a.webkitEnterFullScreen()},0)):a.webkitEnterFullScreen()},b.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},b.prototype.src=function(a){return void 0===a?this.el_.src:void this.setSrc(a)},b.prototype.reset=function(){b.resetMediaElement(this.el_)},b.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},b.prototype.setControls=function(a){this.el_.controls=!!a},b.prototype.addTextTrack=function(b,c,d){return this.featuresNativeTextTracks?this.el_.addTextTrack(b,c,d):a.prototype.addTextTrack.call(this,b,c,d)},b.prototype.createRemoteTextTrack=function(b){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,b);var c=Ba.createElement("track");return b.kind&&(c.kind=b.kind),b.label&&(c.label=b.label),(b.language||b.srclang)&&(c.srclang=b.language||b.srclang),b["default"]&&(c["default"]=b["default"]),b.id&&(c.id=b.id),b.src&&(c.src=b.src),c},b.prototype.addRemoteTextTrack=function(b,c){var d=a.prototype.addRemoteTextTrack.call(this,b,c);return this.featuresNativeTextTracks&&this.el().appendChild(d),d},b.prototype.removeRemoteTextTrack=function(b){if(a.prototype.removeRemoteTextTrack.call(this,b),this.featuresNativeTextTracks)for(var c=this.$$("track"),d=c.length;d--;)b!==c[d]&&b!==c[d].track||this.el().removeChild(c[d])},b.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var a={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount),Aa.performance&&"function"==typeof Aa.performance.now?a.creationTime=Aa.performance.now():Aa.performance&&Aa.performance.timing&&"number"==typeof Aa.performance.timing.navigationStart&&(a.creationTime=Aa.Date.now()-Aa.performance.timing.navigationStart),a},b}(Ic);if(n()){de.TEST_VID=Ba.createElement("video");var ee=Ba.createElement("track");ee.kind="captions",ee.srclang="en",ee.label="English",de.TEST_VID.appendChild(ee)}de.isSupported=function(){try{de.TEST_VID.volume=.5}catch(a){return!1}return!(!de.TEST_VID||!de.TEST_VID.canPlayType)},de.canPlayType=function(a){return de.TEST_VID.canPlayType(a)},de.canPlaySource=function(a,b){return de.canPlayType(a.type)},de.canControlVolume=function(){try{var a=de.TEST_VID.volume;return de.TEST_VID.volume=a/2+.1,a!==de.TEST_VID.volume}catch(b){return!1}},de.canControlPlaybackRate=function(){if(Pa&&Va&&Wa<58)return!1;try{var a=de.TEST_VID.playbackRate;return de.TEST_VID.playbackRate=a/2+.1,a!==de.TEST_VID.playbackRate}catch(b){return!1}},de.supportsNativeTextTracks=function(){return $a},de.supportsNativeVideoTracks=function(){return!(!de.TEST_VID||!de.TEST_VID.videoTracks)},de.supportsNativeAudioTracks=function(){return!(!de.TEST_VID||!de.TEST_VID.audioTracks)},de.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],de.prototype.featuresVolumeControl=de.canControlVolume(),de.prototype.featuresPlaybackRate=de.canControlPlaybackRate(),de.prototype.movingMediaElementInDOM=!Na,de.prototype.featuresFullscreenResize=!0,de.prototype.featuresProgressEvents=!0,de.prototype.featuresTimeupdateEvents=!0,de.prototype.featuresNativeTextTracks=de.supportsNativeTextTracks(),de.prototype.featuresNativeVideoTracks=de.supportsNativeVideoTracks(),de.prototype.featuresNativeAudioTracks=de.supportsNativeAudioTracks();var fe=de.TEST_VID&&de.TEST_VID.constructor.prototype.canPlayType,ge=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,he=/^video\/mp4/i;de.patchCanPlayType=function(){Qa>=4&&!Ta?de.TEST_VID.constructor.prototype.canPlayType=function(a){return a&&ge.test(a)?"maybe":fe.call(this,a)}:Ra&&(de.TEST_VID.constructor.prototype.canPlayType=function(a){return a&&he.test(a)?"maybe":fe.call(this,a)})},de.unpatchCanPlayType=function(){var a=de.TEST_VID.constructor.prototype.canPlayType;return de.TEST_VID.constructor.prototype.canPlayType=fe,a},de.patchCanPlayType(),de.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(b){}}()}},de.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(b){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(a){de.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){de.prototype["set"+aa(a)]=function(b){this.el_[a]=b,b?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(a){de.prototype[a]=function(){return this.el_[a]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(a){de.prototype["set"+aa(a)]=function(b){this.el_[a]=b}}),["pause","load","play"].forEach(function(a){de.prototype[a]=function(){return this.el_[a]()}}),Ic.withSourceHandlers(de),de.nativeSourceHandler={},de.nativeSourceHandler.canPlayType=function(a){try{return de.TEST_VID.canPlayType(a)}catch(b){return""}},de.nativeSourceHandler.canHandleSource=function(a,b){if(a.type)return de.nativeSourceHandler.canPlayType(a.type);if(a.src){var c=sc(a.src);return de.nativeSourceHandler.canPlayType("video/"+c)}return""},de.nativeSourceHandler.handleSource=function(a,b,c){b.setSrc(a.src)},de.nativeSourceHandler.dispose=function(){},de.registerSourceHandler(de.nativeSourceHandler),Ic.registerTech("Html5",de);var ie=gb(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),je=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","resize","volumechange","texttrackchange"],ke=function(a){function b(c,d,e){if(db(this,b),c.id=c.id||"vjs_video_"+O(),d=g(b.getTagSettings(c),d),d.initChildren=!1,d.createEl=!1,d.evented=!1,d.reportTouchActivity=!1,!d.language)if("function"==typeof c.closest){var f=c.closest("[lang]");f&&f.getAttribute&&(d.language=f.getAttribute("lang"))}else for(var h=c;h&&1===h.nodeType;){if(z(h).hasOwnProperty("lang")){d.language=h.getAttribute("lang");break}h=h.parentNode}var i=fb(this,a.call(this,null,d,e));if(i.isReady_=!1,i.hasStarted_=!1,i.userActive_=!1,!i.options_||!i.options_.techOrder||!i.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(i.tag=c,i.tagAttributes=c&&z(c),i.language(i.options_.language),d.languages){var j={};Object.getOwnPropertyNames(d.languages).forEach(function(a){j[a.toLowerCase()]=d.languages[a]}),i.languages_=j}else i.languages_=b.prototype.options_.languages;i.cache_={},i.poster_=d.poster||"",i.controls_=!!d.controls,i.cache_.lastVolume=1,c.controls=!1,c.removeAttribute("controls"),i.scrubbing_=!1,i.el_=i.createEl(),$(i,{eventBusKey:"el_"});var k=ca(i.options_);if(d.plugins){var l=d.plugins;Object.keys(l).forEach(function(a){if("function"!=typeof this[a])throw new Error('plugin "'+a+'" does not exist');this[a](l[a])},i)}i.options_.playerOptions=k,i.middleware_=[],i.initChildren(),i.isAudio("audio"===c.nodeName.toLowerCase()),i.controls()?i.addClass("vjs-controls-enabled"):i.addClass("vjs-controls-disabled"),i.el_.setAttribute("role","region"),i.isAudio()?i.el_.setAttribute("aria-label",i.localize("Audio Player")):i.el_.setAttribute("aria-label",i.localize("Video Player")),i.isAudio()&&i.addClass("vjs-audio"),i.flexNotSupported_()&&i.addClass("vjs-no-flex"),Na||i.addClass("vjs-workinghover"),b.players[i.id_]=i;var m=Ga.split(".")[0];return i.addClass("vjs-v"+m),i.userActive(!0),i.reportUserActivity(),i.listenForUserActivity_(),i.on("fullscreenchange",i.handleFullscreenChange_),i.on("stageclick",i.handleStageClick_),i.changingSrc_=!1,i.playWaitingForReady_=!1,i.playOnLoadstart_=null,i.forceAutoplayInChrome_(),i}return eb(b,a),b.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),b.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),a.prototype.dispose.call(this)},b.prototype.createEl=function(){var b=this.tag,c=void 0,d=this.playerElIngest_=b.parentNode&&b.parentNode.hasAttribute&&b.parentNode.hasAttribute("data-vjs-player"),e="video-js"===this.tag.tagName.toLowerCase();d?c=this.el_=b.parentNode:e||(c=this.el_=a.prototype.createEl.call(this,"div"));var f=z(b);if(e){for(c=this.el_=b,b=this.tag=Ba.createElement("video");c.children.length;)b.appendChild(c.firstChild);u(c,"video-js")||v(c,"video-js"),c.appendChild(b),d=this.playerElIngest_=c}if(b.setAttribute("tabindex","-1"),b.removeAttribute("width"),b.removeAttribute("height"),Object.getOwnPropertyNames(f).forEach(function(a){"class"===a?(c.className+=" "+f[a],e&&(b.className+=" "+f[a])):(c.setAttribute(a,f[a]),e&&b.setAttribute(a,f[a]))}),b.playerId=b.id,b.id+="_html5_api",b.className="vjs-tech",b.player=c.player=this,this.addClass("vjs-paused"),Aa.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=Bb("vjs-styles-dimensions");var g=pb(".vjs-styles-defaults"),h=pb("head");h.insertBefore(this.styleEl_,g?g.nextSibling:h.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var i=b.getElementsByTagName("a"),j=0;j<i.length;j++){var k=i.item(j);v(k,"vjs-hidden"),k.setAttribute("hidden","hidden")}return b.initNetworkState_=b.networkState,b.parentNode&&!d&&b.parentNode.insertBefore(c,b),t(b,c),this.children_.unshift(b),this.el_.setAttribute("lang",this.language_),this.el_=c,c},b.prototype.width=function(a,b){return this.dimension("width",a,b)},b.prototype.height=function(a,b){return this.dimension("height",a,b)},b.prototype.dimension=function(a,b,c){var d=a+"_";if(void 0===b)return this[d]||0;if(""===b)return this[d]=void 0,void this.updateStyleEl_();var e=parseFloat(b);return isNaN(e)?void nb.error('Improper value "'+b+'" supplied for for '+a):(this[d]=e,this.updateStyleEl_(),void(this.isReady_&&!c&&this.trigger("playerresize")))},b.prototype.fluid=function(a){return void 0===a?!!this.fluid_:(this.fluid_=!!a,a?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),void this.updateStyleEl_())},b.prototype.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(a))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a,this.fluid(!0),this.updateStyleEl_()},b.prototype.updateStyleEl_=function(){if(Aa.VIDEOJS_NO_DYNAMIC_STYLE===!0){var a="number"==typeof this.width_?this.width_:this.options_.width,b="number"==typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();return void(c&&(a>=0&&(c.width=a),b>=0&&(c.height=b)))}var d=void 0,e=void 0,f=void 0,g=void 0;f=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var h=f.split(":"),i=h[1]/h[0];d=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/i:this.videoWidth()||300,e=void 0!==this.height_?this.height_:d*i,g=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(g),Cb(this.styleEl_,"\n      ."+g+" {\n        width: "+d+"px;\n        height: "+e+"px;\n      }\n\n      ."+g+".vjs-fluid {\n        padding-top: "+100*i+"%;\n      }\n    ")},b.prototype.loadTech_=function(a,b){var c=this;this.tech_&&this.unloadTech_();var d=aa(a),e=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==d&&this.tag&&(Ic.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=d,this.isReady_=!1;var f={source:b,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+d+"_api",autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"]};Hc.names.forEach(function(a){var b=Hc[a];f[b.getterName]=c[b.privateName]}),g(f,this.options_[d]),g(f,this.options_[e]),g(f,this.options_[a.toLowerCase()]),this.tag&&(f.tag=this.tag),b&&b.src===this.cache_.src&&this.cache_.currentTime>0&&(f.startTime=this.cache_.currentTime);var h=Ic.getTech(a);if(!h)throw new Error("No Tech named '"+d+"' exists! '"+d+"' should be registered using videojs.registerTech()'");this.tech_=new h(f),this.tech_.ready(Db(this,this.handleTechReady_),!0),$b.jsonToTextTracks(this.textTracksJson_||[],this.tech_),je.forEach(function(a){c.on(c.tech_,a,c["handleTech"+aa(a)+"_"])}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),
this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===d&&this.tag||t(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},b.prototype.unloadTech_=function(){var a=this;Hc.names.forEach(function(b){var c=Hc[b];a[c.privateName]=a[c.getterName]()}),this.textTracksJson_=$b.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},b.prototype.tech=function(a){return void 0===a&&nb.warn(Ca(ie)),this.tech_},b.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},b.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},b.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused())try{delete this.tag.poster}catch(a){nb("deleting tag.poster throws in some browsers",a)}},b.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},b.prototype.hasStarted=function(a){return void 0===a?this.hasStarted_:void(a!==this.hasStarted_&&(this.hasStarted_=a,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")))},b.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},b.prototype.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return a.removeClass("vjs-waiting")})},b.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},b.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},b.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},b.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},b.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},b.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(nb.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},b.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},b.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},b.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},b.prototype.handleTechClick_=function(a){N(a)&&this.controls_&&(this.paused()?this.play():this.pause())},b.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},b.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},b.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},b.prototype.handleTechTouchEnd_=function(a){a.preventDefault()},b.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},b.prototype.handleStageClick_=function(){this.reportUserActivity()},b.prototype.handleTechFullscreenChange_=function(a,b){b&&this.isFullscreen(b.isFullscreen),this.trigger("fullscreenchange")},b.prototype.handleTechError_=function(){var a=this.tech_.error();this.error(a)},b.prototype.handleTechTextData_=function(){var a=null;arguments.length>1&&(a=arguments[1]),this.trigger("textdata",a)},b.prototype.getCache=function(){return this.cache_},b.prototype.techCall_=function(a,b){this.ready(function(){if(a in Lc)return qa(this.middleware_,this.tech_,a,b);try{this.tech_&&this.tech_[a](b)}catch(c){throw nb(c),c}},!0)},b.prototype.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in Kc)return pa(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(b){if(void 0===this.tech_[a])throw nb("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",b),b;if("TypeError"===b.name)throw nb("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",b),this.tech_.isReady_=!1,b;throw nb(b),b}}},b.prototype.play=function(){var a=this;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return this.techGet_("play");this.playOnLoadstart_=function(){a.playOnLoadstart_=null,ka(a.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){a.playWaitingForReady_=!1,ka(a.play())})}},b.prototype.pause=function(){this.techCall_("pause")},b.prototype.paused=function(){return this.techGet_("paused")!==!1},b.prototype.played=function(){return this.techGet_("played")||ga(0,0)},b.prototype.scrubbing=function(a){return"undefined"==typeof a?this.scrubbing_:(this.scrubbing_=!!a,void(a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")))},b.prototype.currentTime=function(a){return"undefined"!=typeof a?(a<0&&(a=0),void this.techCall_("setCurrentTime",a)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},b.prototype.duration=function(a){return void 0===a?void 0!==this.cache_.duration?this.cache_.duration:NaN:(a=parseFloat(a),a<0&&(a=1/0),void(a!==this.cache_.duration&&(this.cache_.duration=a,a===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))))},b.prototype.remainingTime=function(){return this.duration()-this.currentTime()},b.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},b.prototype.buffered=function c(){var c=this.techGet_("buffered");return c&&c.length||(c=ga(0,0)),c},b.prototype.bufferedPercent=function(){return ha(this.buffered(),this.duration())},b.prototype.bufferedEnd=function(){var a=this.buffered(),b=this.duration(),c=a.end(a.length-1);return c>b&&(c=b),c},b.prototype.volume=function(a){var b=void 0;return void 0!==a?(b=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=b,this.techCall_("setVolume",b),void(b>0&&this.lastVolume_(b))):(b=parseFloat(this.techGet_("volume")),isNaN(b)?1:b)},b.prototype.muted=function(a){return void 0!==a?void this.techCall_("setMuted",a):this.techGet_("muted")||!1},b.prototype.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1},b.prototype.lastVolume_=function(a){return void 0!==a&&0!==a?void(this.cache_.lastVolume=a):this.cache_.lastVolume},b.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},b.prototype.isFullscreen=function(a){return void 0!==a?void(this.isFullscreen_=!!a):!!this.isFullscreen_},b.prototype.requestFullscreen=function(){var a=Qb;this.isFullscreen(!0),a.requestFullscreen?(V(Ba,a.fullscreenchange,Db(this,function b(c){this.isFullscreen(Ba[a.fullscreenElement]),this.isFullscreen()===!1&&W(Ba,a.fullscreenchange,b),this.trigger("fullscreenchange")})),this.el_[a.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},b.prototype.exitFullscreen=function(){var a=Qb;this.isFullscreen(!1),a.requestFullscreen?Ba[a.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},b.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=Ba.documentElement.style.overflow,V(Ba,"keydown",Db(this,this.fullWindowOnEscKey)),Ba.documentElement.style.overflow="hidden",v(Ba.body,"vjs-full-window"),this.trigger("enterFullWindow")},b.prototype.fullWindowOnEscKey=function(a){27===a.keyCode&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},b.prototype.exitFullWindow=function(){this.isFullWindow=!1,W(Ba,"keydown",this.fullWindowOnEscKey),Ba.documentElement.style.overflow=this.docOrigOverflow,w(Ba.body,"vjs-full-window"),this.trigger("exitFullWindow")},b.prototype.canPlayType=function(a){for(var b=void 0,c=0,d=this.options_.techOrder;c<d.length;c++){var e=d[c],f=Ic.getTech(e);if(f||(f=Pb.getComponent(e)),f){if(f.isSupported()&&(b=f.canPlayType(a)))return b}else nb.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.')}return""},b.prototype.selectSource=function(a){var b=this,c=this.options_.techOrder.map(function(a){return[a,Ic.getTech(a)]}).filter(function(a){var b=a[0],c=a[1];return c?c.isSupported():(nb.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),d=function(a,b,c){var d=void 0;return a.some(function(a){return b.some(function(b){if(d=c(a,b))return!0})}),d},e=void 0,f=function(a){return function(b,c){return a(c,b)}},g=function(a,c){var d=a[0],e=a[1];if(e.canPlaySource(c,b.options_[d.toLowerCase()]))return{source:c,tech:d}};return e=this.options_.sourceOrder?d(a,c,f(g)):d(c,a,g),e||!1},b.prototype.src=function(a){var b=this;if("undefined"==typeof a)return this.cache_.src||"";var c=Mc(a);return c.length?(this.cache_.sources=c,this.changingSrc_=!0,this.cache_.source=c[0],void na(this,c[0],function(a,d){b.middleware_=d;var e=b.src_(a);return e?c.length>1?b.src(c.slice(1)):(b.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void b.triggerReady()):(b.changingSrc_=!1,b.cache_.src=a.src,void oa(d,b.tech_))})):void this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},b.prototype.src_=function(a){var b=this.selectSource([a]);return!b||(ba(b.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src),"auto"===this.options_.preload&&this.load()},!0),!1):(this.changingSrc_=!0,this.loadTech_(b.tech,b.source),!1))},b.prototype.load=function(){this.techCall_("load")},b.prototype.reset=function(){this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},b.prototype.currentSources=function(){var a=this.currentSource(),b=[];return 0!==Object.keys(a).length&&b.push(a),this.cache_.sources||b},b.prototype.currentSource=function(){return this.cache_.source||{}},b.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},b.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},b.prototype.preload=function(a){return void 0!==a?(this.techCall_("setPreload",a),void(this.options_.preload=a)):this.techGet_("preload")},b.prototype.autoplay=function(a){return void 0!==a?(this.techCall_("setAutoplay",a),this.options_.autoplay=a,void this.ready(this.forceAutoplayInChrome_)):this.techGet_("autoplay",a)},b.prototype.forceAutoplayInChrome_=function(){this.paused()&&(this.autoplay()||this.options_.autoplay)&&Va&&!Pa&&this.play()},b.prototype.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")},b.prototype.loop=function(a){return void 0!==a?(this.techCall_("setLoop",a),void(this.options_.loop=a)):this.techGet_("loop")},b.prototype.poster=function(a){return void 0===a?this.poster_:(a||(a=""),this.poster_=a,this.techCall_("setPoster",a),void this.trigger("posterchange"))},b.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},b.prototype.controls=function(a){return void 0===a?!!this.controls_:(a=!!a,void(this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))))},b.prototype.usingNativeControls=function(a){return void 0===a?!!this.usingNativeControls_:(a=!!a,void(this.usingNativeControls_!==a&&(this.usingNativeControls_=a,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))))},b.prototype.error=function(a){return void 0===a?this.error_||null:null===a?(this.error_=a,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new ia(a),this.addClass("vjs-error"),nb.error("(CODE:"+this.error_.code+" "+ia.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},b.prototype.reportUserActivity=function(a){this.userActivity_=!0},b.prototype.userActive=function(a){if(void 0===a)return this.userActive_;if(a=!!a,a!==this.userActive_){if(this.userActive_=a,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},b.prototype.listenForUserActivity_=function(){var a=void 0,b=void 0,c=void 0,d=Db(this,this.reportUserActivity),e=function(a){a.screenX===b&&a.screenY===c||(b=a.screenX,c=a.screenY,d())},f=function(){d(),this.clearInterval(a),a=this.setInterval(d,250)},g=function(b){d(),this.clearInterval(a)};this.on("mousedown",f),this.on("mousemove",e),this.on("mouseup",g),this.on("keydown",d),this.on("keyup",d);var h=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(h);var a=this.options_.inactivityTimeout;a<=0||(h=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)},b.prototype.playbackRate=function(a){return void 0!==a?void this.techCall_("setPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},b.prototype.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},b.prototype.isAudio=function(a){return void 0!==a?void(this.isAudio_=!!a):!!this.isAudio_},b.prototype.addTextTrack=function(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)},b.prototype.addRemoteTextTrack=function(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)},b.prototype.removeRemoteTextTrack=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.track,c=void 0===b?arguments[0]:b;if(this.tech_)return this.tech_.removeRemoteTextTrack(c)},b.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},b.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},b.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},b.prototype.language=function(a){return void 0===a?this.language_:void(this.language_=String(a).toLowerCase())},b.prototype.languages=function(){return ca(b.prototype.options_.languages,this.languages_)},b.prototype.toJSON=function(){var a=ca(this.options_),b=a.tracks;a.tracks=[];for(var c=0;c<b.length;c++){var d=b[c];d=ca(d),d.player=void 0,a.tracks[c]=d}return a},b.prototype.createModal=function(a,b){var c=this;b=b||{},b.content=a||"";var d=new bc(this,b);return this.addChild(d),d.on("dispose",function(){c.removeChild(d)}),d.open(),d},b.getTagSettings=function(a){var b={sources:[],tracks:[]},c=z(a),d=c["data-setup"];if(u(a,"vjs-fluid")&&(c.fluid=!0),null!==d){var e=Da(d||"{}"),f=e[0],h=e[1];f&&nb.error(f),g(c,h)}if(g(b,c),a.hasChildNodes())for(var i=a.childNodes,j=0,k=i.length;j<k;j++){var l=i[j],m=l.nodeName.toLowerCase();"source"===m?b.sources.push(z(l)):"track"===m&&b.tracks.push(z(l))}return b},b.prototype.flexNotSupported_=function(){var a=Ba.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)},b}(Pb);Hc.names.forEach(function(a){var b=Hc[a];ke.prototype[b.getterName]=function(){return this.tech_?this.tech_[b.getterName]():(this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName])}}),ke.players={};var le=Aa.navigator;ke.prototype.options_={techOrder:Ic.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:le&&(le.languages&&le.languages[0]||le.userLanguage||le.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(a){ke.prototype[a]=function(){return this.techGet_(a)}}),je.forEach(function(a){ke.prototype["handleTech"+aa(a)+"_"]=function(){return this.trigger(a)}}),Pb.registerComponent("Player",ke);var me="plugin",ne="activePlugins_",oe={},pe=function(a){return oe.hasOwnProperty(a)},qe=function(a){return pe(a)?oe[a]:void 0},re=function(a,b){a[ne]=a[ne]||{},a[ne][b]=!0},se=function(a,b,c){var d=(c?"before":"")+"pluginsetup";a.trigger(d,b),a.trigger(d+":"+b.name,b)},te=function(a,b){var c=function(){se(this,{name:a,plugin:b,instance:null},!0);var c=b.apply(this,arguments);return re(this,a),se(this,{name:a,plugin:b,instance:c}),c};return Object.keys(b).forEach(function(a){c[a]=b[a]}),c},ue=function(a,b){return b.prototype.name=a,function(){se(this,{name:a,plugin:b,instance:null},!0);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=new(Function.prototype.bind.apply(b,[null].concat([this].concat(d))));return this[a]=function(){return f},se(this,f.getEventHash()),f}},ve=function(){function a(b){if(db(this,a),this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=b,$(this),delete this.trigger,_(this,this.constructor.defaultState),re(b,this.name),this.dispose=Db(this,this.dispose),b.on("dispose",this.dispose)}return a.prototype.version=function(){return this.constructor.VERSION},a.prototype.getEventHash=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.name=this.name,a.plugin=this.constructor,a.instance=this,a},a.prototype.trigger=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return X(this.eventBusEl_,a,this.getEventHash(b))},a.prototype.handleStateChanged=function(a){},a.prototype.dispose=function(){var a=this.name,b=this.player;this.trigger("dispose"),this.off(),b.off("dispose",this.dispose),b[ne][a]=!1,this.player=this.state=null,b[a]=ue(a,oe[a])},a.isBasic=function(b){var c="string"==typeof b?qe(b):b;return"function"==typeof c&&!a.prototype.isPrototypeOf(c.prototype)},a.registerPlugin=function(b,c){if("string"!=typeof b)throw new Error('Illegal plugin name, "'+b+'", must be a string, was '+("undefined"==typeof b?"undefined":cb(b))+".");if(pe(b))nb.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(ke.prototype.hasOwnProperty(b))throw new Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!=typeof c)throw new Error('Illegal plugin for "'+b+'", must be a function, was '+("undefined"==typeof c?"undefined":cb(c))+".");return oe[b]=c,b!==me&&(a.isBasic(c)?ke.prototype[b]=te(b,c):ke.prototype[b]=ue(b,c)),c},a.deregisterPlugin=function(a){if(a===me)throw new Error("Cannot de-register base plugin.");pe(a)&&(delete oe[a],delete ke.prototype[a])},a.getPlugins=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(oe),b=void 0;return a.forEach(function(a){var c=qe(a);c&&(b=b||{},b[a]=c)}),b},a.getPluginVersion=function(a){var b=qe(a);return b&&b.VERSION||""},a}();ve.getPlugin=qe,ve.BASE_PLUGIN_NAME=me,ve.registerPlugin(me,ve),ke.prototype.usingPlugin=function(a){return!!this[ne]&&this[ne][a]===!0},ke.prototype.hasPlugin=function(a){return!!pe(a)};var we=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof b?"undefined":cb(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.super_=b)},xe=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=function(){a.apply(this,arguments)},d={};"object"===("undefined"==typeof b?"undefined":cb(b))?(b.constructor!==Object.prototype.constructor&&(c=b.constructor),d=b):"function"==typeof b&&(c=b),we(c,a);for(var e in d)d.hasOwnProperty(e)&&(c.prototype[e]=d[e]);return c};if("undefined"==typeof HTMLVideoElement&&n()&&(Ba.createElement("video"),Ba.createElement("audio"),Ba.createElement("track"),Ba.createElement("video-js")),za.hooks_={},za.hooks=function(a,b){return za.hooks_[a]=za.hooks_[a]||[],b&&(za.hooks_[a]=za.hooks_[a].concat(b)),za.hooks_[a]},za.hook=function(a,b){za.hooks(a,b)},za.hookOnce=function(a,b){za.hooks(a,[].concat(b).map(function(b){var c=function d(){return za.removeHook(a,d),b.apply(void 0,arguments)};return c}))},za.removeHook=function(a,b){var c=za.hooks(a).indexOf(b);return!(c<=-1)&&(za.hooks_[a]=za.hooks_[a].slice(),za.hooks_[a].splice(c,1),!0)},Aa.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&n()){var ye=pb(".vjs-styles-defaults");if(!ye){ye=Bb("vjs-styles-defaults");var ze=pb("head");ze&&ze.insertBefore(ye,ze.firstChild),Cb(ye,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Z(1,za),za.VERSION=Ga,za.options=ke.prototype.options_,za.getPlayers=function(){return ke.players},za.players=ke.players,za.getComponent=Pb.getComponent,za.registerComponent=function(a,b){Ic.isTech(b)&&nb.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Pb.registerComponent.call(Pb,a,b)},za.getTech=Ic.getTech,za.registerTech=Ic.registerTech,za.use=ma,za.browser=bb,za.TOUCH_ENABLED=_a,za.extend=xe,za.mergeOptions=ca,za.bind=Db,za.registerPlugin=ve.registerPlugin,za.plugin=function(a,b){return nb.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ve.registerPlugin(a,b)},za.getPlugins=ve.getPlugins,za.getPlugin=ve.getPlugin,za.getPluginVersion=ve.getPluginVersion,za.addLanguage=function(a,b){var c;return a=(""+a).toLowerCase(),za.options.languages=ca(za.options.languages,(c={},c[a]=b,c)),za.options.languages[a]},za.log=nb,za.createTimeRange=za.createTimeRanges=ga,za.formatTime=va,za.parseUrl=qc,za.isCrossOrigin=tc,za.EventTarget=Fb,za.on=V,za.one=Y,za.off=W,za.trigger=X,za.xhr=Ea,za.TextTrack=xc,za.AudioTrack=yc,za.VideoTrack=zc,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(a){za[a]=function(){return nb.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead"),rb[a].apply(null,arguments)}}),za.computedStyle=j,za.dom=rb,za.url=uc,b.exports=za},{"global/document":6,"global/window":7,"safe-json-parse/tuple":11,tsml:13,"videojs-vtt.js":16,xhr:15}],15:[function(a,b,c){"use strict";function d(a,b){for(var c=0;c<a.length;c++)b(a[c])}function e(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function f(a,b,c){var d=a;return l(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=n(b,{uri:a}),d.callback=c,d}function g(a,b,c){return b=f(a,b,c),h(b)}function h(a){function b(){4===k.readyState&&setTimeout(f,0)}function c(){var a=void 0;if(a=k.response?k.response:k.responseText||i(k),u)try{a=JSON.parse(a)}catch(b){}return a}function d(a){return clearTimeout(o),a instanceof Error||(a=new Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,j(a,v)}function f(){if(!n){var b;clearTimeout(o),b=a.useXDR&&void 0===k.status?200:1223===k.status?204:k.status;var d=v,e=null;return 0!==b?(d={body:c(),statusCode:b,method:q,headers:{},url:p,rawRequest:k},k.getAllResponseHeaders&&(d.headers=m(k.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),j(e,d,d.body)}}if("undefined"==typeof a.callback)throw new Error("callback argument missing");var h=!1,j=function(b,c,d){h||(h=!0,a.callback(b,c,d))},k=a.xhr||null;k||(k=a.cors||a.useXDR?new g.XDomainRequest:new g.XMLHttpRequest);var l,n,o,p=k.url=a.uri||a.url,q=k.method=a.method||"GET",r=a.body||a.data,s=k.headers=a.headers||{},t=!!a.sync,u=!1,v={body:void 0,headers:{},statusCode:0,method:q,url:p,rawRequest:k};if("json"in a&&a.json!==!1&&(u=!0,s.accept||s.Accept||(s.Accept="application/json"),"GET"!==q&&"HEAD"!==q&&(s["content-type"]||s["Content-Type"]||(s["Content-Type"]="application/json"),r=JSON.stringify(a.json===!0?r:a.json))),k.onreadystatechange=b,k.onload=f,k.onerror=d,k.onprogress=function(){},k.onabort=function(){n=!0},k.ontimeout=d,k.open(q,p,!t,a.username,a.password),t||(k.withCredentials=!!a.withCredentials),!t&&a.timeout>0&&(o=setTimeout(function(){if(!n){n=!0,k.abort("timeout");var a=new Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",d(a)}},a.timeout)),k.setRequestHeader)for(l in s)s.hasOwnProperty(l)&&k.setRequestHeader(l,s[l]);else if(a.headers&&!e(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(k.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(k),k.send(r||null),k}function i(a){if("document"===a.responseType)return a.responseXML;var b=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;return""!==a.responseType||b?null:a.responseXML}function j(){}var k=a("global/window"),l=a("is-function"),m=a("parse-headers"),n=a("xtend");b.exports=g,g.XMLHttpRequest=k.XMLHttpRequest||j,g.XDomainRequest="withCredentials"in new g.XMLHttpRequest?g.XMLHttpRequest:k.XDomainRequest,d(["get","put","post","patch","head","delete"],function(a){g["delete"===a?"del":a]=function(b,c,d){return c=f(b,c,d),c.method=a.toUpperCase(),h(c)}})},{"global/window":7,"is-function":9,"parse-headers":10,xtend:20}],16:[function(a,b,c){var d=a("global/window"),e=b.exports={WebVTT:a("./vtt.js"),VTTCue:a("./vttcue.js"),VTTRegion:a("./vttregion.js")};d.vttjs=e,d.WebVTT=e.WebVTT;var f=e.VTTCue,g=e.VTTRegion,h=d.VTTCue,i=d.VTTRegion;e.shim=function(){d.VTTCue=f,d.VTTRegion=g},e.restore=function(){d.VTTCue=h,d.VTTRegion=i},d.VTTCue||e.shim()},{"./vtt.js":17,"./vttcue.js":18,"./vttregion.js":19,"global/window":7}],17:[function(a,b,c){function d(a,b){this.name="ParsingError",this.code=a.code,this.message=b||a.message}function e(a){function b(a,b,c,d){return 3600*(0|a)+60*(0|b)+(0|c)+(0|d)/1e3}var c=a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return c?c[3]?b(c[1],c[2],c[3].replace(":",""),c[4]):c[1]>59?b(c[1],c[2],0,c[4]):b(0,c[1],c[2],c[4]):null}function f(){this.values=r(null)}function g(a,b,c,d){var e=d?a.split(d):[a];for(var f in e)if("string"==typeof e[f]){var g=e[f].split(c);if(2===g.length){var h=g[0],i=g[1];b(h,i)}}}function h(a,b,c){function h(){var b=e(a);if(null===b)throw new d(d.Errors.BadTimeStamp,"Malformed timestamp: "+k);return a=a.replace(/^[^\sa-zA-Z-]+/,""),b}function i(a,b){var d=new f;g(a,function(a,b){switch(a){case"region":for(var e=c.length-1;e>=0;e--)if(c[e].id===b){d.set(a,c[e].region);break}break;case"vertical":d.alt(a,b,["rl","lr"]);break;case"line":var f=b.split(","),g=f[0];d.integer(a,g),d.percent(a,g)?d.set("snapToLines",!1):null,d.alt(a,g,["auto"]),2===f.length&&d.alt("lineAlign",f[1],["start","middle","end"]);break;case"position":f=b.split(","),d.percent(a,f[0]),2===f.length&&d.alt("positionAlign",f[1],["start","middle","end"]);break;case"size":d.percent(a,b);break;case"align":d.alt(a,b,["start","middle","end","left","right"])}},/:/,/\s/),b.region=d.get("region",null),b.vertical=d.get("vertical",""),b.line=d.get("line","auto"),b.lineAlign=d.get("lineAlign","start"),b.snapToLines=d.get("snapToLines",!0),b.size=d.get("size",100),b.align=d.get("align","middle"),b.position=d.get("position",{start:0,left:0,middle:50,end:100,right:100},b.align),b.positionAlign=d.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},b.align)}function j(){a=a.replace(/^\s+/,"")}var k=a;if(j(),b.startTime=h(),j(),"-->"!==a.substr(0,3))throw new d(d.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+k);a=a.substr(3),j(),b.endTime=h(),j(),i(a,b)}function i(a,b){function c(){function a(a){return b=b.substr(a.length),a}if(!b)return null;var c=b.match(/^([^<]*)(<[^>]+>?)?/);return a(c[1]?c[1]:c[2])}function d(a){return s[a]}function f(a){for(;o=a.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)a=a.replace(o[0],d);return a}function g(a,b){return!v[b.localName]||v[b.localName]===a.localName}function h(b,c){var d=t[b];if(!d)return null;var e=a.document.createElement(d);e.localName=d;var f=u[b];return f&&c&&(e[f]=c.trim()),e}for(var i,j=a.document.createElement("div"),k=j,l=[];null!==(i=c());)if("<"!==i[0])k.appendChild(a.document.createTextNode(f(i)));else{if("/"===i[1]){l.length&&l[l.length-1]===i.substr(2).replace(">","")&&(l.pop(),k=k.parentNode);continue}var m,n=e(i.substr(1,i.length-2));if(n){m=a.document.createProcessingInstruction("timestamp",n),k.appendChild(m);continue}var o=i.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!o)continue;if(m=h(o[1],o[3]),!m)continue;if(!g(k,m))continue;o[2]&&(m.className=o[2].substr(1).replace("."," ")),l.push(o[1]),k.appendChild(m),k=m}return j}function j(a){for(var b=0;b<w.length;b++){var c=w[b];if(a>=c[0]&&a<=c[1])return!0}return!1}function k(a){function b(a,b){for(var c=b.childNodes.length-1;c>=0;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var d=a.pop(),e=d.textContent||d.innerText;if(e){var f=e.match(/^.*(\n|\r)/);return f?(a.length=0,f[0]):e}return"ruby"===d.tagName?c(a):d.childNodes?(b(a,d),c(a)):void 0}var d,e=[],f="";if(!a||!a.childNodes)return"ltr";for(b(e,a);f=c(e);)for(var g=0;g<f.length;g++)if(d=f.charCodeAt(g),j(d))return"rtl";
return"ltr"}function l(a){if("number"==typeof a.line&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var b=a.track,c=b.textTrackList,d=0,e=0;e<c.length&&c[e]!==b;e++)"showing"===c[e].mode&&d++;return++d*-1}function m(){}function n(a,b,c){var d=/MSIE\s8\.0/.test(navigator.userAgent),e="rgba(255, 255, 255, 1)",f="rgba(0, 0, 0, 0.8)";d&&(e="rgb(255, 255, 255)",f="rgb(0, 0, 0)"),m.call(this),this.cue=b,this.cueDiv=i(a,b.text);var g={color:e,backgroundColor:f,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};d||(g.writingMode=""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",g.unicodeBidi="plaintext"),this.applyStyles(g,this.cueDiv),this.div=a.document.createElement("div"),g={textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"},d||(g.direction=k(this.cueDiv),g.writingMode=""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(g),this.div.appendChild(this.cueDiv);var h=0;switch(b.positionAlign){case"start":h=b.position;break;case"middle":h=b.position-b.size/2;break;case"end":h=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(h,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(h,"%"),height:this.formatStyle(b.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function o(a){var b,c,d,e,f=/MSIE\s8\.0/.test(navigator.userAgent);if(a.div){c=a.div.offsetHeight,d=a.div.offsetWidth,e=a.div.offsetTop;var g=(g=a.div.childNodes)&&(g=g[0])&&g.getClientRects&&g.getClientRects();a=a.div.getBoundingClientRect(),b=g?Math.max(g[0]&&g[0].height||0,a.height/g.length):0}this.left=a.left,this.right=a.right,this.top=a.top||e,this.height=a.height||c,this.bottom=a.bottom||e+(a.height||c),this.width=a.width||d,this.lineHeight=void 0!==b?b:a.lineHeight,f&&!this.lineHeight&&(this.lineHeight=13)}function p(a,b,c,d){function e(a,b){for(var e,f=new o(a),g=1,h=0;h<b.length;h++){for(;a.overlapsOppositeAxis(c,b[h])||a.within(c)&&a.overlapsAny(d);)a.move(b[h]);if(a.within(c))return a;var i=a.intersectPercentage(c);g>i&&(e=new o(a),g=i),a=new o(f)}return e||f}var f=new o(b),g=b.cue,h=l(g),i=[];if(g.snapToLines){var j;switch(g.vertical){case"":i=["+y","-y"],j="height";break;case"rl":i=["+x","-x"],j="width";break;case"lr":i=["-x","+x"],j="width"}var k=f.lineHeight,m=k*Math.round(h),n=c[j]+k,p=i[0];Math.abs(m)>n&&(m=m<0?-1:1,m*=Math.ceil(n/k)*k),h<0&&(m+=""===g.vertical?c.height:c.width,i=i.reverse()),f.move(p,m)}else{var q=f.lineHeight/c.height*100;switch(g.lineAlign){case"middle":h-=q/2;break;case"end":h-=q}switch(g.vertical){case"":b.applyStyles({top:b.formatStyle(h,"%")});break;case"rl":b.applyStyles({left:b.formatStyle(h,"%")});break;case"lr":b.applyStyles({right:b.formatStyle(h,"%")})}i=["+y","-x","+x","-y"],f=new o(b)}var r=e(f,i);b.move(r.toCSSCompatValues(c))}function q(){}var r=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return a.prototype=b,new a}}();d.prototype=r(Error.prototype),d.prototype.constructor=d,d.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},f.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){var c;return!!((c=b.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(b=parseFloat(b),b>=0&&b<=100))&&(this.set(a,b),!0)}};var s={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},t={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={v:"title",lang:"lang"},v={rt:"ruby"},w=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];m.prototype.applyStyles=function(a,b){b=b||this.div;for(var c in a)a.hasOwnProperty(c)&&(b.style[c]=a[c])},m.prototype.formatStyle=function(a,b){return 0===a?0:a+b},n.prototype=r(m.prototype),n.prototype.constructor=n,o.prototype.move=function(a,b){switch(b=void 0!==b?b:this.lineHeight,a){case"+x":this.left+=b,this.right+=b;break;case"-x":this.left-=b,this.right-=b;break;case"+y":this.top+=b,this.bottom+=b;break;case"-y":this.top-=b,this.bottom-=b}},o.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},o.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1},o.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right},o.prototype.overlapsOppositeAxis=function(a,b){switch(b){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}},o.prototype.intersectPercentage=function(a){var b=Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left)),c=Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top)),d=b*c;return d/(this.height*this.width)},o.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}},o.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;var e={left:a.left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||c};return e},q.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!=typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}},q.convertCueToDOMTree=function(a,b){return a&&b?i(a,b):null};var x=.05,y="sans-serif",z="1.5%";q.processCues=function(a,b,c){function d(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var e=a.document.createElement("div");if(e.style.position="absolute",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.margin=z,c.appendChild(e),d(b)){var f=[],g=o.getSimpleBoxPosition(e),h=Math.round(g.height*x*100)/100,i={font:h+"px "+y};!function(){for(var c,d,h=0;h<b.length;h++)d=b[h],c=new n(a,d,i),e.appendChild(c.div),p(a,c,g,f),d.displayState=c.div,f.push(o.getSimpleBoxPosition(c))}()}else for(var j=0;j<b.length;j++)e.appendChild(b[j].displayState)},q.Parser=function(a,b,c){c||(c=b,b={}),b||(b={}),this.window=a,this.vttjs=b,this.state="INITIAL",this.buffer="",this.decoder=c||new TextDecoder("utf8"),this.regionList=[]},q.Parser.prototype={reportOrThrowError:function(a){if(!(a instanceof d))throw a;this.onparsingerror&&this.onparsingerror(a)},parse:function(a){function b(){for(var a=k.buffer,b=0;b<a.length&&"\r"!==a[b]&&"\n"!==a[b];)++b;var c=a.substr(0,b);return"\r"===a[b]&&++b,"\n"===a[b]&&++b,k.buffer=a.substr(b),c}function c(a){var b=new f;if(g(a,function(a,c){switch(a){case"id":b.set(a,c);break;case"width":b.percent(a,c);break;case"lines":b.integer(a,c);break;case"regionanchor":case"viewportanchor":var d=c.split(",");if(2!==d.length)break;var e=new f;if(e.percent("x",d[0]),e.percent("y",d[1]),!e.has("x")||!e.has("y"))break;b.set(a+"X",e.get("x")),b.set(a+"Y",e.get("y"));break;case"scroll":b.alt(a,c,["up"])}},/=/,/\s/),b.has("id")){var c=new(k.vttjs.VTTRegion||k.window.VTTRegion);c.width=b.get("width",100),c.lines=b.get("lines",3),c.regionAnchorX=b.get("regionanchorX",0),c.regionAnchorY=b.get("regionanchorY",100),c.viewportAnchorX=b.get("viewportanchorX",0),c.viewportAnchorY=b.get("viewportanchorY",100),c.scroll=b.get("scroll",""),k.onregion&&k.onregion(c),k.regionList.push({id:b.get("id"),region:c})}}function i(a){var b=new f;g(a,function(a,c){switch(a){case"MPEGT":b.integer(a+"S",c);break;case"LOCA":b.set(a+"L",e(c))}},/[^\d]:/,/,/),k.ontimestampmap&&k.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}function j(a){a.match(/X-TIMESTAMP-MAP/)?g(a,function(a,b){switch(a){case"X-TIMESTAMP-MAP":i(b)}},/=/):g(a,function(a,b){switch(a){case"Region":c(b)}},/:/)}var k=this;a&&(k.buffer+=k.decoder.decode(a,{stream:!0}));try{var l;if("INITIAL"===k.state){if(!/\r\n|\n/.test(k.buffer))return this;l=b();var m=l.match(/^WEBVTT([ \t].*)?$/);if(!m||!m[0])throw new d(d.Errors.BadSignature);k.state="HEADER"}for(var n=!1;k.buffer;){if(!/\r\n|\n/.test(k.buffer))return this;switch(n?n=!1:l=b(),k.state){case"HEADER":/:/.test(l)?j(l):l||(k.state="ID");continue;case"NOTE":l||(k.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){k.state="NOTE";break}if(!l)continue;if(k.cue=new(k.vttjs.VTTCue||k.window.VTTCue)(0,0,""),k.state="CUE",l.indexOf("-->")===-1){k.cue.id=l;continue}case"CUE":try{h(l,k.cue,k.regionList)}catch(o){k.reportOrThrowError(o),k.cue=null,k.state="BADCUE";continue}k.state="CUETEXT";continue;case"CUETEXT":var p=l.indexOf("-->")!==-1;if(!l||p&&(n=!0)){k.oncue&&k.oncue(k.cue),k.cue=null,k.state="ID";continue}k.cue.text&&(k.cue.text+="\n"),k.cue.text+=l;continue;case"BADCUE":l||(k.state="ID");continue}}}catch(o){k.reportOrThrowError(o),"CUETEXT"===k.state&&k.cue&&k.oncue&&k.oncue(k.cue),k.cue=null,k.state="INITIAL"===k.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||"HEADER"===a.state)&&(a.buffer+="\n\n",a.parse()),"INITIAL"===a.state)throw new d(d.Errors.BadSignature)}catch(b){a.reportOrThrowError(b)}return a.onflush&&a.onflush(),this}},b.exports=q},{}],18:[function(a,b,c){function d(a){if("string"!=typeof a)return!1;var b=i[a.toLowerCase()];return!!b&&a.toLowerCase()}function e(a){if("string"!=typeof a)return!1;var b=j[a.toLowerCase()];return!!b&&a.toLowerCase()}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}function g(a,b,c){var g=this,i=/MSIE\s8\.0/.test(navigator.userAgent),j={};i?g=document.createElement("custom"):j.enumerable=!0,g.hasBeenReset=!1;var k="",l=!1,m=a,n=b,o=c,p=null,q="",r=!0,s="auto",t="start",u=50,v="middle",w=50,x="middle";if(Object.defineProperty(g,"id",f({},j,{get:function(){return k},set:function(a){k=""+a}})),Object.defineProperty(g,"pauseOnExit",f({},j,{get:function(){return l},set:function(a){l=!!a}})),Object.defineProperty(g,"startTime",f({},j,{get:function(){return m},set:function(a){if("number"!=typeof a)throw new TypeError("Start time must be set to a number.");m=a,this.hasBeenReset=!0}})),Object.defineProperty(g,"endTime",f({},j,{get:function(){return n},set:function(a){if("number"!=typeof a)throw new TypeError("End time must be set to a number.");n=a,this.hasBeenReset=!0}})),Object.defineProperty(g,"text",f({},j,{get:function(){return o},set:function(a){o=""+a,this.hasBeenReset=!0}})),Object.defineProperty(g,"region",f({},j,{get:function(){return p},set:function(a){p=a,this.hasBeenReset=!0}})),Object.defineProperty(g,"vertical",f({},j,{get:function(){return q},set:function(a){var b=d(a);if(b===!1)throw new SyntaxError("An invalid or illegal string was specified.");q=b,this.hasBeenReset=!0}})),Object.defineProperty(g,"snapToLines",f({},j,{get:function(){return r},set:function(a){r=!!a,this.hasBeenReset=!0}})),Object.defineProperty(g,"line",f({},j,{get:function(){return s},set:function(a){if("number"!=typeof a&&a!==h)throw new SyntaxError("An invalid number or illegal string was specified.");s=a,this.hasBeenReset=!0}})),Object.defineProperty(g,"lineAlign",f({},j,{get:function(){return t},set:function(a){var b=e(a);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");t=b,this.hasBeenReset=!0}})),Object.defineProperty(g,"position",f({},j,{get:function(){return u},set:function(a){if(a<0||a>100)throw new Error("Position must be between 0 and 100.");u=a,this.hasBeenReset=!0}})),Object.defineProperty(g,"positionAlign",f({},j,{get:function(){return v},set:function(a){var b=e(a);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");v=b,this.hasBeenReset=!0}})),Object.defineProperty(g,"size",f({},j,{get:function(){return w},set:function(a){if(a<0||a>100)throw new Error("Size must be between 0 and 100.");w=a,this.hasBeenReset=!0}})),Object.defineProperty(g,"align",f({},j,{get:function(){return x},set:function(a){var b=e(a);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");x=b,this.hasBeenReset=!0}})),g.displayState=void 0,i)return g}var h="auto",i={"":!0,lr:!0,rl:!0},j={start:!0,middle:!0,end:!0,left:!0,right:!0};g.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},b.exports=g},{}],19:[function(a,b,c){function d(a){if("string"!=typeof a)return!1;var b=g[a.toLowerCase()];return!!b&&a.toLowerCase()}function e(a){return"number"==typeof a&&a>=0&&a<=100}function f(){var a=100,b=3,c=0,f=100,g=0,h=100,i="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!e(b))throw new Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!=typeof a)throw new TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!e(a))throw new Error("RegionAnchorX must be between 0 and 100.");f=a}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!e(a))throw new Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return h},set:function(a){if(!e(a))throw new Error("ViewportAnchorY must be between 0 and 100.");h=a}},viewportAnchorX:{enumerable:!0,get:function(){return g},set:function(a){if(!e(a))throw new Error("ViewportAnchorX must be between 0 and 100.");g=a}},scroll:{enumerable:!0,get:function(){return i},set:function(a){var b=d(a);if(b===!1)throw new SyntaxError("An invalid or illegal string was specified.");i=b}}})}var g={"":!0,up:!0};b.exports=f},{}],20:[function(a,b,c){function d(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)e.call(c,d)&&(a[d]=c[d])}return a}b.exports=d;var e=Object.prototype.hasOwnProperty},{}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("global/window"),h=d(g),i=a("./receiver-play-button.js"),j=(d(i),h["default"].videojs),k=j.getComponent("ControlBar"),l=(j.getComponent("ReceiverPlayButton"),j.getComponent("Component")),m=function(a){function b(){e(this,b),a.apply(this,arguments)}return f(b,a),b}(k);m.prototype.options_={loadEvent:"play",children:["receiverPlayButton","currentTimeDisplay","progressControl","remainingTimeDisplay"]},l.registerComponent("ControlBar",m),c["default"]=m,b.exports=c["default"]},{"./receiver-play-button.js":22,"global/window":7}],22:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("global/window"),h=d(g),i=h["default"].videojs,j=i.getComponent("Component"),k=function(a){function b(c,d){e(this,b),a.call(this,c,d)}return f(b,a),b.prototype.buildCSSClass=function(){return"receiver-play-control"},b.prototype.createEl=function(){var b={className:this.buildCSSClass()},c=a.prototype.createEl.call(this,void 0,b,void 0);return c},b}(j);j.registerComponent("ReceiverPlayButton",k),c["default"]=k,b.exports=c["default"]},{"global/window":7}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(){m.log.setLogToBrowserConsole(!1),h["default"].receiverApp=new n}c.__esModule=!0;var g=a("global/window"),h=d(g),i=a("global/document"),j=d(i),k=a("./emp-receiver"),l=d(k);h["default"].empReceiver=l["default"];var m=(h["default"].videojs,h["default"].empPlayer),n=function(){function a(){var b=this;e(this,a);var c=j["default"].getElementById("player");this.container_=j["default"].getElementById("receiver");var d={debug:!1,playerOptions:{empshaka:{abr:{defaultBandwidthEstimate:5e6}}}};this.empReceiver_=new l["default"](c,d,function(){b.empReceiver_.player.on(m.Events.PLAYING,b.onPlayStateChange_.bind(b)),b.empReceiver_.player.on(m.Events.PAUSE,b.onPlayStateChange_.bind(b)),b.empReceiver_.player.on(m.Events.SEEKING,b.onPlayStateChange_.bind(b)),b.empReceiver_.player.on(m.Events.WAITING,b.onPlayStateChange_.bind(b)),b.empReceiver_.player.on(m.Events.ENDED,b.onPlayStateChange_.bind(b)),b.empReceiver_.player.on(m.Events.ERROR,b.onPlayStateChange_.bind(b))}),this.empReceiver_.on(l["default"].Events.STATE_CHANGED,this.onStateChange_.bind(this)),this.empReceiver_.on(l["default"].Events.METADATA_UPDATED,this.onMetadataUpdate_.bind(this)),this.empReceiver_.on(l["default"].Events.RESOLUTION_CHANGED,this.onResolutionChanged_.bind(this))}return a.prototype.onMetadataUpdate_=function(a){var b=j["default"].getElementById("media-artwork-img"),c=j["default"].getElementById("media-title"),d=j["default"].getElementById("media-subtitle");c&&(c.innerHTML=a.title||""),d&&(d.innerHTML=a.subtitle||""),b&&a.images&&a.images.length>0?(b.src=a.images[0].url,b.style.display="block"):b.style.display="none"},a.prototype.onResolutionChanged_=function(a){var b=j["default"].getElementById("media-resolution");b&&(a?(b.innerHTML=a,b.style.display="inline"):b.style.display="none")},a.prototype.onPlayStateChange_=function(a){m.log("playStateChanged",a),"ended"===a.type},a.prototype.onStateChange_=function(a){this.container_.setAttribute("state",a)},a}();"loading"===j["default"].readyState||"interactive"===j["default"].readyState?h["default"].addEventListener("load",f):f(),c["default"]=n,b.exports=c["default"]},{"./emp-receiver":25,"global/document":6,"global/window":7}],24:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function g(){d(this,g),this.METADATA_UPDATED="metadataupdate",this.STATE_CHANGED="statechanged",this.RESOLUTION_CHANGED="resolutionchanged"},f=new e;c["default"]=f,b.exports=c["default"]},{}],25:[function(b,c,d){"use strict";function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}d.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=b("global/window"),i=e(h),j=b("events"),k=e(j),l=b("es6-mixins"),m=e(l),n=b("./external.js"),o=b("./emp-receiver-events.js"),p=e(o),q=b("./controls/receiver-control-bar.js"),r=(e(q),n.empPlayer.Events),s={LAUNCHING:"launching",LOADING:"loading",BUFFERING:"buffering",SEEKING:"seeking",PLAYING:"playing",PAUSED:"paused",DONE:"done",IDLE:"idle"},t={LAUNCHING:3e5,LOADING:3e5,PAUSED:12e5,IDLE:3e5,DONE:3e5},u=function(){function a(b,c){var d=this,e=arguments.length<=2||void 0===arguments[2]?function(){}:arguments[2];f(this,a),m["default"](k["default"],this),n.empPlayer.log("Created"),this.options_=Object.assign({debug:!1,messageUrn:"urn:x-cast:com.ericsson.cast.receiver",playerOptions:{}},c),this.debug_=c.debug,this.element_=b,this.assetMetadata_={title:"",subtitle:"",images:[]},this.mediaManager_=null,this.loadingState_=!1,this.shutdownWhenLastSenderDisconnect_=!0,this.isConnected_=!1,this.isChromecast_=i["default"].navigator.userAgent.indexOf("CrKey")>=0,this.onCastStatusChanged_(s.LAUNCHING),this.castReceiverManager_=cast.receiver.CastReceiverManager.getInstance(),this.castReceiverManager_.onSystemVolumeChanged=this.onSystemVolumeChanged_.bind(this),this.castReceiverManager_.onShutdown=this.onShutdown_.bind(this),this.castReceiverManager_.onSenderConnected=this.onSenderConnected_.bind(this),this.castReceiverManager_.onSenderDisconnected=this.onSenderDisconnected_.bind(this),this.castReceiverManager_.onSenderConnected=this.onSendersChanged_.bind(this),this.messageBus_=this.castReceiverManager_.getCastMessageBus(this.options_.messageUrn),this.messageBus_.addEventListener("message",this.onMessage.bind(this)),this.createPlayer(function(){d.isChromecast_?(d.mediaManager_=new cast.receiver.MediaManager(d.player_.tech({IWillNotUseThisInPlugins:!0}).el_),d.onLoadOrig_=d.mediaManager_.onLoad.bind(d.mediaManager_),d.mediaManager_.onLoad=d.onLoad_.bind(d),d.onMetadataLoadedOrig_=d.mediaManager_.onMetadataLoaded.bind(d.mediaManager_),d.mediaManager_.onMetadataLoaded=d.onMetadataLoaded_.bind(d),d.onLoadMetadataErrorOrig_=d.mediaManager_.onLoadMetadataError.bind(d.mediaManager_),d.mediaManager_.onLoadMetadataError=d.onLoadMetadataError_.bind(d),d.onErrorOrig_=d.mediaManager_.onError.bind(d.mediaManager_),d.mediaManager_.onError=d.onError_.bind(d),d.onPlayOrig_=d.mediaManager_.onPlay.bind(d.mediaManager_),d.mediaManager_.onPlay=d.onPlay_.bind(d),d.onPauseOrig_=d.mediaManager_.onPause.bind(d.mediaManager_),d.mediaManager_.onPause=d.onPause_.bind(d),d.onEndedOrig_=d.mediaManager_.onEnded.bind(d.mediaManager_),d.mediaManager_.onEnded=d.onEnded_.bind(d),d.onStopOrig_=d.mediaManager_.onStop.bind(d.mediaManager_),d.mediaManager_.onStop=d.onStop_.bind(d),d.onSetVolumeOrig_=d.mediaManager_.onSetVolume.bind(d.mediaManager_),d.mediaManager_.onSetVolume=d.onSetVolume_.bind(d),d.onSeekOrig_=d.mediaManager_.onSeek.bind(d.mediaManager_),d.mediaManager_.onSeek=d.onSeek_.bind(d),d.mediaManager_.customizedStatusCallback=function(a){if(d.player_&&(a.currentTime=d.player_.currentTime(),a.media)){d.setStreamType(a.media);var b=d.player_.getProgramDetails(),c=d.player_.currentAsset();b?(a.contentId=b.assetId,a.media.empPayload={assetId:b.assetId,programId:b.programId,channelId:b.channelId},a.media.customData=a.media.empPayload):c?(a.contentId=c.assetId,a.media.empPayload=c,a.media.customData=a.media.empPayload):(a.contentId=d.player_.currentSrc(),a.media.empPayload={source:d.player_.currentSource()},a.media.customData=a.media.empPayload)}return n.empPlayer.log("mediaStatus",a),a}):(d.onLoadOrig_=d.mockMediaManagerEvent_.bind(d),d.onMetadataLoadedOrig_=d.mockMediaManagerEvent_.bind(d),d.onLoadMetadataErrorOrig_=d.mockMediaManagerEvent_.bind(d),d.onErrorOrig_=d.mockMediaManagerEvent_.bind(d),d.onPlayOrig_=d.mockMediaManagerEvent_.bind(d),d.onPauseOrig_=d.mockMediaManagerEvent_.bind(d),d.onEndedOrig_=d.mockMediaManagerEvent_.bind(d),d.onStopOrig_=d.mockMediaManagerEvent_.bind(d),d.onSetVolumeOrig_=d.mockMediaManagerEvent_.bind(d),d.onSeekOrig_=d.mockMediaManagerEvent_.bind(d)),d.debug_?(cast.receiver.logger.setLevelValue(cast.receiver.LoggerLevel.DEBUG),cast.player.api.setLoggerLevel(cast.player.api.LoggerLevel.DEBUG)):(cast.receiver.logger.setLevelValue(cast.receiver.LoggerLevel.ERROR),cast.player.api.setLoggerLevel(cast.player.api.LoggerLevel.NONE));var a=new cast.receiver.CastReceiverManager.Config;a.statusText=d.options_.statusText||"Casting EMP",d.isChromecast_?(d.castReceiverManager_.start(a),d.onCastStatusChanged_(s.IDLE)):(d.onCastStatusChanged_(s.IDLE),d.loadDebug_()),e()})}return a.prototype.setStreamType=function(a){!this.player_.timeShiftEnabled()&&this.player_.isLive()?(a.duration=1/0,a.streamType="LIVE"):(a.duration=this.player_.duration(),a.streamType="BUFFERED")},a.prototype.mockMediaManagerEvent_=function(a){n.empPlayer.log("mockMediaManagerEvent_",a),this.emit("mediamanagerevent",a)},a.prototype.onMessage=function(a){var b=JSON.parse(a.data);switch(n.empPlayer.log("onMessage",a.data,b),b.type){case"showtexttrack":this.player_.selectTextTrack(b.data.language,b.data.kind);break;case"hidetexttrack":this.player_.selectTextTrack(null);break;case"showaudiotrack":case"selectaudiotrack":this.player_.selectAudioTrack(b.data.language,b.data.kind);break;case"refreshcontrols":case"pull":this.refreshControls();break;case"setabsolutetime":this.player_.setAbsoluteTime(new Date(b.data.datetime));break;case"playheadTime":this.player_.playheadTime(b.data.datetime);break;case"playnextprogram":this.player_.playNextProgram();break;case"playpreviousprogram":var c=b.data.end;this.player_.playPreviousProgram(c);break;case"gotolive":this.player_.gotoLive();break;case"texttrackstyle":this.player_.setTextTrackStyle(b.data);break;case"loadnextsource":this.player_.autoplay(),this.player_.loadNextSource();break;case"lineupsource":this.player_.lineupSource(b.data)}},a.prototype.onEmpError=function(a){try{this.onCastStatusChanged_(s.IDLE),a||(a={}),n.empPlayer.log.error(a),this.player_.analytics&&this.player_.analytics.onWindowUnload();var b=a.message;b&&(b=b.replace("Tech: EmpShaka","Tech: Chromecast"));var c={type:"ERROR",code:a.code,message:b};this.mediaManager_&&(this.mediaManager_.resetMediaElement(cast.receiver.media.IdleReason.ERROR,!0,null,c),this.loadingState_&&this.mediaManager_.sendLoadError(cast.receiver.media.ErrorType.LOAD_FAILED,c)),this.sendMessage_({type:"error",data:c}),this.player_&&this.player_.stop()}catch(d){n.empPlayer.log.error(d)}},a.prototype.hideMediaResolution=function(){this.emit(p["default"].RESOLUTION_CHANGED)},a.prototype.displayMediaResolution=function(){if(this.player_){var a=this.player_.videoWidth(),b=void 0;a>0&&a<1280?b="SD":a>=1280&&a<2048?b="HD":2048===a?b="2K":a>=3840&&a<=4096&&(b="4K"),this.emit(p["default"].RESOLUTION_CHANGED,b)}},a.prototype.loadDebug_=function(){if(!this.isChromecast_){n.empPlayer.log("Debugging the receiver UI in Chrome");var a=i["default"].localStorage.getItem("CC_loadRequest");if(a){var b=JSON.parse(a);n.empPlayer.log("loadRequest in localStorage",b),this.onLoad_({data:b})}else n.empPlayer.log.error("No loadRequest in localStorage")}},a.prototype.onLoad_=function(a){var b=this;n.empPlayer.log("onLoad",a);var c=a.data;if(this.hasReceivedPlayingEvent_=!1,this.assetMetadata_=c.media.metadata||{title:"",subtitle:"",images:[]},this.emit(p["default"].METADATA_UPDATED,this.assetMetadata_),this.onCastStatusChanged_(s.LOADING),this.hideMediaResolution(),this.loading)return n.empPlayer.log("onLoad blocking",a),void(this.loadNext=a);this.loading=setTimeout(function(){b.loading=null,b.loadNext&&b.onLoad_(b.loadNext)},1e4),this.loadNext=null,n.empPlayer.log("onLoad OK"),this.loadingState_=!0;var d=c.customData;if(c.currentTime>0&&(d.startTime=c.currentTime),d.startTime=d.absoluteStartTime?0:d.startTime,d.analytics||(d.analytics={}),d.analytics.deviceInfo=this.getAnalyticsDeviceInfo_(),c&&void 0!==c.autoplay&&this.player_.autoplay(c.autoplay),this.player_.options(d),this.player_.disableTimeShift(d.timeShiftDisabled),this.player_.one("canplay",function(){n.empPlayer.log("loadAsset","canplay",c.media),b.displayMediaResolution(),b.isConnected_&&(b.setStreamType(c.media),b.mediaManager_.setMediaInformation(c.media))}),this.player_.one("playing",function(){b.hasReceivedPlayingEvent_=!0,b.sendStatus_(),b.sendTracks()}),this.player_.one("loadeddata",function(){c.autoplay===!1&&b.onCastStatusChanged_(s.PAUSED)}),this.player_.on(r.LOADED_DATA,function(){var a=b.player_.currentSource();if("video/emp"!==a.type){var c=b.getMediaInformation();b.setStreamType(c),c.contentId=a.src,c.media&&(c.media.empPayload={source:a},c.media.customData=c.media.empPayload),b.mediaManager_.setMediaInformation(c,!0)}}),this.isConnected_&&this.player_.on("ready",function(){n.empPlayer.log("ready");var a=b.player_.tech({IWillNotUseThisInPlugins:!0}).el_;n.empPlayer.log("setMediaElement",b.player_.getCurrentTechName(),a.id),b.mediaManager_.setMediaElement(a)}),d.sources&&d.sources.length>0)return n.empPlayer.log("player_.src",this.player_.options_),void this.player_.src(d.sources);if(d.source&&d.source.src)return void this.player_.src(d.source);var e={};d.playbackProperties?e=d.playbackProperties:d.absoluteStartTime?(e.startTime=d.absoluteStartTime,e.playFrom="startTime"):d.useLastViewedOffset?e.playFrom="bookmark":(e.playFrom="defaultBehaviour",e.startOffset=d.startTime?1e3*d.startTime:void 0),this.player_.startPlayback(d.assetId,d.channelId,d.programId,e)},a.prototype.sendTracks=function(){n.empPlayer.log("broadcasting embedded tracks");for(var a=0,b=[],c=[],d=this.player_.getSelectedTextTrack(),e=this.player_.textTracks(),f=0;f<e.length;f++,a++){var g=e[f];d&&g.language===d&&b.push(a);var h={label:g.label,language:g.language,type:"text",id:a,kind:g.kind};c.push(h)}for(var i=this.player_.audioTracks(),f=0;f<i.length;f++,a++){var j=i[f];j.enabled===!0&&b.push(a);var h={label:j.label,language:j.language,type:"audio",id:a,kind:j.kind};c.push(h)}var k={tracks:c,activeTrackIds:b},l={type:"tracksupdated",data:{tracksInfo:k}};this.sendMessage_(l)},a.prototype.onMetadataLoaded_=function(a){n.empPlayer.log("onMetadataLoaded",a),a&&a.message&&a.message.media&&(a.message.media.metadata=this.assetMetadata_,this.setStreamType(a.message.media)),this.onMetadataLoadedOrig_(a),this.loadingState_=!1},a.prototype.onLoadMetadataError_=function(a){this.onCastStatusChanged_(s.IDLE),n.empPlayer.log.error("onLoadMetadataError",a),this.player_.analytics&&this.player_.analytics.onWindowUnload(),this.onLoadMetadataErrorOrig_(a)},a.prototype.onError_=function(a){try{this.onCastStatusChanged_(s.IDLE),n.empPlayer.log.error(a),this.player_.analytics&&this.player_.analytics.onWindowUnload(),this.sendMessage_({type:"error",data:a}),this.onErrorOrig_(a)}catch(b){
n.empPlayer.log.error(b)}},a.prototype.onPlay_=function(a){n.empPlayer.log("play",a),this.onPlayOrig_(a)},a.prototype.onPause_=function(a){return n.empPlayer.log("pause",a),!this.player_.timeShiftEnabled()&&this.player_.isLive()?void this.sendStatus_(a.senderId,a.data.requestId):void this.onPauseOrig_(a)},a.prototype.onSetVolume_=function(a){n.empPlayer.log("setVolume",a);var b=a.data.customData?a.data.customData.id:null;this.sendMessage_({type:r.VOLUME_CHANGE,data:{volume:a.data.volume.level,muted:a.data.volume.muted,senderId:b}}),this.onSetVolumeOrig_(a)},a.prototype.refreshControls=function(){n.empPlayer.log("refreshControls"),this.sendMessage_({type:r.VOLUME_CHANGE,data:{volume:this.player_.volume(),muted:this.player_.muted()}}),this.sendMessage_({type:"timeShiftEnabled",data:this.player_.timeShiftEnabled()}),this.sendMessage_({type:"autoplay",data:this.player_.autoplay()}),this.sendMessage_({type:"isLive",data:this.player_.isLive()});var a=this.player_.getProgramDetails(),b=this.player_.startTimeLive();a&&(b=a.start.getTime()),this.sendMessage_({type:"startTimeLive",data:b}),a&&(a=Object.assign({},a),a.start=void 0,a.end=void 0,this.sendMessage_({type:r.PROGRAM_CHANGED,data:{program:a}}));var c=this.player_.getAssetDetails();c&&this.sendMessage_({type:r.ASSET_CHANGED,data:{asset:c}});var d=this.player_.entitlement;d&&this.sendMessage_({type:r.ENTITLEMENT_CHANGE,data:{entitlement:d}}),this.sendTracks()},a.prototype.onShutdown_=function(a){n.empPlayer.log("shutdown",a)},a.prototype.onSendersChanged_=function(){this.isConnected_=0!==this.castReceiverManager_.getSenders().length},a.prototype.onSenderConnected_=function(a){n.empPlayer.log("SenderConnected",a.senderId,a.userAgent);var b=this.castReceiverManager_.getSenders(),c=b?b.length:0;n.empPlayer.log("senders",b,c)},a.prototype.onSenderDisconnected_=function(a){n.empPlayer.log("SenderDisconnected",a.senderId,a.userAgent,a.reason);var b=this.castReceiverManager_.getSenders(),c=b?b.length:0;n.empPlayer.log("senders",b,c),a.reason===cast.receiver.system.DisconnectReason.REQUESTED_BY_SENDER&&0===c&&this.shutdownWhenLastSenderDisconnect_&&(n.empPlayer.log("shutdown no senders"),this.castReceiverManager_.stop(),this.player_.analytics&&this.player_.analytics.onWindowUnload())},a.prototype.onSystemVolumeChanged_=function(a){n.empPlayer.log("systemVolumeChanged",a),this.sendMessage_({type:r.VOLUME_CHANGE,data:{volume:a.data.level,muted:a.data.muted}})},a.prototype.onSeek_=function(a){n.empPlayer.log("seek",a);var b=a.data.currentTime;this.player_.canSeekTo(b)&&(this.seekEvent_=a,this.player_.currentTime(b)),this.sendStatus_(a.senderId,a.data.requestId)},a.prototype.onEnded_=function(a){var b=this;n.empPlayer.log("onStop_",a),setTimeout(function(){b.player_.ended()&&(b.onCastStatusChanged_(s.IDLE),b.onEndedOrig_(a))},3e3)},a.prototype.onStop_=function(a){n.empPlayer.log("onStop_",a),this.player_&&this.player_.stop(),this.onCastStatusChanged_(s.IDLE),this.onStopOrig_(a)},a.prototype.getMediaInformation=function(){return this.mediaManager_&&this.mediaManager_.getMediaInformation()?this.mediaManager_.getMediaInformation():{}},a.prototype.onCastStatusChanged_=function(a){n.empPlayer.log("onCastStatusChanged_: "+a),this.state_=a,this.setIdleTimeout_(t[a.toUpperCase()]),this.emit(p["default"].STATE_CHANGED,a)},a.prototype.setIdleTimeout_=function(a){var b=this;n.empPlayer.log("setIdleTimeout_: "+a),clearTimeout(this.idleTimeout_),a&&!function(){var c=b;b.idleTimeout_=setTimeout(function(){c.castReceiverManager_.stop()},a)}()},a.prototype.getAnalyticsDeviceInfo_=function(){return{deviceModel:"Chromecast",deviceManufacturer:"Google",deviceAppInfo:"emp-chromecast-receiver v"+this.version}},a.prototype.shutdownWhenLastSenderDisconnect=function(a){return void 0===a?this.shutdownWhenLastSenderDisconnect_:void(this.shutdownWhenLastSenderDisconnect_=a)},a.prototype.createPlayer=function(a){var b=this;n.empPlayer.log("Create player");var c=this.options_.playerOptions;c.techOrder=["EmpShaka","Html5"],c.controls=!0,this.options_&&this.options_.controls?c.children=this.options_.controls:c.children={controlBar:{},mediaLoader:{},posterImage:{},textTrackDisplay:{},errorDisplay:{},textTrackSettings:{}},c.analytics={},c.analytics.deviceInfo=this.getAnalyticsDeviceInfo_(),c.persistTextTrackSettings=!1,this.player_=new n.empPlayer(this.element_,c,a),this.player_.on(r.ERROR,function(a,c){"error"===a.type&&b.onEmpError(b.player_.getError()||{message:c})}),this.player_.on(r.SEGMENT_MISSING,function(){n.empPlayer.log("SEGMENT_MISSING");var a=-1;b.seekEvent_&&(a=b.seekEvent_.data.currentTime,b.sendStatus_(b.seekEvent_.senderId,b.seekEvent_.data.requestId),b.seekEvent_=null),b.sendMessage_({type:r.SEGMENT_MISSING,data:a})}),this.player_.on(r.SEEKED,function(){n.empPlayer.log("SEEKED"),b.seekEvent_&&(b.sendStatus_(b.seekEvent_.senderId,b.seekEvent_.data.requestId),b.seekEvent_=null)}),this.player_.on(r.DURATION_CHANGE,function(){b.state_!==s.IDLE&&b.player_.isProgramLive()&&b.sendStatus_()}),this.player_.on(r.BITRATE_CHANGED,function(){return b.displayMediaResolution()}),this.player_.on(r.TRACK_CHANGE,function(){b.sendTracks()}),this.player_.one(r.CAN_PLAY,function(){var a=b.player_.timeShiftEnabled();b.sendMessage_({type:"timeShiftEnabled",data:a})}),this.player_.on(r.PROGRAM_CHANGED,function(a,c){var d=c&&c.program?c.program.programId:null;if(d){b.sendMessage_({type:"startTimeLive",data:c.program.start.getTime()});var e=Object.assign({},c.program);e.start=void 0,e.end=void 0;var f=b.extractMetadata(e.asset);b.changeMediaInformation(f,c)}}),this.player_.on(r.ASSET_CHANGED,function(a,c){if(c&&c.asset){var d=b.extractMetadata(c.asset);b.changeMediaInformation(d,c)}}),this.player_.on(r.ENTITLEMENT_CHANGE,function(a,c){var d=c&&c.entitlement;d&&b.sendMessage_({type:r.ENTITLEMENT_CHANGE,data:{entitlement:d}})}),this.player_.on("playing",function(){b.player_.error(null),b.onCastStatusChanged_(s.PLAYING)}),this.player_.on("pause",function(){b.player_.isPlaying()&&b.hasReceivedPlayingEvent_&&b.onCastStatusChanged_(s.PAUSED)}),this.player_.on("waiting",function(){b.state_!==s.IDLE&&b.onCastStatusChanged_(s.BUFFERING)}),this.player_.on("seeking",function(){b.onCastStatusChanged_(s.SEEKING)}),this.player_.on("abort",function(){b.hasReceivedPlayingEvent_!==!0||b.state_===s.LOADING&&b.state_===s.IDLE||b.onCastStatusChanged_(s.IDLE)})},a.prototype.extractMetadata=function(a){n.empPlayer.log("extractMetadata",a);var b=null,c=null,d=null;return a&&a.localized&&a.localized.length>0&&(a.localized[0].title&&(b=a.localized[0].title),a.localized[0].shortDescription&&(c=a.localized[0].shortDescription),a.localized[0].images&&a.localized[0].images.length>0&&a.localized[0].images[0].url&&(d=a.localized[0].images)),{title:b?b:"",subtitle:c?c:"",images:d?d:[]}},a.prototype.changeMediaInformation=function(a,b){var c=this;if(n.empPlayer.log("changeMediaInformation",a,b),b.program&&n.empPlayer.log("Has Program"),this.isConnected_&&this.mediaManager_){var d=this.getMediaInformation();this.setStreamType(d),d.metadata=d.metadata||{title:"",subtitle:"",images:[]},d.metadata.title=a.title?a.title:"",d.metadata.subtitle=a.subtitle?a.subtitle:"",d.metadata.images=a.images?a.images:[],b.program?(d.contentId=b.program.assetId,d.empPayload={assetId:b.program.assetId,programId:b.program.programId,channelId:b.program.channelId}):b.asset&&(d.contentId=b.asset.assetId,d.empPayload={assetId:b.asset.assetId}),d.customData=d.empPayload,this.assetMetadata_=d.metadata,n.empPlayer.log("changeMediaInformation",d),this.emit(p["default"].METADATA_UPDATED,this.assetMetadata_),this.mediaManager_.setMediaInformation(d,!0)}b.program?this.sendMessage_({type:r.PROGRAM_CHANGED,data:b}):b.asset&&this.sendMessage_({type:r.ASSET_CHANGED,data:b}),setTimeout(function(){c.sendStatus_()},1e3)},a.prototype.sendMessage_=function(a,b){return n.empPlayer.log("sendMessage",a,b),this.isConnected_&&this.messageBus_?void(b?this.messageBus_.getCastChannel(b).send(JSON.stringify(a)):this.messageBus_.broadcast(JSON.stringify(a))):void this.emit("sendmessage",a)},a.prototype.sendStatus_=function(a,b){n.empPlayer.log("sendStatus",a,b),this.isConnected_&&this.messageBus_&&(a?this.mediaManager_.sendStatus(a,b,!0):this.mediaManager_.broadcastStatus(!0))},g(a,[{key:"state",get:function(){return this.state_}},{key:"isChromecast",get:function(){return this.isChromecast_}},{key:"version",get:function(){return"2.79.0"}},{key:"player",get:function(){return this.player_}}]),a}();u.Events=p["default"],u.ReceiverStates=s,u.empPlayer=n.empPlayer,"function"==typeof a&&a.amd?a("empReceiver",[],function(){return u}):"object"==typeof d&&"object"==typeof c&&(c.exports=u),d["default"]=u,c.exports=d["default"]},{"./controls/receiver-control-bar.js":21,"./emp-receiver-events.js":24,"./external.js":26,"es6-mixins":4,events:8,"global/window":7}],26:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("global/window"),f=d(e),g=void 0,h=void 0,i=void 0;f["default"].EMP_DEBUG_LOG?(g=f["default"].videojs,h=f["default"].empPlayer,i=f["default"].empShaka):(g=a("video.js"),f["default"].videojs=g,h=a("empplayer2-dev/dist/js/emp-player.js"),f["default"].empPlayer=h,i=a("empplayer2-dev/dist/js/emp-shaka.js"));var j=g;c.videojs=j;var k=h;c.empPlayer=k;var l=i;c.empShaka=l},{"empplayer2-dev/dist/js/emp-player.js":2,"empplayer2-dev/dist/js/emp-shaka.js":3,"global/window":7,"video.js":14}]},{},[23])(23)});
//# sourceMappingURL=emp-receiver-app.min.js.map