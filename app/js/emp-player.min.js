/**
 * @license
 * EMP-Player 2.2.136-573 
 * Copyright Ericsson, Inc. <https://www.ericsson.com/>
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.empPlayer=t()}(this,function(){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function c(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t,i){return(a=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);n=new(Function.bind.apply(e,n));return i&&s(n,i.prototype),n}).apply(null,arguments)}function t(e){var n="function"==typeof Map?new Map:void 0;return(t=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,i)}function i(){return a(e,arguments,r(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),s(i,e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function u(e,t){var i;if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator])return(i=e[Symbol.iterator]()).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}var y="undefined"!=typeof window?window:void 0!==v?v:"undefined"!=typeof self?self:{},p=y.videojs,I=new function(){this.ENDED="ended",this.ERROR="error",this.LOADED_DATA="loadeddata",this.TIMESHIFT_CHANGE="timeshiftchange",this.DURATION_CHANGE="durationchange",this.LOADED_METADATA="loadedmetadata",this.SEEKING="seeking",this.TIME_UPDATE="timeupdate",this.USER_ACTIVE="useractive",this.USERIN_ACTIVE="userinactive",this.VOLUME_CHANGE="volumechange",this.LOAD_START="loadstart",this.CAN_PLAY="canplay",this.PLAYING="playing",this.WAITING="waiting",this.SEEKED="seeked",this.ABORT="abort",this.PLAY="play",this.PAUSE="pause",this.DISPOSE="dispose",this.MODE_CHANGE="modechange",this.CHANGE="change",this.ADD_TRACK="addtrack",this.REMOVE_TRACK="removetrack",this.METRIC_CHANGED="metricchanged",this.RECOVERABLE_ASSET_ERROR="recoverableasseterror",this.BITRATE_CHANGED="bitratechanged",this.CLOSE="close",this.READY="ready",this.RESIZE="resize",this.TAP="tap",this.CLICK="click",this.FOCUS="focus",this.BLUR="blur",this.BEFORE_MODAL_OPEN="beforemodalopen",this.MODAL_OPEN="modalopen",this.BEFORE_MODAL_CLOSE="beforemodalclose",this.MODAL_CLOSE="modalclose",this.BEFORE_MODAL_FILL="beforemodalfill",this.MODAL_FILL="modalfill",this.BEFORE_MODAL_EMPTY="beforemodalempty",this.MODAL_EMPTY="modalempty",this.CAN_PLAY_THROUGH="canplaythrough",this.FIRST_PLAY="firstplay",this.PROGRESS="progress",this.SUSPEND="suspend",this.EMPTIED="emptied",this.STALLED="stalled",this.RATE_CHANGE="ratechange",this.TEXT_TRACK_CHANGE="texttrackchange",this.TRACK_CHANGE="trackchanged",this.POSTER_CHANGE="posterchange",this.KEY_DOWN="keydown",this.KEY_UP="keyup",this.MOUSE_DOWN="mousedown",this.MOUSE_MOVE="mousemove",this.MOUSE_UP="mouseup",this.TOUCH_START="touchstart",this.TOUCH_MOVE="touchmove",this.TOUCH_END="touchend",this.TOUCH_LEAVE="touchleave",this.TOUCH_CANCEL="touchcancel",this.FULLSCREEN_CHANGE="fullscreenchange",this.ENTER_FULL_WINDOW="enterFullWindow",this.EXIT_FULL_WINDOW="exitFullWindow",this.CONTROLS_ENABLED="controlsenabled",this.CONTROLS_DISABLED="controlsdisabled",this.USING_NATIVE_CONTROLS="usingnativecontrols",this.USING_CUSTOM_CONTROLS="usingcustomcontrols",this.SLIDER_ACTIVE="slideractive",this.SLIDER_INACTIVE="sliderinactive",this.ENTITLEMENT_CHANGE="entitlementchange",this.ENTITLEMENT_LOAD_START="entitlementloadstart",this.PLAYER_CREATED="playercreated",this.RESTARTING="restarting",this.AD_TIMELINE_CHANGED="adtimelinechanged",this.CHROMECAST_CASTING="chromecastcasting",this.CHROMECAST_STOPPED="chromecaststopped",this.CHROMECAST_JOIN="chromecastjoin",this.STOPPED="stopped",this.READY_TO_PLAY="readytoplay",this.PROGRAM_CHANGED="programchanged",this.ASSET_CHANGED="assetchanged",this.SEGMENT_MISSING="segmentmissing",this.AIRPLAY_START="airplayStart",this.REPLAY="replay",this.DOWNLOAD_PROGRESS="downloadprogress",this.DRM_SESSION_UPDATE="drmsessionupdate",this.PIP_START="pipStart",this.PLAYLIST_CHANGE="playlistchange",this.CC_QUE_CHANGE="ccquechange"},d=Object.prototype.toString,m=function(e){return _(e)?Object.keys(e):[]};function g(t,i){m(t).forEach(function(e){return i(t[e],e)})}function f(i){for(var e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return Object.assign?Object.assign.apply(Object,[i].concat(t)):(t.forEach(function(e){e&&g(e,function(e,t){i[t]=e})}),i)}function _(e){return!!e&&"object"==typeof e}function T(e){return _(e)&&"[object Object]"===d.call(e)&&e.constructor===Object}function E(e){return"string"==typeof e||e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e)}function A(t){var i={assetId:void 0,programId:void 0,channelId:void 0};try{i=JSON.parse(t)}catch(e){i.assetId=t}return i}function b(e){var t;return e=Array.isArray(e)?(t=[],e.forEach(function(e){e=b(e),Array.isArray(e)?t=t.concat(e):_(e)&&t.push(e)}),t):"string"==typeof e&&e.trim()?[{src:e}]:_(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[e]:[]}function S(e,t){e=e.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function C(e){return new RegExp(/^.*\//).exec(e)[0]}function P(e,t){var i;if(e&&0<e.length){i=e[0];for(var n=0;n<e.length;n++)if(e[n].url&&"LANDSCAPE"===e[n].orientation){i=e[n];break}for(var r=0;r<e.length;r++)if(e[r].url&&e[r].type===t)return e[r];if(i)switch(t){case"chromecast":155!==i.width&&-1===i.url.indexOf("?")&&((i=f({},i)).width=155,i.height=100,i.url=i.url+"?w=155");break;case"thumbnail":50!==i.width&&-1===i.url.indexOf("?")&&((i=f({},i)).width=50,i.height=50,i.url=i.url+"?w=50")}return i}}var w={UNKNOWN:100,LOAD_ASSET:101,ENTITLEMENT:102,ENTITLEMENT2:103,SHAKA_TECH:200,HLS_TECH:300,CHROMECAST_TECH:500,HLS_MSE_TECH:1e4,DASHIF_TECH:2e4,SMOOTH_TECH:3e4},x=function(r){function s(e,t,i){var n;return void 0===t&&(t=w.UNKNOWN),void 0===i&&(i=null),(n=r.call(this)||this).code=t,E(e)?n.message=e:e.message&&(n.message=e.message),n.status=i,Error.captureStackTrace&&Error.captureStackTrace(h(n),s),n}return c(s,r),o(s,[{key:"codes",get:function(){return w}}]),s}(t(Error)),D=!1,O=function(){D&&k(null,arguments)};y.EMP_DEBUG_LOG&&(O=y.console&&y.console.log&&console.log.bind(console)||function(){});var L=O;function k(e,t){var i=Array.prototype.slice.call(t),t=function(){},t=y.console||{log:t,warn:t,error:t,trace:t};e?i.unshift(e.toUpperCase()+":"):e="log",i.unshift("EMPPlayer:"),t[e].apply?t[e].apply(t,i):t[e](i.join(" "))}L.history=[],L.error=function(){k("error",arguments)},L.warn=function(){k("warn",arguments)},L.debug=function(){k("debug",arguments)},y.EMP_DEBUG_LOG&&(oe=function(){},L.debug=y.console&&y.console.debug&&console.debug.bind(console)||oe,L.warn=y.WARN=y.console&&y.console.warn&&console.warn.bind(console)||oe,L.error=y.ERROR=y.console&&y.console.error&&console.error.bind(console)||oe),L.setLogToBrowserConsole=function(e){void 0===e&&(e=!1),D=e};var N=1;function R(e,t,i){function n(){return t.apply(e,arguments)}return t.guid||(t.guid=N++),n.guid=i?i+"_"+t.guid:t.guid,n}function M(t,i){var n=Date.now();return function(){var e=Date.now();i<=e-n&&(t.apply(void 0,arguments),n=e)}}var B=p.getComponent("MenuItem"),H=p.getComponent("Component"),G=function(n){function e(e,t){var i=t.bitrate;return t.label=0===i?"auto":Math.max(0,Math.round(i/1e3))+" kbps",t.selected=0===i,(t=n.call(this,e,t)||this).bitrate=i,t.bitrateChangedBind=t.bitrateChanged.bind(h(t)),t.player_.on(I.BITRATE_CHANGED,t.bitrateChangedBind),t}c(e,n);var t=e.prototype;return t.handleClick=function(){this.player_.bitrate(this.bitrate)},t.dispose=function(){this.player_.off(I.BITRATE_CHANGED,this.bitrateChangedBind),n.prototype.dispose.call(this)},t.bitrateChanged=function(e,t){this.el()&&(0===this.bitrate?this.selected(t.auto):this.selected(!t.auto&&t.bitrate===this.bitrate))},e}(B);H.registerComponent("BitrateMenuItem",G);var U=p.getComponent("MenuButton"),F=p.getComponent("Component"),j=function(r){function e(e,t){var i=r.call(this,e,t)||this;i.el_.setAttribute("aria-label","Bitrate menu"),i.hide();var n=R(h(i),i.update);return i.player_.on(I.LOADED_DATA,n),i.player_.on(I.CHROMECAST_CASTING,n),i.player_.on(I.ENDED,function(){return i.hide()}),i.player_.on(I.PLAYING,function(){i.items&&1<i.items.length&&"EmpHLS"!==i.player_.techName_&&i.show()}),i.player_.on(I.DISPOSE,function(){this.player_.on(I.LOADED_DATA,n)}),i}c(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-bitrate-button "+r.prototype.buildCSSClass.call(this)},t.createItems=function(e){void 0===e&&(e=[]);var t=this.player_.bitrates();if(!t||1===t.length||"EmpHLS"===this.player_.techName_)return this.hide(),e;0<t.length&&e.push(new G(this.player_,{selectable:!0,bitrate:0}));for(var i=0;i<t.length;i++){var n=t[i];e.push(new G(this.player_,{selectable:!0,bitrate:n}))}return this.show(),e},e}(U);j.prototype.controlText_="Bitrate",F.registerComponent("BitrateButton",j);var V=void 0!==v?v:"undefined"!=typeof window?window:{},W="undefined"!=typeof document?document:(W=V["__GLOBAL_DOCUMENT_CACHE@4"])||(V["__GLOBAL_DOCUMENT_CACHE@4"]={}),q=W;var K=function(e){for(var t="",i=0;i<arguments.length;i++)t+=e[i].replace(/\n\r?\s*/g,"")+(arguments[i+1]||"");return t};function Y(e,t){if(!e||!t)return"";if("function"!=typeof y.getComputedStyle)return e.currentStyle[t]||"";e=y.getComputedStyle(e);return e?e[t]:""}function z(){var e,t,i=(e=["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],t=t||e.slice(0),e.raw=t,e);return z=function(){return i},i}function X(){return q===y.document&&void 0!==q.createElement}function $(e,i,t,n){void 0===e&&(e="div"),void 0===i&&(i={}),void 0===t&&(t={});var r,s=q.createElement(e);return Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(L.warn(K(z(),e,t)),s.setAttribute(e,t)):"textContent"===e?J(s,t):s[e]=t}),Object.getOwnPropertyNames(t).forEach(function(e){s.setAttribute(e,t[e])}),n&&(r=s,function(e){"function"==typeof e&&(e=e());return(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),_(t=e)&&1===t.nodeType||_(t=e)&&3===t.nodeType?e:"string"==typeof e&&/\S/.test(e)?q.createTextNode(e):void 0;var t}).filter(function(e){return e})}(n).forEach(function(e){return r.appendChild(e)})),s}function J(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function Z(e,t){return e&&(function(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className))}var Q={bitrates:function(e){return e.tech_&&void 0!==e.tech_.bitrates?e.techGet_("bitrates"):[]},bitrate:function(e,t){return e.tech_&&void 0!==e.tech_.bitrate?(void 0!==t&&e.techCall_("bitrate",t),e.techGet_("bitrate")):0},canRestart:function(e){return!e.tech_||void 0===e.tech_.canRestart||e.techGet_("canRestart")},restart:function(e,t,i){e.currentSource()&&(e.options_.startTime=0,e.options_.absoluteStartTime=void 0,e.previousAbsoluteStartTime=void 0,e.options_.autoplay||(e.options_.autoplay=!0,e.one("play",function(){e.options_.autoplay=!1})),e.trigger(I.RESTARTING),i?(e.options_.absoluteStartTime=i,e.options_.useLastViewedOffset=!1):e.options_.useLastViewedOffset=t,e.trigger(I.REPLAY))},getSelectedAudioTrack:function(e){for(var t=e.audioTracks(),i=t.length;i--;){var n=t[i];if(n.enabled)return n.language}return null},getSelectedTextTrack:function(e){for(var t=e.textTracks(),i=t.length;i--;){var n=t[i];if("showing"===n.mode)return n.language}return null},loadAsset:function(e,t,i,n,r){void 0===r&&(r=function(){});n={assetId:t,programId:i,channelId:n};e.one(I.LOADED_DATA,function(){r(e.entitlement)}),e.startResetAndReloadTimer_&&e.startResetAndReloadTimer_(),e.src({type:"video/emp",src:JSON.stringify(n)})},currentAsset:function(e,t,i,n){if(!t&&!i&&!n){var r=e.cache_.source;return r&&r.src&&"video/emp"===r.type&&!r.streamInfo?A(r.src):r&&r.assetId?{assetId:r.assetId,programId:r.programId,channelId:r.channelId}:null}L("Update currentAsset",t,i,n),"EmpCast"===e.techName_?e.cache_.source={type:"video/emp",src:JSON.stringify({assetId:t,programId:i,channelId:n})}:e.cache_.source&&"video/emp"===e.cache_.source.type?e.cache_.source.src=JSON.stringify({assetId:t,programId:i,channelId:n}):e.cache_.source&&e.cache_.source.assetId?(e.cache_.source.assetId=t,e.cache_.source.programId=i,e.cache_.source.channelId=n):e.cache_.source={type:"video/emp",src:JSON.stringify({assetId:t,programId:i,channelId:n})},"EmpCast"===e.techName_&&(e.cache_.sources=[e.cache_.source])},getAbsoluteTime:function(e){if(!e.tech_||void 0===e.tech_.getAbsoluteTime)return new Date(0);var t=this.getServerTime(e),i=e.tech_.getAbsoluteTime(t);return"EmpCast"!==e.techName_&&(t=this.getEntitlement(e),i&&t&&t.isStaticCachupAsLive?i=new Date(i.getTime()+t.streamInfo.start.getTime()):t&&t.isDynamicCachupAsLive&&"HLS"===e.streamType&&(i=new Date(1e3*e.tech_.baseCurrentTime()+t.streamInfo.start.getTime()))),i&&i.getTime?i:new Date(0)},getPlayheadTime:function(e){e=this.getAbsoluteTime(e);return e?e.getTime():0},timeBehindLive:function(e){if(!e.tech_||void 0===e.tech_.timeBehindLive)return 0;var t=0,i=this.getServerTime(e),n=this.getEntitlement(e);return(t=n&&n.isStaticCachupAsLive?(i-this.getPlayheadTime(e))/1e3:e.tech_.timeBehindLive(i))!==1/0&&t?Math.round(t):0},liveDelay:function(e){var t=0;return this.isLive(e)&&(e.tech_&&void 0!==e.tech_.liveDelay?t=e.tech_.liveDelay():!this.getEntitlement(e)&&"HLS"===e.streamType||(t=(this.getServerTime(e)-this.getSeekTimerange(e).end)/1e3)),parseFloat(t+"").toFixed(2)},stop:function(e,t){e.stopProgramService&&e.stopProgramService(),e.sourceChanging_=!1,e.cache_.sources=[],e.tech_&&void 0!==e.tech_.stop?(e.techCall_("stop",t),e.techCall_("stopTrackingCurrentTime")):(e.techCall_("stopTrackingCurrentTime"),t&&t())},timeShiftEnabled:function(e){return!e.tech_||void 0===e.tech_.timeShiftEnabled||e.techGet_("timeShiftEnabled")},baseCurrentTime:function(e){return e.tech_&&void 0!==e.tech_.baseCurrentTime?e.techGet_("baseCurrentTime"):e.currentTime()},baseDuration:function(e){return e.tech_&&void 0!==e.tech_.duration?e.techGet_("duration"):0},startTimeLive:function(e){if(!e.tech_||void 0===e.tech_.startTimeLive)return 0;var t=this.getServerTime(e),i=e.tech_.startTimeLive(t),t=this.getEntitlement(e);return t&&t.isDynamicCachupAsLive&&"HLS"===e.streamType&&(i=t.streamInfo.referenceTime),t&&t.isStaticCachupAsLive&&"EmpCast"!==e.techName_&&(i=t.streamInfo.referenceTime),i},driftingTime:function(e){if(!e.tech_||!this.isLive(e)||"EmpShaka"!==e.techName_)return NaN;var t=this.getEntitlement(e);if(!t)return NaN;e=e.tech_.getPresentationStartTime(),e=(t.streamInfo.referenceTime-e)/1e3;return Math.round(e)},isLive:function(e){return!(!e.tech_||void 0===e.tech_.live)&&e.techGet_("live")},isCatchupAsLive:function(e){var t=this.getEntitlement(e);return!this.isLive(e)&&t&&t.live},getBitrate:function(e){return e.tech_&&void 0!==e.tech_.getBitrate?e.techGet_("getBitrate"):0},duration:function(e,t){return e.tech_&&void 0!==e.tech_.duration?(e.duration(t),e.techGet_("duration")):e.duration(t)},techVersion:function(e){return e.tech_&&void 0!==e.tech_.techVersion?e.techGet_("techVersion"):"2.x.x"},canSeekTo:function(e,t){if(!1===this.timeShiftEnabled(e)||!e.hasStarted())return!1;var i=this.getEntitlement(e);return!(i&&e.cache_&&!1===i.ffEnabled&&e.cache_.currentTime<=t)&&!(i&&e.cache_&&!1===i.rwEnabled&&e.cache_.currentTime>=t)},remainingTime:function(e){if(e.tech_&&void 0!==e.tech_.remainingTime)return e.techGet_("remainingTime");if(!e.tech_||void 0===e.tech_.seekable||e.seeking())return L.warn("No tech_.seekable"),0;var t=e.techGet_("seekable").end(0);return t===1/0||0===t?1/0:t-e.currentTime()},casting:function(e,t){return!(!e.castPlugin||!e.castPlugin().canOverride("Cast"))&&(e.cache_.sources=t,e.cache_.source=t[0],e.castPlugin().cast(),!0)},setAbsoluteTime:function(e,t){if(e.tech_&&void 0!==e.tech_.setAbsoluteTime){var i=this.getServerTime(e);if("EmpCast"!==e.techName_){var n=this.getEntitlement(e);if(n&&n.isStaticCachupAsLive){if(t.getTime()<n.streamInfo.start.getTime())L("setAbsoluteTime","playPreviousProgram"),this.playProgram(e,t),t=0;else{if(t.getTime()>=n.streamInfo.end.getTime())return L("setAbsoluteTime","playNextProgram"),void this.playProgram(e,t);t=t.getTime()-n.streamInfo.start.getTime()}return void e.techCall_("setCurrentTime",t/1e3)}if(n&&n.isDynamicCachupAsLive)if(t.getTime()<n.streamInfo.start.getTime()){if(L("setAbsoluteTime","playPreviousProgram"),this.playProgram(e,t),"HLS"===e.streamType)return void e.techCall_("setCurrentTime",0);t=new Date(n.streamInfo.start.getTime())}else if("HLS"===e.streamType)return t-=n.streamInfo.start.getTime(),void e.techCall_("setCurrentTime",t/1e3)}e.techCall_("setAbsoluteTime",{date:t,nowDate:i})}else{t=(t.getTime()-new Date(0))/1e3;e.currentTime(t)}},gotoLive:function(e){var t,i,n,r;e.sourceChanging_?L("gotoLive ignore sourceChanging"):(t=this.getEntitlement(e),n=e.programService().currentProgram,i=1e3*this.timeBehindLive(e)+this.getPlayheadTime(e),this.getIsProgramEvent(e)&&n&&t&&t.live&&i+5e3>=n.end.getTime()?L("gotoLive ignore, livepoint is beyond event program end"):t&&!t.live&&e.isProgramEvent?L("gotoLive ignore, event program is not live"):e.tech_.gotoLive?e.techCall_("gotoLive"):t&&!t.timeshiftEnabled?(n=this.currentAsset(e))&&n.channelId&&e.startPlayback(null,n.channelId,null):t&&t.isDynamicCachupAsLive?this.setAbsoluteTime(e,new Date(e.getServerTime())):t&&t.isStaticCachupAsLive?(r=this.currentAsset(e))&&r.channelId&&e.startPlayback(null,r.channelId,null):this.isLive(e)?(r=e.seekable().end(0),e.currentTime(r)):L.warn("Not suppoted for VOD"))},setPlayheadTime:function(e,t){this.setAbsoluteTime(e,new Date(t))},supportsEpgProgramChange:function(e){if(e.tech_&&void 0!==e.tech_.supportsEpgProgramChange)return e.techGet_("supportsEpgProgramChange")},program:function(e){return e.tech_&&void 0!==e.tech_.program?e.techGet_("program"):null},playPreviousProgram:function(n,r){if(!n.sourceChanging_)return n.isProgramEvent?(L("playPreviousProgram ignore, isProgramEvent"),void n.gotoBeginning()):void(n.programService&&(n.sourceChanging_=!0,n.programService().getPreviousProgram(function(e,t){var i;t?(n.sourceChanging_=!1,L.warn("playPreviousProgram",t&&t.messsage?t.messsage:t)):(i={},r?(i.playFrom="startTime",(t=new Date(e.endTime)).setSeconds(t.getSeconds()-30),i.startTime=t):i.playFrom="beginning",n.startPlayback(e.assetId,e.channelId,e.programId,i))})));L("playPreviousProgram ignore, sourceChanging")},playNextProgram:function(i){i.sourceChanging_||i.isProgramEvent?L("playNextProgram ignore"):i.programService&&i.programService().currentProgram?this.getServerTime(i)>i.programService().currentProgram.end.getTime()&&(i.sourceChanging_=!0,i.programService().getNextProgram(function(e,t){t?(i.sourceChanging_=!1,L.warn("playNextProgram",t&&t.messsage?t.messsage:t)):(t={playFrom:"beginning"},i.startPlayback(e.assetId,e.channelId,e.programId,t))})):L.warn("playNextProgram No Current Program")},playProgram:function(i,n){i.sourceChanging_?L("playProgram ignore sourceChanging"):i.programService&&(i.sourceChanging_=!0,i.programService().getProgram(n,function(e,t){t?(i.sourceChanging_=!1,L.warn("getProgram",t)):((t={playFrom:"startTime"}).startTime=n,i.startPlayback(e.assetId,e.channelId,e.programId,t))}))},getServerTime:function(e){return e.programService&&e.programService()&&e.programService().exposure?e.programService().exposure.getCachedServerTime():Date.now()},getEntitlement:function(e){if(e.programService)return e.programService().entitlement();if(e.tech_){e=e.tech_.options_;if(e&&e.source&&e.source.playSessionId)return e.source}return null},getIsProgramEvent:function(e){return!!e.programService&&e.programService().isProgramEvent},getSeekTimerange:function(e){var t={start:0,end:0};if(!e.tech_||void 0===e.tech_.seekable||e.seeking())return t;var i,n,r=e.techGet_("seekable");return r&&0<r.length&&(n=0,(i=this.getEntitlement(e))&&i.isDynamicCachupAsLive&&"HLS"===e.streamType&&(n=i.streamInfo.referenceTime),t.start=1e3*r.start(r.length-1)+n,t.end=1e3*r.end(r.length-1)+n,"EmpCast"===e.techName_&&(n=this.liveDelay(e),t.end>this.getServerTime(e)-1e3*n&&(t.end=this.getServerTime(e)-1e3*n))),t},getBufferedTimerange:function(e){var t={start:0,end:0};if(!e.tech_||void 0===e.tech_.buffered||e.seeking())return t;e=e.techGet_("buffered");return e&&0<e.length&&(t.start=Math.round(1e3*e.start(e.length-1)),t.end=Math.round(1e3*e.end(e.length-1))),t},setTechProgram:function(e,t){e.tech_&&void 0!==e.tech_.program&&e.techCall_("program",t)},setTechVOD:function(e,t){e.tech_&&void 0!==e.tech_.VOD&&e.techCall_("VOD",t)}},ee=p.getComponent("Button"),te=p.getComponent("Component"),ie=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.updateShowing(),i.on(i.player(),I.PLAYING,function(){return i.updateShowing()}),i.on(i.player(),I.DURATION_CHANGE,function(){return i.updateShowing()}),i.on(i.player(),I.TIME_UPDATE,function(){return i.timeUpdate()}),i.on(i.player(),I.ENDED,function(){return i.hide()}),i}c(e,n);var t=e.prototype;return t.createEl=function(){var e=n.prototype.createEl.call(this,"button",{className:"emp-live-control vjs-control vjs-button"});return this.contentEl_=$("div",{className:"emp-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},t.updateShowing=function(){var e=this.player().getProgramDetails(),t=1e3*this.player().timeBehindLive()+this.player().playheadTime();this.player().timeShiftEnabled()&&!(Q.getIsProgramEvent(this.player())&&e&&this.entitlement&&this.entitlement.live&&t+5e3>=e.end.getTime())&&(this.player().isLive()&&!Q.getIsProgramEvent(this.player())||this.entitlement&&this.entitlement.isStaticCachupAsLive&&!Q.getIsProgramEvent(this.player())||this.entitlement&&this.entitlement.live)?this.show():this.hide()},t.timeUpdate=function(){var e;(this.player().isLive()||this.entitlement&&this.entitlement.isStaticCachupAsLive)&&(e=this.player().timeBehindLive(),this.player().isLive()&&e<20?this.addClass("emp-live-edge"):this.removeClass("emp-live-edge"))},t.handleClick=function(){this.player().gotoLive()},o(e,[{key:"entitlement",get:function(){return Q.getEntitlement(this.player())}}]),e}(ee);function ne(e,t){void 0===t&&(t=e),e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),s=Math.floor(t/60%60),t=Math.floor(t/3600);return!isNaN(e)&&e!==1/0||(r=n=i="-"),1e3<r&&(r=new Date(3600*r*1e3).getHours()),(r=0<r||0<t?r+":":"")+(n=((r||10<=s)&&n<10?"0"+n:n)+":")+(i=i<10?"0"+i:i)}te.registerComponent("EmpLiveDisplay",ie);var re=p.getComponent("Component"),se=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.on(i.player(),I.PLAYING,function(){return i.updateVisibility()}),i.on(i.player(),I.DURATION_CHANGE,function(){return i.updateVisibility()}),i.on(i.player(),I.SEEKED,function(){return i.updateVisibility()}),i.addClass("vjs-hidden"),i}c(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"emp-ad-marker"})},t.buildCSSClass=function(){return"emp-ad-marker "+n.prototype.buildCSSClass.call(this)},t.updateVisibility=function(){var e,t;this.player_.duration()&&((t=this.options_.element).offset+t.duration<this.player_.currentTime()?this.addClass("emp-ad-past"):this.removeClass("emp-ad-past"),1<=(e=t.offset/this.player_.duration())&&(e=1),1<=(t=t.duration/this.player_.duration())&&(t=1),this.el_.style.left=(100*e).toFixed(2)+"%",this.el_.style.width=(100*t).toFixed(2)+"%",this.show())},t.dispose=function(){n.prototype.dispose.call(this)},e}(re);re.registerComponent("EmpMarker",se);var O=p.getComponent("Component"),oe=function(i){function e(e,t){return i.call(this,e,t)||this}return c(e,i),e.prototype.update=function(n,r){var s=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e=s.player_.duration(),t=ne(r*e,e);s.el_.style.left=n.width*r+"px";var i=s.getChild("timeTooltip");i&&(s.player_.noEPG()&&s.player_.isLive()&&(t=ne(s.player_.startTimeLive()/1e3+r*e,e)),i.update(n,r,t))})},e}(p.getComponent("MouseTimeDisplay"));O.registerComponent("MouseTimeDisplay",oe);var ae=y.navigator&&y.navigator.userAgent||"",B=/AppleWebKit\/([\d.]+)/i.exec(ae),H=(B&&parseFloat(B.pop()),y.sessionStorage&&"true"==String(y.sessionStorage.getItem("TEST_SMARTTV")||"false")),U=/iPad/i.test(ae),le=0<=y.navigator.userAgent.indexOf("CrKey"),F=/iPhone/i.test(ae)&&!U,j=/iPod/i.test(ae),V=F||U||j,ee=((W=ae.match(/OS (\d+)_/i))&&W[1]&&W[1],/Android/i.test(ae)),te=function(){var e=ae.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),ce=(ee&&/webkit/i.test(ae),/Win/i.test(y.navigator.platform),/Firefox/i.test(ae),/Edge/i.test(ae)),ie=/Edg/i.test(ae)&&!ce,re=!ie&&!ce&&/Chrome/i.test(ae),he=((O=ae.match(/Chrome\/(\d+)/))&&O[1]&&parseFloat(O[1]),/MSIE\s8\.0/.test(ae),!(oe=(oe=/MSIE\s(\d+)\.\d/.exec(ae))&&parseFloat(oe[1]))&&/Trident\/7.0/i.test(ae)&&/rv:11.0/.test(ae)&&(oe=11),oe),B=/Tizen/i.test(ae),F=/webOS/i.test(ae)||/Web0S/i.test(ae)||/WebOS/i.test(ae)||/NetCast/i.test(ae),ue=/SmartTV/i.test(ae)||F||B||H,pe=(/Safari/i.test(ae),ce||null!==he);X()&&("ontouchstart"in y||y.DocumentTouch&&(y.document,y.DocumentTouch)),X()&&0 in y.document.createElement("video").style;function de(){try{var e=y.navigator,t=y.screen,i=e.mimeTypes.length;return i+=e.userAgent.replace(/\D+/g,""),i+=e.plugins.length,i+=t.height||"",i+=t.width||"",i+=t.pixelDepth||""}catch(e){}return 0}var U=y.navigator&&y.navigator.userAgent||"",me=/MSAppHost/i.test(U)||/Xbox/i.test(U)||/XboxOne/i.test(U)||y.DEBUG_UWP,ge={left:[37,214,205,140],right:[39,213,206,141],up:[38,211,203,138],down:[40,212,204,139],accept:[13,142,195],return:[8,143,196]},j=p.getComponent("Component"),W=function(e){function t(){return e.apply(this,arguments)||this}c(t,e);var i=t.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(e,t){var i,n=this.getChild("timeTooltip");n&&(i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.player_.noEPG()&&this.player_.isLive()&&(i+=this.player_.startTimeLive()/1e3),n.updateTime(e,t,i))},t}(j);W.prototype.options_={children:[]},V||ee||W.prototype.options_.children.push("timeTooltip"),j.registerComponent("PlayProgressBar",W);te=p.getComponent("Component"),O=function(i){function e(e,t){t=i.call(this,e,t)||this;return t.partEls_=[],t.on(e,"progress",t.update),t}c(e,i);var t=e.prototype;return t.createEl=function(){return i.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})},t.dispose=function(){this.partEls_=null,i.prototype.dispose.call(this)},t.update=function(){var e=this.player_.liveTracker,t=this.player_.buffered(),i=this.player_.seekable(),n=this.player_.duration(),r=this.player_.bufferedEnd(),s=this.partEls_,o=this.$(".vjs-control-text-loaded-percentage");e&&e.isLive()?n=e.seekableEnd():this.player_.isLive()&&t.length&&i.length&&(r=t.end(t.length-1),n=i.end(i.length-1));function a(e,t,i){return t=100*(1<=(t=e/t||0)?1:t),i&&(t=t.toFixed(2)),t+"%"}this.el_.style.width=a(r,n,!0),J(o,a(r,n,!0));for(var l=0;l<t.length;l++){var c=t.start(l),h=t.end(l),u=s[l];u||(u=this.el_.appendChild($()),s[l]=u),u.style.left=a(c,r),u.style.width=a(h-c,r,!0)}for(var p=s.length;p>t.length;p--)this.el_.removeChild(s[p-1]);s.length=t.length},e}(te);te.registerComponent("LoadProgressBar",O);var oe=p.getComponent("Component"),F=p.getComponent("Slider"),fe=le||y.EMP_DEBUG_CHROMECAST?1e3:30,B=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.markers=[],i.update=M(R(h(i),i.update),fe),i.on(e,I.TIME_UPDATE,i.update),i.on(e,I.ENDED,i.handleEnded),i.on(e,I.AD_TIMELINE_CHANGED,i.updateMarkers),i.updateInterval=null,i.on(e,["playing"],function(){i.updateInterval&&(i.clearInterval(i.updateInterval),i.updateInterval=null),le||y.EMP_DEBUG_CHROMECAST||(i.updateInterval=i.setInterval(function(){i.requestAnimationFrame(function(){i.update()})},fe))}),i.on(e,["ended","pause","waiting"],function(){i.updateInterval&&(i.clearInterval(i.updateInterval),i.updateInterval=null)}),i.on(e,["timeupdate","ended"],i.update),i}c(e,n);var t=e.prototype;return t.updateMarkers=function(e,t){for(var i=u(this.markers);!(n=i()).done;){var n=n.value;this.removeChild(n)}if(t&&t.timeline)for(var r=u(t.timeline.getAllElements());!(s=r()).done;){var s=s.value;"advert"===s.type&&(s=new se(this.player_,{element:s}),this.markers.push(s),this.addChild(s),s.updateVisibility())}},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update_=function(e,t){var i=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[ne(e,i),ne(i,i)],"{1} of {2}")),le||y.EMP_DEBUG_CHROMECAST||this.bar.update(function(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(Y(e,"height"))),i.width||(i.width=parseFloat(Y(e,"width"))),i}}(this.el_),t)},t.update=function(){var e=n.prototype.update.call(this);return this.update_(this.getCurrentTime_(),e),e},t.getCurrentTime_=function(){return this.player_.scrubbing()?(this.player_.getCache().currentTime,this.player_.getCache().currentTime):(this.player_.getCache().currentTime=this.player_.currentTime(),this.player_.currentTime())},t.handleEnded=function(){this.update_(this.player_.duration(),1);for(var e=u(this.markers);!(t=e()).done;){var t=t.value;this.removeChild(t)}},t.getPercent=function(){var e=this.player_.seekable(),t=0;0<e.length&&(t=e.start(0));t=(this.getCurrentTime_()-t)/this.player_.duration();return 1<=t?1:t},t.handleMouseDown=function(e){this.player_.scrubbing(!0),n.prototype.handleMouseDown.call(this,e)},t.handleMouseMove=function(e){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1);var i=this.player_.seekable(),e=0;0<i.length&&(e=i.start(0)),this.setCurrentTime(t+e)},t.setCurrentTime=function(e){var t=0===(this.player_.src()?this.player_.src():"").indexOf("offline:"),i=this.player_.buffered().start(0),n=this.player_.buffered().end(0);!(t||i<=e&&e<=n)&&this.player_.scrubbing()?this.player_.getCache().currentTime=e:this.player_.currentTime(e),this.player_.getCache().currentTime=e},t.throttleSetCurrentTime=function(e){null!==this.seekTimeoutId_&&y.clearTimeout(this.seekTimeoutId_);var t=this.player_.buffered().start(0),i=this.player_.buffered().end(0);t<=e&&e<=i?(this.player_.scrubbing(!1),this.player_.currentTime(e),this.player_.getCache().currentTime=e):(this.player_.scrubbing(!0),this.player_.getCache().currentTime=e,this.seekTimeoutId_=y.setTimeout(this.onSeekInputTimeout_.bind(this,e),1e3))},t.onSeekInputTimeout_=function(e){this.seekTimeoutId_=null,this.player_.scrubbing(!1),this.player_.currentTime(e),this.player_.getCache().currentTime=e},t.enable=function(){n.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},t.disable=function(){n.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},t.handleMouseUp=function(e){n.prototype.handleMouseUp.call(this,e),this.player_.scrubbing(!1),this.setCurrentTime(this.player_.getCache().currentTime)},t.stepForward=function(){this.throttleSetCurrentTime(this.player_.getCache().currentTime+5)},t.stepBack=function(){this.throttleSetCurrentTime(this.player_.getCache().currentTime-5)},t.handleAction=function(){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyPress=function(e){if(me&&-1!==ge.accept.indexOf(e.which))return e.preventDefault(),void this.handleAction(e);32===e.which||13===e.which?(e.preventDefault(),this.handleAction(e)):n.prototype.handleKeyPress&&n.prototype.handleKeyPress.call(this,e)},e}(F);function ve(e){var t;void 0!==(t=e)&&"function"==typeof t.then&&e.then(null,function(e){})}B.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},he&&!(8<he)||V||ee||B.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),B.prototype.playerEvent="timeupdate",oe.registerComponent("SeekBar",B);H=p.getComponent("Button"),re=p.getComponent("Component"),ie=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.shouldRestart_=!0,i.updateShowing(),i.on(i.player(),I.LOADED_METADATA,i.updateShowing),i.on(i.player(),I.PLAYING,function(){i.shouldRestart_=!1,i.updateShowing()}),i.on(i.player(),I.ERROR,function(){i.shouldRestart_=!0}),e.on(I.PROGRAM_CHANGED,function(){return i.updateEnabled()}),e.on(I.DURATION_CHANGE,function(){return i.updateEnabled()}),i.updateEnabled(),i}c(e,n);var t=e.prototype;return t.updateEnabled=function(){this.entitlement&&!this.entitlement.rwEnabled||!this.player().timeShiftEnabled()?(this.disable(),this.controlText("Restart restricted")):(this.enable(),this.show(),this.controlText("Restart"))},t.buildCSSClass=function(){return"emp-restart-control "+n.prototype.buildCSSClass.call(this)},t.updateShowing=function(){this.player().canRestart()?this.show():this.hide()},t.handleClick=function(){var e;!0===this.shouldRestart_?this.player_.restart():(this.player_.scrubbing(!0),e=!this.player_.paused(),this.player_.pause(),this.player_.currentTime(.1),this.player_.scrubbing(!1),e&&ve(this.player_.play()))},o(e,[{key:"entitlement",get:function(){return Q.getEntitlement(this.player())}}]),e}(H);ie.prototype.controlText_="Restart",re.registerComponent("EmpRestartButton",ie);U=p.getComponent("Button"),j=p.getComponent("Component"),W=function(n){function e(e,t){var i;return t=f({seconds:30},t),(i=n.call(this,e,t)||this).controlText("Forward "+t.seconds+"s"),e.on(I.TIMESHIFT_CHANGE,function(){return i.updateEnabled()}),e.on(I.PROGRAM_CHANGED,function(){return i.updateEnabled()}),e.on(I.DURATION_CHANGE,function(){return i.updateEnabled()}),i.updateEnabled(),i}c(e,n);var t=e.prototype;return t.updateEnabled=function(){this.player().timeShiftEnabled()?this.entitlement&&!this.entitlement.ffEnabled?(this.disable(),this.controlText("Forward restricted")):(this.enable(),this.show(),this.controlText("Forward "+this.options_.seconds+"s")):this.hide()},t.buildCSSClass=function(){return"emp-forward-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(){var e;this.player().ended()||(this.player().scrubbing(!0),e=this.player().currentTime()+this.options_.seconds,this.player().currentTime(e),this.player().scrubbing(!1),this.player().vttThumbnails()&&this.player().vttThumbnails().hasThumbnail()&&this.player().vttThumbnails().showThumbnailHolder(!0))},o(e,[{key:"entitlement",get:function(){return Q.getEntitlement(this.player())}}]),e}(U);W.prototype.controlText_="Forward",j.registerComponent("EmpForwardButton",W);te=p.getComponent("Button"),O=p.getComponent("Component"),F=function(n){function e(e,t){var i;return t=f({seconds:30},t),(i=n.call(this,e,t)||this).controlText("Rewind "+t.seconds+"s"),e.on(I.TIMESHIFT_CHANGE,function(){return i.updateEnabled()}),e.on(I.PROGRAM_CHANGED,function(){return i.updateEnabled()}),e.on(I.DURATION_CHANGE,function(){return i.updateEnabled()}),i.updateEnabled(),i}c(e,n);var t=e.prototype;return t.updateEnabled=function(){this.player().timeShiftEnabled()?this.entitlement&&!this.entitlement.rwEnabled?(this.disable(),this.controlText("Rewind restricted")):(this.enable(),this.show(),this.controlText("Rewind "+this.options_.seconds+"s")):this.hide()},t.buildCSSClass=function(){return"emp-rewind-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(){var e;this.player().ended()||(this.player().scrubbing(!0),e=this.player().currentTime()-this.options_.seconds,this.player().currentTime(e),this.player().scrubbing(!1),this.player().vttThumbnails()&&this.player().vttThumbnails().hasThumbnail()&&this.player().vttThumbnails().showThumbnailHolder(!0))},o(e,[{key:"entitlement",get:function(){return Q.getEntitlement(this.player())}}]),e}(te);F.prototype.controlText_="Rewind",O.registerComponent("EmpRewindButton",F);V=p.getComponent("Button"),ee=p.getComponent("Component"),oe=function(i){function e(e,t){return i.call(this,e,t)||this}c(e,i);var t=e.prototype;return t.buildCSSClass=function(){return"emp-reload-control "+i.prototype.buildCSSClass.call(this)},t.handleClick=function(){this.player_.restart()},e}(V);oe.prototype.controlText_="Reload",ee.registerComponent("EmpReloadButton",oe);var B=p.getComponent("Component"),ye=le||y.EMP_DEBUG_CHROMECAST?1e3:30,H=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.mode_=t.mode||"remainingTime",i.throttledUpdateContent=M(R(h(i),i.updateContent),ye),i.on(e,I.TIME_UPDATE,i.throttledUpdateContent),i.on(e,I.DURATION_CHANGE,i.updateContent),e.on(I.ENDED,function(){i.hide()}),e.on(I.PLAYING,function(){i.show()}),i}c(e,n);var t=e.prototype;return t.createEl=function(){var e="emp-time vjs-time-control vjs-remaining-time vjs-control";this.options_&&"remainingTime"===this.options_.mode?e+=" emp-remaining-time":e+=" emp-currentTime-time";e=n.prototype.createEl.call(this,"div",{className:e});return this.contentEl_=$("div",{className:"emp-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span>0:00"},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},t.updateContent=function(){var e,t,i;"currentTime"===this.mode_?(e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),i=this.localize("Current Time"),this.player_.noEPG()&&this.player_.isLive()&&(e+=this.player_.startTimeLive()/1e3),(e=ne(e,this.player_.duration()))!==this.formattedTime_&&(this.formattedTime_=e,this.contentEl_.innerHTML='<span class="vjs-control-text">'+i+"</span>"+e)):(i=this.player_.duration())&&(e=this.localize("Remaining Time"),4294967295<i?(t="")!==this.formattedTime_&&(this.formattedTime_=t,this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span>"+t):((i=this.player_.remainingTime())<0&&(i=0),(t=ne(i))!==this.formattedTime_&&(this.formattedTime_=t,this.contentEl_.innerHTML=0===i?'<span class="vjs-control-text">'+e+"</span>":'<span class="vjs-control-text">'+e+"</span>"+t)))},e}(B);B.registerComponent("EmpTimeDisplay",H),B.registerComponent("EmpTimeDisplay2",H);re=p.getComponent("Button"),ie=p.getComponent("Component"),U=function(r){function e(e,t,i){var n=r.call(this,e,t,i)||this;return n.el_.setAttribute("aria-label","Stop Playback"),e.on(I.TIMESHIFT_CHANGE,function(){return n.onTimeshift()}),e.on(I.DURATION_CHANGE,function(){return n.onTimeshift()}),e.on(I.PLAYING,function(){return n.onTimeshift()}),e.on(I.ENDED,function(){return n.hide()}),n}c(e,r);var t=e.prototype;return t.onTimeshift=function(){this.player()&&(this.player().timeShiftEnabled()&&this.player().duration()!==1/0?this.hide():this.show())},t.handleClick=function(){this.player()&&this.player().stop()},t.buildCSSClass=function(){return"emp-stop-control emp-icon-stop "+r.prototype.buildCSSClass.call(this)},e}(re);U.prototype.kind_="stop",U.prototype.controlText_="Stop",ie.registerComponent("EmpStopButton",U);j=p.getComponent("PlayToggle"),W=p.getComponent("Component"),te=function(r){function e(e,t,i){var n=r.call(this,e,t,i)||this;return n.el_.setAttribute("aria-label","Play Toggle"),e.on(I.TIMESHIFT_CHANGE,function(){return n.onTimeshift()}),e.on(I.DURATION_CHANGE,function(){return n.onTimeshift()}),e.on(I.PLAYING,function(){return n.onTimeshift()}),n}c(e,r);var t=e.prototype;return t.onTimeshift=function(){this.player()&&(this.player().timeShiftEnabled()&&this.player().duration()!==1/0?this.show():this.hide())},t.handleClick=function(e){r.prototype.handleClick.call(this,e)},t.buildCSSClass=function(){return""+r.prototype.buildCSSClass.call(this)},e}(j);te.prototype.kind_="playToggle",te.prototype.controlText_="playToggle",W.registerComponent("EmpPlayToggle",te);O=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.addClass("vjs-hidden"),e.ready(function(){i.initAirPlay()}),i}c(e,n);var t=e.prototype;return t.initAirPlay=function(){var t=this.player();y.WebKitPlaybackTargetAvailabilityEvent&&t.el().getElementsByTagName("video")[0].addEventListener("webkitplaybacktargetavailabilitychanged",function(e){switch(e.availability){case"available":L("Airplay available"),t.on("loadeddata",function(){t.controlBar.childNameIndex_.hasOwnProperty("AirplayToggle")&&(this.entitlement&&this.entitlement.airplayBlocked?t.controlBar.airplayToggle.hide():t.controlBar.airplayToggle.show())});break;case"not-available":L("Airplay not-available")}})},t.buildCSSClass=function(){return"vjs-airplay-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(){this.entitlement&&this.entitlement.airplayBlocked?L("Airplay Blocked"):(this.player().el().getElementsByTagName("video")[0].webkitShowPlaybackTargetPicker(),this.player().trigger(I.AIRPLAY_START))},o(e,[{key:"entitlement",get:function(){return Q.getEntitlement(this.player())}}]),e}(p.getComponent("Button"));O.prototype.controlText_="Airplay",p.registerComponent("AirplayToggle",O);F=p.getComponent("Button"),V=p.getComponent("Component"),ee=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.controlText("Next program"),i.updateShowing(),i.on(i.player(),I.PLAYING,function(){return i.updateShowing()}),i.on(i.player(),I.DURATION_CHANGE,function(){return i.updateShowing()}),i.on(i.player(),I.PROGRAM_CHANGED,function(e,t){return i.updateShowing(t&&t.program)}),i}c(e,n);var t=e.prototype;return t.updateShowing=function(e){e=e||this.player().getProgramDetails(),!this.player().noEPG()&&this.entitlement&&e&&!Q.getIsProgramEvent(this.player())?(this.show(),this.enable()):this.hide(),e&&Date.now()<e.end.getTime()&&this.disable(),this.entitlement&&(this.entitlement.isDynamicCachupAsLive||this.entitlement.isStaticCachupAsLive)||this.hide()},t.buildCSSClass=function(){return"emp-next-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(){this.player().ended()||this.player().playNextProgram()},o(e,[{key:"entitlement",get:function(){return Q.getEntitlement(this.player())}}]),e}(F);ee.prototype.controlText_="Next",V.registerComponent("EmpNextButton",ee);oe=p.getComponent("Button"),B=p.getComponent("Component"),H=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.controlText("Previous Program"),i.updateShowing(),i.on(i.player(),I.PLAYING,function(){return i.updateShowing()}),i.on(i.player(),I.DURATION_CHANGE,function(){return i.updateShowing()}),i.on(i.player(),I.PROGRAM_CHANGED,function(){return i.updateShowing()}),i}c(e,n);var t=e.prototype;return t.updateShowing=function(){var e=this.player().getProgramDetails();!this.player().noEPG()&&this.entitlement&&e&&!Q.getIsProgramEvent(this.player())?this.show():this.hide(),this.entitlement&&(this.entitlement.isDynamicCachupAsLive||this.entitlement.isStaticCachupAsLive)||this.hide()},t.buildCSSClass=function(){return"emp-previous-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(){this.player().ended()||this.player().playPreviousProgram()},o(e,[{key:"entitlement",get:function(){return Q.getEntitlement(this.player())}}]),e}(oe);H.prototype.controlText_="Previous",B.registerComponent("EmpPreviousButton",H);re=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.addClass("vjs-hidden"),e.ready(function(){i.initPip()}),i}c(e,n);var t=e.prototype;return t.initPip=function(){var e,t=this;this.isPipSupported_?(e=this.player(),L("picture-in-picture supported"),e.on(I.LOADED_DATA,function(){t.toggleShowing_()}),e.on(I.TRACK_CHANGE,function(){t.toggleShowing_()}),e.on(I.CHROMECAST_CASTING,function(){t.videoEl_&&t.exitPictureInPicture_()})):L("picture-in-picture not supported")},t.exitPictureInPicture_=function(){if(this.isPipSupported_){if(q.pictureInPictureElement===this.videoEl_)return q.exitPictureInPicture(),!0;if("picture-in-picture"===this.videoEl_.webkitPresentationMode)return this.videoEl_.webkitSetPresentationMode("inline"),!0}return!1},t.toggleShowing_=function(){var e=this.player();e.controlBar.childNameIndex_.hasOwnProperty("PipToggle")&&(e.isAudioOnly()||e.isCasting()?e.controlBar.pipToggle.hide():e.controlBar.pipToggle.show())},t.buildCSSClass=function(){return"vjs-pip-button "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(){var e;this.videoEl_&&(e=this.player(),this.exitPictureInPicture_()||(this.isPipSupported_?!e.isPlaying()||e.isAudioOnly()||e.isCasting()||("pictureInPictureEnabled"in q?this.videoEl_.requestPictureInPicture():this.videoEl_.webkitSetPresentationMode("picture-in-picture"),e.trigger(I.PIP_START)):L("picture-in-picture not supported")))},o(e,[{key:"isPipSupported_",get:function(){return!!this.videoEl_&&(this.videoEl_.webkitSupportsPresentationMode&&"function"==typeof this.videoEl_.webkitSetPresentationMode||"pictureInPictureEnabled"in q)}},{key:"videoEl_",get:function(){return this.player().el()?this.player().el().getElementsByTagName("video")[0]:null}}]),e}(p.getComponent("Button"));re.prototype.controlText_="picture-in-picture",p.registerComponent("PipToggle",re);var ie=p.getComponent("MenuItem"),U=p.getComponent("Component"),_e=function(i){function e(e,t){return L("PlaylistMenuItem","create"),t.label=t.source&&t.source.title?t.source.title:function(e){var t=e;try{var i=e.split("/"),n=i.pop().split("#")[0].split("?")[0];(t=n.substr(0,n.lastIndexOf("."))||n)&&0!==n.lastIndexOf(".")||(t=(n=i.pop().split("#")[0].split("?")[0]).substr(0,n.lastIndexOf("."))||n)}catch(e){}return t}(t.source.src),(e=i.call(this,e,t)||this).source=t.source,e.selected(e.source.selected),e}return c(e,i),e.prototype.handleClick=function(){this.player().playList().currentSource(this.source)},o(e,[{key:"itemAsset",get:function(){return A(this.source.src)}}]),e}(ie);U.registerComponent("PlaylistMenuItem",_e);j=p.getComponent("MenuButton"),W=p.getComponent("Component"),te=function(i){function e(e,t){t=i.call(this,e,t)||this;return t.el_.setAttribute("aria-label","Playlist menu"),t.hide(),t.loadedDataBind=t.loadedData.bind(h(t)),t.player_.on(I.LOADED_DATA,t.loadedDataBind),t.playListChangeBind=t.playListChange.bind(h(t)),t.player_.on(I.PLAYLIST_CHANGE,t.playListChangeBind),t}c(e,i);var t=e.prototype;return t.playListChange=function(){this.update()},t.loadedData=function(){this.items&&0<this.items.length&&this.show()},t.dispose=function(){this.player_.off(I.LOADED_DATA,this.loadedDataBind),this.player_.off(I.PLAYLIST_CHANGE,this.playListChangeBind),i.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playlist-button vjs-icon-chapters "+i.prototype.buildCSSClass.call(this)},t.createItems=function(e){void 0===e&&(e=[]);var t=this.player_.playList?this.player_.playList().sources_:[];if(!t||1===t.length)return this.hide(),e;for(var i=0;i<t.length;i++){var n=t[i];e.push(new _e(this.player_,{selectable:!0,source:n}))}return this.show(),e},e}(j);te.prototype.controlText_="Playlist",W.registerComponent("PlaylistButton",te);O=p.getComponent("ControlBar"),F=p.getComponent("Component"),V=function(e){function t(){return e.apply(this,arguments)||this}return c(t,e),t}(O);function Te(e,t){return Array.isArray(e)?Ee(e):void 0===e||void 0===t?Ee():Ee([[e,t]])}function Ee(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:be.bind(null,"start",0,e),end:be.bind(null,"end",1,e)}}function be(e,t,i,n){return void 0===n&&(L.warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument."),n=0),function(e,t,i){if(t<0||i<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+i+").")}(e,n,i.length-1),i[n][t]}V.prototype.options_={loadEvent:"play",children:{empPlayToggle:{},empReloadButton:{},empStopButton:{},empPreviousButton:{},empRewindButton:{},empForwardButton:{},empNextButton:{},volumePanel:{inline:!1},empTimeDisplay:{mode:"currentTime"},timeDivider:{},durationDisplay:{},empLiveDisplay:{},progressControl:{},empTimeDisplay2:{mode:"remainingTime"},customControlSpacer:{},empRestartButton:{},playbackRateMenuButton:{},chaptersButton:{},bitrateButton:{},audioTrackButton:{},subsCapsButton:{},playlistButton:{},pipToggle:{},airplayToggle:{},fullscreenToggle:{}}},F.registerComponent("ControlBar",V);var ee=p.getComponent("Component"),Se="#222",Ce={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Ie(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}oe=function(n){function e(i,e,t){t=n.call(this,i,e,t)||this;return i.on("loadstart",R(h(t),t.toggleDisplay)),i.on("texttrackchange",R(h(t),t.updateDisplay)),i.on("loadstart",R(h(t),t.preselectTrack)),i.ready(R(h(t),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)this.hide();else if("DASH"!==i.streamType&&"HLS"!==i.streamType&&"EmpCast"!==i.techName_){i.on("fullscreenchange",R(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}else this.hide()})),t}c(e,n);var t=e.prototype;return t.preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},r=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o=0;o<r.length;o++){var a=r[o];s&&s.enabled&&s.language===a.language?i=a.kind!==s.kind&&i||a:s&&!s.enabled?t=e=i=null:a.default&&("descriptions"!==a.kind||e?a.kind in n&&!t&&(t=a):e=a)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},t.toggleDisplay=function(){"DASH"===this.player_.streamType||"HLS"===this.player_.streamType||"EmpCast"===this.player_.techName_||this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){"function"==typeof y.WebVTT&&y.WebVTT.processCues(y,[],this.el_)},t.removeStyles=function(e){e=q.getElementById(e);return e&&q.getElementsByTagName("head")[0].removeChild(e),e},t.writeStyles=function(e,t){var i=this.removeStyles(e);(i=q.createElement("style")).type="text/css",i.id=e,i.innerHTML=t,q.getElementsByTagName("head")[0].appendChild(i)},t.getStyle=function(e){var t,i,n,r,s,o,a,l,c,h;return e.color&&(t="color: "+e.color),e.textOpacity&&(t="color: "+Ie(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(i="background-color: "+e.backgroundColor),e.backgroundOpacity&&(i="background-color: "+Ie(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(h=e.windowOpacity?"outline: "+Ie(e.windowColor,e.windowOpacity)+" solid 10px":"outline: "+e.windowColor+" solid 10px"),e.edgeStyle&&("dropshadow"===e.edgeStyle?n="text-shadow: 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, black 0.1em 0.1em 0.2em":"raised"===e.edgeStyle?n="text-shadow: 1px 1px #222, 2px 2px #222, 3px 3px "+Se:"depressed"===e.edgeStyle?n="text-shadow: 1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+Se:"uniform"===e.edgeStyle&&(n="text-shadow: 0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+Se)),e.fontPercent&&1!==e.fontPercent&&(r="font-size: "+e.fontPercent+"em",s="height: auto",o="top: auto",a="bottom: 2px"),e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?l="font-variant: small-caps":c="font-family: "+Ce[e.fontFamily]),(t?t+"; ":"")+(i?i+"; ":"")+(n?n+"; ":"")+(r?r+"; ":"")+(s?s+"; ":"")+(o?o+"; ":"")+(a?a+"; ":"")+(l?l+"; ":"")+(c?c+"; ":"")+(h?h+"; ":"")},t.getSafariStyle=function(e){var t;return e.backgroundColor&&(t="background-color: "+e.backgroundColor),e.backgroundOpacity&&(t="background-color: "+Ie(e.backgroundColor||"#000",e.backgroundOpacity)),t?"video::-webkit-media-text-track-display-backdrop {"+t+" !important;overflow: visible !important;}":""},t.updateDisplay=function(){if(this.player_.textTrackSettings){var e=this.player_.options_.textTrackStyle||this.player_.textTrackSettings.getValues(),t="styles_cue";if("DASH"===this.player_.streamType||"EmpHLS"===this.player_.techName_||"HLS"===this.player_.streamType){var i=this.getStyle(e);return"EmpHLS"===this.player_.techName_?this.writeStyles(t,"video::cue {"+i+"}\n"+this.getSafariStyle(e)):this.writeStyles(t,"video::cue {"+i+"}"),void this.clearDisplay()}this.removeStyles(t)}else this.writeStyles("style_no_texttrack_settings",".vjs-texttrack-settings {display: none;}")},t.updateForTrack=function(){},e}(ee);ee.registerComponent("TextTrackDisplay",oe);var B=p.getComponent("Component"),H=p.getComponent("ModalDialog"),Ae="vjs-text-track-settings",re=["#000","Black"],ie=["#00F","Blue"],U=["#0FF","Cyan"],j=["#0F0","Green"],W=["#F0F","Magenta"],te=["#F00","Red"],O=["#FFF","White"],F=["#FF0","Yellow"],V=["1","Opaque"],ee=["0.5","Semi-Transparent"],oe=["0","Transparent"],Pe={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[re,O,te,j,ie,F,W,U]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[oe,ee,V]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[O,re,te,j,ie,F,W,U]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]],default:4},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.25","25%"],["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["2.50","250%"]],default:3,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[V,ee]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[oe,ee,V]}};function we(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}Pe.windowColor.options=Pe.backgroundColor.options;H=function(n){function e(e,t){var i;return t.temporary=!1,(i=n.call(this,e,t)||this).updateDisplay=R(h(i),i.updateDisplay),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=$("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===t.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),g(Pe,function(e){i.on(i.$(e.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}c(e,n);var t=e.prototype;return t.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},t.createElSelect_=function(e,i,t){var n=this;void 0===i&&(i=""),void 0===t&&(t="label");var e=Pe[e],r=e.id.replace("%s",this.id_);return["<"+t+' id="'+r+'" class="'+("label"===t?"vjs-label":"")+'">',this.localize(e.label),"</"+t+">",'<select aria-labelledby="'+(""!==i?i+" ":"")+r+'">'].concat(e.options.map(function(e){var t=r+"-"+e[1];return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+(""!==i?i+" ":"")+r+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return $("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return $("div",{className:'vjs-track-settings-font">',innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var e=this.localize("restore all settings to the default values");return $("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var i,n,e,r=this;return n=function(e,t,i){var n,t=(n=r.$(t.selector),t=t.parser,we(n.options[n.options.selectedIndex].value,t));return void 0!==t&&(e[i]=t),e},void 0===(e={})&&(e=0),m(i=Pe).reduce(function(e,t){return n(e,i[t],t)},e)},t.setValues=function(i){var n=this;g(Pe,function(e,t){!function(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if(we(e.options[n].value,i)===t){e.selectedIndex=n;break}}(n.$(e.selector),i[t],e.parser)})},t.setDefaults=function(){var i=this;g(Pe,function(e){var t=e.hasOwnProperty("default")?e.default:0;i.$(e.selector).selectedIndex=t})},t.restoreSettings=function(){var e;try{e=JSON.parse(y.localStorage.getItem(Ae))}catch(e){L.warn(e)}e&&this.setValues(e)},t.saveSettings=function(){var e=this.getValues();if(this.player_.options_.textTrackStyle=void 0,"EmpCast"===this.player_.techName_&&this.player_.techCall_("sendTextTrackStyle",e),this.options_.persistTextTrackSettings)try{Object.keys(e).length?y.localStorage.setItem(Ae,JSON.stringify(e)):y.localStorage.removeItem(Ae)}catch(e){L.warn(e)}},t.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(q,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,e=e&&e.captionsButton;t?t.focus():e&&e.focus()},e}(H);B.registerComponent("TextTrackSettings",H);B=p.getComponent("Component"),H=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.assetMetadata=null,i.on(i.player(),I.ENDED,function(){i.clearAll()}),i.on(i.player(),I.ABORT,function(){i.clearAll()}),i.on(i.player(),I.CHROMECAST_CASTING,function(){i.clearAll()}),i.on(i.player(),I.PLAYING,function(){i.getAssetMetadata_(),i.show()}),i.on(i.player(),I.PROGRAM_CHANGED,function(e,t){(t&&t.program?t.program.programId:null)?(i.assetMetadata=i.player().programService().extractAssetMetadata(t.program.asset),i.assetMetadata.channelInfo=t.program.channelInfo,i.updateMediaInformation_(i.assetMetadata)):i.player().options().mediaInfo&&i.player().options().mediaInfo.title||i.clearAll()}),i.on(i.player(),I.ASSET_CHANGED,function(e,t){t&&t.asset?(i.assetMetadata=i.player().programService().extractAssetMetadata(t.asset),i.updateMediaInformation_(i.assetMetadata)):i.player().options().mediaInfo&&i.player().options().mediaInfo.title||i.clearAll()}),i.on(i.player(),I.DISPOSE,function(){i.clearAll()}),i.fillEl(),i}c(e,n);var t=e.prototype;return t.getAssetMetadata_=function(){var e=this.player().getProgramDetails(),t=e?e.asset:null;(t=t||this.player().getAssetDetails())?(this.assetMetadata=this.player().programService().extractAssetMetadata(t),this.assetMetadata.channelInfo=e?e.channelInfo:null,this.updateMediaInformation_(this.assetMetadata)):(e=this.player().options()).mediaInfo&&this.updateMediaInformation_({title:e.mediaInfo.title,subtitle:e.mediaInfo.subtitle,images:e.mediaInfo.artworkUrl?[{url:e.mediaInfo.artworkUrl}]:[],channelInfo:{images:e.mediaInfo.logoUrl?[{url:e.mediaInfo.logoUrl}]:[]}})},t.clearAll=function(){this.hide(),this.clearEl(),this.assetMetadata=null},t.buildCSSClass=function(){return"emp-mediainfo-bar "+n.prototype.buildCSSClass.call(this)},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"emp-mediainfo-bar"})},t.updateMediaInformation_=function(e){var t,i,n,r,s;this.el_&&(this.show(),this.player().options().mediaInfo&&(this.fillEl(),t=this.el_.getElementsByClassName("emp-media-artwork"),i=this.el_.getElementsByClassName("emp-media-logo"),n=this.el_.getElementsByClassName("emp-media-title"),r=this.el_.getElementsByClassName("emp-media-subtitle"),s=this.el_.getElementsByClassName("emp-media-text"),t=t.length?t[0]:null,i=i.length?i[0]:null,n=n.length?n[0]:null,r=r.length?r[0]:null,s=s.length?s[0]:null,n&&(n.innerHTML=e.title||""),r&&(r.innerHTML=e.subtitle||""),s&&(e.subtitle||e.title?s.style.display="block":s.style.display="none"),t&&e.images&&0<e.images.length?(s=P(e.images,"chromecast"),t.style.backgroundImage='url("'+s.url+'")',t.style.display="block"):t&&(t.style.display="none",t.style.backgroundImage="none"),i&&e.channelInfo&&0<e.channelInfo.images.length?(e=P(e.channelInfo.images,"thumbnail"),i.style.backgroundImage='url("'+e.url+'")',i.style.display="block"):i&&(i.style.display="none",i.style.backgroundImage="none"),this.player().userActive(!0)))},t.clearEl=function(){this.el_&&(this.el_.innerHTML="")},t.fillEl=function(){var e,t=this.player().options();t.mediaInfo?(e="",t.mediaInfo.artworkEnable&&(e+='<div class="emp-media-artwork"></div>'),(t.mediaInfo.titleEnable||t.mediaInfo.subtitleEnable)&&(e+='<div class="emp-media-text">'),t.mediaInfo.titleEnable&&(e+='<div class="emp-media-title"></div>'),t.mediaInfo.subtitleEnable&&(e+='<div class="emp-media-subtitle"></div>'),(t.mediaInfo.titleEnable||t.mediaInfo.subtitleEnable)&&(e+="</div>"),t.mediaInfo.logoEnable&&(e+='<div class="emp-media-logo"></div>'),this.el_.innerHTML=e):this.el_.innerHTML=""},e}(B);H.prototype.controlText_="MediaInfo",B.registerComponent("EmpMediaInfoBar",H);H=function(n){function e(e,t){var i=n.call(this,e,t)||this;return L("vttThumbnailsPlugin","create"),i.options_=t||{src:"sprites/sprites.vtt"},i.enabled_=!0,i.registeredEvents={},i.scale=1,i.on(e,[I.FIRST_PLAY],function(){i.resetPlugin(),i.initializeThumbnails(),L("vttThumbnailsPlugin","FIRST_PLAY")}),i.on(e,[I.USERIN_ACTIVE],function(){i.thumbnailHolder&&(i.thumbnailHolder.style.opacity="0")}),i.on(e,[I.ENDED],function(){i.thumbnailHolder&&(i.thumbnailHolder.style.opacity="0")}),i}c(e,n);var t=e.prototype;return t.src=function(e){this.resetPlugin(),this.options_.src=e,this.initializeThumbnails()},t.detach=function(){this.resetPlugin()},t.options=function(e){if(!e)return this.options_;this.options_=p.mergeOptions(this.options_,e)},t.resetPlugin=function(){this.thumbnailHolder&&this.thumbnailHolder.parentNode.removeChild(this.thumbnailHolder),this.progressBar&&(this.progressBar.removeEventListener("mouseenter",this.registeredEvents.progressBarMouseEnter),this.progressBar.removeEventListener("mouseleave",this.registeredEvents.progressBarMouseLeave),this.progressBar.removeEventListener("mousemove",this.registeredEvents.progressBarMouseMove)),delete this.registeredEvents.progressBarMouseEnter,delete this.registeredEvents.progressBarMouseLeave,delete this.registeredEvents.progressBarMouseMove,delete this.progressBar,delete this.vttData,delete this.thumbnailHolder,delete this.lastStyle},t.initializeThumbnails=function(){var e,t=this;this.options_.src&&this.enabled_&&!this.player.isCasting()&&this.player.currentSource()&&this.player.currentSource().src&&!this.player.currentSource().isDynamicCachupAsLive&&!this.player.currentSource().isStaticCachupAsLive&&"video/emp"!==this.player.currentSource().type&&(e=this.getBaseUrl_(),e=this.getFullyQualifiedUrl(this.options_.src,e),this.getVttFile(e).then(function(e){t.vttData=t.processVtt(e),0<t.vttData.length?t.setupThumbnailElement():L("Empty vttThumbnail file.")}).catch(function(){L("No vttThumbnail file.")}))},t.getBaseUrl_=function(){var e=C(this.player.currentSource().src);return C(e=e.replace(/\/$/,""))},t.getVttFile=function(n){var r=this;return new Promise(function(e,t){var i=new XMLHttpRequest;i.data={resolve:e,reject:t},i.addEventListener("load",r.vttFileLoaded),i.open("GET",n),i.send()})},t.vttFileLoaded=function(){200<=this.status&&this.status<300?this.data.resolve(this.responseText):this.data.reject()},t.setupThumbnailElement=function(){var e,t,i=this;this.player&&!this.player.isDisposed()&&(e=this.player.$(".vjs-mouse-display"),this.progressBar=this.player.$(".vjs-progress-control"),(t=q.createElement("div")).setAttribute("class","vjs-vtt-thumbnail-display"),this.progressBar.appendChild(t),this.thumbnailHolder=t,e&&(t="vjs-hidden",(e=e)&&(e.classList?e.classList.add(t):Z(e,t)||(e.className=(e.className+" "+t).trim()))),this.registeredEvents.progressBarMouseEnter=function(){return i.onBarMouseenter()},this.registeredEvents.progressBarMouseLeave=function(){return i.onBarMouseleave()},this.progressBar.addEventListener("mouseenter",this.registeredEvents.progressBarMouseEnter),this.progressBar.addEventListener("mouseleave",this.registeredEvents.progressBarMouseLeave))},t.onBarMouseenter=function(){var t=this;this.mouseMoveCallback=function(e){t.onBarMousemove(e)},this.registeredEvents.progressBarMouseMove=this.mouseMoveCallback,this.progressBar.addEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.showThumbnailHolder()},t.onBarMouseleave=function(){this.registeredEvents.progressBarMouseMove&&this.progressBar.removeEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.hideThumbnailHolder()},t.getXCoord=function(e,t){var i=e.getBoundingClientRect(),e=q.documentElement;return t-(i.left+(y.pageXOffset||e.scrollLeft||0))},t.onBarMousemove=function(e){this.updateThumbnailStyle(this.getXCoord(this.progressBar,e.clientX),this.progressBar.offsetWidth)},t.getStyleForTime=function(e){for(var t=0;t<this.vttData.length;++t){var i=this.vttData[t];if(e>=i.start&&e<i.end)return i.css}},t.showThumbnailHolder=function(e){this.thumbnailHolder&&(e&&this.updateThumbnailStyle(this.player.currentTime()/this.player.duration()*this.progressBar.offsetWidth,this.progressBar.offsetWidth),this.thumbnailHolder.style.opacity="1")},t.hideThumbnailHolder=function(){this.thumbnailHolder&&(this.thumbnailHolder.style.opacity="0")},t.hasThumbnail=function(){return void 0!==this.thumbnailHolder},t.updateThumbnailStyle=function(e,t){var i=(1-(t-e)/t)*this.player.duration(),n=this.getStyleForTime(i);if(n){i=Math.round((1-(t-e)/t)*t);this.options_.scale?this.scale=this.options_.scale:(r=this.player.currentWidth(),this.scale=r<=300?.3:r/(parseInt(n.width,10)/160*160*5));var r,e="",t="";1!==this.scale&&(r=parseInt(n.height,10),r=Math.round((r*this.scale-r)/2/this.scale),t=" translateY("+(r*=-1)+"px)",i/=this.scale,e="scale("+this.scale+") ");t=e+("translateX("+i+"px)")+t;if(this.thumbnailHolder.style.msTransform=t,this.thumbnailHolder.style.webkitTransform=t,this.thumbnailHolder.style.MozTransform=t,this.thumbnailHolder.style.transform=t,this.thumbnailHolder.style.marginLeft="-"+parseInt(n.width,10)/2+"px",this.thumbnailHolder.style.borderRadius="3px",!this.lastStyle||this.lastStyle!==n)for(var s in this.lastStyle=n)n.hasOwnProperty(s)&&(this.thumbnailHolder.style[s]=n[s])}else this.hideThumbnailHolder()},t.processVtt=function(e){var n=this,r=[];return e.split(/[\r\n][\r\n]/i).forEach(function(e){var t,i;e.match(/([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?( ?--> ?)([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?[\r\n]{1}.*/gi)&&(e=(t=(i=e.split(/[\r\n]/i))[0].split(/ ?--> ?/i))[0],t=t[1],i=i[1],i=n.getVttCss(i),r.push({start:n.getSecondsFromTimestamp(e),end:n.getSecondsFromTimestamp(t),css:i}))}),r},t.getFullyQualifiedUrl=function(e,t){return 0<=e.indexOf("//")?e:0===t.indexOf("//")?[t.replace(/\/$/gi,""),this.trim(e,"/")].join("/"):0<t.indexOf("//")?[this.trim(t,"/"),this.trim(e,"/")].join("/"):e},t.getPropsFromDef=function(e){var t=e.split(/#xywh=/i),e=t[0],t=t[1].match(/[0-9]+/gi);return{x:t[0],y:t[1],w:t[2],h:t[3],image:e}},t.getVttCss=function(e){var t={},i=0<=this.options_.src.indexOf("//")?this.options_.src.split(/([^\/]*)$/gi).shift():this.getBaseUrl_()+this.options_.src.split(/([^\/]*)$/gi).shift();if(!(e=this.getFullyQualifiedUrl(e,i)).match(/#xywh=/i))return t.background='url("'+e+'")',t;e=this.getPropsFromDef(e);return t.background='url("'+e.image+'") no-repeat -'+e.x+"px -"+e.y+"px",t.width=e.w+"px",t.height=e.h+"px",t},t.doconstructTimestamp=function(e){var t=e.split("."),e=t[0].split(":");return{milliseconds:parseInt(t[1],10)||0,seconds:parseInt(e.pop(),10)||0,minutes:parseInt(e.pop(),10)||0,hours:parseInt(e.pop(),10)||0}},t.getSecondsFromTimestamp=function(e){e=this.doconstructTimestamp(e);return parseInt(3600*e.hours+60*e.minutes+e.seconds+e.milliseconds/1e3,10)},t.trim=function(e,t){var i=[" ","\n","\r","\t","\f","\v"," "," "," "," "," "," "," "," "," "," "," "," ","​","\u2028","\u2029","　"].join(""),n=0,r=0;for(e+="",t&&(i=(t+"").replace(/([[\]().?/*{}+$^:])/g,"$1")),n=e.length,r=0;r<n;r++)if(-1===i.indexOf(e.charAt(r))){e=e.substring(r);break}for(r=(n=e.length)-1;0<=r;r--)if(-1===i.indexOf(e.charAt(r))){e=e.substring(0,r+1);break}return-1===i.indexOf(e.charAt(0))?e:""},o(e,[{key:"enabled",get:function(){return this.enabled_},set:function(e){this.enabled_=e}}]),e}(p.getPlugin("plugin"));function xe(e){if(e instanceof xe)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:_(e)&&("number"==typeof e.code&&(this.code=e.code),e.message&&(this.message=e.message),e.status&&(this.status=e.status),f(this,e)),this.message||(this.message=xe.defaultMessages[this.code]||"")}H.VERSION="2.2.136-573",p.getPlugin("vttThumbnails")?p.log.warn('A plugin named "vttThumbnails" already exists.'):p.registerPlugin("vttThumbnails",H),xe.prototype.code=0,xe.prototype.message="",xe.prototype.status=null,xe.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],xe.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var De=0;De<xe.errorTypes.length;De++)xe[xe.errorTypes[De]]=De,xe.prototype[xe.errorTypes[De]]=De;function Oe(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(e){return e.src===t});if(i.length)return i[0].type;for(var n=e.$$("source"),r=0;r<n.length;r++){var s=n[r];if(s.type&&s.src&&s.src===t)return s.type}return function(e){void 0===e&&(e="");e=function(e){if("string"==typeof e){e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(e)return e.pop().toLowerCase()}return""}(e);return Le[e.toLowerCase()]||""}(t)}var Le={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};H=function(i){function e(e,t){e=i.call(this,e,t)||this;return L("PlaylistPlugin",le?"Not on Chromecast":"create"),e.options_=t||{},e.sources_=[],le||(e.playingChangedBind=e.playingChanged.bind(h(e)),e.player.on(I.PLAYING,e.playingChangedBind),e.assetChangedBind=e.assetChanged.bind(h(e)),e.player.on(I.ASSET_CHANGED,e.assetChangedBind),e.programChangedBind=e.programChanged.bind(h(e)),e.player.on(I.PROGRAM_CHANGED,e.programChangedBind),e.onEndedBind=e.onEnded.bind(h(e)),e.player.on(I.ENDED,e.onEndedBind),e.onChromecastQueChangeBind=e.onChromecastQueChange.bind(h(e)),e.player.on(I.CC_QUE_CHANGE,e.onChromecastQueChangeBind)),e}c(e,i);var t=e.prototype;return t.onChromecastQueChange=function(e,t){L("PlaylistPlugin:onChromecastQueChange",t),t&&t.sources?(this.sources_=t.sources,this.player.options_.playlist=!0,this.triggerChange_()):t&&t.contentId?this.selectSource_({assetId:t.contentId}):(this.clear(),this.player.options_.playlist=!1)},t.onEnded=function(){(!this.autoSequence||0<this.sources_.length&&this.index===this.sources_.length-1)&&(L("playlist: ended",this.autoSequence),this.trigger(I.ENDED))},t.playingChanged=function(){var e=(e=this.player.currentAsset())||{assetId:this.player.currentSrc()};this.selectSource_(e)},t.assetChanged=function(e,t){t&&t.asset&&this.selectSource_(t.asset)},t.programChanged=function(e,t){t&&t.program&&this.selectSource_(t.program)},t.clear=function(){this.sources_&&0<this.sources_.length&&(this.sources_=[],this.triggerChange_())},t.replay=function(){this.src(this.src())},t.dispose=function(){L("PlaylistPlugin","dispose"),this.player.off(I.PLAYING,this.playingChangedBind),this.player.off(I.ASSET_CHANGED,this.assetChangedBind),this.player.off(I.PROGRAM_CHANGED,this.programChangedBind),this.player.off(I.ENDED,this.onEndedBind),this.player.off(I.CC_QUE_CHANGE,this.onChromecastQueChangeBind),this.sources_=[],this.component_=null,i.prototype.dispose.call(this)},t.selectSource_=function(e){var t=this.index;this.setSelectedIndex_(-1);for(var i=0;i<this.sources_.length;i++){var n=(n=A(this.sources_[i].src))||{assetId:this.sources_[i].src};if(e&&n&&(n.assetId===e.assetId||n.assetId===e.channelId)){this.setSelectedIndex_(i);break}}t!==this.index&&this.triggerChange_()},t.triggerChange_=function(){this.trigger(I.PLAYLIST_CHANGE),this.player.trigger(I.PLAYLIST_CHANGE)},t.src=function(e){var t=this;if(void 0===e)return this.sources_;if(this.player.isCreated){var i=b(e);if(i.length)if(i.forEach(function(e){e.type||(e.type="video/emp")}),this.sources_=i,"EmpCast"===this.player.techName_){for(var n=0;n<this.sources_.length;n++)if(this.sources_[n].selected||""===this.sources_[n].selected)return this.sources_[n].selected=!0,this.triggerChange_(),void this.player.src(this.sources_);this.sources_[0].selected=!0,this.triggerChange_(),this.player.src(this.sources_)}else{for(var r=0;r<this.sources_.length;r++)if(this.sources_[r].selected||""===this.sources_[r].selected)return this.sources_[r].selected=!0,this.index=r,void this.triggerChange_();this.sources_[0].selected=!0,this.index=0,this.triggerChange_()}else this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)}else this.one(I.PLAYER_CREATED,function(){t.src(e)})},t.next=function(){var e=this.index+1;e<this.sources_.length?this.index=e:L.warn("playlist: playing last source")},t.previous=function(){var e=this.index-1;-1<e?this.index=e:L.warn("playlist: playing first source")},t.setSelectedIndex_=function(e){for(var t=0;t<this.sources_.length;t++)this.sources_[t].selected=!1;-1<e&&(this.sources_[e>=this.sources_.length?this.sources_.length-1:e].selected=!0)},t.getSelectedIndex_=function(){for(var e=0;e<this.sources_.length;e++)if(this.sources_[e].selected)return e;return-1},t.currentSource=function(e){if(void 0===e){for(var t=0;t<this.sources_.length;t++)if(this.sources_[t].selected)return this.sources_[t]}else for(var i=0;i<this.sources_.length;i++){var n=A(this.sources_[i].src),r=A(e.src),n=n||{assetId:this.sources_[i].src};if((r=r||{assetId:this.player.currentSrc()})&&n&&n.assetId===r.assetId)return this.index=i,!0}return!1},o(e,[{key:"autoSequence",get:function(){return!(this.player&&!1===this.player.options_.autosequence)},set:function(e){this.player.options_.autosequence=e}},{key:"length",get:function(){return this.sources_.length}},{key:"index",get:function(){return this.getSelectedIndex_()},set:function(e){var t=this.index;-1<e&&this.sources_.length>e?(this.setSelectedIndex_(e),"EmpCast"!==this.player.techName_?this.player.src(this.sources.slice(e)):this.player.tech_.jumpToItem(e)):L.warn("playlist: index out of bounds",e),t!==this.index&&this.triggerChange_()}},{key:"sources",get:function(){for(var e=[],t=0;t<this.sources_.length;t++)e.push(f({},this.sources_[t]));return e}}]),e}(p.getPlugin("plugin"));H.VERSION="2.2.136-573",p.getPlugin("playList")?p.log.warn('A plugin named "PlaylistPlugin" already exists.'):p.registerPlugin("playList",H);var H=p.getComponent("Player"),ke=p.getComponent("Tech"),Ne=p.getComponent("CaptionSettingsMenuItem");y.vttjs&&y.vttjs.restore(),p.setFormatTime(ne);var Re=function(a){function l(e,t,i){var n;void 0===t&&(t={}),void 0===i&&(i=function(){}),t.absoluteStartTime&&(t.startTime=0),"auto"===(t=f({children:["mediaLoader","PosterImage","textTrackDisplay","loadingSpinner","empMediaInfoBar","controlBar","errorDisplay","textTrackSettings","BigPlayButton"]},t)).techOrder||Array.isArray(t.techOrder)&&1===t.techOrder.length&&"auto"===t.techOrder[0]?t.techOrder=l.AutoTechArray("EmpShaka"):"auto-dashif"===t.techOrder||Array.isArray(t.techOrder)&&1===t.techOrder.length&&"auto-dashif"===t.techOrder[0]?t.techOrder=l.AutoTechArray("EmpDashif"):Array.isArray(t.techOrder)&&(t.techOrder=l.GetValidAutoTechOrder(t.techOrder));var r=l.getTagSettings(e),s=!pe&&!ue;if((t=p.mergeOptions({"entitlement-engine":"EricssonExposure",sources:r.sources||void 0,techOrder:r.techOrder||l.AutoTechArray("EmpShaka"),maxBitrate:r.maxBitrate||0,timeShiftDisabled:r.timeShiftDisabled||!1,useLastViewedOffset:r.useLastViewedOffset||!1,startTime:r.startTime||0,absoluteStartTime:r.absoluteStartTime||void 0,persistTextTrackSettings:r.persistTextTrackSettings||s,textTrackSettings:r.textTrackSettings||s,playFrom:r.playFrom||"defaultBehaviour",minDvrWindow:r.minDvrWindow||120},t)).sources)for(var o=0;o<t.sources.length;o++){t.sources[o]=function(i,n){var r={};return Object.keys(i).forEach(function(e){var t=i[e],e=n[e]||e;r[e]=t}),r}(t.sources[o],{licenseserver:"licenseServer",certificateserver:"certificateServer",playtoken:"playToken",keysystems:"keySystems"}),E(t.sources[o].keySystems)&&(t.sources[o].keySystems=JSON.parse(t.sources[o].keySystems))}return(n=a.call(this,e,t,i)||this).monkeyPatchingTextMenu_(),y.empPlayer&&L.islogToBrowserConsole&&y.empPlayer.setInstance(h(n)),n.previousAbsoluteStartTime_=void 0,n.castPlugin&&n.castPlugin(),n.eme&&n.eme(),t.enableThumbnails&&n.vttThumbnails&&n.vttThumbnails(),n.on(I.ENDED,function(){L("ENDED"),n.ended_=!0,n.sourceChanging_=!1,n.stopProgramService(),n.entitlementExpirationService&&n.entitlementExpirationService().stop(),"EmpCast"!==n.techName_&&!1!==n.options_.autosequence&&n.loadNextSource(),n.yospace&&n.yospace().stop()}),n.on(I.DISPOSE,function(){n.loadNextSrc_=null,n.loadingSrc_&&(clearInterval(n.loadingSrc_),n.loadingSrc_=null),n.sourceChanging_=!1,n.clearResetAndReloadTimer_(),n.stopProgramService(),n.entitlementExpirationService&&n.entitlementExpirationService().stop()}),n.on(I.ERROR,function(){n.loadNextSrc_=null,n.loadingSrc_&&(clearInterval(n.loadingSrc_),n.loadingSrc_=null),n.sourceChanging_=!1,n.clearResetAndReloadTimer_(),n.stopProgramService(),n.entitlementExpirationService&&n.entitlementExpirationService().stop(),n.yospace&&n.yospace().stop()}),n.on(I.CAN_PLAY,function(){n.disableTimeShift(n.options_.timeShiftDisabled)}),n.on(I.LOADED_DATA,function(){n.addClass("vjs-has-loaded-data"),n.autoplay()&&n.addClass("vjs-has-started"),n.ended_=!1,n.paused()&&(n.removeClass("vjs-playing"),n.addClass("vjs-paused")),n.paused()&&n.autoplay()&&(n.handleTechLoadStart_(),!0===n.autoplay()&&n.paused()&&n.manualAutoplay_("any"))}),n.on(I.REPLAY,function(){var e;n.options_.autoplay||(n.options_.autoplay=!0,n.one("play",function(){n.options_.autoplay=!1})),n.playList&&0<n.playList().length?n.playList().replay():n.cache_&&n.cache_.source&&n.cache_.source.yospaceUrl?n.src({src:n.cache_.source.yospaceUrl,type:"application/yospace"}):n.cache_&&n.cache_.source&&n.cache_.source.streamInfo?(e=n.currentAsset(),n.src({type:"video/emp",src:JSON.stringify(e)})):n.cache_&&n.cache_.source&&(n.cache_.source.options&&!n.cache_.source.options.autoplay&&(n.cache_.source.options.autoplay=!0),n.src(n.cache_.source))}),n.on(I.FIRST_PLAY,function(){L("FIRST_PLAY"),n.options_.startTime&&"Html5"===n.techName_&&n.currentTime(n.options_.startTime),n.options_.startTime=0}),n.initialSeekToAbsoluteStartTimeBind=n.initialSeekToAbsoluteStartTime_.bind(h(n)),n.isCreated=!0,n.trigger(I.PLAYER_CREATED),n.ended_=!1,n.sourceChanging_=!1,n}c(l,a);var e=l.prototype;return e.handleTechEnded_=function(){L("handleTechEnded");var e=Q.getEntitlement(this);!this.isProgramEvent&&e&&e.isStaticCachupAsLive?L("Do not end."):(this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended"))},e.monkeyPatchingTextMenu_=function(){var n,r,e,t,i;this.controlBar&&this.controlBar.subsCapsButton&&(n=this.controlBar.subsCapsButton.createItems,(r=this).controlBar.subsCapsButton.createItems=function(){for(var e=n.apply(this,arguments),t=[],i=0;i<e.length;i++)e[i].track&&""!==e[i].track.label&&t.push(e[i]);return t&&1<t.length&&"CaptionSettingsMenuItem"!==t[0].name()&&"EmpHLS"===r.techName_&&r.options_.textTrackSettings?(t.unshift(new Ne(this.player_,{kind:this.label_})),this.hideThreshold_+=1):t&&1<t.length&&"CaptionSettingsMenuItem"===t[0].name()&&"EmpDashif"===r.techName_&&(t.shift(),--this.hideThreshold_),t}),!ce||(e=p.getComponent("TextTrackMenuItem"))&&(t=e.prototype.handleClick,i=this,e.prototype.handleClick=function(){t.apply(this,arguments),i.trigger(I.TRACK_CHANGE),i.trigger(I.TEXT_TRACK_CHANGE)})},e.options=function(e){return e&&("auto"===e.techOrder||Array.isArray(e.techOrder)&&1===e.techOrder.length&&"auto"===e.techOrder[0]?e.techOrder=l.AutoTechArray("EmpShaka"):"auto-dashif"===e.techOrder||Array.isArray(e.techOrder)&&1===e.techOrder.length&&"auto-dashif"===e.techOrder[0]?e.techOrder=l.AutoTechArray("EmpDashif"):Array.isArray(e.techOrder)&&(e.techOrder=l.GetValidAutoTechOrder(e.techOrder)),void 0!==e.startTime&&(e.startTime=parseFloat(e.startTime)||0),void 0!==e.absoluteStartTime&&(e.startTime=0),this.vttThumbnails&&void 0!==e.enableThumbnails&&(this.vttThumbnails().enabled=e.enableThumbnails||!1),this.options_=p.mergeOptions(this.options_,e)),this.options_},e.getTechOptions_=function(){var e={};return f(e,this.options_[this.techName_.toLowerCase()]),f(e,{autoplay:this.options_.autoplay,muted:this.options_.muted,language:this.options_.language,maxBitrate:this.options_.maxBitrate,minDvrWindow:this.options_.minDvrWindow,timeShiftDisabled:this.options_.timeShiftDisabled,useLastViewedOffset:this.options_.useLastViewedOffset,startTime:this.options_.startTime,absoluteStartTime:this.options_.absoluteStartTime,audioLanguage:this.options_.audioLanguage,subtitleLanguage:this.options_.subtitleLanguage,liveDelay:this.options_.liveDelay}),e.source=void 0,e},e.loadTech_=function(e,t){var i=this;a.prototype.loadTech_.call(this,e,t),this.on(this.tech_,I.RECOVERABLE_ASSET_ERROR,this.handleRecoverableError),this.on(this.tech_,I.ERROR,function(e,t){i.player_.error(t)}),this.on(this.tech_,I.TRACK_CHANGE,function(){L("TRACK_CHANGE"),i.player_.trigger(I.TRACK_CHANGE)}),this.on(this.tech_,I.PROGRAM_CHANGED,function(e,t){L("PROGRAM_CHANGED");t=t&&t.program;t&&Q.currentAsset(i,t.assetId,t.programId,t.channelId),t&&i.removeClass("vjs-live"),i.trigger(I.PROGRAM_CHANGED,{program:t}),i.trigger(I.DURATION_CHANGE)}),this.on(this.tech_,I.ASSET_CHANGED,function(e,t){L("ASSET_CHANGED");t=t&&t.asset;t&&Q.currentAsset(i,t.assetId),i.trigger(I.ASSET_CHANGED,{asset:t}),i.trigger(I.DURATION_CHANGE)}),this.on(this.tech_,I.DURATION_CHANGE,function(){i.player_.trigger(I.DURATION_CHANGE)})},e.loadNextSource=function(){if(!this.sourceChanging_)return this.sourceChanging_=!0,this.tech_&&void 0!==this.tech_.loadNextSource?(this.techCall_("loadNextSource"),!0):this.cache_.sources&&1<this.cache_.sources.length?(L("loadNextSource"),this.cache_.sources.shift(),this.src(this.cache_.sources),!0):this.sourceChanging_=!1;L("loadNextSource ignore sourceChanging")},e.setTextTrackStyle=function(e){"EmpCast"===this.techName_?this.techCall_("sendTextTrackStyle",e):(this.options_.textTrackStyle=e,this.trigger(I.TEXT_TRACK_CHANGE))},e.lineUpAsset=function(e,t,i,n,r){t={assetId:e,programId:i,channelId:t};n&&this.options({playFrom:"startTime",absoluteStartTime:n,noPlaylist:r}),this.lineupSource({type:"video/emp",src:JSON.stringify(t)})},e.lineupSource=function(e){this.tech_&&void 0!==this.tech_.lineupSource?this.techCall_("lineupSource",e):this.cache_.sources.push(e)},e.unloadTech_=function(){this.techName_=null,a.prototype.unloadTech_.call(this),this.textTracksJson_=[]},e.stop=function(e){this.analytics&&this.analytics().stop(),this.yospace&&this.yospace().stop(),Q.stop(this,e)},e.getAvalibleTechs_=function(i){return this.options_.techOrder.map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).map(function(e){return[e,ke.getTech(e)]}).filter(function(e){var t=e[0],e=e[1];if(e&&"Html5"!==t&&"EmpCast"!==t&&-1===i.indexOf(t))return e.isSupported()})},e.selectSource=function(e){var t,i=this,n=this.options_.techOrder;this.options_.excludeTechs&&0<this.options_.excludeTechs.length&&(t=this.options_.techOrder.filter(function(e){if(-1===i.options_.excludeTechs.indexOf(e))return!0}),this.options_.techOrder=t);e=a.prototype.selectSource.call(this,e);return this.options_.techOrder=n,e},e.handleRecoverableError=function(e,t){var i=[];this.options_.excludeTechs&&(i=this.options_.excludeTechs.slice(0)),i.push(t.techName);var n=this.getAvalibleTechs_(i);!(!t.source||t.source.licenseServer||t.source.keySystems&&(i=t.source.keySystems,0!==m(i).length)||t.source.protection||le)&&0<n.length&&(L.error("handleRecoverableError",t.techName,t.message),this.analytics&&this.analytics().onError({code:t.error.code,message:t.message,stack:t.error.stack}),this.options_.excludeTechs||(this.options_.excludeTechs=[]),this.options_.excludeTechs.push(t.techName),this.options_.techOrder.length>this.options_.excludeTechs.length)?this.resetAndRestart_(t):(t.error.code&&t.error.message?this.error(t.error):(t.message=t.message||this.localize("Tech error, can't recover"),this.error(new x(t.message,t.error.code))),this.resetWithoutReload_())},e.resetAndRestart_=function(e){var t;this.error(null),this.resetWithoutReload_(),this.hasStarted()&&(this.options_.autoplay=le||"any"),this.options_.absoluteStartTime=this.previousAbsoluteStartTime_,e.source.channelId?(t={assetId:e.source.assetId,channelId:e.source.channelId,programId:e.source.programId},a.prototype.src.call(this,{type:"video/emp",src:JSON.stringify(t)})):e.source.assetId&&(e={assetId:e.source.assetId},a.prototype.src.call(this,{type:"video/emp",src:JSON.stringify(e)}))},e.resetWithoutReload_=function(){this.tech_&&(this.techCall_("reset"),this.unloadTech_())},e.restartFormPlayhead=function(){this.resetAndRestartFormPlayhead(!1)},e.resetAndRestartFormPlayhead=function(e){void 0===e&&(e=!0),this.hasStarted()&&(this.options_.autoplay=le||"any");var t=Q.currentAsset(this);t&&(this.cache_.source&&(this.cache_.source=void 0),Q.currentAsset(this,t.assetId,t.programId,t.channelId));t=(t=this.playheadTime())||this.prePlayheadTime_;L("resetAndRestartFormPlayhead",t,e),e&&this.reset(),this.startResetAndReloadTimer_(),this.restart(null,t)},e.bitrates=function(){return Q.bitrates(this)},e.bitrate=function(e){return Q.bitrate(this,e)},e.getBitrate=function(){return Q.getBitrate(this)},e.selectAudioTrack=function(e,t){for(var i=this.audioTracks(),n=i.length;n--;){var r=i[n];if(r.language===e&&!r.enabled)return void(t&&r.kind!==t||(r.enabled=!0))}},e.getSelectedAudioTrack=function(){return Q.getSelectedAudioTrack(this)},e.getAudioTracksLanguages=function(){for(var e=[],t=this.audioTracks(),i=0;i<t.length;i++)e.push(t[i].language);return e},e.selectTextTrack=function(e,t){e=e&&"None"!==e?e:null;for(var i=this.textTracks(),n=i.length;n--;){var r=i[n];r.language===e?t&&r.kind!==t||(r.mode="showing"):"disabled"!==r.mode&&(r.mode="disabled")}"EmpHLS"===this.techName_&&ce&&(this.trigger(I.TRACK_CHANGE),this.trigger(I.TEXT_TRACK_CHANGE))},e.getSelectedTextTrack=function(){return Q.getSelectedTextTrack(this)},e.textTrackVisible=function(e){for(var t=this.textTracks(),i=t.length;i--;){var n=t[i];if(e){if("hidden"===n.mode)return void(n.mode="showing")}else"showing"===n.mode?n.mode="hidden":"disabled"!==n.mode&&(n.mode="disabled")}},e.isTextTrackVisible=function(){for(var e=this.textTracks(),t=e.length;t--;){if("showing"===e[t].mode)return!0}return!1},e.getTextTracksLanguages=function(){for(var e=[],t=this.textTracks(),i=0;i<t.length;i++)e.push(t[i].language);return e},e.canSeekTo=function(e){return Q.canSeekTo(this,e)},e.getRestrictions=function(){var e={},t=Q.getEntitlement(this);return t&&(e={minBitrate:t.minBitrate,maxBitrate:t.maxBitrate,maxResWidth:t.maxResWidth,maxResHeight:t.maxResHeight,rwEnabled:t.rwEnabled,ffEnabled:t.ffEnabled}),e},e.isPlaying=function(){return this.hasStarted()},e.isLive=function(){return Q.isLive(this)},e.techVersion=function(){return Q.techVersion(this)},e.baseCurrentTime=function(){return Q.baseCurrentTime(this)},e.baseDuration=function(e){if(void 0===e)return Q.baseDuration(this);a.prototype.duration.call(this,e)},e.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";if(this.isCreated){if(!le&&Array.isArray(this.options_.sources)&&0<this.options_.sources.length&&this.playList){var i=this.options_.sources;return this.options_.sources=[],void this.playList().src(i)}Array.isArray(e)?this.options_.playlist=!this.options_.noPlaylist||void 0:(!le&&this.playList&&this.playList().clear(),this.options_.playlist=void 0),this.options_.noPlaylist=void 0,le&&this.options_.hasMediaQueue&&(this.options_.playlist=!0);var n=b(e);if(n.length){if(n.forEach(function(e){e.type||(e.type="video/emp")}),"video/emp"===n[0].type){if(this.loadingSrc_)return L("load src blocked",e),void(this.loadNextSrc_=e);this.loadingSrc_=setTimeout(function(){t.loadingSrc_=null,t.loadNextSrc_&&t.src(t.loadNextSrc_)},3e3)}if(this.loadNextSrc_=null,L("load src OK"),this.yospace&&this.yospace().stop(),this.options_.excludeTechs=[],this.tech_||this.reset(),this.cache_.currentTime=0,this.cache_.duration=NaN,this.cache_.seekable=null,this.cache_.buffered=null,this.removeClass("vjs-live"),this.removeClass("vjs-liveui"),this.error(null),"video/emp"!==n[0].type&&this.stopProgramService(),this.isPlaying()&&(this.trigger(I.ABORT),this.sourceChanging_=!0),!Q.casting(this,n)){if(n[0].options&&this.options(n[0].options),"video/emp"!==n[0].type&&(n[0].options=this.getTechOptions_()),this.off(I.LOADED_DATA,this.initialSeekToAbsoluteStartTimeBind),this.one(I.LOADED_DATA,this.initialSeekToAbsoluteStartTimeBind),"application/yospace"!==n[0].type||!this.yospace)return a.prototype.src.call(this,n);this.yospace().start("VoD",n[0].src).then(function(e){L("yospace mediaLocator returned",e),t.options_.excludeTechs.push("EmpShaka"),t.options_.excludeTechs.push("EmpDashif"),n[0]={src:e,type:"application/x-mpegURL",yospaceUrl:n[0].src},a.prototype.src.call(t,n)}).catch(function(e){t.error(e)})}}else this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)}else this.one(I.PLAYER_CREATED,function(){t.src(e)})},e.reset=function(){var i=this;this.clearResetAndReloadTimer_(),this.hasStarted(!1),this.removeClass("vjs-has-loaded-data"),this.options_.source=void 0,Object.keys(ke.techs_).forEach(function(e){var t=i.options_[e.toLowerCase()];t&&"EmpCast"!==e&&t.source&&(t.source=void 0)}),a.prototype.reset.call(this)},e.clearResetAndReloadTimer_=function(){this.resetAndReloadTimer_&&(L("clearResetAndReloadTimer"),clearInterval(this.resetAndReloadTimer_),this.resetAndReloadTimer_=null)},e.startResetAndReloadTimer_=function(){var e,t=this;le&&this.hasStarted()||(this.clearResetAndReloadTimer_(),L("startResetAndReloadTimer"),!1!==this.options_.resetAndReloadLive&&(e=120,e=this.options_.resetAndReloadLive?1<this.options_.resetAndReloadLive?this.options_.resetAndReloadLive:1:le?120:this.isLive()?360:1440,this.resetAndReloadTimer_=this.setTimeout(function(){t.clearResetAndReloadTimer_(),t.resetAndRestartFormPlayhead()},1e3*e*60)))},e.initialSeekToAbsoluteStartTime_=function(){var e=Q.getEntitlement(this);e&&e.streamInfo.event&&e.streamInfo.live&&!this.isLive()&&(e.live=!1,e.streamInfo.live=!1,e.streamInfo.static=!0,e.isDynamicCachupAsLive=!1,e.isStaticCachupAsLive=!0),e&&e.streamInfo.event&&e.streamInfo.static&&this.baseDuration()!==1/0&&0<this.baseDuration()&&1e3*this.baseDuration()+e.streamInfo.startTime<e.streamInfo.endTime&&(e.streamInfo.endTime=1e3*this.baseDuration()+e.streamInfo.startTime,e.streamInfo.end=new Date(e.streamInfo.endTime),e.lastViewedOffset=0,e.lastViewedTime=0,e.liveTime=0),this.options_.absoluteStartTime&&this.timeShiftEnabled()&&(this.setAbsoluteTime(new Date(this.options_.absoluteStartTime)),this.previousAbsoluteStartTime_=this.options_.absoluteStartTime,this.options_.absoluteStartTime=void 0)},e.setMaxBitrate=function(e){this.options_.maxBitrate=e,this.tech_&&void 0!==this.tech_.setMaxBitrate&&this.techCall_("setMaxBitrate",e)},e.getMaxBitrate=function(){return this.tech_&&void 0!==this.tech_.getMaxBitrate?this.techGet_("getMaxBitrate"):0},e.disableTimeShift=function(e){if(!this.tech_||void 0===this.tech_.disableTimeShift)return!1;if(void 0===e)return!Q.timeShiftEnabled(this);if(!1===e&&!this.canEnableTimeshift())return!Q.timeShiftEnabled(this);this.techCall_("disableTimeShift",e);var t=Q.timeShiftEnabled(this);return this.options_.timeShiftDisabled=void 0===t?e:!t,this.options_.timeShiftDisabled&&this.isLive()&&this.noEPG()?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):this.duration()!==1/0&&(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),this.trigger(I.TIMESHIFT_CHANGE,{timeShiftDisabled:this.options_.timeShiftDisabled}),this.options_.timeShiftDisabled},e.canEnableTimeshift=function(){var e=Q.getEntitlement(this);return!e||!1!==e.timeshiftEnabled},e.timeShiftEnabled=function(e){if(void 0===e)return Q.timeShiftEnabled(this);this.disableTimeShift(!e)},e.noEPG=function(){if(this.getProgramDetails())return!1;var e=Q.getEntitlement(this);return!e||e&&(e.isDynamicCachupAsLive||e.isStaticCachupAsLive)},e.canRestart=function(){return!Q.getEntitlement(this)||!this.noEPG()&&Q.canRestart(this)},e.restart=function(e,t){Q.restart(this,e,t)},e.error=function(e){return void 0===e?this.error_||null:null!==e?this.error_&&e&&4===e.code?this.error_:(e&&E(e)?e=new x(e):_(e)&&!e.code&&(e.code=w.UNKNOWN),_(e)&&this.cache_.sources&&1<this.cache_.sources.length?(L.error(e),this.loadNextSource(),e):this.videojsError_(e)):void a.prototype.error.call(this,e)},e.videojsError_=function(e){if(void 0===e)return this.error_||null;if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new xe(e),this.addClass("vjs-error");e="";xe.errorTypes.hasOwnProperty(this.error_.code)&&(e=xe.errorTypes[this.error_.code]),L.error("(CODE:"+this.error_.code+" "+e+")",this.error_.message,this.error_),this.trigger({type:I.ERROR,bubbles:!0},this.error_)},e.getError=function(){return this.error_},e.setAbsoluteTime=function(e){Q.setAbsoluteTime(this,e)},e.getAbsoluteTime=function(){return Q.getAbsoluteTime(this)},e.playheadTime=function(e){if(void 0===e)return Q.getPlayheadTime(this);Q.setPlayheadTime(this,e)},e.setAnalyticsCustomAttribute=function(e,t){this.options_.analytics||(this.options_.analytics={}),this.options_.analytics.customAttributes||(this.options_.analytics.customAttributes=[]),this.options_.analytics.customAttributes.push({key:e,value:t})},e.loadAsset=function(e,t,i){if(void 0===i&&(i=function(){}),L.warn("loadAsset() has been deprecated with new US a/v pipe use startPlayback() or src() instead"),this.options({playFrom:void 0}),!e&&t)return L.error("loadAsset: with only programId is not supported"),void i();Q.loadAsset(this,t?void 0:e,t,t?e:void 0,i)},e.startPlaybackV2=function(e,t){this.startPlayback(e,"","",t)},e.startPlayback=function(e,t,i,n){var r;n=n||{},e||t||i?e||t||!i?(n.playFrom||(n.playFrom="defaultBehaviour"),r={playFrom:n.playFrom,autoplay:le||"any"},void 0!==n.autoplay&&(r.autoplay=n.autoplay),n.startTime&&"startTime"===n.playFrom?(r.absoluteStartTime=n.startTime,this.options_.useLastViewedOffset=!1):r.absoluteStartTime=void 0,void 0!==n.startOffset?r.startTime=n.startOffset/1e3:r.startTime=0,r.useLastViewedOffset="bookmark"===n.playFrom||!0===this.options_.useLastViewedOffset,this.options(r),Q.loadAsset(this,e,i,t)):L.error("startPlayback: with only programId is not supported"):L.error("startPlayback: assetId or channelId or programId is undefined")},e.playEntitlement=function(e){e&&_(e)?(e.type="video/emp",a.prototype.src.call(this,e)):L.error("Call playEntitlement without entitlement")},e.timeBehindLive=function(){return Q.timeBehindLive(this)},e.liveDelay=function(){return Q.liveDelay(this)},e.startTimeLive=function(){return Q.startTimeLive(this)},e.driftingTime=function(){return Q.driftingTime(this)},e.getCurrentTechName=function(){return this.techName_},e.getExposure=function(){return this.programService?this.programService().exposure:null},e.syncServerTime=function(e){if(this.programService){var t=this.programService().exposure;if(t)return void t.syncServerTime(e)}t="No programService or No exposure";L.error(t),e&&e(0,t)},e.stopProgramService=function(){this.programService&&this.programService().reset()},e.startProgramService=function(){this.programService&&this.programService().start()},e.supportsEpgProgramChange=function(){return void 0!==this.programService},e.getServerTime=function(){return Q.getServerTime(this)},e.getProgram=function(e){this.programService&&e(e=this.getProgramDetails(),e?null:"No EPG for program")},e.getProgramDetails=function(){return Q.supportsEpgProgramChange(this)?Q.program(this):this.programService?this.programService().currentProgram:null},e.getAssetDetails=function(){return this.tech_&&this.tech_.VOD&&this.techGet_("VOD")?this.techGet_("VOD"):this.programService?this.programService().currentVOD:null},e.getMediaInfo=function(){var e,t,i=this.getProgramDetails();return i&&i.programId?((e=this.programService().extractAssetMetadata(i.asset)).thumbnailsImage=P(e.images,"chromecast"),e.channelInfo=i.channelInfo,i.channelInfo&&(e.channelInfo.thumbnailImage=P(i.channelInfo.images,"thumbnail"))):(t=this.getAssetDetails(),(e=this.programService().extractAssetMetadata(t)).thumbnailImage=P(e.images,"chromecast")),e&&e.title||!this.options().mediaInfo||!this.options().mediaInfo.title||(e={title:(t=this.options().mediaInfo).title,subtitle:t.subtitle,images:t.artworkUrl?[{url:t.artworkUrl}]:[],channelInfo:{images:t.logoUrl?[{url:t.logoUrl}]:[]}}),e},e.getSeekTimerange=function(){return Q.getSeekTimerange(this)},e.getBufferedTimerange=function(){return Q.getBufferedTimerange(this)},e.currentTime=function(e){var t=Q.getEntitlement(this);if(t&&(t.isDynamicCachupAsLive||t.isStaticCachupAsLive)&&"EmpCast"!==this.techName_){if(void 0!==e){var i=this.getProgramDetails();if(i){e<1&&-1<e&&(e=1);var n=new Date(i.startTime);if(t.isStaticCachupAsLive||"HLS"===this.streamType){var r=t.streamInfo;if((e+=(n.getTime()-r.start.getTime())/1e3)<=0)return e=0,void Q.playPreviousProgram(this,!0)}else if(1e3*(e+=n.getTime()/1e3)<=t.streamInfo.start.getTime())return e=t.streamInfo.start.getTime()/1e3+1,void Q.playPreviousProgram(this,!0)}return e<0&&(e=0),void this.techCall_("setCurrentTime",e)}var s=this.techGet_("currentTime")||0,r=this.getProgramDetails();return r&&1<s&&(n=new Date(r.startTime),t.isStaticCachupAsLive||"HLS"===this.streamType?(r=t.streamInfo,s-=(n.getTime()-r.start.getTime())/1e3):s-=n.getTime()/1e3),this.scrubbing()||(this.cache_.currentTime=s),this.cache_.currentTime}return void 0!==e?(t&&(t.isDynamicCachupAsLive||t.isStaticCachupAsLive)&&"EmpCast"===this.techName_||(e=e<0?0:e),void this.techCall_("setCurrentTime",e)):(this.scrubbing()||(this.cache_.currentTime=this.techGet_("currentTime")||0),this.cache_.currentTime)},e.duration=function(e){var t=Q.getEntitlement(this);if(t&&(t.isDynamicCachupAsLive||t.isStaticCachupAsLive)&&"EmpCast"!==this.techName_){if(void 0!==e){var i=this.getProgramDetails();return i&&e!==1/0&&(e=i.duration/1e3),void a.prototype.duration.call(this,e)}var n=this.techGet_("duration"),i=this.getProgramDetails();return i&&n!==1/0&&(this.isProgramEvent&&i.duration/1e3>n||(n=i.duration/1e3)),n!==this.cache_.duration&&((this.cache_.duration=n)===1/0||!this.timeShiftEnabled()&&this.isLive()&&this.noEPG()?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):n!==1/0&&(this.removeClass("vjs-live"),this.removeClass("vjs-liveui"))),n}return a.prototype.duration.call(this,e),this.techGet_("duration")},e.seekable=function(){var e=a.prototype.seekable.call(this);return this.seeking()&&this.cache_.seekable||(this.cache_.seekable=this.getRange_(e)),this.cache_.seekable},e.buffered=function(){var e=a.prototype.buffered.call(this);return this.seeking()&&this.cache_.buffered||(this.cache_.buffered=this.getRange_(e)),this.cache_.buffered},e.getRange_=function(e){var t,i,n,r,s=Q.getEntitlement(this);return this.seeking()||!e?Te(0,0):(0<e.length&&(!s||!s.isDynamicCachupAsLive&&!s.isStaticCachupAsLive||(n=this.getProgramDetails())&&(t=new Date(n.startTime),i=s.streamInfo,r=e.start(e.length-1),(n=e.end(e.length-1))&&(s.isStaticCachupAsLive||"HLS"===this.streamType?e=Te(0<(r-=(t.getTime()-i.start.getTime())/1e3)?r:0,(n-=(t.getTime()-i.start.getTime())/1e3)>this.duration()?this.duration():n):s.isDynamicCachupAsLive&&(r-=t.getTime()/1e3,n-=t.getTime()/1e3,e=Te(0<r?r:0,(r=this.getGrowingLiveDuration())<n?r:n))))),e)},e.getGrowingLiveDuration=function(){var e=Q.getEntitlement(this),t=this.duration(),i=this.getProgramDetails();if(i&&t!==1/0&&e&&e.isDynamicCachupAsLive)if(this.getServerTime()<new Date(i.endTime).getTime()){if(!this.tech_||void 0===this.tech_.seekable||this.seeking())return L.warn("No tech_.seekable"),i.duration/1e3;var n=this.techGet_("seekable").end(0);n!==1/0&&(e=e.streamInfo,t="HLS"===this.streamType?(e.start.getTime()+1e3*n-i.start.getTime())/1e3:(1e3*n-i.start.getTime())/1e3)}else t=i.duration/1e3;return t},e.remainingTime=function(){var e=Q.getEntitlement(this),t=0;if(e&&(e.isDynamicCachupAsLive||e.isStaticCachupAsLive)){e=this.duration();if(e===1/0||0===e)return 1/0;t=e-this.currentTime()}else t=Q.remainingTime(this);return t<0&&(t=0),Math.round(t)},e.gotoLive=function(){Q.gotoLive(this)},e.gotoBeginning=function(){this.scrubbing(!0);var e=!this.paused();this.pause(),this.currentTime(0),this.scrubbing(!1),e&&ve(this.play())},e.playPreviousProgram=function(i){var e,n=this;{if(!this.sourceChanging_&&!this.isProgramEvent)return this.isProgramEvent?(L("playPreviousProgram ignore, isProgramEvent"),void this.gotoBeginning()):void(this.tech_.playPreviousProgram?this.techCall_("playPreviousProgram",i):(e=Q.getEntitlement(this),this.programService&&(e.isStaticCachupAsLive||e.isDynamicCachupAsLive)&&e.rwEnabled?this.programService().getPreviousProgram(function(e,t){t?L.warn("playPreviousProgram",t):i?n.playheadTime(e.end.getTime()-3e4):n.playheadTime(e.start.getTime()+1e3)}):Q.playPreviousProgram(this)));L("playPreviousProgram ignore, sourceChanging")}},e.playNextProgram=function(){var e,i,n=this;this.sourceChanging_||this.isProgramEvent?L("playNextProgram ignore"):this.tech_.playNextProgram?this.techCall_("playNextProgram"):(e=Q.getEntitlement(this),(i=this.getProgramDetails())&&(e.isStaticCachupAsLive||e.isDynamicCachupAsLive)&&e.ffEnabled&&e.timeshiftEnabled?this.programService().getNextProgram(function(e,t){t&&L.warn("playNextProgram",t),n.playheadTime(i.end.getTime()+1e3)}):Q.playNextProgram(this))},e.isProgramLive=function(){var e=this.getProgramDetails();return e?e.end.getTime()>this.getServerTime():this.isLive()},e.isProgramCatchup=function(){var e=Q.getEntitlement(this);return e?e.isStaticCachupAsLive||!this.isProgramLive()&&e.isDynamicCachupAsLive:!this.isLive()},e.currentAsset=function(){return Q.currentAsset(this)},e.ended=function(){return this.ended_},e.handleTechWaiting_=function(){var t=this;!this.hasStarted()||this.ended()||this.paused()||this.hasClass("vjs-waiting")||this.playheadMoving_(function(e){e||(t.addClass("vjs-waiting"),t.trigger(I.WAITING),t.removeWaitingClass_())})},e.removeWaitingClass_=function(){var e=this;this.one("timeupdate",function(){1<e.playheadTime()-e.prePlayheadTime_||e.playheadTime()-e.prePlayheadTime_<-1?(e.prePlayheadTime_=0,e.removeClass("vjs-waiting"),e.paused()?e.trigger(I.PAUSE):e.trigger(I.PLAYING)):e.removeWaitingClass_()})},e.playheadMoving_=function(e){this.playheadMovingTimer_&&(clearInterval(this.playheadMovingTimer_),this.playheadMovingTimer_=null),this.prePlayheadTime_=this.playheadTime(),this.playheadMovingTimer_=this.setTimeout(function(){e(200<this.playheadTime()-this.prePlayheadTime_||this.playheadTime()-this.prePlayheadTime_<-200)},2e3)},e.handleTechCanPlay_=function(){this.prePlayheadTime_||this.removeClass("vjs-waiting"),this.trigger(I.CAN_PLAY)},e.handleTechCanPlayThrough_=function(){this.prePlayheadTime_||this.removeClass("vjs-waiting"),this.trigger(I.CAN_PLAY_THROUGH)},e.handleTechPlaying_=function(){this.prePlayheadTime_||this.removeClass("vjs-waiting"),this.sourceChanging_=!1,this.trigger(I.PLAYING)},e.sourceChanging=function(){return this.sourceChanging_},e.isCasting=function(){if("EmpCast"===this.techName_){var e=this.castPlugin().get("ChromecastSender");if(e){e=e.castSession();return e&&"connected"===e.status}}return!1},e.isAudioOnly=function(){var e=this.bitrates();return!(0<e.length&&0<e[0])},e.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,i="";"string"!=typeof t&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=Oe(this,t)),this.cache_.source=function i(){for(var n={},e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.forEach(function(e){e&&g(e,function(e,t){T(e)?(T(n[t])||(n[t]={}),n[t]=i(n[t],e)):n[t]=e})}),n}({},e,{src:t,type:i}),this.cache_.src=t},e.resetControlBarUI_=function(){},e.playbackRate=function(e){return void 0!==e?a.prototype.playbackRate.call(this,e):(e=a.prototype.playbackRate.call(this,e),parseFloat(e.toFixed(2)))},o(l,[{key:"isProgramEvent",get:function(){return Q.getIsProgramEvent(this)}},{key:"version",get:function(){return"2.2.136-573"}},{key:"entitlement",get:function(){var e=Q.getEntitlement(this);return e&&((e=f({},e)).options=void 0),e}},{key:"streamType",get:function(){if(this.tech_)return this.tech_.streamType}}]),l}(H);Re.AutoTechArray=function(e){var t=ke.techs_.hasOwnProperty("EmpShaka"),i=ke.techs_.hasOwnProperty("EmpDashif");t&&i||(e=t?"EmpShaka":"EmpDashif");t=[e,"EmpHLS-MSE","EmpHLS","EmpSmooth","Html5"];return Re.SupportFairplay()&&(t=["EmpHLS",e,"Html5"]),Re.GetValidAutoTechOrder(t)},Re.GetValidAutoTechOrder=function(e){for(var t=[],i=0;i<e.length;i++)ke.techs_.hasOwnProperty(e[i])&&t.push(e[i]);return t},Re.SupportFairplay=function(){var e=p.getTech("EmpHLS");return!!(void 0!==e&&e.isSupported()&&y.WebKitMediaKeys&&e.getKeySystem&&y.WebKitMediaKeys.isTypeSupported(e.getKeySystem(),"video/mp4"))},p.getComponent("Component").registerComponent("Player",Re);var Me=function(){function e(e,t,i){this.INITIAL_REFERENCE_TIME=1,this.player_=e,this.analytics_=t,this.analytics_.afterSendData_=this.onDataSent.bind(this),this.sessionId_=null,this.customAttributes=i.analytics&&i.analytics.customAttributes,this.exposure=i.exposure,this.currentTimeTimer=null,this.onPlayBind=this.onPlay.bind(this),this.onResumedBind=this.onResume.bind(this),this.onPlayingBind=this.onPlaying.bind(this),this.onPauseBind=this.onPause.bind(this),this.onEndedBind=this.onEnded.bind(this),this.onErrorBind=this.onError.bind(this),this.onDrmSessionUpdateBind=this.onDrmSessionUpdate.bind(this),this.onEntitlementLoadStartBind=this.onEntitlementLoadStart.bind(this),this.onBitrateChangeBind=this.onBitrateChange.bind(this),this.onDisposeBind=this.onDispose.bind(this),this.onLoadStartBind=this.onLoadStart.bind(this),this.onSeekedBind=this.onSeeked.bind(this),this.onWaitingBind=this.onWaiting.bind(this),this.onChromeCastingStartBind=this.onChromeCastingStart.bind(this),this.onChromeCastingStopBind=this.onChromeCastingStop.bind(this),this.onProgramChangeBind=this.onProgramChange.bind(this),this.onWaitingEndedBind=this.onWaitingEnded.bind(this),this.onErrorBeforeAssetBind=this.onErrorBeforeAsset.bind(this),this.onEntitlementChangeBind=this.onEntitlementChange.bind(this),this.onWindowUnloadBind=this.onWindowUnload.bind(this),this.onPlayingAfterStartBind=this.onPlayingAfterStart.bind(this),this.allEvents_=Object.keys(I).map(function(e){return I[e]}),this.init(),this.createdSessions={},this.mem={}}var t=e.prototype;return t.SessionId=function(e){if(!(e||this.entitlement()&&this.entitlementLoaded_))return this.errorSessionId;e=e||this.entitlement().playSessionId;return this.mem[e]||(this.mem[e]={pause:{},resume:{}}),e},t.hasSessionId=function(){return!(!this.entitlement()||!this.entitlementLoaded_)},t.sendCurrentTime=function(){var e=this.SessionId();e&&this.player_&&this.analytics_.getSessionState&&"PLAYING"===this.analytics_.getSessionState(e)&&this.analytics_.setCurrentTime(e,this.OffsetTime())},t.registerCurrentTimeTimer=function(){var t=this;this.clearTimers(),this.currentTimeTimer=setInterval(function(){t.sendCurrentTime();var e=t.SessionId();e&&t.analytics_&&t.analytics_.ok&&!1===t.analytics_.ok(e)&&(t.exposure?t.exposure.verifySession(function(){t.player_.resetAndRestartFormPlayhead()},function(){t.player_.el_&&(t.player_.trigger(I.ERROR,"401 INVALID_SESSION_TOKEN: The session token is no longer valid."),Q.stop(t.player_)),t.clearTimers()}):L.error("registerCurrentTimeTimer Exposure is undefined"))},1e3)},t.clearTimers=function(){this.currentTimeTimer&&clearInterval(this.currentTimeTimer),this.currentTimeTimer=null},t.init=function(){this.player_&&this.analytics_?(this._errorSessionId=null,this.disabled_=!1,this.entitlementLoaded_=!1,L("Initialization EmpAnalytics"),this.analytics_.init(),y.addEventListener("beforeunload",this.onWindowUnloadBind),this.player_.on(I.ENTITLEMENT_LOAD_START,this.onEntitlementLoadStartBind),this.player_.on(I.PAUSE,this.onPauseBind),this.player_.on(I.SEEKED,this.onSeekedBind),this.player_.on(I.ENDED,this.onEndedBind),this.player_.on(I.ERROR,this.onErrorBind),this.player_.on(I.DISPOSE,this.onDisposeBind),this.player_.on(I.STOPPED,this.onDisposeBind),this.player_.on(I.BITRATE_CHANGED,this.onBitrateChangeBind),this.player_.on(I.WAITING,this.onWaitingBind),this.player_.on(I.CHROMECAST_CASTING,this.onChromeCastingStartBind),this.player_.on(I.CHROMECAST_STOPPED,this.onChromeCastingStopBind),this.player_.on(I.PROGRAM_CHANGED,this.onProgramChangeBind),this.player_.on(I.DRM_SESSION_UPDATE,this.onDrmSessionUpdateBind)):L.warn("Warning: init failed . Possible causes: either player or analytics were not set.")},t.onWindowUnload=function(){var e=this;this.onGeneric("WindowClose",this.analytics_.dispose,function(){!0===e.hasSessionId()&&e.analytics_.dispose(e.SessionId(),e.getCachedCurrentTime()),e.analytics_.dispatchNow(!1),e.clearTimers()},!0)},t.onChromeCastingStart=function(){var t=this;this.onGeneric("StartCasting",this.analytics_.startCasting,function(){var e;!1!==t.hasSessionId()&&(t.SessionId()&&(e=t.getCachedCurrentTime(),L("StartCasting",e),t.analytics_.startCasting(t.SessionId(),e)),t.clearTimers())},!1),this.disabled_=!0},t.onChromeCastingStop=function(e){var t=this;this.disabled_=!1,e&&this.onGeneric("StopCasting",this.analytics_.stopCasting,function(){!1!==t.hasSessionId()&&t.analytics_.stopCasting(t.SessionId(),t.OffsetTime())},!1)},t.onProgramChange=function(e,t){var i=this,n=t?t.program:null;L("analytics","onProgramChange",n),n&&this.analytics_.programChanged&&this.player_.hasStarted()&&this.onGeneric("ProgramChange",this.analytics_.programChanged,function(){i.analytics_.programChanged(i.SessionId(),i.OffsetTime(),{programId:n.programId})},!0)},t.onEntitlementChange=function(e,t,i){var n=this;this.entitlementLoaded_=!0,this.player_.off(I.ERROR,this.onErrorBeforeAssetBind);var r=this.entitlement(t&&t.entitlement);this.onGeneric("HandShake",this.analytics_.handshake,function(){var e={};r&&r.assetId&&(e.assetId=r.assetId),r&&r.programId&&(e.programId=r.programId),r||(t=Q.currentAsset(n.player_))&&(e.assetId=t.assetId,e.channelId=t.channelId,e.programId=t.programId);var t=r?r.playSessionId:i;n.analytics_.handshake(n.SessionId(t),e),n.onLoadStart(t)},!1)},t.onEntitlementLoadStart=function(){var e=this;this.entitlementLoaded_=!1,this.onGeneric("ExitOngoingSession",this.analytics_.exitOngoingSession,function(){return e.analytics_.exitOngoingSession(e.getCachedCurrentTime())}),this.player_.one(I.ERROR,this.onErrorBeforeAssetBind),this.player_.one(I.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind)},t.onDataSent=function(e,t){L("onDataSent",e,t),e&&t&&e.getTime()>t.getTime()+6e5&&this.player_.resetAndRestartFormPlayhead()},t.onLoadStart=function(e){var i=this,n=e||this.SessionId();n?this.sessionCreated(n)||(this.createdSessions[n]=!0,this.onGeneric("Created",this.analytics_.created,function(){var e=i.player_.options(),t={version:i.playerVersion,player:le?"chromecast-receiver-2":"html5-player-2"};e&&e.autoplay&&(t.autoplay=!0),i.entitlement()&&i.entitlement().requestId&&(t.requestId=i.entitlement().requestId),i.analytics_.created(n,t)},!1),this.player_.off(I.PLAYING,this.onResumedBind),this.player_.off(I.PLAYING,this.onPlayingAfterStartBind),this.player_.one(I.PLAYING,this.onPlayingAfterStartBind)):L("onLoadStart called but not session available.")},t.onPlayingAfterStart=function(){this.onPlayBind(),this.onPlayingBind(),this.player_.on(I.PLAYING,this.onResumedBind)},t.onBitrateChange=function(){var t=this;this.onGeneric("BitrateChange",this.analytics_.bitrateChanged,function(){var e={bitrate:Math.max(0,Math.round(t.getBitrate()/1e3))};t.analytics_.bitrateChanged(t.SessionId(),t.OffsetTime(),e)},!0)},t.onWaiting=function(){var t=this;this.onGeneric("StartWaiting",this.analytics_.waiting,function(){t.player_.hasStarted()&&t.analytics_.waiting(t.SessionId(),t.OffsetTime()),t.allEvents_.map(function(e){e!==I.PLAY&&e!==I.PLAYING&&e!==I.ENDED&&e!==I.ERROR&&e!==I.DISPOSE&&e!==I.SEEKED&&e!==I.CHROMECAST_CASTING&&e!==I.CHROMECAST_STOPPED||t.player_.one(e,t.onWaitingEndedBind)})},!0)},t.OffsetTime=function(){return this.entitlement()&&(this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive)?Q.getPlayheadTime(this.player_)/1e3:Q.baseCurrentTime(this.player_)},t.startTimeLive=function(){return Q.startTimeLive(this.player_)},t.isLive=function(){return Q.isLive(this.player_)},t.getBitrate=function(){return Q.getBitrate(this.player_)},t.duration=function(){return this.entitlement()&&(this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive)&&this.player_.getProgramDetails&&this.player_.getProgramDetails()?Math.round(this.player_.getProgramDetails().duration/1e3):Math.round(Q.duration(this.player_))},t.entitlement=function(e){return void 0===e?Q.getEntitlement(this.player_)||this.entitlement_:this.entitlement_=e},t.onWaitingEnded=function(){var t=this;this.allEvents_.map(function(e){t.player_.off(e,t.onWaitingEndedBind)}),this.onGeneric("WaitingEnded",this.analytics_.waitingEnded,function(){t.analytics_.waitingEnded(t.SessionId(),t.OffsetTime())},!0)},t.onDispose=function(){var e=this;this.onGeneric("Dispose",this.analytics_.dispose,function(){!1!==e.hasSessionId()&&(e.analytics_.dispose(e.SessionId(),e.getCachedCurrentTime()),e.clearTimers())},!0,!0)},t.getCachedCurrentTime=function(){if(this.player_){var e=this.player_.getCache().currentTime,t=this.OffsetTime();return t||e}},t.onEnded=function(){var e=this;this.onGeneric("End of Stream",this.analytics_.endOfStream,function(){e.analytics_.endOfStream(e.SessionId()),e.clearTimers()},!0,!0)},t.onPlay=function(){var t=this;this.onGeneric("Play",this.analytics_.play,function(){var e="Unknown";switch(t.player_.techName_){case"EmpShaka":e="Shaka";break;case"EmpDashif":e="DashIf";break;case"EmpHLS":e="NativeHLS";break;case"EmpHLS-MSE":e="HLS-MSE"}e={techName:e,version:t.playerVersion,techVersion:t.techVersion};t.analytics_.play(t.SessionId(),t.OffsetTime(),e),t.registerCurrentTimeTimer()},!1)},t.onPlaying=function(){var t=this;this.onGeneric("Playing",this.analytics_.playing,function(){var e={};e.bitrate=Math.max(0,Math.round(t.getBitrate()/1024)),!0===t.isLive()?e.referenceTime=t.startTimeLive():e.duration=t.duration(),t.entitlement()&&t.entitlement().mediaLocator&&(e.mediaLocator=t.entitlement().mediaLocator),e.mediaLocator&&0<=e.mediaLocator.indexOf(".isml")&&(e.referenceTime=t.INITIAL_REFERENCE_TIME),t.analytics_.clearCustomAttributes(),(t.customAttributes||[]).map(function(e){t.analytics_.setCustomAttribute(e.key,e.value)}),t.analytics_.playing(t.SessionId(),t.OffsetTime(),e)},!1)},t.onSeeked=function(){var e=this;this.onGeneric("Seeked",this.analytics_.seek,function(){e.analytics_.seek(e.SessionId(),e.OffsetTime())},!0)},t.onPause=function(){var i=this;this.onGeneric("Pause",this.analytics_.paused,function(){var e,t;!1!==i.player_.hasStarted()&&(e=i.SessionId(),t=parseInt(+new Date/25,10),i.mem[e].pause[t]||(i.mem[e].pause[t]=!0,i.analytics_.paused(e,i.OffsetTime())))},!0)},t.onResume=function(){var i=this;this.onGeneric("Resume",this.analytics_.resume,function(){var e=i.SessionId(),t=parseInt(+new Date/25,10);i.mem[e].resume[t]||(i.mem[e].resume[t]=!0,i.analytics_.resume(e,i.OffsetTime()))},!0)},t.onErrorBeforeAsset=function(){this.entitlementLoaded_=!1,this.onEntitlementChange(null,null,this.errorSessionId),this.onError(null,this.errorSessionId),this.clearTimers()},t.onError=function(r,s){var o=this;void 0===r&&(r=null),void 0===s&&(s=null),(s||this.entitlementLoaded_)&&this.onGeneric("Error",this.analytics_.error,function(){var e=o.player_.error(),t={};e&&e.code&&(t.errorCode=e.code),e&&e.message&&(t.errorMessage=e.message),e&&e.status&&(t.errorDetails=e.status+""),e&&e.stack&&(t.errorDetails=t.errorDetails?t.errorDetails+"\n"+e.stack.toString():e.stack.toString());var i,n=o.player_.options();o.player_.tech_?(i="EmpShaka"===o.player_.techName_&&n&&n.empshaka?n.empshaka.streamType:"",t.errorInfo=o.player_.techName_+(i?"-"+i:"")):t.errorInfo="Unknown tech, techOrder: "+n.techOrder.toString(),!e&&r&&(t.errorCode=r.code,t.errorMessage=r.message||"Browser Error",r.status&&(t.errorDetails=r.status+""),r.stack&&(t.errorDetails=t.errorDetails?t.errorDetails+"\n"+r.stack.toString():r.stack.toString()));e=o.SessionId();(e||s)&&o.analytics_.error(e||s,o.OffsetTime(),t),o.clearTimers()},!1)},t.onDrmSessionUpdate=function(e,t){var i=this;L("onDrmSessionUpdate",e,t),this.onGeneric("DrmSessionUpdate",this.analytics_.drmSessionUpdate,function(){i.analytics_.drmSessionUpdate(i.SessionId(),{message:t.messageType,code:t.code,info:t.info})},!0)},t.onGeneric=function(e,t,i,n,r){void 0===r&&(r=!1),!this.disabled_||r?n&&!this.sessionCreated(this.SessionId())?L(e+" was discarded."):t&&i&&i():L(e+" not delivered: analytics disabled.")},t.sessionCreated=function(e){return e&&this.createdSessions[e]},t.dispose=function(){this.clearTimers(),this.analytics_&&(this.analytics_.exitOngoingSession(this.getCachedCurrentTime()),this.analytics_.dispatchNow(!1)),y.removeEventListener("beforeunload",this.onWindowUnloadBind),this.player_.off(I.PLAY,this.onPlayBind),this.player_.off(I.PLAYING,this.onPlayingBind),this.player_.off(I.PLAYING,this.onResumedBind),this.player_.off(I.PAUSE,this.onPauseBind),this.player_.off(I.SEEKED,this.onSeekedBind),this.player_.off(I.ENTITLEMENT_LOAD_START,this.onEntitlementLoadStartBind),this.player_.off(I.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.player_.off(I.BITRATE_CHANGED,this.onBitrateChangeBind),this.player_.off(I.ENDED,this.onEndedBind),this.player_.off(I.DISPOSE,this.onDisposeBind),this.player_.off(I.STOPPED,this.onDisposeBind),this.player_.off(I.ERROR,this.onErrorBind),this.player_.off(I.ERROR,this.onErrorBeforeAssetBind),this.player_.off(I.WAITING,this.onWaitingBind),this.player_.off(I.CHROMECAST_CASTING,this.onChromeCastingStartBind),this.player_.off(I.CHROMECAST_STOPPED,this.onChromeCastingStopBind),this.player_.off(I.PROGRAM_CHANGED,this.onProgramChangeBind),this.player_.off(I.PLAYING,this.onPlayingAfterStartBind),this.player_.off(I.DRM_SESSION_UPDATE,this.onDrmSessionUpdateBind)},o(e,[{key:"techVersion",get:function(){return Q.techVersion(this.player_)}},{key:"playerVersion",get:function(){return this.player_.version||(y.videojs?y.videojs.VERSION:"2.x.x")}},{key:"errorSessionId",get:function(){return this._errorSessionId||(this._errorSessionId="error-"+Math.random().toString().split(".")[1]),this._errorSessionId}}]),e}(),H=e(i(function(e){var t,i=(t=y)&&"object"==typeof t&&"default"in t?t.default:t,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==v?v:"undefined"!=typeof self?self:{};function n(e,t){return a.set(e,t),t}function r(e){var t=a.get(e),i=void 0===t?e.size:2147483648<t?0:t+1;if(!e.has(i))return n(e,i);if(e.size<1073741824){for(;e.has(i);)i=Math.floor(2147483648*Math.random());return n(e,i)}if(e.size>c)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;e.has(i);)i=Math.floor(Math.random()*c);return n(e,i)}var s,o=(function(o,a){(function(){var x={function:!0,object:!0}[typeof window]&&window||this,i=a,e=o&&!o.nodeType&&o,t=i&&e&&"object"==typeof l&&l;!t||t.global!==t&&t.window!==t&&t.self!==t||(x=t);var s=Math.pow(2,53)-1,D=/\bOpera/,t=Object.prototype,n=t.hasOwnProperty,O=t.toString;function r(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function L(e){return e=B(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:r(e)}function k(e,t){for(var i in e)n.call(e,i)&&t(e[i],i,e)}function N(e){return null==e?r(e):O.call(e).slice(8,-1)}function R(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function M(i,n){var r=null;return function(e,t){var i=-1,n=e?e.length:0;if("number"==typeof n&&-1<n&&n<=s)for(;++i<n;)t(e[i],i,e);else k(e,t)}(i,function(e,t){r=n(r,e,t,i)}),r}function B(e){return String(e).replace(/^ +| +$/g,"")}function H(s){var t=x,e=s&&"object"==typeof s&&"String"!=N(s);e&&(t=s,s=null);var i=t.navigator||{},n=i.userAgent||"";s=s||n;var r,o=e?!!i.likeChrome:/\bChrome\b/.test(s)&&!/internal|\n/i.test(O.toString()),a="Object",l=e?a:"ScriptBridgingProxyObject",c=e?a:"Environment",h=e&&t.java?"JavaPackage":N(t.java),u=e?a:"RuntimeObject",p=/\bJava/.test(h)&&t.java,d=p&&N(t.environment)==c,m=p?"a":"α",g=p?"b":"β",f=t.document||{},v=t.operamini||t.opera,y=D.test(y=e&&v?v["[[Class]]"]:N(v))?y:v=null,_=s,T=[],E=null,b=s==n,S=b&&v&&"function"==typeof v.version&&v.version(),C=M([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,t){return e||RegExp("\\b"+(t.pattern||R(t))+"\\b","i").exec(s)&&(t.label||t)}),I=M(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(e,t){return e||RegExp("\\b"+(t.pattern||R(t))+"\\b","i").exec(s)&&(t.label||t)}),A=w([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),P=M({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},function(e,t,i){return e||(t[A]||t[/^[a-z]+(?: +[a-z]+\b)*/i.exec(A)]||RegExp("\\b"+R(i)+"(?:\\b|\\w*\\d)","i").exec(s))&&i}),a=M(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(e,t){var i,n,r=t.pattern||R(t);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(s))&&(i=e,n=r,r=t.label||t,t={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},n&&r&&/^Win/i.test(i)&&!/^Windows Phone /i.test(i)&&(t=t[/[\d.]+$/.exec(i)])&&(i="Windows "+t),i=String(i),n&&r&&(i=i.replace(RegExp(n,"i"),r)),e=i=L(i.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])),e});function w(e){return M(e,function(e,t){var i=t.pattern||R(t);return!e&&(e=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(s)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(s)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(s))&&((e=String(t.label&&!RegExp(i,"i").test(t.label)?t.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),t=t.label||t,e=L(e[0].replace(RegExp(i,"i"),t).replace(RegExp("; *(?:"+t+"[_-])?","i")," ").replace(RegExp("("+t+")[-_.]?(\\w)","i"),"$1 $2"))),e})}if(C=C&&[C],P&&!A&&(A=w([P])),(h=/\bGoogle TV\b/.exec(A))&&(A=h[0]),/\bSimulator\b/i.test(s)&&(A=(A?A+" ":"")+"Simulator"),"Opera Mini"==I&&/\bOPiOS\b/.test(s)&&T.push("running in Turbo/Uncompressed mode"),"IE"==I&&/\blike iPhone OS\b/.test(s)?(P=(h=H(s.replace(/like iPhone OS/,""))).manufacturer,A=h.product):/^iP/.test(A)?(I=I||"Safari",a="iOS"+((h=/ OS ([\d_]+)/i.exec(s))?" "+h[1].replace(/_/g,"."):"")):"Konqueror"!=I||/buntu/i.test(a)?P&&"Google"!=P&&(/Chrome/.test(I)&&!/\bMobile Safari\b/i.test(s)||/\bVita\b/.test(A))||/\bAndroid\b/.test(a)&&/^Chrome/.test(I)&&/\bVersion\//i.test(s)?(I="Android Browser",a=/\bAndroid\b/.test(a)?a:"Android"):"Silk"==I?(/\bMobi/i.test(s)||(a="Android",T.unshift("desktop mode")),/Accelerated *= *true/i.test(s)&&T.unshift("accelerated")):"PaleMoon"==I&&(h=/\bFirefox\/([\d.]+)\b/.exec(s))?T.push("identifying as Firefox "+h[1]):"Firefox"==I&&(h=/\b(Mobile|Tablet|TV)\b/i.exec(s))?(a=a||"Firefox OS",A=A||h[1]):!I||(h=!/\bMinefield\b/i.test(s)&&/\b(?:Firefox|Safari)\b/.exec(I))?(I&&!A&&/[\/,]|^[^(]+?\)/.test(s.slice(s.indexOf(h+"/")+8))&&(I=null),(h=A||P||a)&&(A||P||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(a))&&(I=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(a)?a:h)+" Browser")):"Electron"==I&&(h=(/\bChrome\/([\d.]+)\b/.exec(s)||0)[1])&&T.push("Chromium "+h):a="Kubuntu",S=S||M(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",R(I),"(?:Firefox|Minefield|NetFront)"],function(e,t){return e||(RegExp(t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(s)||0)[1]||null}),(h=("iCab"==C&&3<parseFloat(S)?"WebKit":/\bOpera\b/.test(I)&&(/\bOPR\b/.test(s)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(s)&&!/^(?:Trident|EdgeHTML)$/.test(C)&&"WebKit"||!C&&/\bMSIE\b/i.test(s)&&("Mac OS"==a?"Tasman":"Trident")||"WebKit"==C&&/\bPlayStation\b(?! Vita\b)/i.test(I)&&"NetFront")&&(C=[h]),"IE"==I&&(h=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(s)||0)[1])?(I+=" Mobile",a="Windows Phone "+(/\+$/.test(h)?h:h+".x"),T.unshift("desktop mode")):/\bWPDesktop\b/i.test(s)?(I="IE Mobile",a="Windows Phone 8.x",T.unshift("desktop mode"),S=S||(/\brv:([\d.]+)/.exec(s)||0)[1]):"IE"!=I&&"Trident"==C&&(h=/\brv:([\d.]+)/.exec(s))&&(I&&T.push("identifying as "+I+(S?" "+S:"")),I="IE",S=h[1]),b){if(c="global",n=null!=(e=t)?typeof e[c]:"number",/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!e[c])N(h=t.runtime)==l?(I="Adobe AIR",a=h.flash.system.Capabilities.os):N(h=t.phantom)==u?(I="PhantomJS",S=(h=h.version||null)&&h.major+"."+h.minor+"."+h.patch):"number"==typeof f.documentMode&&(h=/\bTrident\/(\d+)/i.exec(s))?(S=[S,f.documentMode],(h=+h[1]+4)!=S[1]&&(T.push("IE "+S[1]+" mode"),C&&(C[1]=""),S[1]=h),S="IE"==I?String(S[1].toFixed(1)):S[0]):"number"==typeof f.documentMode&&/^(?:Chrome|Firefox)\b/.test(I)&&(T.push("masking as "+I+" "+S),I="IE",S="11.0",C=["Trident"],a="Windows");else if(p&&(_=(h=p.lang.System).getProperty("os.arch"),a=a||h.getProperty("os.name")+" "+h.getProperty("os.version")),d){try{S=t.require("ringo/engine").version.join("."),I="RingoJS"}catch(e){(h=t.system)&&h.global.system==t.system&&(I="Narwhal",a=a||(h[0].os||null))}I=I||"Rhino"}else"object"==typeof t.process&&!t.true&&(h=t.process)&&("object"==typeof h.versions&&("string"==typeof h.versions.electron?(T.push("Node "+h.versions.node),I="Electron",S=h.versions.electron):"string"==typeof h.versions.nw&&(T.push("Chromium "+S,"Node "+h.versions.node),I="NW.js",S=h.versions.nw)),I||(I="Node.js",_=h.arch,a=h.platform,S=(S=/[\d.]+/.exec(h.version))?S[0]:null));a=a&&L(a)}if(S&&(h=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(S)||/(?:alpha|beta)(?: ?\d)?/i.exec(s+";"+(b&&i.appMinorVersion))||/\bMinefield\b/i.test(s)&&"a")&&(E=/b/i.test(h)?"beta":"alpha",S=S.replace(RegExp(h+"\\+?$"),"")+("beta"==E?g:m)+(/\d+\+?/.exec(h)||"")),"Fennec"==I||"Firefox"==I&&/\b(?:Android|Firefox OS)\b/.test(a))I="Firefox Mobile";else if("Maxthon"==I&&S)S=S.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(A))"Xbox 360"==A&&(a=null),"Xbox 360"==A&&/\bIEMobile\b/.test(s)&&T.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(I)&&(!I||A||/Browser|Mobi/.test(I))||"Windows CE"!=a&&!/Mobi/i.test(s))if("IE"==I&&b)try{null===t.external&&T.unshift("platform preview")}catch(e){T.unshift("embedded")}else(/\bBlackBerry\b/.test(A)||/\bBB10\b/.test(s))&&(h=(RegExp(A.replace(/ +/g," *")+"/([.\\d]+)","i").exec(s)||0)[1]||S)?(a=((h=[h,/BB10/.test(s)])[1]?(A=null,P="BlackBerry"):"Device Software")+" "+h[0],S=null):this!=k&&"Wii"!=A&&(b&&v||/Opera/.test(I)&&/\b(?:MSIE|Firefox)\b/i.test(s)||"Firefox"==I&&/\bOS X (?:\d+\.){2,}/.test(a)||"IE"==I&&(a&&!/^Win/.test(a)&&5.5<S||/\bWindows XP\b/.test(a)&&8<S||8==S&&!/\bTrident\b/.test(s)))&&!D.test(h=H.call(k,s.replace(D,"")+";"))&&h.name&&(h="ing as "+h.name+((h=h.version)?" "+h:""),D.test(I)?(/\bIE\b/.test(h)&&"Mac OS"==a&&(a=null),h="identify"+h):(h="mask"+h,I=y?L(y.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(h)&&(a=null),b||(S=null)),C=["Presto"],T.push(h));else I+=" Mobile";(h=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(s)||0)[1])&&(h=[parseFloat(h.replace(/\.(\d)$/,".0$1")),h],"Safari"==I&&"+"==h[1].slice(-1)?(I="WebKit Nightly",E="alpha",S=h[1].slice(0,-1)):S!=h[1]&&S!=(h[2]=(/\bSafari\/([\d.]+\+?)/i.exec(s)||0)[1])||(S=null),h[1]=(/\bChrome\/([\d.]+)/i.exec(s)||0)[1],537.36==h[0]&&537.36==h[2]&&28<=parseFloat(h[1])&&"WebKit"==C&&(C=["Blink"]),h=b&&(o||h[1])?(C&&(C[1]="like Chrome"),h[1]||((h=h[0])<530?1:h<532?2:h<532.05?3:h<533?4:h<534.03?5:h<534.07?6:h<534.1?7:h<534.13?8:h<534.16?9:h<534.24?10:h<534.3?11:h<535.01?12:h<535.02?"13+":h<535.07?15:h<535.11?16:h<535.19?17:h<536.05?18:h<536.1?19:h<537.01?20:h<537.11?"21+":h<537.13?23:h<537.18?24:h<537.24?25:h<537.36?26:"Blink"!=C?"27":"28")):(C&&(C[1]="like Safari"),(h=h[0])<400?1:h<500?2:h<526?3:h<533?4:h<534?"4+":h<535?5:h<537?6:h<538?7:h<601?8:"8"),C&&(C[1]+=" "+(h+="number"==typeof h?".x":/[.+]/.test(h)?"":"+")),"Safari"==I&&(!S||45<parseInt(S))&&(S=h)),"Opera"==I&&(h=/\bzbov|zvav$/.exec(a))?(I+=" ",T.unshift("desktop mode"),"zvav"==h?(I+="Mini",S=null):I+="Mobile",a=a.replace(RegExp(" *"+h+"$"),"")):"Safari"==I&&/\bChrome\b/.exec(C&&C[1])&&(T.unshift("desktop mode"),I="Chrome Mobile",S=null,a=/\bOS X\b/.test(a)?(P="Apple","iOS 4.3+"):null),S&&0==S.indexOf(h=/[\d.]+$/.exec(a))&&-1<s.indexOf("/"+h+"-")&&(a=B(a.replace(h,""))),C&&!/\b(?:Avant|Nook)\b/.test(I)&&(/Browser|Lunascape|Maxthon/.test(I)||"Safari"!=I&&/^iOS/.test(a)&&/\bSafari\b/.test(C[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(I)&&C[1])&&(h=C[C.length-1])&&T.push(h),T.length&&(T=["("+T.join("; ")+")"]),P&&A&&A.indexOf(P)<0&&T.push("on "+P),A&&T.push((/^on /.test(T[T.length-1])?"":"on ")+A),a&&(h=/ ([\d.+]+)$/.exec(a),r=h&&"/"==a.charAt(a.length-h[0].length-1),a={architecture:32,family:h&&!r?a.replace(h[0],""):a,version:h?h[1]:null,toString:function(){var e=this.version;return this.family+(e&&!r?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(h=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(_))&&!/\bi686\b/i.test(_)?(a&&(a.architecture=64,a.family=a.family.replace(RegExp(" *"+h),"")),I&&(/\bWOW64\b/i.test(s)||b&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(s))&&T.unshift("32-bit")):a&&/^OS X/.test(a.family)&&"Chrome"==I&&39<=parseFloat(S)&&(a.architecture=64),s=s||null;i={};return i.description=s,i.layout=C&&C[0],i.manufacturer=P,i.name=I,i.prerelease=E,i.product=A,i.ua=s,i.version=I&&S,i.os=a||{architecture:null,family:null,version:null,toString:function(){return"null"}},i.parse=H,i.toString=function(){return this.description||""},i.version&&T.unshift(S),i.name&&T.unshift(I),a&&I&&(a!=String(a).split(" ")[0]||a!=I.split(" ")[0]&&!A)&&T.push(A?"("+a+")":"on "+a),T.length&&(i.description=T.join(" ")),i}t=H();i&&e?k(t,function(e,t){i[t]=e}):x.platform=t}).call(l)}(s={exports:{}},s.exports),s.exports),a=new WeakMap,c=Number.MAX_SAFE_INTEGER||9007199254740991,h=new Blob(['!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);const n=new Map,o=new Map,i=(e,t)=>{let r,n;if("performance"in self){const o=performance.now();r=o,n=e-Math.max(0,o-t)}else r=Date.now(),n=e;return{expected:r+n,remainingDelay:n}},s=(e,t,r,n)=>{const o="performance"in self?performance.now():Date.now();o>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:n}}):e.set(t,setTimeout(s,r-o,e,t,r,n))};addEventListener("message",({data:e})=>{try{if("clear"===e.method){const t=e.id,r=e.params,i=r.timerId,s=r.timerType;if("interval"===s)(e=>{const t=n.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),n.delete(e)})(i),postMessage({error:null,id:t});else{if("timeout"!==s)throw new Error(\'The given type "\'.concat(s,\'" is not supported\'));(e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)})(i),postMessage({error:null,id:t})}}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const t=e.params,r=t.delay,a=t.now,c=t.timerId,l=t.timerType;if("interval"===l)((e,t,r)=>{const o=i(e,r),a=o.expected,c=o.remainingDelay;n.set(t,setTimeout(s,c,n,t,a,"interval"))})(r,c,a);else{if("timeout"!==l)throw new Error(\'The given type "\'.concat(l,\'" is not supported\'));((e,t,r)=>{const n=i(e,r),a=n.expected,c=n.remainingDelay;o.set(t,setTimeout(s,c,o,t,a,"timeout"))})(r,c,a)}}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'],{type:"application/javascript; charset=utf-8"}),u=URL.createObjectURL(h),h=function(e){var o=new Map,a=new Map,l=new Map,n=new Worker(e);n.addEventListener("message",function(e){var t=e.data;if(void 0!==(e=t).method&&"call"===e.method){var i=t.params,n=i.timerId;if("interval"===(i=i.timerType))if("number"==typeof(r=o.get(n))){if(void 0===(s=l.get(r))||s.timerId!==n||s.timerType!==i)throw new Error("The timer is in an undefined state.")}else{if(void 0===r)throw new Error("The timer is in an undefined state.");r()}else if("timeout"===i){if("number"==typeof(r=a.get(n))){if(void 0===(s=l.get(r))||s.timerId!==n||s.timerType!==i)throw new Error("The timer is in an undefined state.")}else{if(void 0===r)throw new Error("The timer is in an undefined state.");r(),a.delete(n)}}}else{if(null!==(r=t).error||"number"!=typeof r.id){var r=t.error.message;throw new Error(r)}var s,t=t.id;if(void 0===(s=l.get(t)))throw new Error("The timer is in an undefined state.");n=s.timerId,i=s.timerType;l.delete(t),("interval"===i?o:a).delete(n)}});return{clearInterval:function(e){var t=r(l);l.set(t,{timerId:e,timerType:"interval"}),o.set(e,t),n.postMessage({id:t,method:"clear",params:{timerId:e,timerType:"interval"}})},clearTimeout:function(e){var t=r(l);l.set(t,{timerId:e,timerType:"timeout"}),a.set(e,t),n.postMessage({id:t,method:"clear",params:{timerId:e,timerType:"timeout"}})},setInterval:function(e,t){var i=r(o);return o.set(i,function(){e(),"function"==typeof o.get(i)&&n.postMessage({id:null,method:"set",params:{delay:t,now:performance.now(),timerId:i,timerType:"interval"}})}),n.postMessage({id:null,method:"set",params:{delay:t,now:performance.now(),timerId:i,timerType:"interval"}}),i},setTimeout:function(e,t){var i=r(a);return a.set(i,e),n.postMessage({id:null,method:"set",params:{delay:t,now:performance.now(),timerId:i,timerType:"timeout"}}),i}}}(u),p=h.clearInterval,d=h.clearTimeout,m=h.setInterval,g=h.setTimeout;URL.revokeObjectURL(u);function f(e,t,i,n,r,s,o){void 0===s&&(s={}),void 0===o&&(o={}),this.CYCLE_TIME=1e3,this.EVENT_PURGE_TIME_DEFAULT=3*this.CYCLE_TIME,this.TIME_WITHOUT_BEAT_DEFAULT=60*this.CYCLE_TIME,this.SERVER_URL_DEFAULT="",this.CUSTOMER_DEFAULT="",this.BUSINESS_UNIT_DEFAULT="",this.INCLUDE_DEVICE_METRICS_DEFAULT=!0,this.SESSION_TOKEN_DEFAULT="",this.SESSION_ID_DEFAULT="",this.DEBUG_DEFAULT=!1,this.MAX_RETRIES=20,this.DEVICE_CLOCK_CHECK_THRESHOLD=3e5,this.eventsSkeleton=this.initEventSkeleton(),this.customer_=t,this.businessUnit_=i,this.sessionToken_=n,this.serverURL_=e,this.includeDeviceMetrics_=!1,this.userId_=r,this.deviceInfoData_=s,this.props_=o||{},this.pendingRequest_=!1}u={debug:{configurable:!0},deviceAppInfo:{configurable:!0}};f.prototype.init=function(){var e=this;this.cycleTimer&&("undefined"!=typeof Worker&&!0!==this.props_.disableWebWorkers?p:clearInterval)(this.cycleTimer),"undefined"!=typeof Worker&&!0!==this.props_.disableWebWorkers?this.cycleTimer=m(function(){return e.cycle()},this.CYCLE_TIME):this.cycleTimer=setInterval(function(){return e.cycle()},this.CYCLE_TIME),this.communicationCurrentTime=0,this.lastCommunicationTime=0,this.eventPool={}},f.prototype.clear=function(){this.eventPool={}},u.debug.get=function(){return this.debug_},u.debug.set=function(e){this.debug_=e},f.prototype.ok=function(e){e=this.eventPool[e];return!!e&&(!1===e.forbidden&&e.retries<this.MAX_RETRIES)},f.prototype.created=function(e,t){void 0===t&&(t={});this.addEventToPool(e,{type:"Created"},t)},f.prototype.play=function(e,t,i){void 0===i&&(i={});t={type:"PlayerReady",currentTime:t};this.deviceAppInfo&&(i.deviceAppInfo=this.deviceAppInfo),this.addEventToPool(e,t,i)},f.prototype.playing=function(e,t,i){void 0===i&&(i={});var n={type:"Started",currentTime:t};!this.customAttributes||(t=Object.keys(this.customAttributes)).length&&0<t.length&&(i.attributes=this.customAttributes),this.addEventToPool(e,n,i),this.changeSessionState(e,"PLAYING")},f.prototype.paused=function(e,t,i){void 0===i&&(i={});t={type:"Paused",currentTime:t};this.addEventToPool(e,t,i,!0)},f.prototype.seek=function(e,t,i){void 0===i&&(i={});t={type:"ScrubbedTo",currentTime:t};this.addEventToPool(e,t,i,!0)},f.prototype.programChanged=function(e,t,i){void 0===i&&(i={});t={type:"ProgramChanged",currentTime:t};this.addEventToPool(e,t,i,!0)},f.prototype.startCasting=function(e,t,i){void 0===i&&(i={});t={type:"StartCasting",currentTime:t};this.addEventToPool(e,t,i,!0),this.changeSessionState(e,"FINISHED")},f.prototype.stopCasting=function(e,t,i){void 0===i&&(i={});t={type:"StopCasting",currentTime:t};this.addEventToPool(e,t,i,!0),this.changeSessionState(e,"FINISHED")},f.prototype.setCurrentTime=function(e,t){this.eventPool[e]&&(this.eventPool[e].currentTime=t)},f.prototype.handshake=function(e,t){void 0===t&&(t={});this.addEventToPool(e,{type:"HandshakeStarted"},t)},f.prototype.resume=function(e,t,i){void 0===i&&(i={});t={type:"Resumed",currentTime:t};this.addEventToPool(e,t,i,!0)},f.prototype.bitrateChanged=function(e,t,i){void 0===i&&(i={});t={type:"BitrateChanged",currentTime:t};this.addEventToPool(e,t,i,!0)},f.prototype.drmSessionUpdate=function(e,t){void 0===t&&(t={});this.addEventToPool(e,{type:"DRM"},t,!0)},f.prototype.endOfStream=function(e,t){void 0===t&&(t={});this.addEventToPool(e,{type:"Completed"},t,!0),this.changeSessionState(e,"FINISHED")},f.prototype.error=function(e,t,i){void 0===i&&(i={});t={type:"Error",currentTime:t};this.addEventToPool(e,t,i),this.changeSessionState(e,"FINISHED")},f.prototype.dispose=function(e,t,i){void 0===i&&(i={});var n=this.eventPool[e];n&&"FINISHED"!==n.currentState&&(n={type:"Aborted"},t&&(n.currentTime=t),this.addEventToPool(e,n,i,!0),this.changeSessionState(e,"FINISHED"))},f.prototype.waiting=function(e,t,i){void 0===i&&(i={});t={type:"BufferingStarted",currentTime:t};this.addEventToPool(e,t,i)},f.prototype.waitingEnded=function(e,t,i){void 0===i&&(i={});t={type:"BufferingEnded",currentTime:t};this.addEventToPool(e,t,i)},f.prototype.getSessionState=function(e){return this.eventPool[e]&&this.eventPool[e].currentState||"IDLE"},f.prototype.dispatchNow=function(e){void 0===e&&(e=!0),this.cycle(e,!0)},f.prototype.exitOngoingSession=function(t){var i=this;Object.keys(this.eventPool).map(function(e){i.eventPool[e]&&i.dispose(e,t)})},f.prototype.setCustomAttribute=function(e,t){this.customAttributes||this.resetAnalyticsCustomAttributes(),this.customAttributes[e]=t},f.prototype.clearCustomAttributes=function(){this.customAttributes={}},f.prototype.removeSession=function(e,t){void 0===t&&(t=!1),!0===t?delete this.eventPool[e]:(e=this.eventPool[e])&&(e.currentState="REMOVED")},f.prototype.hasDataToSend=function(){for(var e=Object.keys(this.eventPool),t=0;t<e.length;++t)if(0<this.eventPool[e[t]].events.length)return!0;return!1},f.prototype.sendData=function(t,r){var s,o,a=this;void 0===t&&(t=!0),void 0===r&&(r=!1),this.pendingRequest_||(s=!1,this.pendingRequest_=!0,o=("undefined"!=typeof Worker&&!0!==this.props_.disableWebWorkers?g:setTimeout)(function(){a.pendingRequest_=!1,o=void 0},2*this.EVENT_PURGE_TIME_DEFAULT),Object.keys(this.eventPool).map(function(i){var e,n=a.eventPool[i];if(n){if(!i)return n.events=[],void a.removeSession(i,!0);"PLAYING"===n.currentState&&0===n.events.length&&r&&n.events.push({EventType:"Playback.Heartbeat",Timestamp:(new Date).getTime(),OffsetTime:Math.floor(1e3*n.currentTime)}),"IDLE"!==n.currentState&&"REMOVED"!==n.currentState&&(0!==n.events.length?(e={DispatchTime:(new Date).getTime(),Customer:a.customer_,BusinessUnit:a.businessUnit_,Payload:n.events,SessionId:i,ClockOffset:n.clockOffset},a.debugLog("Sending analytics - sessionId: "+i+" and params: ",e),n.retries>a.MAX_RETRIES||!0===n.forbidden?n.events=[]:(Math.abs(a.communicationCurrentDate-a.lastCommunicationDate)>a.DEVICE_CLOCK_CHECK_THRESHOLD&&a.initRequest(i).then(function(){}),s=!0,a.sendRequest(t,e,function(e,t){if(o)try{o="undefined"!=typeof Worker&&!0!==a.props_.disableWebWorkers?void d(o):void clearTimeout(o)}catch(e){}a.pendingRequest_=!1;e=e&&e.httpCode?e.httpCode:200;void 0!==t||200!==e?(401===e&&(n.forbidden=!0),a.debugLog("Error sending request to backend",t),t||n.retries++):(n.events=[],n.retries=0,t=new Date,a.afterSendData_&&a.afterSendData_(t,n.lastRequestDate),n.lastRequestDate=t,"FINISHED"===n.currentState&&a.removeSession(i))}))):"FINISHED"===n.currentState&&a.removeSession(i))}}),s||(this.pendingRequest_=!1))},f.prototype.cycle=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1),this.communicationCurrentDate=new Date,this.communicationCurrentTime+=this.CYCLE_TIME,this.hasDataToSend()?(t||this.lastCommunicationTime+this.EVENT_PURGE_TIME_DEFAULT<this.communicationCurrentTime)&&(this.sendData(e),this.lastCommunicationTime=this.communicationCurrentTime,this.lastCommunicationDate=this.communicationCurrentDate):(t||this.lastCommunicationTime+this.TIME_WITHOUT_BEAT_DEFAULT<this.communicationCurrentTime)&&(this.sendData(e,!0),this.lastCommunicationTime=this.communicationCurrentTime,this.lastCommunicationDate=this.communicationCurrentDate)},f.prototype.sendRequest=function(e,t,i){var n=new XMLHttpRequest;n.open("POST",this.serverURL_+"/eventsink/send",!0),n.setRequestHeader("Content-type","application/json"),n.setRequestHeader("Authorization","Bearer "+this.sessionToken_),n.onload=function(){var e=JSON.parse(this.responseText);i(e)},n.onerror=function(e){i(null,e)},n.send(JSON.stringify(t))},f.prototype.initRequest=function(s){var o=this;return new Promise(function(i,t){var n=(new Date).getTime(),r=new XMLHttpRequest;r.open("POST",o.serverURL_+"/eventsink/init",!0),r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("Authorization","Bearer "+o.sessionToken_),r.onload=function(){var e=(new Date).getTime(),t=JSON.parse(r.responseText);o.determineClockOffset(s,t,n,e),t&&t.settings&&t.settings.includeDeviceMetrics&&(o.includeDeviceMetrics_=!!t.settings.includeDeviceMetrics),i()},r.onerror=function(e){o.debugLog("Unable to init. Aborting."),t(e)};var e={Customer:o.customer_,BusinessUnit:o.businessUnit_,SessionId:s};r.send(JSON.stringify(e))})},f.prototype.debugLog=function(e,t){t=t||"",this.debug_&&console.log("Analytics: "+e,t)},f.prototype.addDeviceInfoEvent=function(e){var t=this.eventPool[e];this.includeDeviceMetrics_&&t&&t.events&&t.events.length&&(e={Timestamp:(new Date).getTime(),EventType:"Device.Info",DeviceModel:this.deviceInfoData_.deviceModel||"Desktop",UserAgent:this.deviceInfoData_.userAgent||(i.navigator?i.navigator.userAgent:""),Height:this.deviceInfoData_.screenHeight||(i.screen?i.screen.height:0),Width:this.deviceInfoData_.screenWidth||(i.screen?i.screen.width:0),Model:this.deviceInfoData_.model||(i.navigator?i.navigator.appName:""),Name:this.deviceInfoData_.deviceName||(i.navigator?i.navigator.product:""),OS:this.deviceInfoData_.deviceOS||o.os.family,OSVersion:this.deviceInfoData_.deviceOSVersion||o.os.version,Type:this.deviceInfoData_.type||"WEB"},(this.deviceInfoData_.deviceManufacturer||o.manufacturer)&&(e.Manufacturer=this.deviceInfoData_.deviceManufacturer||o.manufacturer),this.deviceInfoData_.deviceId&&(e.DeviceId=this.deviceInfoData_.deviceId),t.events.push(e))},f.prototype.determineClockOffset=function(e,t,i,n){e=this.eventPool[e];e&&(e.clockOffset=Math.floor((n-t.repliedTime+i-t.receivedTime)/2))},f.prototype.createPool=function(i){var n=this;return new Promise(function(e,t){n.eventPool[i]={currentState:"IDLE",currentTime:0,clockOffset:0,events:[],retries:0,forbidden:!1},n.initRequest(i).then(function(){n.addDeviceInfoEvent(i),e()}).catch(function(e){t(e)})})},f.prototype.addEventToPool=function(e,t,i,n){var r,s=this;void 0===n&&(n=!1),n&&this.eventPool[e]&&("FINISHED"===this.eventPool[e].currentState||"REMOVED"===this.eventPool[e].currentState)||(this.eventPool[e]||(r=this.createPool(e)),r?r.then(function(){s.internalAddEventToPool(e,t,i)}):this.internalAddEventToPool(e,t,i))},f.prototype.internalAddEventToPool=function(e,t,i){var n,r=this.eventsSkeleton[t.type];r?(n={Timestamp:(new Date).getTime(),EventType:"Playback."+r.event},r.includeOffset&&(n.OffsetTime=Math.floor(1e3*t.currentTime)),r.attributes&&"function"==typeof r.attributes&&(n=this.objectAssign(n,r.attributes(i))),this.eventPool[e].events.push(n),this.debugLog("added "+r.event+" to queue")):this.debugLog("Unknown playback event: ",t)},f.prototype.changeSessionState=function(e,t){var i,n=this;this.eventPool[e]||(i=this.createPool(e)),i?i.then(function(){n.eventPool[e].currentState=t}):this.eventPool[e].currentState=t},u.deviceAppInfo.get=function(){return this.deviceInfoData_?this.deviceInfoData_.deviceAppInfo:null},f.prototype.initEventSkeleton=function(){var e={Completed:{event:"Completed",autoListener:!1}};return e.PlayerReady={event:"PlayerReady",autoListener:!1,attributes:function(e){var t={Technology:e.techName,PlayerVersion:e.version};return e.techVersion&&(t.TechVersion=e.techVersion),t.AnalyticsVersion=f.VERSION,e.deviceAppInfo&&(t.DeviceAppInfo=e.deviceAppInfo),e.playMode&&(t.PlayMode=e.playMode),t}},e.Resumed={event:"Resumed",autoListener:!1,includeOffset:!0},e.BufferingStarted={event:"BufferingStarted",includeOffset:!0},e.BufferingEnded={event:"BufferingEnded",includeOffset:!0},e.ScrubbedTo={event:"ScrubbedTo",includeOffset:!0},e.Created={event:"Created",attributes:function(e){var t={};return void 0!==e.autoplay&&(t.AutoPlay=e.autoplay),e.techName&&(t.Technology=e.techName),e.player&&(t.Player=e.player),e.version&&(t.Version=e.version),e.requestId&&(t.RequestId=e.requestId),e.techVersion&&(t.TechVersion=e.techVersion),e.deviceAppInfo&&(t.DeviceAppInfo=e.deviceAppInfo),e.playMode&&(t.PlayMode=e.playMode),t}},e.StartCasting={event:"StartCasting",includeOffset:!0},e.StopCasting={event:"StopCasting",includeOffset:!0},e.Paused={event:"Paused",includeOffset:!0},e.BitrateChanged={event:"BitrateChanged",includeOffset:!0,attributes:function(e){return{Bitrate:e.bitrate}}},e.DRM={event:"DRM",includeOffset:!1,attributes:function(e){var t={};return e.message&&(t.Message=e.message),e.code&&(t.Code=e.code),e.info&&(t.Info=e.info),t}},e.Error={event:"Error",includeOffset:!0,attributes:function(e){var t={};return e.errorCode&&(t.Code=e.errorCode),e.errorMessage?t.Message=e.errorMessage:t.Message="Unknown Error",e.errorInfo&&(t.Info=e.errorInfo),e.errorDetails&&(t.Details=e.errorDetails),t}},e.HandshakeStarted={event:"HandshakeStarted",autoListener:!1,attributes:function(e){if(!e.assetId)return{};var t={AssetId:e.assetId};return e.programId&&(t.ProgramId=e.programId),t}},e.ProgramChanged={event:"ProgramChanged",includeOffset:!0,autoListener:!1,attributes:function(e){return e.programId?{ProgramId:e.programId}:{}}},e.Aborted={event:"Aborted",autoListener:!1,includeOffset:!0},e.Started={event:"Started",autoListener:!1,includeOffset:!0,attributes:function(e){var t={};return e.bitrate&&(t.Bitrate=e.bitrate),e.duration&&(t.VideoLength=1e3*e.duration),e.mediaLocator&&(t.MediaLocator=e.mediaLocator),e.attributes&&(t.Attributes=e.attributes),e.referenceTime&&(t.ReferenceTime=e.referenceTime),e.playMode&&(t.PlayMode=e.playMode),t}},e},f.prototype.objectAssign=function(e){for(var t,i,n=arguments,r=1;r<arguments.length;++r)for(t in i=n[r])Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e},Object.defineProperties(f.prototype,u),f.VERSION="2.1.119-25";u=f.default||f;e.exports=u})),Be=y.empAnalytics||H,H=function(i){function e(e,t){e=i.call(this,e,t)||this;L("AnalyticsPlugin","create"),e.analyticsConnector_=null,e.options_=t,e.onLoadStartBind=e.onLoadStart_.bind(h(e)),e.player.on(I.LOAD_START,e.onLoadStartBind);t=function(){var e=y.navigator.userAgent,t=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([0-9.]+)/i)||[];if(/trident/i.test(t[1]))return{name:"Explorer",version:(i=/\brv[ :]+([0-9.]+)/g.exec(e)||[])[1]||""};if("Chrome"!==t[1]||null===(i=e.match(/\b(OPR|Edge|Edg)\/([0-9.]+)/)))return t=t[2]?[t[1],t[2]]:[y.navigator.appName,y.navigator.appVersion,"-?"],null!==(i=e.match(/version\/([0-9.]+)/i))&&t.splice(1,1,i[1]),{name:t[0],version:t[1]};var i=i.slice(1).toString().split(",");return"Edg"===i[0]&&(i[0]="ChromiumEdge"),{name:i[0].replace("OPR","Opera"),version:i[1]}}();return e.options_=e.options_||{},e.options_.analytics=e.options_.analytics||{},e.options_.analytics.deviceInfo=e.options_.analytics.deviceInfo||{},e.options_.analytics.deviceInfo=p.mergeOptions({deviceName:t.name,model:t.version},e.options_.analytics.deviceInfo),e}c(e,i);var t=e.prototype;return t.stop=function(){this.analyticsConnector_&&this.analyticsConnector_.dispose&&(this.analyticsConnector_.dispose(),this.analyticsConnector_=null)},t.stopCasting=function(){this.analyticsConnector_&&this.analyticsConnector_.dispose&&(this.analyticsConnector_.onChromeCastingStop(!0),this.analyticsConnector_=null)},t.dispose=function(){L("AnalyticsPlugin","dispose"),this.player.off(I.LOAD_START,this.onLoadStartBind),this.stop(),i.prototype.dispose.call(this)},t.options=function(e){if(!e)return this.options_;this.options_=p.mergeOptions(this.options_,e)},t.newAnalytics=function(e){L("new EMPAnalytics");e=new Be(e.exposureApiURL,e.customer,e.businessUnit,e.sessionToken,e.userId,this.options_.analytics&&this.options_.analytics.deviceInfo);this.stop(),L("new EMPAnalyticsConnector"),this.analyticsConnector_=new Me(this.player,e,this.options_)},t.onEntitlementLoadStart=function(){this.analyticsConnector_&&this.analyticsConnector_.onEntitlementLoadStart()},t.onError=function(e){this.analyticsConnector_&&this.analyticsConnector_.onError(e)},t.onWindowUnload=function(){this.analyticsConnector_&&this.analyticsConnector_.onWindowUnload()},t.onLoadStart_=function(){Q.getEntitlement(this.player)||this.stop()},t.version=function(){return Be?Be.VERSION:i.prototype.version.call(this)},o(e,[{key:"connector",get:function(){return this.analyticsConnector_}}]),e}(p.getPlugin("plugin"));H.VERSION="2.2.136-573",p.getPlugin("analytics")?p.log.warn('A plugin named "analytics" already exists.'):p.registerPlugin("analytics",H);var He=function(r){function e(e){var t;void 0===e&&(e={});var i=!0,n=w.ENTITLEMENT2;return"string"==typeof e?t=e:e instanceof Object&&(t=e.message,!1===e.fatal&&(i=e.fatal),e.code&&(n=e.code)),(t=r.call(this,t)||this).fatal=i,t.code=n,t}return c(e,r),o(e,[{key:"fatal",get:function(){return!!this.fatal_},set:function(e){this.fatal_=e}}]),e}(e(i(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,i){for(var n=!0;n;){var r=e,s=t,o=i,n=!1;null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,s);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(o)}r=Object.getPrototypeOf(r);if(null===r)return;e=r,t=s,i=o,n=!0,a=void 0}};var n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,Error),r);function r(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),i(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,e),Object.defineProperty(this,"message",{enumerable:!1,value:e,writable:!0}),Object.defineProperty(this,"name",{enumerable:!1,value:this.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):Object.defineProperty(this,"stack",{enumerable:!1,value:new Error(e).stack,writable:!0})}t.default=n,e.exports=t.default}))),Ge=function(){function n(e){void 0===e&&(e={}),this.options_=e}var e=n.prototype;return e.getEntitlement=function(){throw new He("EntitlementEngine: getEntitlement should be implemented in subclass.")},e.getV2Entitlement=function(){throw new He("EntitlementEngine: getV2Entitlement should be implemented in subclass.")},e.getV2Asset_=function(e,t,i,n){throw void 0===n&&(n=function(){}),new He("EntitlementEngine: getV2Asset_ should be implemented in subclass.")},e.getServerTime=function(){throw new He("EntitlementEngine: getServerTime should be implemented in subclass.")},e.syncServerTime=function(i){this.getServerTime(function(e,t){t&&(L.error("getServerTime",t),e=new Date),n.ServerTimeDiff_=e-new Date,L("serverDiff",n.ServerTimeDiff_),i&&i(n.ServerTimeDiff_,t)})},e.getCachedServerTime=function(){return void 0!==n.ServerTimeDiff_?Date.now()+n.ServerTimeDiff_:Date.now()},e.getPreferences=function(){throw new He("EntitlementEngine: getPreferences should be implemented in subclass.")},e.savePreferences=function(){throw new He("EntitlementEngine: savePreferences should be implemented in subclass.")},e.getProgramInfo=function(){throw new He("EntitlementEngine: getProgramInfo should be implemented in subclass.")},e.getNextProgram=function(){throw new He("EntitlementEngine: getProgramInfo should be implemented in subclass.")},e.getPreviousProgram=function(){throw new He("EntitlementEngine: getProgramInfo should be implemented in subclass.")},e.getEPG=function(){throw new He("EntitlementEngine: getEPG should be implemented in subclass.")},e.getAssetInfo=function(){throw new He("EntitlementEngine: getAssetInfo should be implemented in subclass.")},e.getChannelInfo=function(){throw new He("EntitlementEngine: getChannelInfo should be implemented in subclass.")},e.verifySession=function(){throw new He("EntitlementEngine: verifySession should be implemented in subclass.")},e.verifyEntitlement=function(){throw new He("EntitlementEngine: verifyEntitlement should be implemented in subclass.")},e.login=function(){throw new He("EntitlementEngine: login should be implemented in subclass.")},e.logout=function(){throw new He("EntitlementEngine: logout should be implemented in subclass.")},e.fetchPreferences=function(){throw new He("EntitlementEngine: fetchPreferences should be implemented in subclass.")},e.savePreferences=function(){throw new He("EntitlementEngine: savePreferences should be implemented in subclass.")},n.isEntitlementEngine=function(e){return e.prototype instanceof n||e instanceof n||e===n},n.registerEntitlementEngine=function(e,t){if(n.engines_||(n.engines_={}),!n.isEntitlementEngine(t))throw new He("EntitlementEngine "+e+" must be a EntitlementEngine");return n.engines_[e]=t},n.getEntitlementEngine=function(e){return e=e||"EricssonExposure",n.engines_&&n.engines_[e]?n.engines_[e]:null},n}();Ge.ServerTimeDiff_=void 0;var Ue=function(){function e(){this.channelId=0,this.assetId=void 0,this.programId=void 0,this.productId="",this.mimeType="",this.playRequest=null,this.requestId="",this.edrmConfig=null,this.live=!1,this.playSessionId="",this.analyticsConfig=null,this.lastViewedOffset=null,this.lastViewedTime=null,this.liveTime=null,this.entitlementType="",this.licenseExpiration=null,this.licenseExpirationReason="",this.minBitrate=0,this.maxBitrate=0,this.maxResWidth=0,this.maxResHeight=0,this.rwEnabled=!0,this.ffEnabled=!0,this.airplayBlocked=!1,this.mdnRequestRouterUrl="",this.timeshiftEnabled=!0,this.formats=null,this.mediaLocator="",this.src="",this.adMediaLocator="",this.streamInfo=null,this.playToken="",this.playTokenExpiration="",this.protection=void 0,this.certificateServer=void 0,this.keySystems=void 0,this.liveDelay=void 0}var t=e.prototype;return t.commonInitiate=function(e){this.edrmConfig=e.edrmConfig||null,this.playSessionId=e.playSessionId||"",this.analyticsConfig=e.analyticsConfig||null,this.entitlementType=e.entitlementType||"",this.mdnRequestRouterUrl=e.mdnRequestRouterUrl||"",this.playToken=e.playToken||"",this.playTokenExpiration=e.playTokenExpiration||""},t.initiateV1=function(e,t){this.commonInitiate(e),this.minBitrate=e.minBitrate||0,this.maxBitrate=e.maxBitrate||0,this.maxResWidth=e.maxResWidth||0,this.maxResHeight=e.maxResHeight||0,this.rwEnabled=void 0===e.rwEnabled||e.rwEnabled,this.ffEnabled=void 0===e.ffEnabled||e.ffEnabled,this.airplayBlocked=void 0!==e.airplayBlocked&&e.airplayBlocked,this.timeshiftEnabled=e.timeshiftEnabled||!0,this.lastViewedOffset=e.lastViewedOffset||null,this.lastViewedTime=e.lastViewedTime||null,this.liveTime=e.liveTime||null,this.live=e.live||!1;var i=Date.parse(e.licenseExpiration||null);!1===isNaN(i)&&(this.licenseExpiration=new Date(i)),this.licenseExpirationReason=e.licenseExpirationReason||"",this.mediaLocator=e.mediaLocator||"",this.mediaLocator&&("localhost"===y.location.hostname||ue||0===y.location.hostname.indexOf("192.168.")?this.src=this.mediaLocator:this.src=this.mediaLocator.replace(/^(http:)/,"").replace(/^(https:)/,"")),this.adMediaLocator=e.adMediaLocator||"",e.streamInfo?this.streamInfo=e.streamInfo:this.setupStreamInfo(t),e.fairplayConfig&&(this.protection={},this.protection.certificateUrl=e.fairplayConfig.certificateUrl||"",this.protection.licenseUrl=e.fairplayConfig.licenseAcquisitionUrl||"",e.fairplayConfig.secondaryMediaLocator?this.protection.version="mrr":this.protection.version="irdeto",this.keySystems={"com.apple.fps.1_0":{certificateUri:e.fairplayConfig.certificateUrl||"",licenseUri:e.fairplayConfig.licenseAcquisitionUrl||""}}),e.widevineConfig&&(this.certificateServer=e.widevineConfig.certificateUrl||""),e.cencConfig&&(this.keySystems=e.cencConfig)},t.initiateV2=function(e){var t;this.commonInitiate(e),this.formats=e.formats||null,e.contractRestrictions&&(t=e.contractRestrictions,this.minBitrate=t.minBitrate||0,this.maxBitrate=t.maxBitrate||0,this.maxResWidth=t.maxResWidth||0,this.maxResHeight=t.maxResHeight||0,this.rwEnabled=void 0===t.rwEnabled||t.rwEnabled,this.ffEnabled=void 0===t.ffEnabled||t.ffEnabled,this.airplayBlocked=void 0===t.airplayEnabled||!t.airplayEnabled,this.timeshiftEnabled=t.timeshiftEnabled||!0),e.bookmarks&&(t=e.bookmarks,this.lastViewedOffset=t.lastViewedOffset||null,this.lastViewedTime=t.lastViewedTime||null,this.liveTime=t.liveTime||null),this.durationInMs=e.durationInMs||0,e.streamInfo&&(e=e.streamInfo,this.streamInfo={referenceTime:0},this.updateStreamInfoV2(e))},t.updateStreamInfoV2=function(e){this.live=e.live||!1,this.streamInfo.live=e.live||!1,this.streamInfo.lowLatency=e.lowLatency||!1,this.channelId=e.channelId||void 0,this.programId=e.programId||void 0,this.streamInfo.channelId=e.channelId||void 0,this.streamInfo.programId=e.programId||void 0,this.streamInfo.static=e.static||!1,this.isDynamicCachupAsLive=!e.static&&void 0!==e.start,this.isStaticCachupAsLive=e.static&&void 0!==e.end,e.start&&(this.streamInfo.start=new Date(1e3*e.start),this.streamInfo.startTime=this.streamInfo.start.getTime()),e.end&&(this.streamInfo.end=new Date(1e3*e.end),this.streamInfo.endTime=this.streamInfo.end.getTime()),this.streamInfo.event=e.event&&void 0!==e.programId},t.setupMediaLocator=function(e){this.mediaLocator=e.mediaLocator||"",this.mediaLocator&&("localhost"===y.location.hostname||ue||0===y.location.hostname.indexOf("192.168.")?this.src=this.mediaLocator:this.src=this.mediaLocator.replace(/^(http:)/,"").replace(/^(https:)/,"")),this.adMediaLocator=e.adMediaLocator||"";var t=Date.parse(e.licenseExpiration||null);!1===isNaN(t)&&(this.licenseExpiration=new Date(t)),this.licenseExpirationReason=e.licenseExpirationReason||""},t.selectFormat=function(e){var t,i,n,r,s=this;switch(this.mediaLocator="",this.src="",this.playRequest=e,this.mimeType=e.type,e.format){case"DASH":0<(n=this.formats.filter(function(e){return"DASH"===e.format})).length&&(t=n[0],this.setupMediaLocator(t),t.liveDelay&&(this.liveDelay=t.liveDelay/1e3),t.drm&&(this.keySystems=t.drm,t.drm["com.widevine.alpha"]&&(this.certificateServer=t.drm["com.widevine.alpha"].certificateUrl),this.keySystems={},Object.keys(t.drm).forEach(function(e){s.keySystems[e]=t.drm[e].licenseServerUrl})));break;case"SMOOTHSTREAMING":0<(n=this.formats.filter(function(e){return"SMOOTHSTREAMING"===e.format})).length&&(i=n[0],this.setupMediaLocator(i),i.liveDelay&&(this.liveDelay=i.liveDelay/1e3),i.drm&&(this.keySystems=i.drm,i.drm["com.widevine.alpha"]&&(this.certificateServer=i.drm["com.widevine.alpha"].certificateUrl),this.keySystems={},Object.keys(i.drm).forEach(function(e){s.keySystems[e]=i.drm[e].licenseServerUrl})));break;case"HLS":0<(n=this.formats.filter(function(e){return"HLS"===e.format})).length&&(r=n[0],this.setupMediaLocator(r),r.liveDelay&&(this.liveDelay=r.liveDelay/1e3),r.drm&&r.drm["com.apple.fps"]&&(this.protection={},this.protection.certificateUrl=r.drm["com.apple.fps"].certificateUrl||"",this.protection.licenseUrl=r.drm["com.apple.fps"].licenseServerUrl||"",this.protection.version="irdeto",this.keySystems={"com.apple.fps.1_0":{certificateUri:r.drm["com.apple.fps"].certificateUrl||"",licenseUri:r.drm["com.apple.fps"].licenseServerUrl||""}}))}this.streamInfo.live&&(n=S("dvr_window_length",this.mediaLocator),r=S("t",this.mediaLocator),n&&(this.streamInfo.dvrWindow=n),r||n||(this.streamInfo.isVirtualStream=!0))},t.setupStreamInfo=function(e){if(this.streamInfo={referenceTime:0},this.isDynamicCachupAsLive=!1,this.isStaticCachupAsLive=!1,this.mediaLocator){var t,i,n=S("t",this.mediaLocator);if(n||((t=S("dvr_window_length",this.mediaLocator))?(i=e?new Date(e):new Date,n=new Date(i.getTime()-1e3*t).toISOString().replace(/Z/g,""),this.streamInfo.dvrWindow=t):this.live&&(e=e?new Date(e):new Date,n=new Date(e.getTime()-72e5).toISOString().replace(/Z/g,""))),n)try{n&&47===n.length?(this.streamInfo.start=new Date(n.slice(0,23)+"Z"),this.streamInfo.startTime=this.streamInfo.start.getTime(),this.streamInfo.end=new Date(n.slice(24)+"Z"),this.streamInfo.endTime=this.streamInfo.end.getTime()):n&&23===n.length&&(this.streamInfo.start=new Date(n+"Z"),this.streamInfo.startTime=this.streamInfo.start.getTime()),this.isDynamicCachupAsLive=void 0!==this.streamInfo.start&&void 0===this.streamInfo.end,this.isStaticCachupAsLive=void 0!==this.streamInfo.start&&void 0!==this.streamInfo.end}catch(e){L.warn("timeParams",e)}}},o(e,null,[{key:"Type",get:function(){return{DASH:"DASH",HLS:"HLS"}}}]),e}(),Fe=function(e){if(!e)return!1;var t=je.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},je=Object.prototype.toString;function Ve(e){return e.replace(/^\s+|\s+$/g,"")}var We=function(e){if(!e)return{};for(var t={},i=Ve(e).split("\n"),n=0;n<i.length;n++){var r=i[n],s=r.indexOf(":"),o=Ve(r.slice(0,s)).toLowerCase(),r=Ve(r.slice(s+1));void 0===t[o]?t[o]=r:(s=t[o],"[object Array]"===Object.prototype.toString.call(s)?t[o].push(r):t[o]=[t[o],r])}return t},qe=function(){for(var e={},t=0;t<arguments.length;t++){var i,n=arguments[t];for(i in n)Ke.call(n,i)&&(e[i]=n[i])}return e},Ke=Object.prototype.hasOwnProperty;var Ye=Xe;function ze(e,t,i){var n=e;return Fe(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=qe(t,{uri:e}),n.callback=i,n}function Xe(e,t,i){return $e(t=ze(e,t,i))}function $e(n){if(void 0===n.callback)throw new Error("callback argument missing");var r=!1,s=function(e,t,i){r||(r=!0,n.callback(e,t,i))};function o(){var e=void 0,e=c.response||c.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}(c);if(g)try{e=JSON.parse(e)}catch(e){}return e}function t(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,s(e,f)}function e(){if(!a){var e;clearTimeout(l),e=n.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var t=f,i=null;return 0!==e?(t={body:o(),statusCode:e,method:u,headers:{},url:h,rawRequest:c},c.getAllResponseHeaders&&(t.headers=We(c.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),s(i,t,t.body)}}var i,a,l,c=n.xhr||null,h=(c=c||new(n.cors||n.useXDR?Xe.XDomainRequest:Xe.XMLHttpRequest)).url=n.uri||n.url,u=c.method=n.method||"GET",p=n.body||n.data,d=c.headers=n.headers||{},m=!!n.sync,g=!1,f={body:void 0,headers:{},statusCode:0,method:u,url:h,rawRequest:c};if("json"in n&&!1!==n.json&&(g=!0,d.accept||d.Accept||(d.Accept="application/json"),"GET"!==u&&"HEAD"!==u&&(d["content-type"]||d["Content-Type"]||(d["Content-Type"]="application/json"),p=JSON.stringify(!0===n.json?p:n.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(e,0)},c.onload=e,c.onerror=t,c.onprogress=function(){},c.onabort=function(){a=!0},c.ontimeout=t,c.open(u,h,!m,n.username,n.password),m||(c.withCredentials=!!n.withCredentials),!m&&0<n.timeout&&(l=setTimeout(function(){var e;a||(a=!0,c.abort("timeout"),(e=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",t(e))},n.timeout)),c.setRequestHeader)for(i in d)d.hasOwnProperty(i)&&c.setRequestHeader(i,d[i]);else if(n.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(c.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(c),c.send(p||null),c}Xe.XMLHttpRequest=y.XMLHttpRequest||function(){},Xe.XDomainRequest="withCredentials"in new Xe.XMLHttpRequest?Xe.XMLHttpRequest:y.XDomainRequest,function(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],function(n){Xe["delete"===n?"del":n]=function(e,t,i){return(t=ze(e,t,i)).method=n.toUpperCase(),$e(t)}});var Je=function(){function e(){}return e.getBaseUrl=function(n,r){var s=new XMLHttpRequest;s.open("GET",n.mdnRequestRouterUrl),s.onreadystatechange=function(e){if(4===s.readyState)if(200===s.status){L("getBaseUrl OK");var t=s.responseXML;try{var i=t.firstChild.getElementsByTagName("baseURL")[0].textContent;i?n.baseUrl=i:L.error("getBaseUrl Error can not find baseURL"),r(n)}catch(e){L.error("getBaseUrl Error",e),r(n)}}else L.error("getBaseUrl Error",s.statusText),r(n)},s.send(null)},e}(),H=function(t){function e(e){return void 0===e&&(e={}),e=f({exposureApiURL:"https://exposure.emps.ebsd.ericsson.net",exposureApiVersion:"v1"},e),(e=t.call(this,e)||this).statusMessageZero="An HTTP request failed with an error (Statuscode:0), but not from the server.",e.errorMap={400:{INVALID_JSON:{message:"Invalid json.",fatal:!1}},401:{NO_SESSION_TOKEN:{message:"The session token is missing.",fatal:!0},INVALID_SESSION_TOKEN:{message:"The session token is not valid.",fatal:!0}},403:{FORBIDDEN:{message:"The business unit has been configured to require server to server authentication, but it is not valid.",fatal:!0},NOT_ENTITLED:{message:"The user is not entitled.",fatal:!0},DEVICE_BLOCKED:{message:"The device is not allowed to play the asset.",fatal:!0},GEO_BLOCKED:{message:"Not allowed from this region.",fatal:!0},LICENSE_EXPIRED:{message:"Asset has been expired.",fatal:!0},NOT_AVAILABLE_IN_FORMAT:{message:"The media is not available in the requested format.",fatal:!1},NOT_ENABLED:{message:"The media is not enabled.",fatal:!0},CONCURRENT_STREAMS_LIMIT_REACHED:{message:"You have reached the maximum number of concurrent streams you are allowed to watch.",fatal:!0},NO_MEDIA_ON_CHANNEL:{message:"The media is not available on the channel.",fatal:!1},NO_MEDIA_FOR_PROGRAM:{message:"No media available for this program.",fatal:!1}},404:{UNKNOWN_BUSINESS_UNIT:{message:"The business unit cannot be found.",fatal:!0},UNKNOWN_ASSET:{message:"The asset cannot be found.",fatal:!1}},0:{NETWORK_ERROR:{message:"Network error.",fatal:!1}}},void 0===Ge.ServerTimeDiff_&&e.getServerTime(function(e,t){t&&(L.error("getServerTime",t),e=new Date),Ge.ServerTimeDiff_=e-new Date,L("serverDiff",Ge.ServerTimeDiff_)}),e}c(e,t);var i=e.prototype;return i.login=function(e,t,n,i){var r=this;if(!n)throw new He("callback is mandantory for login");var s=!1;i&&(s=!0);var o,a,l=""===e,c=new Date(this.getCachedServerTime());c.setTime(c.getTime()+864e5),this.options_.apiKey?(a={"EMP-Auth":this.options_.apiKey},o=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+this.customer+"/businessunit/"+this.businessUnit+"/auth/session",c={accountId:e,userId:e,deviceId:"WEB_"+de(),device:{height:y.screen.height,width:y.screen.width,model:y.navigator.appName,name:y.navigator.product,os:y.navigator.platform,osVersion:y.navigator.appVersion,manufacturer:y.navigator.vendor,type:"WEB"},expiration:c.toISOString(),anonymous:!1},Ye.post(o,{json:c,headers:a},function(e,t,i){r.checkForError(e,t,function(e,t){n({success:!1,expiration:0,message:t.message})})||(r.sessionToken=i.sessionToken,n({success:!0,expiration:864e5,session:i}))})):(a=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+this.customer+"/businessunit/"+this.businessUnit,a+=!0==l?"/auth/anonymous":!0===s?"/auth/twofactorlogin":"/auth/login",i={deviceId:"WEB_"+de(),device:{height:y.screen.height,width:y.screen.width,model:y.navigator.appName,name:y.navigator.product,os:y.navigator.platform,osVersion:y.navigator.appVersion,manufacturer:y.navigator.vendor,type:"WEB"},rememberMe:!1,username:e,password:t,totp:!0===s?i:void 0},Ye.post(a,{json:i},function(e,t,i){r.checkForError(e,t,function(e,t){n({success:!1,expiration:0,message:t.message})})||(r.sessionToken=i.sessionToken,n({success:!0,expiration:i.expirationDateTime?new Date(i.expirationDateTime)-new Date(r.getCachedServerTime()):864e5,session:i}))}))},i.logout=function(n,e){var r=this;void 0===n&&(n=function(){});var t=this.customer,i=this.businessUnit;if(!t)throw new He("Customer was not provided.");if(!i)throw new He("Business unit was not provided.");var s=this.requestHeaders;e&&(s={Authorization:"Bearer "+e});i=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+t+"/businessunit/"+i+"/auth/session";Ye.del(i,{headers:s},function(e,t,i){r.checkForError(e,t,n)||(r.sessionToken=null,n(!0))})},i.getV2Entitlement=function(e,t,i,n){if(void 0===e)throw new He("No request specified.");if(void 0===t)throw new He("Media not found.");if(!t.drm||!t.format)throw new He("Invalid playrequest specified.");!e.assetId&&e.programId?this.getProgram_(e.channelId,e.programId,t,i):this.getV2Asset_(e,t,n,i)},i.getEntitlement=function(e,t,i){if(void 0===e)throw new He("No request specified.");if(void 0===t)throw new He("Media not found.");if(!t.drm||!t.format)throw new He("Invalid playrequest specified.");null!==e.programId||e.channelId?this.getProgram_(e.channelId,e.programId,t,i):this.getAsset_(e.assetId,t,i)},i.getErrorForResponse=function(t){if(!t)return null;var e=t.statusCode,i="";if(!(200<=e&&e<=299))if(t.body&&t.body.message)i=t.body.message;else if(t.body)try{i=JSON.parse(t.body).message}catch(e){i=t.body}var n=this.errorMap[e];if(n){var r=e+" "+i,n=n[i];return n&&(r+=": "+n.message),new He(n?{message:r,fatal:!!n.fatal}:r)}return 200<=e&&e<=299?null:new He(e+" "+i)},i.checkForError=function(e,t,i){var n=e;return e||(n=this.getErrorForResponse(t))&&(n.statusCode=t.statusCode),n?(0===n.statusCode&&(n.message=this.statusMessageZero),i&&i(t.body,n),n):null},i.getV2Asset_=function(r,s,e,o){var a=this;if(void 0===o&&(o=function(){}),!this.customer)throw new He("getV2Asset_: Customer was not provided.");if(!this.businessUnit)throw new He("getV2Asset_: Business unit was not provided.");var t,l=r.assetId||r.channelId;if(!l)throw new He("getV2Asset_: No assetId or channelId specified.");e&&e.formats?(e.selectFormat(s),(e.channelId||e.programId)&&this.setStreamReferenceTime_(e),e.mediaLocator?o(e,null):((t=new He(s.format+" not avalible")).fatal=!1,o(e,t))):this.getAssetMetadata_(l,function(n){var e=a.options_.exposureApiURL+"/v2/customer/"+a.customer+"/businessunit/"+a.businessUnit+"/entitlement/"+l+"/play";Ye.get(e,{headers:a.requestHeaders},function(e,t,i){return e?(0===e.statusCode&&(e.message=a.statusMessageZero),void o(null,e)):void((e=a.checkForError(e,t))?400===e.statusCode||404===e.statusCode&&i&&-1===i.indexOf("message")||404===e.statusCode&&"404 Not found"===e.message?(L.warn("Fallback to Entitlement play v1",e.message),a.getEntitlement(r,s,o)):o(null,e):(e=JSON.parse(i),i=new Ue,e.streamInfo.lowLatency="LOW_LATENCY_CHANNEL"===n.materialType,i.initiateV2(e),i.selectFormat(s),i.assetId=l,(i.channelId||i.programId)&&a.setStreamReferenceTime_(i),t=t.headers["x-request-id"],i.requestId=t||"",i.mediaLocator?o(i,null):((t=new He(s.format+" not avalible")).fatal=!1,o(i,t))))})})},i.getAsset_=function(n,r,s){var o=this;void 0===s&&(s=function(){});var e=this.customer,t=this.businessUnit;if(!e)throw new He("getAsset_: Customer was not provided.");if(!t)throw new He("getAsset_: Business unit was not provided.");if(!n)throw new He("getAsset_: assetId was not provided.");t=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+e+"/businessunit/"+t+"/entitlement/"+n+"/play";Ye.post(t,{json:r,headers:this.requestHeaders},function(e,t,i){o.checkForError(e,t,s)||((e=new Ue).initiateV1(i,t.headers.date),e.assetId=n,e.playRequest=r,e.mimeType=r.type,t=t.headers["x-request-id"],e.requestId=t||"",e.mdnRequestRouterUrl?Je.getBaseUrl(e,s):s(e))})},i.setStreamReferenceTime_=function(e){(e.isDynamicCachupAsLive||e.isStaticCachupAsLive)&&("application/dash+xml"===e.mimeType||"application/vnd.ms-sstr+xml"===e.mimeType?e.isStaticCachupAsLive?e.streamInfo.referenceTime=e.streamInfo.startTime:e.streamInfo.referenceTime=0:"application/x-mpegurl"===e.mimeType&&(e.streamInfo.referenceTime=e.streamInfo.startTime))},i.getAssetMetadata_=function(e,n){var r=this;if(!this.customer)throw new He("getAssetMetadata_: Customer was not provided.");if(!this.businessUnit)throw new He("getAssetMetadata_: Business unit was not provided.");if(!e)throw new He("getAssetMetadata_: assetId was not provided.");e=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+this.customer+"/businessunit/"+this.businessUnit+"/content/asset/"+e;Ye.get(e,null,function(e,t,i){r.checkForError(e,t,n)||(i=JSON.parse(i),n(i))})},i.getProgram_=function(n,r,s,o){var a=this;void 0===o&&(o=function(){});var e=this.customer,t=this.businessUnit;if(!e)throw new He("getProgram_: Customer was not provided.");if(!t)throw new He("getProgram_: Business unit was not provided.");if(!n&&!r)throw new He("getProgram_: channelId or programId was not provided.");var i="";r&&(i="/program/"+r);var l="";n&&(l="/channel/"+n);i=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+e+"/businessunit/"+t+"/entitlement"+l+i+"/play";Ye.post(i,{json:s,headers:this.requestHeaders},function(e,t,i){a.checkForError(e,t,o)||((e=new Ue).initiateV1(i,t.headers.date),n&&(e.assetId=n,e.channelId=n),r&&(e.programId=r),e.playRequest=s,e.mimeType=s.type,a.setStreamReferenceTime_(e),t=t.headers["x-request-id"],e.requestId=t||"",e.mdnRequestRouterUrl?Je.getBaseUrl(e,o):o(e))})},i.getServerTime=function(n){var r=this,e=this.customer,t=this.businessUnit;if(!e||!t)return L.warn("getServerTime no customer or businessUnit"),void n(new Date);if(!1===y.navigator.onLine)return L("getServerTime offline"),void n(new Date);t=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+e+"/businessunit/"+t+"/time";Ye.get(t,null,function(e,t,i){return e?(0===e.statusCode&&(e.message=r.statusMessageZero),void n(null,e)):void((e=r.checkForError(e,t))?n(null,e):(i=JSON.parse(i),i=new Date(i.iso8601),n(i)))})},i.getPreferences=function(n){var r=this,e=this.customer,t=this.businessUnit,t=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+e+"/businessunit/"+t+"/preferences";Ye.get(t,{headers:this.requestHeaders},function(e,t,i){r.checkForError(e,t,n)||(i=JSON.parse(i),n(i))})},i.savePreferences=function(e,n){var r=this,t=this.customer,i=this.businessUnit;e?(e={preferences:e},i=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+t+"/businessunit/"+i+"/preferences",Ye.post(i,{json:e,headers:this.requestHeaders},function(e,t,i){r.checkForError(e,t,n)||n(!0)})):L.error("Preferences was not provided.")},i.getEPG=function(e,t,i,n){var r=this,s=this.customer,o=this.businessUnit,e=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+s+"/businessunit/"+o+"/epg/"+e;e+="?from="+t+"&to="+i,Ye.get(e,null,function(e,t,i){r.checkForError(e,t,n)||(i=JSON.parse(i),n(i))})},i.getProgramInfo=function(e,t,r,i){var s=this,n=this.customer,o=this.businessUnit,e=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+n+"/businessunit/"+o+"/epg/"+e;i?e=e+"/program/"+i:e+="?from="+t.getTime()+"&to="+t.getTime(),Ye.get(e,null,function(e,t,i){if(e)return 0===e.statusCode&&(e.message=s.statusMessageZero),void r(null,e);if(!s.checkForError(e,t,r)){var n,i=JSON.parse(i);if(i.programs&&0<i.programs.length)n=i.programs[0];else{if(!i.programId)return void r(null,"No programs found.");n=i}n.start=new Date(n.startTime),n.end=new Date(n.endTime),n.duration=new Date(n.endTime)-new Date(n.startTime),r(n)}})},i.getNextProgram=function(e,n){var r=this,t=this.customer,i=this.businessUnit,e=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+t+"/businessunit/"+i+"/epg/program/"+e+"/next";Ye.get(e,null,function(e,t,i){return e?(0===e.statusCode&&(e.message=r.statusMessageZero),void n(null,e)):void(r.checkForError(e,t,n)||((i=JSON.parse(i)).programId?((i=i).start=new Date(i.startTime),i.end=new Date(i.endTime),i.duration=new Date(i.endTime)-new Date(i.startTime),n(i)):n(null,"No programs found.")))})},i.getPreviousProgram=function(e,n){var r=this,t=this.customer,i=this.businessUnit,e=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+t+"/businessunit/"+i+"/epg/program/"+e+"/previous";Ye.get(e,null,function(e,t,i){return e?(0===e.statusCode&&(e.message=r.statusMessageZero),void n(null,e)):void(r.checkForError(e,t,n)||((i=JSON.parse(i)).programId?((i=i).start=new Date(i.startTime),i.end=new Date(i.endTime),i.duration=new Date(i.endTime)-new Date(i.startTime),n(i)):n(null,"No programs found.")))})},i.getChannelInfo=function(e,t){void 0===t&&(t=function(){}),this.getAssetInfo(e,t)},i.getAssetInfo=function(e,n){var r=this,t=this.customer,i=this.businessUnit,e=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+t+"/businessunit/"+i+"/content/asset/"+e;Ye.get(e,null,function(e,t,i){return e?(0===e.statusCode&&(e.message=r.statusMessageZero),void n(null,e)):void(r.checkForError(e,t,n)||(i=JSON.parse(i),n(i)))})},i.verifyEntitlement=function(e,t,i){var n=this;void 0===i&&(i=function(){});var r=this.customer,s=this.businessUnit;if(!r)throw new He("verifyEntitlement: Customer was not provided.");if(!s)throw new He("verifyEntitlement: Business unit was not provided.");if(!e)throw new He("verifyEntitlement: assetId was not provided.");if(!t)throw new He("verifyEntitlement: playRequest was not provided.");var o=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+r+"/businessunit/"+s+"/entitlement/"+e+"?drm="+t.drm+"&format="+t.format,e=this.options_.exposureApiURL+"/v2/customer/"+r+"/businessunit/"+s+"/entitlement/"+e+"/entitle";this.internalVerifyEntitlement(e,function(e,t){t?400===t.statusCode||404===t.statusCode&&e&&-1===e.indexOf("status")||404===t.statusCode&&"404 Not found"===t.message?(L.warn("Fallback to Entitlement entitle v1",t.message),n.internalVerifyEntitlement(o,i)):i&&i(e,t):i(e,t)})},i.internalVerifyEntitlement=function(e,n){var r=this;Ye.get(e,{headers:this.requestHeaders},function(e,t,i){r.checkForError(e,t,n)||n(JSON.parse(i))})},i.verifySession=function(n,r){var s=this,e=this.customer,t=this.businessUnit,t=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+e+"/businessunit/"+t+"/auth/session";Ye.get(t,{headers:this.requestHeaders},function(e,t,i){s.checkForError(e,t)?r&&r():n&&n()})},o(e,[{key:"requestHeaders",get:function(){var e={Authorization:"Bearer "+this.sessionToken};return this.options_.apiKey&&(e=f({"EMP-Auth":this.options_.apiKey},e)),e}},{key:"customer",get:function(){return this.customer_||this.options_.customer||null},set:function(e){this.customer_=e}},{key:"businessUnit",get:function(){return this.businessUnit_||this.options_.businessUnit||null},set:function(e){this.businessUnit_=e}},{key:"sessionToken",get:function(){return this.options_.sessionToken||null},set:function(e){this.options_.sessionToken=e}}]),e}(Ge);Ge.registerEntitlementEngine("EricssonExposure",H);var Ze=function(){function e(e){this.assetId=e.assetId||null,this.programId=e.programId||null,this.channelId=e.channelId||null}return o(e,[{key:"assetId",get:function(){return this.assetId_},set:function(e){this.assetId_=e}},{key:"programId",get:function(){return this.programId_},set:function(e){this.programId_=e}},{key:"channelId",get:function(){return this.channelId_},set:function(e){this.channelId_=e}}]),e}(),H=function(i){function e(e,t){e=i.call(this,e,t)||this;return L("ProgramService","create"),e.MIN_PROGRAM_CHECK_TIMEOUT=1e3,e.checkForProgramChangeBind=e.checkForProgramChange_.bind(h(e)),e.onEntitlementChangeBind=e.onEntitlementChange.bind(h(e)),e.clearProgramChangeTimeoutBind=e.clearProgramChangeTimeout_.bind(h(e)),e.options_=t||{},e.programChangeTimeout_=null,e.programChangeCheckTimestamp_=0,e.player.on(I.ENTITLEMENT_CHANGE,e.onEntitlementChangeBind),e}c(e,i);var t=e.prototype;return t.entitlement=function(e){return void 0===e?this.entitlement_:this.entitlement_=e},t.options=function(e){if(!e)return this.options_;this.options_=e},t.onEntitlementChange=function(e,t){t=t&&t.entitlement;t&&(t instanceof Ue||(this.stop(),t=f(new Ue({}),t)),this.entitlement(t)),Q.supportsEpgProgramChange(this.player)||(this.player.off(I.PLAYING,this.checkForProgramChangeBind),this.player.one(I.PLAYING,this.checkForProgramChangeBind))},t.start=function(){L("ProgramService","start"),this.entitlement()&&this.checkForProgramChange_({type:"startplayback"})},t.stop=function(){L("ProgramService stop"),this.clearProgramChangeTimeout_(),this.player&&(this.player.off(I.SEEKED,this.checkForProgramChangeBind),this.player.off(I.PLAYING,this.checkForProgramChangeBind),this.player.off(I.PAUSE,this.clearProgramChangeTimeoutBind),this.player.off(I.PLAY,this.checkForProgramChangeBind)),this.currentProgram_=null,this.currentVOD_=null},t.reset=function(){this.stop(),this.currentProgram_=null,this.shiftProgram_=null,this.currentVOD_=null,this.entitlement_=null},t.clearProgramChangeTimeout_=function(e){this.programChangeTimeout_&&(e&&L("clearProgramChangeTimeout",e.type),clearTimeout(this.programChangeTimeout_),this.programChangeTimeout_=null)},t.running=function(){return!!this.programChangeTimeout_&&(L("ProgramService:running",this.programChangeCheckTimestamp_?new Date(this.programChangeCheckTimestamp_):0),!0)},t.dispose=function(){L("ProgramService","dispose"),this.player.off(I.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.stop(),i.prototype.dispose.call(this)},t.checkForProgramChange_=function(e){if(e){if(L("checkForProgramChange",e.type),this.entitlement()&&(this.entitlement().live||this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive||e.type!==I.SEEKED)&&this.player&&this.player.options_)if(this.player.options_.absoluteStartTime&&e.type===I.SEEKED)L("checkForProgramChange","ignore livepoint");else{if(this.clearProgramChangeTimeout_(),Q.supportsEpgProgramChange(this.player))if(Q.program(this.player))return void L("updateCurrentProgram from player");var t=this.entitlement().channelId,i=this.entitlement().live,n=this.entitlement().programId;if(i||n){if("startplayback"===e.type||!this.eventProgramHasEnded_(t,n)){if(i&&!n){var r=new Date(this.exposure.getCachedServerTime()),s="startplayback"===e.type?15:Q.timeBehindLive(this.player);if(r.setSeconds(r.getSeconds()-s),r=r,L("checkForProgramChange","Live",s),this.currentProgram&&this.currentProgram.channelId===this.entitlement().channelId&&r.getTime()<this.currentProgram.end.getTime()&&r.getTime()>=this.currentProgram.start.getTime())return L("checkForProgramChange","Same"),r=null,void this.updateCurrentProgram_(this.currentProgram,!1)}else if("startplayback"!==e.type&&(this.entitlement().isDynamicCachupAsLive||this.entitlement().isStaticCachupAsLive)){s=Q.getPlayheadTime(this.player),r=new Date(s);if(this.currentProgram)return void(!this.isProgramEvent&&this.entitlement().isStaticCachupAsLive&&r.getTime()+2e3>=this.entitlement().streamInfo.end.getTime()?this.player.lineUpAsset&&r.getTime()+2e3<this.currentProgram.end.getTime()?(L("checkForProgramChange","Load next stream",r),this.player.lineUpAsset(this.currentProgram.assetId,null,null,r.getTime(),!0)):(L("checkForProgramChange","playNextProgram",r),this.player.playNextProgram()):r.getTime()+2e3>=this.currentProgram.end.getTime()?(L("checkForProgramChange","Next",r),r.setSeconds(r.getSeconds()+2),this.shiftToNextProgram_(n,t,r)):r.getTime()<this.currentProgram.end.getTime()&&r.getTime()+2e3>this.currentProgram.start.getTime()?(L("checkForProgramChange","Same",r),r=null,this.updateCurrentProgram_(this.currentProgram,!1)):this.isProgramEvent?(r=null,this.updateCurrentProgram_(this.currentProgram,!1)):(L("checkForProgramChange","Prev",r),this.shiftToPreviousProgram_(n,t,r)))}r&&this.shiftProgram_&&t===this.shiftProgram_.channelId&&this.shiftProgram_.start.getTime()<=r.getTime()&&this.shiftProgram_.end.getTime()>=r.getTime()?this.updateCurrentProgram_(this.shiftProgram_,!1):"pollingforepg"!==e.type||this.epgPolling?this.shiftCurrentProgram_(n,t,r,"startplayback"===e.type):"pollingforepg"===e.type&&this.pollingForEPG_()}}else this.updateVOD_(this.entitlement().assetId)}}else L.error("checkForProgramChange","event was not provided.")},t.stopEventProgram=function(){this.player.options_.playlist&&1<this.player.currentSources().length&&!1!==this.player.options_.autosequence?this.player.loadNextSource():this.player.stop()},t.eventProgramHasEnded_=function(e,t){var i=this;return!!(this.currentProgram&&this.isProgramEvent&&Q.getPlayheadTime(this.player)+2e3>=this.currentProgram.end.getTime())&&(L("event program ended"),this.entitlement().isStaticCachupAsLive?(L("Static live program, stop playback"),this.stopEventProgram()):this.exposure.getProgramInfo(e,null,function(e,t){t&&L("getProgramInfo","No EPG found.",t),!t&&e.end.getTime()>i.currentProgram.end.getTime()?(L("Current program has been extended"),i.updateCurrentProgram_(e,!1,!0)):i.player.options_.playlist?i.stopEventProgram():i.getNextProgram(function(e,t){t&&("404 NO_NEXT_PROGRAM"!==t.message&&L.warn("shiftToNextProgram",t),L("No upcomming program, stop playback"),i.stopEventProgram()),e&&e.start.getTime()-2e3<=Q.getPlayheadTime(i.player)&&e.end.getTime()>=Q.getPlayheadTime(i.player)?i.updateCurrentProgram_(e,!1):(L("Gap before upcomming program, stop playback"),i.stopEventProgram())})},t),!0)},t.shiftCurrentProgram_=function(e,t,i,n){var r=this;void 0===n&&(n=!1),this.shiftProgram_&&e===this.shiftProgram_.programId?this.updateCurrentProgram_(this.shiftProgram_,!1):this.exposure.getProgramInfo(t,i,function(e,t){return r.currentVOD_=null,t?(L("getProgramInfo","No EPG found.",t),void r.pollingForEPG_()):void r.updateCurrentProgram_(e,n)},i?null:e)},t.shiftToPreviousProgram_=function(i,n,r){var s=this;this.shiftProgram_&&n===this.shiftProgram_.channelId&&this.shiftProgram_.start.getTime()<=r.getTime()&&this.shiftProgram_.end.getTime()>=r.getTime()?this.updateCurrentProgram_(this.shiftProgram_,!1):this.getPreviousProgram(function(e,t){t?(L.warn("shiftToPreviousProgram",t),s.shiftCurrentProgram_(i,n,r)):e.start.getTime()<=r.getTime()&&e.end.getTime()>=r.getTime()?s.updateCurrentProgram_(e,!1):s.shiftCurrentProgram_(i,n,r)})},t.shiftToNextProgram_=function(i,n,r){var s=this;this.shiftProgram_&&n===this.shiftProgram_.channelId&&this.shiftProgram_.start.getTime()<=r.getTime()&&this.shiftProgram_.end.getTime()>=r.getTime()?this.updateCurrentProgram_(this.shiftProgram_,!1):this.getNextProgram(function(e,t){t?("404 NO_NEXT_PROGRAM"!==t.message?L.warn("shiftToNextProgram",t):L("shiftToNextProgram",t.message),s.shiftCurrentProgram_(i,n,r)):e.start.getTime()<=r.getTime()&&e.end.getTime()>=r.getTime()?s.updateCurrentProgram_(e,!1):s.shiftCurrentProgram_(i,n,r)})},t.updateChannelInfo_=function(i,n){var r=this;return i&&i.channelId?this.currentChannelAsset_&&this.currentChannelAsset_.assetId===i.channelId?(i.channelInfo=this.extractAssetMetadata(this.currentChannelAsset_),void n()):void this.exposure.getChannelInfo(i.channelId,function(e,t){return t?L.warn("updateChannelInfo","No ChannelInfo found.",t):(L("updateChannelInfo",i.channelId),r.currentChannelAsset_=e,i.channelInfo=r.extractAssetMetadata(r.currentChannelAsset_)),void n()}):(L.error("updateChannelInfo","program or channelId empty"),void n())},t.updateVOD_=function(e){var i=this;this.currentProgram_=null,this.shiftProgram_=null,Q.currentAsset(this.player,e),this.currentVOD_&&this.currentVOD_.assetId===e||this.exposure.getAssetInfo(e,function(e,t){if(i.player)return t?(L.warn("No AssetInfo found.",t),i.currentVOD_=null,void i.player.trigger(I.ASSET_CHANGED,{asset:null})):void(i.currentVOD_&&i.currentVOD_.assetId===e.assetId||(i.currentVOD_=e,Q.setTechVOD(i.player,e),L("ASSET_CHANGED"),i.player.trigger(I.ASSET_CHANGED,{asset:e})))})},t.updateCurrentProgram_=function(e,t,i){var n=this;if(void 0===t&&(t=!1),void 0===i&&(i=!1),L("updateCurrentProgram",e,t),this.clearProgramChangeTimeout_(),this.shiftProgram_=null,this.currentVOD_=null,this.player)if(Q.currentAsset(this.player,e.assetId,e.programId,e.channelId),this.entitlement_&&(this.entitlement_.channelId=e.channelId,this.entitlement_.assetId=e.assetId,this.entitlement_.programId=e.programId),Q.setTechProgram(this.player,e),this.player.removeClass("vjs-live"),this.currentProgram&&this.currentProgram.programId===e.programId?i&&(this.player.trigger(I.PROGRAM_CHANGED,{program:e}),this.player.trigger(I.DURATION_CHANGE)):(t||(i=(this.player.getServerTime()-e.start.getTime())/1e3,L("verifyEntitlement timeBehindLive",i),i<5?(L("Wait for verifyEntitlement ",5-i),setTimeout(function(){n.verifyEntitlement(e)},1e3*(5-i))):this.verifyEntitlement(e)),this.isProgramEvent?(this.player.trigger(I.PROGRAM_CHANGED,{program:e}),this.player.trigger(I.DURATION_CHANGE)):this.updateChannelInfo_(e,function(){n.player.trigger(I.PROGRAM_CHANGED,{program:e}),n.player.trigger(I.DURATION_CHANGE)})),this.currentProgram_=e,t)L("updateCurrentProgram","startplayback");else{if(this.entitlement().isDynamicCachupAsLive||this.entitlement().live||this.entitlement().isStaticCachupAsLive){if(this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive){var r=Q.getPlayheadTime(this.player);if(!r)return void L("updateCurrentProgram","no playHeadTime",r);o=new Date(r)}else{var s=Q.timeBehindLive(this.player);(o=new Date(this.exposure.getCachedServerTime())).setSeconds(o.getSeconds()-s)}r=new Date(e.start.getTime()+e.duration),s=this.entitlement().streamInfo.end;s&&r.getTime()>s.getTime()&&(r=s);var o=r.getTime()-o.getTime();(!o||o<this.MIN_PROGRAM_CHECK_TIMEOUT)&&(L("updateCurrentProgram","timediff is below minimum",o),o=this.MIN_PROGRAM_CHECK_TIMEOUT),this.programChangeCheckTimestamp_=Date.now()+o,L("updateCurrentProgram","programChangeTimeout",new Date(this.programChangeCheckTimestamp_)),this.programChangeTimeout_=setTimeout(function(){n.checkForProgramChange_({type:"programend"}),n.programChangeTimeout_=null},2147483647<o?2147483647:o)}this.player.off(I.SEEKED,this.checkForProgramChangeBind),this.player.one(I.SEEKED,this.checkForProgramChangeBind),this.player.off(I.PLAY,this.checkForProgramChangeBind),this.player.one(I.PLAY,this.checkForProgramChangeBind),this.player.off(I.PAUSE,this.clearProgramChangeTimeoutBind),this.player.one(I.PAUSE,this.clearProgramChangeTimeoutBind)}},t.pollingForEPG_=function(){var e=this;this.currentProgram_=null,this.entitlement_.programId=null,this.entitlement_.assetId=null,this.player.trigger(I.PROGRAM_CHANGED,{program:null}),this.player.trigger(I.DURATION_CHANGE);var t=12e4+60*Math.random()*1e3;this.programChangeCheckTimestamp_=Date.now()+t,this.programChangeTimeout_=setTimeout(function(){e.checkForProgramChange_({type:"pollingforepg"}),e.programChangeTimeout_=null},t)},t.getNextProgram=function(i){var n=this;this.currentProgram||!i?this.exposure.getCachedServerTime()<this.currentProgram.end.getTime()?i(this.currentProgram):this.exposure.getNextProgram(this.currentProgram.programId,function(e,t){t?i(null,t):(n.shiftProgram_=e,i(e))},null):i(null,{message:"getNextProgram No Current Program"})},t.getPreviousProgram=function(i){var n=this;this.currentProgram||!i?this.exposure.getPreviousProgram(this.currentProgram.programId,function(e,t){t?i(null,t):(n.shiftProgram_=e,i(e))},null):i(null,{message:"getPreviousProgram No Current Program"})},t.getProgram=function(e,i){var n=this;this.currentProgram||!i?this.currentProgram.start.getTime()<=e.getTime()&&this.currentProgram.end.getTime()>=e.getTime()?i(this.currentProgram):this.shiftProgram_&&this.currentProgram.channelId===this.shiftProgram_.channelId&&this.shiftProgram_.start.getTime()<=e.getTime()&&this.shiftProgram_.end.getTime()>=e.getTime()?i(this.shiftProgram_):this.exposure.getProgramInfo(this.currentProgram.channelId,e,function(e,t){t?i(null,t):(n.shiftProgram_=e,i(e))},null):i(null,{message:"getProgram No Current Program"})},t.verifyEntitlement=function(e){var i=this;this.exposure.verifyEntitlement(e.assetId,this.entitlement().playRequest,function(e,t){return t?(i.player.error("verifyEntitlement "+t.message),void Q.stop(i.player)):e&&"SUCCESS"===e.status?(e.streamInfo&&i.entitlement_&&(i.entitlement_.streamInfo.event=e.streamInfo.event&&void 0!==e.streamInfo.programId,i.entitlement_.streamInfo.programId=e.streamInfo.programId||void 0,i.entitlement_.programId=i.entitlement_.streamInfo.programId,i.player.trigger(I.ENTITLEMENT_CHANGE,{entitlement:i.entitlement_})),void L("verifyEntitlement",e.status)):(i.player.error(e?e.status:"verifyEntitlement no status"),void Q.stop(i.player))})},t.getAssetMetadata=function(e,i){var n=this,t=this.currentProgram?this.currentProgram.asset:this.currentVOD;t&&t.assetId===e?i(this.extractAssetMetadata(t)):this.exposure.getAssetMetadata_(e,function(e,t){return t?(L.warn("getAssetMetadata","No data found.",t),void i(null,t)):void i(n.extractAssetMetadata(e))})},t.extractAssetMetadata=function(e){var t=null,i=null,n=null,e=this.getLocalizedAssetMetadata(e);return e&&(e.title&&(t=e.title),e.shortDescription?i=e.shortDescription:e.description&&(i=e.description),e.images&&0<e.images.length&&e.images[0].url&&(n=e.images)),{title:t||"",subtitle:i||"",images:n||[]}},t.getLocalizedAssetMetadata=function(e){var t=null;if(e&&e.localized&&0<e.localized.length){t=e.localized[0];var i=this.player.language();if(i)for(var n=0;n<e.localized.length;n++)if(e.localized[n].locale===i)return L("Use Localized AssetMetadata for",i),e.localized[n];L("Use default Localized AssetMetadata",e.localized[0].locale)}else L("No AssetMetadata");return t},o(e,[{key:"exposure",get:function(){if(!this.options_.exposure){var e=(e=this.player.options_["entitlement-engine"])||(this.player.options_["exposure-service"]||"EricssonExposure"),t=this.player.options_[e.toLowerCase()];if(!t)return null;e=Ge.getEntitlementEngine(e);this.options_.exposure=new e(t)}return this.options_.exposure}},{key:"epgPolling",get:function(){if(this.isProgramEvent)return!1;var e=this.player.options();return!e||!0!==e.epgPollingDisabled}},{key:"currentProgram",get:function(){return Q.supportsEpgProgramChange(this.player)?Q.program(this.player):this.currentProgram_}},{key:"currentChannelAsset",get:function(){return this.currentChannelAsset_}},{key:"currentVOD",get:function(){return this.currentVOD_}},{key:"isProgramEvent",get:function(){return!!(this.entitlement_&&this.entitlement_.streamInfo&&this.entitlement_.streamInfo.event||this.player.options_.playlist)}}]),e}(p.getPlugin("plugin"));H.VERSION="2.2.136-573",p.getPlugin("programService")?p.log.warn('A plugin named "programService" already exists.'):p.registerPlugin("programService",H);H=function(i){function e(e,t){e=i.call(this,e,t)||this;return L("EntitlementExpirationService","create"),e.options_=t,e.onEntitlementChangeBind=e.onEntitlementChange.bind(h(e)),e}c(e,i);var t=e.prototype;return t.dispose=function(){L("EntitlementExpirationService","dispose"),this.stop(),i.prototype.dispose.call(this)},t.stop=function(){L("EntitlementExpirationService","stop"),this.player.off(I.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.expirationTimeout_&&(clearTimeout(this.expirationTimeout_),this.expirationTimeout_=null)},t.start=function(){L("EntitlementExpirationService","start"),this.expirationTimeout_&&(clearTimeout(this.expirationTimeout_),this.expirationTimeout_=null),this.player.off(I.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.player.on(I.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind)},t.entitlement=function(e){return void 0===e?this.entitlement_:this.entitlement_=e},t.onEntitlementChange=function(e,t){this.entitlement(t&&t.entitlement),this.expirationTimeout_&&(clearTimeout(this.expirationTimeout_),this.expirationTimeout_=null),this.checkForExpiration()},t.options=function(e){if(!e)return this.options_;this.options_=e},t.checkForExpiration=function(){var e=this,t=this.entitlement();if(L("EntitlementExpirationService","checkForExpiration",t.licenseExpiration),this.hasLicenseExpiration(t)){var i=t.licenseExpiration.getTime()-this.exposure.getCachedServerTime();if(i<=0)return this.player.error(this.errorForReason(t.licenseExpirationReason)),void Q.stop(this.player);i<2147483647?this.expirationTimeout_=setTimeout(function(){e.expirationTimeout_=null,L("EntitlementExpirationService","license expired"),e.refreshEntitlement()},i):setTimeout(function(){return e.checkForExpiration()},1073741823)}},t.refreshEntitlement=function(){Q.restart(this.player,!0)},t.errorForReason=function(e){switch(e){case"GEO_BLOCKED":return this.player.localize("Not allowed from this region.");case"NOT_ENTITLED":return this.player.localize("The user is not entitled.");case"GAP_IN_EPG":return this.player.localize("Asset temporarily not available");case"EPG_PLAY_MAX_HOURS":default:return this.player.localize("Asset exceeded maximum playback time")}},t.hasLicenseExpiration=function(e){return!!e.licenseExpiration},o(e,[{key:"exposure",get:function(){return this.options_&&this.options_.exposure}}]),e}(p.getPlugin("plugin"));H.VERSION="2.2.136-573",p.getPlugin("entitlementExpirationService")?p.log.warn('A plugin named "entitlementExpirationService" already exists.'):p.registerPlugin("entitlementExpirationService",H);var Qe=p.getComponent("Tech"),H=function E(b){function S(e,t,i,n){b.options_.absoluteStartTime&&b.options_.absoluteStartTime>t.getCachedServerTime()?b.options_.absoluteStartTime=t.getCachedServerTime()-1e4:b.options_.startTime&&b.options_.startTime>t.getCachedServerTime()/1e3&&(b.options_.startTime=(t.getCachedServerTime()-1e4)/1e3);var r;!b.programService||e.programService&&e.programService.disable||(b.programService().options({exposure:t}),i.isDynamicCachupAsLive&&e.playFrom?"beginning"===e.playFrom||!i.live&&!b.options_.absoluteStartTime&&!b.options_.startTime?(e=i.streamInfo.start.getTime()+100,"application/dash+xml"===i.mimeType||"application/vnd.ms-sstr+xml"===i.mimeType?(L("SET startTime",e),b.options({startTime:e/1e3}),i.options.startTime=e/1e3):(L("SET startTime",.1),b.options({startTime:.1}),i.options.startTime=.1)):b.options_.absoluteStartTime?(b.options_.absoluteStartTime<i.streamInfo.start.getTime()&&(b.options_.absoluteStartTime=i.streamInfo.start.getTime()),r=b.options_.absoluteStartTime,"HLS"===b.streamType&&(r=b.options_.absoluteStartTime-i.streamInfo.start.getTime()),L("absoluteStartTime SET startTime",r=r||.1),b.options({startTime:r/1e3}),i.options.startTime=r/1e3,b.options_.absoluteStartTime=void 0,i.options.absoluteStartTime=void 0):b.options_.startTime&&(i.options.startTime=b.options_.startTime,b.options_.absoluteStartTime=void 0,i.options.absoluteStartTime=void 0):i.isStaticCachupAsLive&&b.options_.absoluteStartTime?(b.options_.absoluteStartTime<i.streamInfo.start.getTime()&&(b.options_.absoluteStartTime=i.streamInfo.start.getTime()),r=b.options_.absoluteStartTime-i.streamInfo.start.getTime(),L("absoluteStartTime SET startTime",r),b.options({startTime:r/1e3}),i.options.startTime=r/1e3,b.options_.absoluteStartTime=void 0,i.options.absoluteStartTime=void 0):i.isStaticCachupAsLive&&b.options_.startTime&&(i.options.startTime=b.options_.startTime,b.options_.absoluteStartTime=void 0,i.options.absoluteStartTime=void 0),b.programService().start()),n()}function C(e,t,i){if(e){!0===i.useLastViewedOffset&&((e.isStaticCachupAsLive||e.isDynamicCachupAsLive||e.live)&&(e.lastViewedTime||e.liveTime)?e.liveTime&&(L("liveTime",new Date(e.liveTime),e.liveTime),b.options({absoluteStartTime:e.liveTime})):e.lastViewedOffset&&(!e.durationInMs||e.lastViewedOffset<e.durationInMs-3e4)&&(L("lastViewedOffset",e.lastViewedOffset/1e3),b.options({startTime:e.lastViewedOffset/1e3}))),!1===e.timeshiftEnabled&&b.options({timeShiftDisabled:!0}),b.trigger(I.ENTITLEMENT_CHANGE,{entitlement:e}),(e=f(new Ue({}),e)).type=e.mimeType;i={autoplay:b.options_.autoplay,muted:b.options_.muted,language:b.options_.language,maxBitrate:b.options_.maxBitrate,minDvrWindow:b.options_.minDvrWindow,timeShiftDisabled:b.options_.timeShiftDisabled,useLastViewedOffset:b.options_.useLastViewedOffset,startTime:b.options_.startTime,absoluteStartTime:b.options_.absoluteStartTime,audioLanguage:b.options_.audioLanguage,subtitleLanguage:b.options_.subtitleLanguage,liveDelay:b.options_.liveDelay};return t?f(t,i):t=i,e.options=t,e.options.source=e,b.entitlementExpirationService().start(),e}L.error("setupEntitlement_ no entitlement")}return{setSource:function(t,a){var i=this,l=b.options(),c=null,h=null,u=null;b.programService&&b.programService().stop(),(e=b.currentSource())&&e.playSessionId&&e.playToken&&e.mediaLocator?c=b.currentSource():(s=A(t.src),u=new Ze(s),b.trigger(I.ENTITLEMENT_LOAD_START,u));var e=(e=l["entitlement-engine"])||(l["exposure-service"]||"EricssonExposure"),n=l[e.toLowerCase()];if(!n){var r=new x("Missing entitlementOptions in player options",w.ENTITLEMENT);return b.error(r),void a(r)}var s,p=E.getExposure(n,e);if(n.sessionToken){l.analytics&&l.analytics.disable||(T=n,s=p,(e=(r=l).analyticsDeviceInfo)&&(L.warn("options.analyticsDeviceInfo is deprecated. Use options.analytics.deviceInfo."),r.analytics||(r.analytics={}),r.analytics.deviceInfo=e),b.analytics&&(b.analytics().options({exposure:s,analytics:r.analytics}),b.analytics().newAnalytics({exposureApiURL:T.exposureApiURL,customer:T.customer,businessUnit:T.businessUnit,sessionToken:T.sessionToken}),b.analytics().onEntitlementLoadStart())),b.entitlementExpirationService().options({exposure:p});var d,o,m,g,f,v,y,_=l.techOrder.map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).map(function(e){return[e,Qe.getTech(e)]}).filter(function(e){e[0];e=e[1];if(e&&e.entitlementPlayRequest)return e.isSupported()});if(0===_.length){var T=new x("Unable to load asset: None of the playback technologies are supported",w.ENTITLEMENT);return b.error(T),void a(T)}o=_.length,m=function(i){var n=i.iteration();if(l.excludeTechs&&-1!==l.excludeTechs.indexOf(_[n][0]))i.next();else{var r=_[n][1],s=l[_[n][0].toLowerCase()];b.tech_&&b.techName_!==_[n][0]&&(b.techCall_("reset"),b.unloadTech_());try{if(c)return c=C(c,s,l),S(l,p,c,function(){a(null,c)}),void i.break();var o=s&&s.streamType&&r.entitlementPlayRequests?r.entitlementPlayRequests[s.streamType]:r.entitlementPlayRequest;p.getV2Entitlement(u,o,function(e,t){if(t){if(b.options_.excludeTechs||(b.options_.excludeTechs=[]),!r.canPlayHls||"HLS"===o.format||s&&"HLS"===s.streamType?b.options_.excludeTechs.push(_[n][0]):(s||(l[_[n][0].toLowerCase()]={}),l[_[n][0].toLowerCase()].streamType="HLS",i.redo()),d=new x(t.message+"  "+JSON.stringify(o)+JSON.stringify(u),t.code,t.stack),t.fatal)return b.error(d),Q.stop(b),void a(d);h=e,i.next()}else!0===e.streamInfo.lowLatency&&(Qe.getTech("EmpDashif")?(L("lowLatency detected, replace EmpShaka as dash tech"),l.empdashif=l.empdashif||{},l.empdashif.lowLatencyMode=!0,l.techOrder=l.techOrder.map(function(e){return"EmpShaka"===e?"EmpDashif":e})):L("lowLatency detected but EmpDashif not available. Dash streams won't play in lowLatency mode")),c=C(e,s,l),Q.currentAsset(b,e.assetId,e.programId,e.channelId),c.adMediaLocator&&b.yospace?(L("play adMediaLocator with yospace",c.adMediaLocator),b.yospace().start("VoD",c.adMediaLocator).then(function(e){L("yospace mediaLocator returned",e),c.mediaLocator=e,c.src=e,S(l,p,c,function(){a(null,c)}),i.break()}).catch(function(e){d=new x(e,w.ENTITLEMENT),b.error(d),Q.stop(b),c=null})):(S(l,p,c,function(){a(null,c)}),i.break())},h)}catch(e){return L.warn("error try next tech",new x(e,w.ENTITLEMENT)),void i.next()}}},f=0,v=!(g=function(){null===c&&(d=d||new x("Unable to load asset: None of the playback technologies are supported",w.ENTITLEMENT),b.error(d),Q.stop(b),a(d))}),(y={next:function(){v||(f<o?(f++,m(y)):(v=!0,g()))},redo:function(){f--},iteration:function(){return f-1},break:function(){v=!0,g()}}).next()}else p.login("","",function(e){e.success?(n.sessionToken=e.session.sessionToken,i.setSource(t,a)):(L.error("Anonymous login fail",e.message),e=new x("Anonymous login fail",w.ENTITLEMENT),b.error(e))},"")}}};H.isExposure=function(e){return Ge.isEntitlementEngine(e)},H.EntitlementClass=Ue,H.getExposure=function(e,t){if(e)return new(Ge.getEntitlementEngine(t))(e);throw new x("Missing exposureOptions",w.ENTITLEMENT)},H.registerExposure=function(e,t){return Ge.registerEntitlementEngine(e,t)},H.getLog=function(){return L},H.getEntitlementEngine=Ge.getEntitlementEngine,H.registerEntitlementEngine=Ge.registerEntitlementEngine,H.isEntitlementEngine=Ge.isEntitlementEngine,H.VERSION="2.2.136-573",p.EntitlementMiddleware?p.log.warn("EntitlementMiddleware already exists."):(p.use("video/emp",H),p.EntitlementMiddleware=H);var H=y.empEntitlement||H,et=p;return et.canPlayUnencrypted=function(){var e=p.getTech("EmpShaka");return void 0!==e&&e.isSupported()||void 0!==(e=p.getTech("EmpDashif"))&&e.isSupported()||void 0!==(e=p.getTech("EmpHLS"))&&e.isSupported()||void 0!==(e=p.getTech("EmpHLS-MSE"))&&e.isSupported()||void 0!==(e=p.getTech("EmpSmooth"))&&e.isSupported()?Promise.resolve(!0):Promise.resolve(!1)},et.canPlayEncrypted=function(){var i,e,t,n,r=[];"function"==typeof y.navigator.requestMediaKeySystemAccess?(i=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.5"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:!0==(-1!==y.navigator.userAgent.indexOf("Android"))?"SW_SECURE_DECODE":"SW_SECURE_CRYPTO"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]}],e=p.getTech("EmpShaka"),t=p.getTech("EmpDashif"),n=p.getTech("EmpSmooth"),(void 0!==e&&e.isSupported()||void 0!==t&&t.isSupported()||void 0!==n&&n.isSupported())&&(r.push(new Promise(function(e,t){y.navigator.requestMediaKeySystemAccess("com.microsoft.playready",i).then(function(){e(!0)},function(){e(!1)})})),r.push(new Promise(function(e,t){y.navigator.requestMediaKeySystemAccess("com.widevine.alpha",i).then(function(){e(!0)},function(){e(!1)})})))):(t=p.getTech("EmpShaka"),n=p.getTech("EmpDashif"),s=p.getTech("EmpSmooth"),(void 0!==t&&t.isSupported()||void 0!==n&&n.isSupported()||void 0!==s&&s.isSupported())&&11===he&&y.MSMediaKeys&&y.MSMediaKeys.isTypeSupported("com.microsoft.playready","video/mp4")&&r.push(!0));var s=p.getTech("EmpHLS");return void 0!==s&&s.isSupported()&&y.WebKitMediaKeys&&s.getKeySystem&&y.WebKitMediaKeys.isTypeSupported(s.getKeySystem(),"video/mp4")&&r.push(!0),0===r.length&&r.push(!1),Promise.all(r).then(function(e){return-1!==e.indexOf(!0)},function(e){return!1})},et.getExposure=H.getExposure,et.getEntitlementEngine=H.getEntitlementEngine,et.registerEntitlementEngine=H.registerEntitlementEngine,et.isEntitlementEngine=H.isEntitlementEngine,et.EntitlementClass=H.EntitlementClass,et.log=L,et.plugin=p.plugin,et.videojs=p,et.EntitlementMiddleware=H,et.extend=p.extend,et.Events=I,et.VERSION="2.2.136-573","function"==typeof define&&define.amd?define("empPlayer",[],function(){return et}):"object"==typeof exports&&"object"==typeof module&&(module.exports=et),et});
