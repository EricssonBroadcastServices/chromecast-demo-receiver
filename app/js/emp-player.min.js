!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.empPlayer=t()}(this,function(){function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return t={exports:{}},e(t,t.exports),t.exports}function n(e,t){ce(e).forEach(function(i){return t(e[i],i)})}function r(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ce(e).reduce(function(i,n){return t(i,e[n],n)},i)}function o(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return Object.assign?Object.assign.apply(Object,[e].concat(i)):(i.forEach(function(t){t&&n(t,function(t,i){e[i]=t})}),e)}function s(e){return!!e&&"object"===(void 0===e?"undefined":ie(e))}function a(e){return 0===ce(e).length}function l(e){return"string"==typeof e||!!e&&"object"===(void 0===e?"undefined":ie(e))&&"[object String]"===Object.prototype.toString.call(e)}function c(e){var t={assetId:void 0,programId:void 0,channelId:void 0};try{t=JSON.parse(e)}catch(i){t.assetId=e}return t.channelId&&(t.assetId=t.channelId),t}function u(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){e=u(e),Array.isArray(e)?t=t.concat(e):s(e)&&t.push(e)}),e=t}else e="string"==typeof e&&e.trim()?[{src:e}]:s(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[e]:[];return e}function p(e,t){e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function h(e,t){var i=Array.prototype.slice.call(t),n=function(){},r=Q.console||{log:n,warn:n,error:n,trace:n};e?i.unshift(e.toUpperCase()+":"):e="log",i.unshift("EMPPlayer:"),r[e].apply?r[e].apply(r,i):r[e](i.join(" "))}function d(){return ye++}function m(e){return e.replace(/\n\r?\s*/g,"")}function f(e,t){if(!e||!t)return"";if("function"==typeof Q.getComputedStyle){var i=Q.getComputedStyle(e);return i?i[t]:""}return e.currentStyle[t]||""}function g(e){return s(e)&&1===e.nodeType}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],r=Ce.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var i=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(me.warn(Oe(ke,e,i)),r.setAttribute(e,i)):"textContent"===e?v(r,i):r[e]=i}),Object.getOwnPropertyNames(i).forEach(function(e){r.setAttribute(e,i[e])}),n&&S(r,n),r}function v(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function _(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(i[e]=t[e])}),i.height||(i.height=parseFloat(f(e,"height"))),i.width||(i.width=parseFloat(f(e,"width"))),i}}function T(e){return s(e)&&3===e.nodeType}function E(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),g(e)||T(e)?e:"string"==typeof e&&/\S/.test(e)?Ce.createTextNode(e):void 0}).filter(function(e){return e})}function S(e,t){return E(t).forEach(function(t){return e.appendChild(t)}),e}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600),o=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=n=i="-"),r=r>0||s>0?r+":":"",n=((r||o>=10)&&n<10?"0"+n:n)+":",i=i<10?"0"+i:i,r+n+i}function C(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([0-9.]+)/i)||[];if(/trident/i.test(i[1]))return e=/\brv[ :]+([0-9.]+)/g.exec(t)||[],{name:"Explorer",version:e[1]||""};if("Chrome"===i[1]&&null!=(e=t.match(/\b(OPR|Edge)\/([0-9.]+)/))){var n=e.slice(1).toString().split(",");return{name:n[0].replace("OPR","Opera"),version:n[1]}}return i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/([0-9.]+)/i))&&i.splice(1,1,e[1]),{name:i[0],version:i[1]}}function A(e){return void 0!==e&&"function"==typeof e.then}function I(e){A(e)&&e.then(null,function(e){})}function w(e,t){return Array.isArray(e)?P(e):void 0===e||void 0===t?P():P([[e,t]])}function P(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:x.bind(null,"start",0,e),end:x.bind(null,"end",1,e)}}function x(e,t,i,n){return void 0===n&&(log.warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument."),n=0),D(e,n,i.length-1),i[n][t]}function D(e,t,i){if(t<0||t>i)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+i+").")}function O(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}function k(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function L(e,t){return k(e.options[e.options.selectedIndex].value,t)}function N(e,t,i){if(t)for(var n=0;n<e.options.length;n++)if(k(e.options[n].value,i)===t){e.selectedIndex=n;break}}function R(e){if(e instanceof R)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:s(e)&&("number"==typeof e.code&&(this.code=e.code),e.message&&(this.message=e.message),e.status&&(this.status=e.status),o(this,e)),this.message||(this.message=R.defaultMessages[this.code]||"")}function M(){var e=te.getTech("EmpShaka");if(void 0!==e&&e.isSupported())return Promise.resolve(!0);var t=te.getTech("EmpHLS");if(void 0!==t&&t.isSupported())return Promise.resolve(!0);var i=te.getTech("EmpHLS-MSE");return void 0!==i&&i.isSupported()?Promise.resolve(!0):Promise.resolve(!1)}function B(){var e=[];if("function"==typeof Q.navigator.requestMediaKeySystemAccess){var t=-1!==Q.navigator.userAgent.indexOf("Android"),i=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.5"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:!0===t?"SW_SECURE_DECODE":"SW_SECURE_CRYPTO"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]}],n=te.getTech("EmpShaka");void 0!==n&&n.isSupported()&&(e.push(new Promise(function(e,t){Q.navigator.requestMediaKeySystemAccess("com.microsoft.playready",i).then(function(){e(!0)},function(){e(!1)})})),e.push(new Promise(function(e,t){Q.navigator.requestMediaKeySystemAccess("com.widevine.alpha",i).then(function(){e(!0)},function(){e(!1)})})))}var r=te.getTech("EmpHLS");return void 0!==r&&r.isSupported()&&Q.WebKitMediaKeys&&r.getKeySystem&&Q.WebKitMediaKeys.isTypeSupported(r.getKeySystem(),"video/mp4")&&e.push(!0),0===e.length&&e.push(!1),Promise.all(e).then(function(e){return-1!==e.indexOf(!0)},function(e){return!1})}function U(e){var t=_i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}function H(e,t,i){if(!vi(t))throw new TypeError("iterator must be a function");arguments.length<3&&(i=this),"[object Array]"===Si.call(e)?G(e,t,i):"string"==typeof e?F(e,t,i):j(e,t,i)}function G(e,t,i){for(var n=0,r=e.length;n<r;n++)bi.call(e,n)&&t.call(i,e[n],n,e)}function F(e,t,i){for(var n=0,r=e.length;n<r;n++)t.call(i,e.charAt(n),n,e)}function j(e,t,i){for(var n in e)bi.call(e,n)&&t.call(i,e[n],n,e)}function V(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var n in i)wi.call(i,n)&&(e[n]=i[n])}return e}function W(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function q(e,t,i){var n=e;return vi(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=Ii(t,{uri:e}),n.callback=i,n}function K(e,t,i){return t=q(e,t,i),Y(t)}function Y(e){function t(){4===a.readyState&&setTimeout(r,0)}function i(){var e=void 0;if(e=a.response?a.response:a.responseText||z(a),g)try{e=JSON.parse(e)}catch(e){}return e}function n(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,s(e,y)}function r(){if(!c){var t;clearTimeout(u),t=e.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var n=y,r=null;return 0!==t?(n={body:i(),statusCode:t,method:h,headers:{},url:p,rawRequest:a},a.getAllResponseHeaders&&(n.headers=Ai(a.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),s(r,n,n.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var o=!1,s=function(t,i,n){o||(o=!0,e.callback(t,i,n))},a=e.xhr||null;a||(a=e.cors||e.useXDR?new K.XDomainRequest:new K.XMLHttpRequest);var l,c,u,p=a.url=e.uri||e.url,h=a.method=e.method||"GET",d=e.body||e.data,m=a.headers=e.headers||{},f=!!e.sync,g=!1,y={body:void 0,headers:{},statusCode:0,method:h,url:p,rawRequest:a};if("json"in e&&!1!==e.json&&(g=!0,m.accept||m.Accept||(m.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),d=JSON.stringify(!0===e.json?d:e.json))),a.onreadystatechange=t,a.onload=r,a.onerror=n,a.onprogress=function(){},a.onabort=function(){c=!0},a.ontimeout=n,a.open(h,p,!f,e.username,e.password),f||(a.withCredentials=!!e.withCredentials),!f&&e.timeout>0&&(u=setTimeout(function(){if(!c){c=!0,a.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",n(e)}},e.timeout)),a.setRequestHeader)for(l in m)m.hasOwnProperty(l)&&a.setRequestHeader(l,m[l]);else if(e.headers&&!W(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(a.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(a),a.send(d||null),a}function z(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function X(){}function $(e,t,i){var n=0,r=!1,o={next:function(){r||(n<e?(n++,t(o)):(r=!0,i()))},iteration:function(){return n-1},break:function(){r=!0,i()}};return o.next(),o}var J,Z="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};J="undefined"!=typeof window?window:void 0!==Z?Z:"undefined"!=typeof self?self:{};var Q=J,ee=Q.videojs,te=ee,ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},re=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),oe=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},se=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ae=function e(){ne(this,e),this.ENDED="ended",this.ERROR="error",this.LOADED_DATA="loadeddata",this.TIMESHIFT_CHANGE="timeshiftchange",this.DURATION_CHANGE="durationchange",this.LOADED_METADATA="loadedmetadata",this.SEEKING="seeking",this.TIME_UPDATE="timeupdate",this.USER_ACTIVE="useractive",this.USERIN_ACTIVE="userinactive",this.VOLUME_CHANGE="volumechange",this.LOAD_START="loadstart",this.CAN_PLAY="canplay",this.PLAYING="playing",this.WAITING="waiting",this.SEEKED="seeked",this.ABORT="abort",this.PLAY="play",this.PAUSE="pause",this.DISPOSE="dispose",this.MODE_CHANGE="modechange",this.CHANGE="change",this.ADD_TRACK="addtrack",this.REMOVE_TRACK="removetrack",this.METRIC_CHANGED="metricchanged",this.RECOVERABLE_ASSET_ERROR="recoverableasseterror",this.BITRATE_CHANGED="bitratechanged",this.CLOSE="close",this.READY="ready",this.RESIZE="resize",this.TAP="tap",this.CLICK="click",this.FOCUS="focus",this.BLUR="blur",this.BEFORE_MODAL_OPEN="beforemodalopen",this.MODAL_OPEN="modalopen",this.BEFORE_MODAL_CLOSE="beforemodalclose",this.MODAL_CLOSE="modalclose",this.BEFORE_MODAL_FILL="beforemodalfill",this.MODAL_FILL="modalfill",this.BEFORE_MODAL_EMPTY="beforemodalempty",this.MODAL_EMPTY="modalempty",this.CAN_PLAY_THROUGH="canplaythrough",this.FIRST_PLAY="firstplay",this.PROGRESS="progress",this.SUSPEND="suspend",this.EMPTIED="emptied",this.STALLED="stalled",this.RATE_CHANGE="ratechange",this.TEXT_TRACK_CHANGE="texttrackchange",this.TRACK_CHANGE="trackchanged",this.POSTER_CHANGE="posterchange",this.KEY_DOWN="keydown",this.KEY_UP="keyup",this.MOUSE_DOWN="mousedown",this.MOUSE_MOVE="mousemove",this.MOUSE_UP="mouseup",this.TOUCH_START="touchstart",this.TOUCH_MOVE="touchmove",this.TOUCH_END="touchend",this.TOUCH_LEAVE="touchleave",this.TOUCH_CANCEL="touchcancel",this.FULLSCREEN_CHANGE="fullscreenchange",this.ENTER_FULL_WINDOW="enterFullWindow",this.EXIT_FULL_WINDOW="exitFullWindow",this.CONTROLS_ENABLED="controlsenabled",this.CONTROLS_DISABLED="controlsdisabled",this.USING_NATIVE_CONTROLS="usingnativecontrols",this.USING_CUSTOM_CONTROLS="usingcustomcontrols",this.SLIDER_ACTIVE="slideractive",this.SLIDER_INACTIVE="sliderinactive",this.ENTITLEMENT_CHANGE="entitlementchange",this.ENTITLEMENT_LOAD_START="entitlementloadstart",this.PLAYER_CREATED="playercreated",this.RESTARTING="restarting",this.AD_TIMELINE_CHANGED="adtimelinechanged",this.CHROMECAST_CASTING="chromecastcasting",this.CHROMECAST_STOPPED="chromecaststopped",this.STOPPED="stopped",this.READY_TO_PLAY="readytoplay",this.PROGRAM_CHANGED="programchanged",this.ASSET_CHANGED="assetchanged",this.SEGMENT_MISSING="segmentmissing",this.AIRPLAY_START="airplayStart",this.REPLAY="replay",this.DOWNLOAD_PROGRESS="downloadprogress",this.DRM_SESSION_UPDATE="drmsessionupdate"},le=new ae,ce=function(e){return s(e)?Object.keys(e):[]},ue={UNKNOWN:100,LOAD_ASSET:101,ENTITLEMENT:102,ENTITLEMENT2:103,SHAKA_TECH:200,HLS_TECH:300,FLASH_TECH:400,CHROMECAST_TECH:500,HLS_MSE_TECH:600},pe=function(e){function t(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ue.UNKNOWN,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ne(this,t);var o=se(this,e.call(this));return o.code=n,l(i)?o.message=i:i.message&&(o.message=i.message),o.status=r,Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return oe(t,e),re(t,[{key:"codes",get:function(){return ue}}]),t}(Error),he=!1,de=function(){he&&h(null,arguments)};Q.EMP_DEBUG_LOG&&(de=Q.console&&Q.console.log&&void 0||function(){});var me=de;if(me.history=[],me.error=function(){h("error",arguments)},me.warn=function(){h("warn",arguments)},me.debug=function(){h("debug",arguments)},Q.EMP_DEBUG_LOG){var fe=function(){};me.debug=Q.console&&Q.console.debug&&void 0||fe,me.warn=Q.WARN=Q.console&&Q.console.warn&&void 0||fe,me.error=Q.ERROR=Q.console&&Q.console.error&&void 0||fe}me.setLogToBrowserConsole=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];he=e};var ge,ye=1,ve=function(e,t,i){t.guid||(t.guid=d());var n=function(){return t.apply(e,arguments)};return n.guid=i?i+"_"+t.guid:t.guid,n},_e=function(e,t){var i=Date.now();return function(){var n=Date.now();n-i>=t&&(e.apply(void 0,arguments),i=n)}},Te={},Ee=(Object.freeze||Object)({default:Te}),Se=Ee&&Te||Ee,be=void 0!==Z?Z:"undefined"!=typeof window?window:{};"undefined"!=typeof document?ge=document:(ge=be["__GLOBAL_DOCUMENT_CACHE@4"])||(ge=be["__GLOBAL_DOCUMENT_CACHE@4"]=Se);var Ce=ge,Ae=te.getComponent("MenuItem"),Ie=te.getComponent("Component"),we=function(e){function t(i,n){ne(this,t);var r=n.bitrate;n.label=0===r?"auto":Math.max(0,Math.round(r/1e3))+" kbps",n.selected=i.bitrate()===r;var o=se(this,e.call(this,i,n));return o.bitrate=r,o.player_.on(le.BITRATE_CHANGED,function(e,t){o.el()&&(0===o.bitrate?o.selected(t.auto):o.selected(!t.auto&&t.bitrate===o.bitrate))}),o}return oe(t,e),t.prototype.handleClick=function(e){this.player_.bitrate(this.bitrate)},t}(Ae);Ie.registerComponent("BitrateMenuItem",we);var Pe=te.getComponent("MenuButton"),xe=te.getComponent("Component"),De=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));r.el_.setAttribute("aria-label","Bitrate menu");r.player_.bitrates();r.items.length<=1&&r.hide();var o=ve(r,r.update);return r.player_.on(le.LOADED_DATA,o),r.player_.on(le.CHROMECAST_CASTING,o),r.player_.on(le.ENDED,function(){return r.hide()}),r.player_.on(le.PLAYING,function(){r.items.length>1&&r.show()}),r.player_.on(le.DISPOSE,function(){this.player_.on(le.LOADED_DATA,o)}),r}return oe(t,e),t.prototype.buildCSSClass=function(){return"vjs-bitrate-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.player_.bitrates();if(!t)return e;t.length>0&&e.push(new we(this.player_,{selectable:!0,bitrate:0}));for(var i=0;i<t.length;i++){var n=t[i];e.push(new we(this.player_,{selectable:!0,bitrate:n}))}return e},t}(Pe);De.prototype.controlText_="Bitrate",xe.registerComponent("BitrateButton",De);var Oe=function(e){for(var t="",i=0;i<arguments.length;i++)t+=m(e[i])+(arguments[i+1]||"");return t},ke=function(e,t){return e.raw=t,e}(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),Le={bitrates:function(e){return e.tech_&&void 0!==e.tech_.bitrates?e.techGet_("bitrates"):[]},bitrate:function(e,t){return e.tech_&&void 0!==e.tech_.bitrate?(void 0!==t&&e.techCall_("bitrate",t),e.techGet_("bitrate")):0},canRestart:function(e){return!e.tech_||void 0===e.tech_.canRestart||e.techGet_("canRestart")},restart:function(e,t,i){e.currentSource()&&(e.options_.startTime=0,e.options_.absoluteStartTime=void 0,e.previousAbsoluteStartTime=void 0,e.options_.autoplay||(e.options_.autoplay=!0,e.one("play",function(){e.options_.autoplay=!1})),e.trigger(le.RESTARTING),i?(e.options_.absoluteStartTime=i,e.options_.useLastViewedOffset=!1):e.options_.useLastViewedOffset=t,e.trigger(le.REPLAY))},getSelectedAudioTrack:function(e){for(var t=e.audioTracks(),i=t.length;i--;){var n=t[i];if(n.enabled)return n.language}return null},getSelectedTextTrack:function(e){for(var t=e.textTracks(),i=t.length;i--;){var n=t[i];if("showing"===n.mode)return n.language}return null},loadAsset:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o={assetId:t||n,programId:i,channelId:n};e.one(le.LOADED_DATA,function(){r(e.entitlement)}),e.startResetAndReloadTimer_&&e.startResetAndReloadTimer_(),e.src({type:"video/emp",src:JSON.stringify(o)})},currentAsset:function(e,t,i,n){if(!t&&!i&&!n){var r=e.cache_.source;if(r&&r.src&&"video/emp"===r.type){return c(r.src)}return r&&r.assetId?{assetId:r.channelId?r.channelId:r.assetId,programId:r.programId,channelId:r.channelId}:null}if(me("Update currentAsset",t,i,n),e.cache_.source&&"video/emp"===e.cache_.source.type)e.cache_.source.src=JSON.stringify({assetId:t,programId:i,channelId:n});else if(e.cache_.source&&e.cache_.source.assetId)e.cache_.source.assetId=t,e.cache_.source.programId=i,e.cache_.source.channelId=n;else{var o={assetId:t,programId:i,channelId:n};e.cache_.source={type:"video/emp",src:JSON.stringify(o)}}e.cache_.sources=[e.cache_.source]},getAbsoluteTime:function(e){if(!e.tech_||void 0===e.tech_.getAbsoluteTime)return new Date(1e3*e.currentTime());var t=this.getServerTime(e),i=e.tech_.getAbsoluteTime(t);if("EmpCast"!==e.techName_){var n=this.getEntitlement(e);i&&n&&n.isStaticCachupAsLive?i=new Date(i.getTime()+n.streamInfo.start.getTime()):n&&n.isDynamicCachupAsLive&&("EmpHLS"===e.techName_||"EmpHLS-MSE"===e.techName_)&&(i=new Date(1e3*e.tech_.baseCurrentTime()+n.streamInfo.start.getTime()))}return i},getPlayheadTime:function(e){var t=this.getAbsoluteTime(e);return t?t.getTime():0},timeBehindLive:function(e){if(!e.tech_||void 0===e.tech_.timeBehindLive)return 0;var t=0,i=this.getServerTime(e),n=this.getEntitlement(e);return t=n&&n.isStaticCachupAsLive?(i-this.getPlayheadTime(e))/1e3:e.tech_.timeBehindLive(i),t!==1/0&&t?Math.round(t):0},liveDelay:function(e){var t=0;return this.isLive(e)&&(t=e.tech_&&void 0!==e.tech_.liveDelay?e.tech_.liveDelay():(this.getServerTime(e)-this.getSeekTimerange(e).end)/1e3),Math.round(t)},stop:function(e,t){e.stopProgramService&&e.stopProgramService(),e.sourceChanging_=!1,e.cache_.sources=[],e.tech_&&void 0!==e.tech_.stop?(e.techCall_("stop",t),e.techCall_("stopTrackingCurrentTime")):(e.techCall_("stopTrackingCurrentTime"),t&&t())},timeShiftEnabled:function(e){return!e.tech_||void 0===e.tech_.timeShiftEnabled||e.techGet_("timeShiftEnabled")},baseCurrentTime:function(e){return e.tech_&&void 0!==e.tech_.baseCurrentTime?e.techGet_("baseCurrentTime"):e.currentTime()},baseDuration:function(e){return e.tech_&&void 0!==e.tech_.duration?e.techGet_("duration"):0},startTimeLive:function(e){if(!e.tech_||void 0===e.tech_.startTimeLive)return 0;var t=this.getServerTime(e),i=e.tech_.startTimeLive(t),n=this.getEntitlement(e);return n&&n.isDynamicCachupAsLive&&("EmpHLS"===e.techName_||"EmpHLS-MSE"===e.techName_)&&(i=n.streamInfo.referenceTime),n&&n.isStaticCachupAsLive&&"EmpCast"!==e.techName_&&(i=n.streamInfo.referenceTime),i},isLive:function(e){return!(!e.tech_||void 0===e.tech_.live)&&e.techGet_("live")},isCatchupAsLive:function(e){var t=this.getEntitlement(e);return!this.isLive(e)&&t&&t.live},getBitrate:function(e){return e.tech_&&void 0!==e.tech_.getBitrate?e.techGet_("getBitrate"):0},duration:function(e,t){return e.tech_&&void 0!==e.tech_.duration?(e.duration(t),e.techGet_("duration")):e.duration(t)},techVersion:function(e){return e.tech_&&void 0!==e.tech_.techVersion?e.techGet_("techVersion"):"2.x.x"},canSeekTo:function(e,t){if(!1===this.timeShiftEnabled(e)||!e.hasStarted())return!1;var i=this.getEntitlement(e);return!(i&&e.cache_&&!1===i.ffEnabled&&e.cache_.currentTime<=t)&&!(i&&e.cache_&&!1===i.rwEnabled&&e.cache_.currentTime>=t)},remainingTime:function(e){if(!e.tech_||void 0===e.tech_.remainingTime){var t=e.duration();return t===1/0||0===t?1/0:t-e.currentTime()}return e.techGet_("remainingTime")},casting:function(e,t){return!(!e.castPlugin||!e.castPlugin().canOverride("Cast"))&&(e.cache_.sources=t,e.cache_.source=t[0],e.castPlugin().cast(),!0)},setAbsoluteTime:function(e,t){if(!e.tech_||void 0===e.tech_.setAbsoluteTime){var i=(t.getTime()-new Date(0))/1e3;return void e.currentTime(i)}var n=this.getServerTime(e);if("EmpCast"!==e.techName_){var r=this.getEntitlement(e);if(r&&r.isStaticCachupAsLive){if(t.getTime()<r.streamInfo.start.getTime())me("setAbsoluteTime","playPreviousProgram"),this.playProgram(e,t),t=0;else{if(t.getTime()>=r.streamInfo.end.getTime())return me("setAbsoluteTime","playNextProgram"),void this.playProgram(e,t);t=t.getTime()-r.streamInfo.start.getTime()}return void e.techCall_("setCurrentTime",t/1e3)}if(r&&r.isDynamicCachupAsLive)if(t.getTime()<r.streamInfo.start.getTime()){if(me("setAbsoluteTime","playPreviousProgram"),this.playProgram(e,t),"EmpHLS"===e.techName_||"EmpHLS-MSE"===e.techName_)return void e.techCall_("setCurrentTime",0);t=new Date(r.streamInfo.start.getTime())}else if("EmpHLS"===e.techName_||"EmpHLS-MSE"===e.techName_)return t-=r.streamInfo.start.getTime(),void e.techCall_("setCurrentTime",t/1e3)}e.techCall_("setAbsoluteTime",{date:t,nowDate:n})},gotoLive:function(e){if(e.sourceChanging_)return void me("gotoLive ignore sourceChanging");if(e.tech_.gotoLive)e.techCall_("gotoLive");else{var t=this.getEntitlement(e);if(t&&t.isDynamicCachupAsLive)this.setAbsoluteTime(e,new Date(e.getServerTime()));else if(t&&t.isStaticCachupAsLive){var i=this.currentAsset(e);i&&i.channelId&&e.startPlayback(null,i.channelId,null)}else if(this.isLive(e)){var n=e.duration();e.currentTime(n)}else me.warn("Not suppoted for VOD")}},setPlayheadTime:function(e,t){this.setAbsoluteTime(e,new Date(t))},supportsEpgProgramChange:function(e){if(e.tech_&&void 0!==e.tech_.supportsEpgProgramChange)return e.techGet_("supportsEpgProgramChange")},program:function(e){return e.tech_&&void 0!==e.tech_.program?e.techGet_("program"):null},playPreviousProgram:function(e,t){if(e.sourceChanging_)return void me("playPreviousProgram ignore sourceChanging");e.programService&&(e.sourceChanging_=!0,e.programService().getPreviousProgram(function(i,n){if(n)e.sourceChanging_=!1,me.error("playPreviousProgram",n);else{var r={};if(t){r.playFrom="startTime";var o=new Date(i.endTime);o.setSeconds(o.getSeconds()-30),r.startTime=o}else r.playFrom="beginning";e.startPlayback(null,i.channelId,i.programId,r)}}))},playNextProgram:function(e){if(e.sourceChanging_)return void me("playNextProgram ignore sourceChanging");e.programService&&e.programService().currentProgram&&this.getServerTime(e)>e.programService().currentProgram.end.getTime()&&(e.sourceChanging_=!0,e.programService().getNextProgram(function(t,i){if(i)e.sourceChanging_=!1,me.error("playNextProgram",i);else{var n={};n.playFrom="beginning",e.startPlayback(null,t.channelId,t.programId,n)}}))},playProgram:function(e,t){if(e.sourceChanging_)return void me("playProgram ignore sourceChanging");e.programService&&(e.sourceChanging_=!0,e.programService().getProgram(t,function(i,n){if(n)me.error("getProgram",n);else{var r={};r.playFrom="startTime",r.startTime=t,e.startPlayback(null,i.channelId,i.programId,r)}}))},getServerTime:function(e){return e.programService&&e.programService()&&e.programService().exposure?e.programService().exposure.getCachedServerTime():Date.now()},getEntitlement:function(e){if(e.programService)return e.programService().entitlement();if(e.tech_){var t=e.tech_.options_;if(t&&t.source&&t.source.playSessionId)return t.source}return null},getSeekTimerange:function(e){var t={start:0,end:0};if(!e.tech_||void 0===e.tech_.seekable||e.seeking())return t;if(seekable=e.techGet_("seekable"),seekable&&seekable.length>0&&(t.start=1e3*(seekable.start(seekable.length-1)+this.startTimeLive(e)/1e3),t.end=1e3*(seekable.end(seekable.length-1)+this.startTimeLive(e)/1e3),"EmpCast"===e.techName_)){var i=this.liveDelay(e);t.end>this.getServerTime(e)-1e3*i&&(t.end=this.getServerTime(e)-1e3*i)}return t},getBufferedTimerange:function(e){var t={start:0,end:0};return!e.tech_||void 0===e.tech_.buffered||e.seeking()?t:(buffered=e.techGet_("buffered"),buffered&&buffered.length>0&&(t.start=Math.round(1e3*(buffered.start(buffered.length-1)+this.startTimeLive(e)/1e3)),t.end=Math.round(1e3*(buffered.end(buffered.length-1)+this.startTimeLive(e)/1e3))),t)},setTechProgram:function(e,t){(e.tech_||void 0!==e.tech_.program)&&e.techCall_("program",t)}},Ne=te.getComponent("Button"),Re=te.getComponent("Component"),Me=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));return r.updateShowing(),r.on(r.player(),le.PLAYING,function(){return r.updateShowing()}),r.on(r.player(),le.DURATION_CHANGE,function(){return r.updateShowing()}),r.on(r.player(),le.TIME_UPDATE,function(){return r.timeUpdate()}),r.on(r.player(),le.ENDED,function(){return r.hide()}),r}return oe(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"emp-live-control vjs-control"});return this.contentEl_=y("div",{className:"emp-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateShowing=function(){this.player().isLive()||this.entitlement&&this.entitlement.isStaticCachupAsLive?this.show():this.hide()},t.prototype.timeUpdate=function(){if(this.player().isLive()||this.entitlement&&this.entitlement.isStaticCachupAsLive){var e=(this.player().currentTime(),this.player().duration(),this.player().timeBehindLive());this.player().isLive()&&e<20?this.addClass("emp-live-edge"):this.removeClass("emp-live-edge")}},t.prototype.handleClick=function(){this.player().gotoLive()},re(t,[{key:"entitlement",get:function(){return Le.getEntitlement(this.player())}}]),t}(Ne);Re.registerComponent("EmpLiveDisplay",Me);var Be=te.getComponent("Component"),Ue=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));return r.on(r.player(),le.PLAYING,function(){return r.updateVisibility()}),r.on(r.player(),le.DURATION_CHANGE,function(){return r.updateVisibility()}),r.on(r.player(),le.SEEKED,function(){return r.updateVisibility()}),r.addClass("vjs-hidden"),r}return oe(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"emp-ad-marker"})},t.prototype.buildCSSClass=function(){return"emp-ad-marker "+e.prototype.buildCSSClass.call(this)},t.prototype.updateVisibility=function(){if(this.player_.duration()){var e=this.options_.element;e.offset+e.duration<this.player_.currentTime()?this.addClass("emp-ad-past"):this.removeClass("emp-ad-past");var t=e.offset/this.player_.duration();t>=1&&(t=1);var i=e.duration/this.player_.duration();i>=1&&(i=1),this.el_.style.left=(100*t).toFixed(2)+"%",this.el_.style.width=(100*i).toFixed(2)+"%",this.show()}},t.prototype.dispose=function(){e.prototype.dispose.call(this)},t}(Be);Be.registerComponent("EmpMarker",Ue);var He=te.getComponent("Component"),Ge=te.getComponent("MouseTimeDisplay"),Fe=function(e){function t(i,n){return ne(this,t),se(this,e.call(this,i,n))}return oe(t,e),t.prototype.update=function(e,t){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var n=i.player_.duration(),r=void 0;r=i.player().isLive()?"-"+b(n-t*n,n):b(t*n,n),i.el_.style.left=e.width*t+"px",i.getChild("timeTooltip").update(e,t,r)})},t}(Ge);He.registerComponent("MouseTimeDisplay",Fe);var je=Q.navigator&&Q.navigator.userAgent||"",Ve=(/AppleWebKit\/([\d.]+)/i.exec(je),/iPad/i.test(je)),We=Q.navigator.userAgent.indexOf("CrKey")>=0,qe=/iPhone/i.test(je)&&!Ve,Ke=/iPod/i.test(je),Ye=qe||Ve||Ke,ze=(function(){var e=je.match(/OS (\d+)_/i);e&&e[1]&&e[1]}(),/Android/i.test(je)),Xe=function(){var e=je.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),$e=(ze&&/webkit/i.test(je),/Firefox/i.test(je),/Edge/i.test(je)),Je=!$e&&/Chrome/i.test(je),Ze=(function(){var e=je.match(/Chrome\/(\d+)/);e&&e[1]&&parseFloat(e[1])}(),/MSIE\s8\.0/.test(je),function(){var e=/MSIE\s(\d+)\.\d/.exec(je),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(je)&&/rv:11.0/.test(je)&&(t=11),t}()),Qe=(/Safari/i.test(je),$e||null!==Ze),et=(function(){return Ce===Q.document&&void 0!==Ce.createElement}()&&Q.document.createElement("video").style,te.getComponent("Component")),tt=te.getComponent("Slider"),it=(te.getComponent("LoadProgressBar"),te.getComponent("PlayProgressBar"),We||Q.EMP_DEBUG_CHROMECAST?1e3:30),nt=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));return r.lastStep=0,r.markers=[],r.update=_e(ve(r,r.update),it),r.on(i,le.TIME_UPDATE,r.update),r.on(i,le.ENDED,r.handleEnded),r.on(i,le.AD_TIMELINE_CHANGED,r.updateMarkers),r.updateInterval=null,r.on(i,["playing"],function(){r.updateInterval&&(r.clearInterval(r.updateInterval),r.updateInterval=null),We||Q.EMP_DEBUG_CHROMECAST||(r.updateInterval=r.setInterval(function(){r.requestAnimationFrame(function(){r.update()})},it))}),
r.on(i,["ended","pause","waiting"],function(){r.updateInterval&&(r.clearInterval(r.updateInterval),r.updateInterval=null)}),r.on(i,["timeupdate","ended"],r.update),r}return oe(t,e),t.prototype.updateMarkers=function(e,t){for(var i=this.markers,n=Array.isArray(i),r=0,i=n?i:i[Symbol.iterator]();;){var o;if(n){if(r>=i.length)break;o=i[r++]}else{if(r=i.next(),r.done)break;o=r.value}var s=o;this.removeChild(s)}if(t&&t.timeline)for(var a=t.timeline.getAllElements(),l=Array.isArray(a),c=0,a=l?a:a[Symbol.iterator]();;){var u;if(l){if(c>=a.length)break;u=a[c++]}else{if(c=a.next(),c.done)break;u=c.value}var p=u;if("advert"===p.type){var h=new Ue(this.player_,{element:p});this.markers.push(h),this.addChild(h),h.updateVisibility()}}},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.prototype.update_=function(e,t){var i=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[b(e,i),b(i,i)],"{1} of {2}")),We||Q.EMP_DEBUG_CHROMECAST||this.bar.update(_(this.el_),t)},t.prototype.update=function(t){var i=e.prototype.update.call(this);return this.update_(this.getCurrentTime_(),i),i},t.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.prototype.handleEnded=function(e){this.update_(this.player_.duration(),1);for(var t=this.markers,i=Array.isArray(t),n=0,t=i?t:t[Symbol.iterator]();;){var r;if(i){if(n>=t.length)break;r=t[n++]}else{if(n=t.next(),n.done)break;r=n.value}var o=r;this.removeChild(o)}},t.prototype.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return e>=1?1:e},t.prototype.handleMouseDown=function(t){this.player_.scrubbing(!0),e.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(e){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.throttleSetCurrentTime(t)},t.prototype.throttleSetCurrentTime=function(e){null!=this.seekTimeoutId_&&Q.clearTimeout(this.seekTimeoutId_),this.seekTimeoutId_=Q.setTimeout(this.onSeekInputTimeout_.bind(this,e),1e3)},t.prototype.onSeekInputTimeout_=function(e){this.lastStep=0,this.seekTimeoutId_=null,this.player_.currentTime(e)},t.prototype.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},t.prototype.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),this.player_.scrubbing(!1)},t.prototype.stepForward=function(){this.lastStep+=5,this.throttleSetCurrentTime(this.player_.currentTime()+this.lastStep)},t.prototype.stepBack=function(){this.lastStep-=5,this.throttleSetCurrentTime(this.player_.currentTime()+this.lastStep)},t.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleAction(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t}(tt);nt.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ze&&!(Ze>8)||Ye||ze||nt.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),nt.prototype.playerEvent="timeupdate",et.registerComponent("SeekBar",nt);var rt=te.getComponent("Button"),ot=te.getComponent("Component"),st=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));return r.shouldRestart_=!0,r.updateShowing(),r.on(r.player(),le.LOADED_METADATA,r.updateShowing),r.on(r.player(),le.PLAYING,function(){r.shouldRestart_=!1,r.updateShowing()}),r.on(r.player(),le.ERROR,function(){return r.shouldRestart_=!0}),r}return oe(t,e),t.prototype.buildCSSClass=function(){return"emp-restart-control "+e.prototype.buildCSSClass.call(this)},t.prototype.updateShowing=function(){this.player().canRestart()?this.show():this.hide()},t.prototype.handleClick=function(){if(!0===this.shouldRestart_)return void this.player_.restart();this.player_.scrubbing(!0);var e=!this.player_.paused();this.player_.pause(),this.player_.currentTime(0),this.player_.scrubbing(!1),e&&I(this.player_.play())},t}(rt);st.prototype.controlText_="Restart",ot.registerComponent("EmpRestartButton",st);var at=te.getComponent("Button"),lt=te.getComponent("Component"),ct=function(e){function t(i,n){ne(this,t),n=o({seconds:30},n);var r=se(this,e.call(this,i,n));return r.controlText("Forward "+n.seconds+"s"),i.on(le.TIMESHIFT_CHANGE,function(){return r.onTimeshift()}),i.on(le.PROGRAM_CHANGED,function(e,t){return r.updateEnabled(t&&t.program)}),i.on(le.DURATION_CHANGE,function(){return r.updateEnabled()}),r.updateEnabled(),r}return oe(t,e),t.prototype.updateEnabled=function(e){this.entitlement&&!this.entitlement.ffEnabled||!this.player().timeShiftEnabled()?(this.disable(),this.controlText("Forward restricted")):(this.enable(),this.show(),this.controlText("Forward "+this.options_.seconds+"s"))},t.prototype.onTimeshift=function(){this.player()&&(this.player().timeShiftEnabled()?this.show():this.hide())},t.prototype.buildCSSClass=function(){return"emp-forward-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){if(!this.player().ended()){this.player().scrubbing(!0);var e=this.player().currentTime()+this.options_.seconds;this.player().currentTime(e),this.player().scrubbing(!1)}},re(t,[{key:"entitlement",get:function(){return Le.getEntitlement(this.player())}}]),t}(at);ct.prototype.controlText_="Forward",lt.registerComponent("EmpForwardButton",ct);var ut=te.getComponent("Button"),pt=te.getComponent("Component"),ht=function(e){function t(i,n){ne(this,t),n=o({seconds:30},n);var r=se(this,e.call(this,i,n));return r.controlText("Rewind "+n.seconds+"s"),i.on(le.TIMESHIFT_CHANGE,function(){return r.onTimeshift()}),i.on(le.PROGRAM_CHANGED,function(e,t){return r.updateEnabled(t&&t.program)}),i.on(le.DURATION_CHANGE,function(){return r.updateEnabled()}),r.updateEnabled(),r}return oe(t,e),t.prototype.updateEnabled=function(e){this.entitlement&&!this.entitlement.rwEnabled||!this.player().timeShiftEnabled()?(this.disable(),this.controlText("Rewind restricted")):(this.enable(),this.show(),this.controlText("Rewind "+this.options_.seconds+"s"))},t.prototype.onTimeshift=function(){this.player()&&(this.player().timeShiftEnabled()?this.show():this.hide())},t.prototype.buildCSSClass=function(){return"emp-rewind-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){if(!this.player().ended()){this.player().scrubbing(!0);var e=this.player().currentTime()-this.options_.seconds;this.player().currentTime(e),this.player().scrubbing(!1)}},re(t,[{key:"entitlement",get:function(){return Le.getEntitlement(this.player())}}]),t}(ut);ht.prototype.controlText_="Rewind",pt.registerComponent("EmpRewindButton",ht);var dt=te.getComponent("Button"),mt=te.getComponent("Component"),ft=function(e){function t(i,n){return ne(this,t),se(this,e.call(this,i,n))}return oe(t,e),t.prototype.buildCSSClass=function(){return"emp-reload-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.player_.restart()},t}(dt);ft.prototype.controlText_="Reload",mt.registerComponent("EmpReloadButton",ft);var gt=(te.getComponent("RemainingTimeDisplay"),te.getComponent("Component")),yt=We||window.EMP_DEBUG_CHROMECAST?1e3:30,vt=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));return r.mode_=n.mode||"remainingTime",r.throttledUpdateContent=_e(ve(r,r.updateContent),yt),r.on(i,le.TIME_UPDATE,r.throttledUpdateContent),r.on(i,le.DURATION_CHANGE,r.updateContent),i.on(le.ENDED,function(){r.hide()}),i.on(le.PLAYING,function(){r.show()}),r}return oe(t,e),t.prototype.createEl=function(){var t="emp-time vjs-time-control vjs-remaining-time vjs-control";this.options_&&"remainingTime"==this.options_.mode?t+=" emp-remaining-time":t+=" emp-currentTime-time";var i=e.prototype.createEl.call(this,"div",{className:t});return this.contentEl_=y("div",{className:"emp-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span>0:00"},{"aria-live":"off"}),i.appendChild(this.contentEl_),i},t.prototype.updateContent=function(){if("currentTime"===this.mode_){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),t=this.localize("Current Time"),i=b(e,this.player_.duration());i!==this.formattedTime_&&(this.formattedTime_=i,this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span>"+i)}else{var n=this.player_.duration();if(n){var r=this.localize("Remaining Time"),o=void 0;if(n>4294967295)(o="")!==this.formattedTime_&&(this.formattedTime_=o,this.contentEl_.innerHTML='<span class="vjs-control-text">'+r+"</span>"+o);else{var s=this.player_.remainingTime();s<0&&(s=0),o=b(s),o!==this.formattedTime_&&(this.formattedTime_=o,this.contentEl_.innerHTML='<span class="vjs-control-text">'+r+"</span>"+o)}}}},t}(gt);gt.registerComponent("EmpTimeDisplay",vt),gt.registerComponent("EmpTimeDisplay2",vt);var _t=te.getComponent("Button"),Tt=te.getComponent("Component"),Et=function(e){function t(i,n,r){ne(this,t);var o=se(this,e.call(this,i,n,r));return o.el_.setAttribute("aria-label","Stop Playback"),i.on(le.TIMESHIFT_CHANGE,function(){return o.onTimeshift()}),i.on(le.PLAYING,function(){return o.onTimeshift()}),i.on(le.ENDED,function(){return o.hide()}),o}return oe(t,e),t.prototype.onTimeshift=function(){this.player()&&(this.player().timeShiftEnabled()?this.hide():this.show())},t.prototype.handleClick=function(e){this.player()&&this.player().stop()},t.prototype.buildCSSClass=function(){return"emp-stop-control vjs-icon-square "+e.prototype.buildCSSClass.call(this)},t}(_t);Et.prototype.kind_="stop",Et.prototype.controlText_="stop",Tt.registerComponent("EmpStopButton",Et);var St=te.getComponent("PlayToggle"),bt=te.getComponent("Component"),Ct=function(e){function t(i,n,r){ne(this,t);var o=se(this,e.call(this,i,n,r));return o.el_.setAttribute("aria-label","Play Toggle"),i.on(le.TIMESHIFT_CHANGE,function(){return o.onTimeshift()}),i.on(le.PLAYING,function(){return o.onTimeshift()}),o}return oe(t,e),t.prototype.onTimeshift=function(){this.player()&&(this.player().timeShiftEnabled()?this.show():this.hide())},t.prototype.handleClick=function(t){e.prototype.handleClick.call(this,t)},t.prototype.buildCSSClass=function(){return""+e.prototype.buildCSSClass.call(this)},t}(St);Ct.prototype.kind_="playToggle",Ct.prototype.controlText_="playToggle",bt.registerComponent("EmpPlayToggle",Ct);var At=(te.getComponent("Component"),te.getComponent("Button")),It=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));return r.addClass("vjs-hidden"),i.ready(function(){r.initAirPlay()}),r}return oe(t,e),t.prototype.initAirPlay=function(){var e=this.player();if(window.WebKitPlaybackTargetAvailabilityEvent){e.el().getElementsByTagName("video")[0].addEventListener("webkitplaybacktargetavailabilitychanged",function(t){switch(t.availability){case"available":me("Airplay available"),e.on("loadeddata",function(){e.controlBar.childNameIndex_.hasOwnProperty("AirplayToggle")&&(this.entitlement&&this.entitlement.airplayBlocked?e.controlBar.airplayToggle.hide():e.controlBar.airplayToggle.show())});break;case"not-available":me("Airplay not-available")}})}},t.prototype.buildCSSClass=function(){return"vjs-airplay-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.entitlement&&this.entitlement.airplayBlocked?me("Airplay Blocked"):(this.player().el().getElementsByTagName("video")[0].webkitShowPlaybackTargetPicker(),this.player().trigger(le.AIRPLAY_START))},re(t,[{key:"entitlement",get:function(){return Le.getEntitlement(this.player())}}]),t}(At);It.prototype.controlText_="Airplay",te.registerComponent("AirplayToggle",It);var wt=te.getComponent("Button"),Pt=te.getComponent("Component"),xt=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));return r.controlText("Next program"),r.updateShowing(),r.on(r.player(),le.PLAYING,function(){return r.updateShowing()}),r.on(r.player(),le.DURATION_CHANGE,function(){return r.updateShowing()}),r.on(r.player(),le.PROGRAM_CHANGED,function(e,t){return r.updateShowing(t&&t.program)}),r}return oe(t,e),t.prototype.updateShowing=function(e){e=e||this.player().getProgramDetails(),!this.player().noEPG()&&this.entitlement&&e?(this.show(),this.enable()):this.hide(),e&&Date.now()<e.end.getTime()&&this.disable(),this.entitlement&&(this.entitlement.isDynamicCachupAsLive||this.entitlement.isStaticCachupAsLive)||this.hide()},t.prototype.buildCSSClass=function(){return"emp-next-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.player().ended()||this.player().playNextProgram()},re(t,[{key:"entitlement",get:function(){return Le.getEntitlement(this.player())}}]),t}(wt);xt.prototype.controlText_="Next",Pt.registerComponent("EmpNextButton",xt);var Dt=te.getComponent("Button"),Ot=te.getComponent("Component"),kt=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));return r.controlText("Previous Program"),r.updateShowing(),r.on(r.player(),le.PLAYING,function(){return r.updateShowing()}),r.on(r.player(),le.DURATION_CHANGE,function(){return r.updateShowing()}),r.on(r.player(),le.PROGRAM_CHANGED,function(){return r.updateShowing()}),r}return oe(t,e),t.prototype.updateShowing=function(){var e=this.player().getProgramDetails();!this.player().noEPG()&&this.entitlement&&e?this.show():this.hide(),this.entitlement&&(this.entitlement.isDynamicCachupAsLive||this.entitlement.isStaticCachupAsLive)||this.hide()},t.prototype.buildCSSClass=function(){return"emp-previous-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(){this.player().ended()||this.player().playPreviousProgram()},re(t,[{key:"entitlement",get:function(){return Le.getEntitlement(this.player())}}]),t}(Dt);kt.prototype.controlText_="Previous",Ot.registerComponent("EmpPreviousButton",kt);var Lt=te.getComponent("ControlBar"),Nt=te.getComponent("Component"),Rt=function(e){function t(){return ne(this,t),se(this,e.apply(this,arguments))}return oe(t,e),t}(Lt);Rt.prototype.options_={loadEvent:"play",children:{empPlayToggle:{},empReloadButton:{},empStopButton:{},empPreviousButton:{},empRewindButton:{},empForwardButton:{},empNextButton:{},volumePanel:{inline:!1},empTimeDisplay:{mode:"currentTime"},timeDivider:{},durationDisplay:{},empLiveDisplay:{},progressControl:{},empTimeDisplay2:{mode:"remainingTime"},customControlSpacer:{},empRestartButton:{},playbackRateMenuButton:{},chaptersButton:{},bitrateButton:{},audioTrackButton:{},subsCapsButton:{},airplayToggle:{},fullscreenToggle:{}}},Nt.registerComponent("ControlBar",Rt);var Mt=te.getComponent("Component"),Bt={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Ut=function(e){function t(i,n,r){ne(this,t);var o=se(this,e.call(this,i,n,r));return i.on("loadstart",ve(o,o.toggleDisplay)),i.on("texttrackchange",ve(o,o.updateDisplay)),i.on("loadstart",ve(o,o.preselectTrack)),i.ready(ve(o,function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)return void this.hide();if("EmpShaka"===i.techName_||"EmpHLS"===i.techName_||"EmpHLS-MSE"===i.techName_||"EmpCast"===i.techName_)return void this.hide();i.on("fullscreenchange",ve(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()})),o}return oe(t,e),t.prototype.preselectTrack=function(){for(var e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage,n=void 0,r=void 0,o=void 0,s=0;s<t.length;s++){var a=t[s];i&&i.enabled&&i.language===a.language?a.kind===i.kind?o=a:o||(o=a):i&&!i.enabled?(o=null,n=null,r=null):a.default&&("descriptions"!==a.kind||n?a.kind in e&&!r&&(r=a):n=a)}o?o.mode="showing":r?r.mode="showing":n&&(n.mode="showing")},t.prototype.toggleDisplay=function(){if("EmpShaka"===this.player_.techName_||"EmpHLS"===this.player_.techName_||"EmpHLS-MSE"===this.player_.techName_||"EmpCast"===this.player_.techName_)return void this.hide();this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof Q.WebVTT&&Q.WebVTT.processCues(Q,[],this.el_)},t.prototype.removeStyles=function(e){var t=Ce.getElementById(e);return t&&Ce.getElementsByTagName("head")[0].removeChild(t),t},t.prototype.writeStyles=function(e,t){var i=this.removeStyles(e);i=Ce.createElement("style"),i.type="text/css",i.id=e,i.innerHTML=t,Ce.getElementsByTagName("head")[0].appendChild(i)},t.prototype.getStyle=function(e){var t=void 0,i=void 0,n=void 0,r=void 0,o=void 0,s=void 0,a=void 0,l=void 0,c=void 0,u=void 0;return e.color&&(t="color: "+e.color),e.textOpacity&&(t="color: "+O(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(i="background-color: "+e.backgroundColor),e.backgroundOpacity&&(i="background-color: "+O(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(u=e.windowOpacity?"outline: "+O(e.windowColor,e.windowOpacity)+" solid 10px":"outline: "+e.windowColor+" solid 10px"),e.edgeStyle&&("dropshadow"===e.edgeStyle?n="text-shadow: 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, 0 0 2px black, black 0.1em 0.1em 0.2em":"raised"===e.edgeStyle?n="text-shadow: 1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===e.edgeStyle?n="text-shadow: 1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===e.edgeStyle&&(n="text-shadow: 0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),e.fontPercent&&1!==e.fontPercent&&(r="font-size: "+e.fontPercent+"em",o="height: auto",s="top: auto",a="bottom: 2px"),e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?l="font-variant: small-caps":c="font-family: "+Bt[e.fontFamily]),(t?t+"; ":"")+(i?i+"; ":"")+(n?n+"; ":"")+(r?r+"; ":"")+(o?o+"; ":"")+(s?s+"; ":"")+(a?a+"; ":"")+(l?l+"; ":"")+(c?c+"; ":"")+(u?u+"; ":"")},t.prototype.getSafariStyle=function(e){var t=void 0;return e.backgroundColor&&(t="background-color: "+e.backgroundColor),e.backgroundOpacity&&(t="background-color: "+O(e.backgroundColor||"#000",e.backgroundOpacity)),t?"video::-webkit-media-text-track-display-backdrop {"+t+" !important;overflow: visible !important;}":""},t.prototype.updateDisplay=function(){if(this.player_.textTrackSettings){var e=void 0;e=this.player_.options_.textTrackStyle?this.player_.options_.textTrackStyle:this.player_.textTrackSettings.getValues();if("EmpShaka"===this.player_.techName_||"EmpHLS"===this.player_.techName_||"EmpHLS-MSE"===this.player_.techName_||"EmpCast"===this.player_.techName_){var t=this.getStyle(e);return"EmpHLS"===this.player_.techName_?this.writeStyles("styles_cue","video::cue {"+t+"}\n"+this.getSafariStyle(e)):this.writeStyles("styles_cue","video::cue {"+t+"}"),void this.clearDisplay()}this.removeStyles("styles_cue")}else this.writeStyles("style_no_texttrack_settings",".vjs-texttrack-settings {display: none;}");return},t.prototype.updateForTrack=function(e){return},t}(Mt);Mt.registerComponent("TextTrackDisplay",Ut);var Ht=te.getComponent("Component"),Gt=te.getComponent("ModalDialog"),Ft=["#000","Black"],jt=["#00F","Blue"],Vt=["#0FF","Cyan"],Wt=["#0F0","Green"],qt=["#F0F","Magenta"],Kt=["#F00","Red"],Yt=["#FFF","White"],zt=["#FF0","Yellow"],Xt=["1","Opaque"],$t=["0.5","Semi-Transparent"],Jt=["0","Transparent"],Zt={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ft,Yt,Kt,Wt,jt,zt,qt,Vt]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Jt,$t,Xt]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Yt,Ft,Kt,Wt,jt,zt,qt,Vt]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]],default:4},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.25","25%"],["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["2.50","250%"]],default:3,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Xt,$t]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Jt,$t,Xt]}};Zt.windowColor.options=Zt.backgroundColor.options;var Qt=function(e){function t(i,r){ne(this,t),r.temporary=!1;var o=se(this,e.call(this,i,r));return o.updateDisplay=ve(o,o.updateDisplay),o.fill(),o.hasBeenOpened_=o.hasBeenFilled_=!0,o.endDialog=y("p",{className:"vjs-control-text",textContent:o.localize("End of dialog window.")}),o.el().appendChild(o.endDialog),o.setDefaults(),void 0===r.persistTextTrackSettings&&(o.options_.persistTextTrackSettings=o.options_.playerOptions.persistTextTrackSettings),o.on(o.$(".vjs-done-button"),"click",function(){o.saveSettings(),o.close()}),o.on(o.$(".vjs-default-button"),"click",function(){o.setDefaults(),o.updateDisplay()}),n(Zt,function(e){o.on(o.$(e.selector),"change",o.updateDisplay)}),o.options_.persistTextTrackSettings&&o.restoreSettings(),o}return oe(t,e),t.prototype.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},t.prototype.createElSelect_=function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",r=Zt[e],o=r.id.replace("%s",this.id_);return["<"+n+' id="'+o+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+(""!==i?i+" ":"")+o+'">'].concat(r.options.map(function(e){var n=o+"-"+e[1];return['<option id="'+n+'" value="'+e[0]+'" ','aria-labelledby="'+(""!==i?i+" ":"")+o+" "+n+'">',t.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},t.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.prototype.createElColors_=function(){return y("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.prototype.createElFont_=function(){return y("div",{className:'vjs-track-settings-font">',innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return y("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.prototype.label=function(){return this.localize("Caption Settings Dialog")},t.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.prototype.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.prototype.getValues=function(){var e=this;return r(Zt,function(t,i,n){var r=L(e.$(i.selector),i.parser);return void 0!==r&&(t[n]=r),t},{})},t.prototype.setValues=function(e){var t=this;n(Zt,function(i,n){N(t.$(i.selector),e[n],i.parser)})},t.prototype.setDefaults=function(){var e=this;n(Zt,function(t){var i=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=i})},t.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(Q.localStorage.getItem("vjs-text-track-settings"))}catch(e){me.warn(e)}e&&this.setValues(e)},t.prototype.saveSettings=function(){var e=this.getValues();if(this.player_.options_.textTrackStyle=void 0,"EmpCast"===this.player_.techName_&&this.player_.techCall_("sendTextTrackStyle",e),this.options_.persistTextTrackSettings)try{Object.keys(e).length?Q.localStorage.setItem("vjs-text-track-settings",JSON.stringify(e)):Q.localStorage.removeItem("vjs-text-track-settings")}catch(e){me.warn(e)}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(Ce,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()},t}(Gt);Ht.registerComponent("TextTrackSettings",Qt);var ei=te.getComponent("Component"),ti=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));return r.assetMetadata=null,r.on(r.player(),le.ENDED,function(){r.hide(),r.clearEl(),r.assetMetadata=null}),r.on(r.player(),le.ABORT,function(){r.hide(),r.clearEl(),r.assetMetadata=null}),r.on(r.player(),le.CHROMECAST_CASTING,function(){r.hide(),r.clearEl(),r.assetMetadata=null}),r.on(r.player(),le.PLAYING,function(){if(r.show(),!r.assetMetadata){var e=r.player().options();e.mediaInfo&&r.updateMediaInformation_({title:e.mediaInfo.title,subtitle:e.mediaInfo.subtitle,images:e.mediaInfo.artworkUrl?[{url:e.mediaInfo.artworkUrl}]:[],channelInfo:{images:e.mediaInfo.logoUrl?[{url:e.mediaInfo.logoUrl}]:[]}})}}),r.on(r.player(),le.PROGRAM_CHANGED,function(e,t){(t&&t.program?t.program.programId:null)?(r.assetMetadata=r.player().programService().extractAssetMetadata(t.program.asset),r.assetMetadata.channelInfo=t.program.channelInfo,r.updateMediaInformation_(r.assetMetadata)):(r.hide(),r.clearEl(),r.assetMetadata=null)}),r.on(r.player(),le.ASSET_CHANGED,function(e,t){t&&t.asset?(r.assetMetadata=r.player().programService().extractAssetMetadata(t.asset),r.updateMediaInformation_(r.assetMetadata)):(r.hide(),r.clearEl(),r.assetMetadata=null)}),r.on(r.player(),le.DISPOSE,function(){r.hide(),r.clearEl()}),r.fillEl(),r}return oe(t,e),t.prototype.buildCSSClass=function(){return"emp-mediainfo-bar "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"emp-mediainfo-bar"})},t.prototype.imageSelector=function(e,t){var i=void 0;e.length>0&&(i=e[0]);for(var n=0;n<e.length;n++)if(e[n].url&&e[n].type===t)return e[n];return i},t.prototype.updateMediaInformation_=function(e){if(this.el_){this.show();if(this.player().options().mediaInfo){this.fillEl();var t=this.el_.getElementsByClassName("emp-media-artwork"),i=this.el_.getElementsByClassName("emp-media-logo"),n=this.el_.getElementsByClassName("emp-media-title"),r=this.el_.getElementsByClassName("emp-media-subtitle"),o=t.length?t[0]:null,s=i.length?i[0]:null,a=n.length?n[0]:null,l=r.length?r[0]:null;if(a&&(a.innerHTML=e.title||""),l&&(l.innerHTML=e.subtitle||""),o&&e.images&&e.images.length>0){var c=this.imageSelector(e.images,"chromecast");o.style.backgroundImage='url("'+c.url+'")',o.style.display="block"}else o&&(o.style.display="none",o.style.backgroundImage="none");if(s&&e.channelInfo){var u=this.imageSelector(e.channelInfo.images,"thumbnail");u&&u.url?(s.style.backgroundImage='url("'+u.url+'")',s.style.display="block"):(s.style.display="none",s.style.backgroundImage="none")}this.player().userActive(!0)}}},t.prototype.clearEl=function(){this.el_&&(this.el_.innerHTML="")},t.prototype.fillEl=function(){var e=this.player().options();if(e.mediaInfo){var t="";e.mediaInfo.artworkEnable&&(t+='<div class="emp-media-artwork"></div>'),(e.mediaInfo.titleEnable||e.mediaInfo.subtitleEnable)&&(t+='<div class="emp-media-text">'),e.mediaInfo.titleEnable&&(t+='<div class="emp-media-title"></div>'),e.mediaInfo.subtitleEnable&&(t+='<div class="emp-media-subtitle"></div>'),(e.mediaInfo.titleEnable||e.mediaInfo.subtitleEnable)&&(t+="</div>"),e.mediaInfo.logoEnable&&(t+='<div class="emp-media-logo"></div>'),this.el_.innerHTML=t}else this.el_.innerHTML=""},t}(ei);ti.prototype.controlText_="MediaInfo",ei.registerComponent("EmpMediaInfoBar",ti),R.prototype.code=0,R.prototype.message="",R.prototype.status=null,R.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],R.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ii=0;ii<R.errorTypes.length;ii++)R[R.errorTypes[ii]]=ii,R.prototype[R.errorTypes[ii]]=ii;var ni=te.getComponent("Player"),ri=te.getComponent("Tech"),oi=te.getComponent("CaptionSettingsMenuItem");Q.vttjs&&Q.vttjs.restore();var si=function(e){function t(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};ne(this,t),n.absoluteStartTime&&(n.startTime=0),n=o({
children:["mediaLoader","PosterImage","textTrackDisplay","loadingSpinner","empMediaInfoBar","controlBar","errorDisplay","textTrackSettings","BigPlayButton"]},n),("auto"===n.techOrder||Array.isArray(n.techOrder)&&1===n.techOrder.length&&"auto"===n.techOrder[0])&&(n.techOrder=t.AutoTechArray());var s=t.getTagSettings(i);n=te.mergeOptions({"entitlement-engine":"EricssonExposure",techOrder:s.techOrder?s.techOrder:t.AutoTechArray(),maxBitrate:s.maxBitrate?s.maxBitrate:0,timeShiftDisabled:!!s.timeShiftDisabled&&s.timeShiftDisabled,useLastViewedOffset:!!s.useLastViewedOffset&&s.useLastViewedOffset,startTime:s.startTime?s.startTime:0,absoluteStartTime:s.absoluteStartTime?s.absoluteStartTime:void 0,persistTextTrackSettings:s.persistTextTrackSettings?s.persistTextTrackSettings:!Qe,textTrackSettings:s.textTrackSettings?s.textTrackSettings:!Qe},n);var a=se(this,e.call(this,i,n,r));return a.monkeyPatchingTextMenu_(),Q.empPlayer&&me.islogToBrowserConsole&&Q.empPlayer.setInstance(a),a.previousAbsoluteStartTime_=void 0,a.castPlugin&&a.castPlugin(),a.on(le.ENDED,function(){me("ENDED"),a.ended_=!0,a.sourceChanging_=!1,a.stopProgramService(),a.entitlementExpirationService&&a.entitlementExpirationService().stop(),"EmpCast"!==a.techName_&&a.loadNextSource(),a.yospace&&a.yospace().stop()}),a.on(le.DISPOSE,function(){a.loadNextSrc_=null,a.loadingSrc_&&(clearInterval(a.loadingSrc_),a.loadingSrc_=null),a.sourceChanging_=!1,a.clearResetAndReloadTimer_(),a.stopProgramService(),a.entitlementExpirationService&&a.entitlementExpirationService().stop(),a.yospace&&a.yospace().dispose()}),a.on(le.ERROR,function(){a.loadNextSrc_=null,a.loadingSrc_&&(clearInterval(a.loadingSrc_),a.loadingSrc_=null),a.sourceChanging_=!1,a.clearResetAndReloadTimer_(),a.stopProgramService(),a.entitlementExpirationService&&a.entitlementExpirationService().stop(),a.yospace&&a.yospace().stop()}),a.on(le.CAN_PLAY,function(){a.disableTimeShift(a.options_.timeShiftDisabled)}),a.on(le.LOADED_DATA,function(){if(a.addClass("vjs-has-started"),a.ended_=!1,a.programService){var e=a.programService().entitlement();e&&(e.streamInfo.referenceTime=a.startTimeLive())}}),a.on(le.REPLAY,function(){a.cache_&&a.cache_.source&&a.cache_.source.yospaceUrl?a.src({src:a.cache_.source.yospaceUrl,type:"application/yospace"}):a.cache_&&a.cache_.source&&a.src(a.cache_.source)}),a.on(le.FIRST_PLAY,function(){me("FIRST_PLAY"),a.options_.startTime&&"Html5"===a.techName_&&a.currentTime(a.options_.startTime),a.options_.startTime=0}),a.initialSeekToAbsoluteStartTimeBind=a.initialSeekToAbsoluteStartTime_.bind(a),a.isCreated=!0,a.trigger(le.PLAYER_CREATED),a.ended_=!1,a.sourceChanging_=!1,a}return oe(t,e),t.prototype.monkeyPatchingTextMenu_=function(){if(this.controlBar&&this.controlBar.subsCapsButton){var e=this.controlBar.subsCapsButton.createItems,t=this;this.controlBar.subsCapsButton.createItems=function(){var i=e.apply(this,arguments);return i&&"CaptionSettingsMenuItem"!==i[0].name()&&"EmpHLS"===t.techName_&&t.options_.textTrackSettings&&(i.unshift(new oi(this.player_,{kind:this.label_})),this.hideThreshold_+=1),i}}return null},t.prototype.options=function(e){return e?(("auto"===e.techOrder||Array.isArray(e.techOrder)&&1===e.techOrder.length&&"auto"===e.techOrder[0])&&(e.techOrder=t.AutoTechArray()),void 0!==e.startTime&&(e.startTime=parseFloat(e.startTime)||0),void 0!==e.absoluteStartTime&&(e.startTime=0),this.options_=te.mergeOptions(this.options_,e),this.options_):this.options_},t.prototype.getTechOptions_=function(){return{autoplay:this.options_.autoplay,muted:this.options_.muted,language:this.options_.language,maxBitrate:this.options_.maxBitrate,timeShiftDisabled:this.options_.timeShiftDisabled,useLastViewedOffset:this.options_.useLastViewedOffset,startTime:this.options_.startTime,absoluteStartTime:this.options_.absoluteStartTime,audioLanguage:this.options_.audioLanguage,subtitleLanguage:this.options_.subtitleLanguage,liveDelay:this.options_.liveDelay}},t.prototype.loadTech_=function(t,i){var n=this;e.prototype.loadTech_.call(this,t,i),this.on(this.tech_,le.RECOVERABLE_ASSET_ERROR,this.handleRecoverableError),this.on(this.tech_,le.ERROR,function(e,t){n.player_.error(t)}),this.on(this.tech_,le.TRACK_CHANGE,function(){me("TRACK_CHANGE"),n.player_.trigger(le.TRACK_CHANGE)}),this.on(this.tech_,le.DURATION_CHANGE,function(){n.player_.trigger(le.DURATION_CHANGE)})},t.prototype.loadNextSource=function(){return this.sourceChanging_?void me("loadNextSource ignore sourceChanging"):(this.sourceChanging_=!0,this.tech_&&void 0!==this.tech_.loadNextSource?(this.techCall_("loadNextSource"),!0):this.cache_.sources&&this.cache_.sources.length>1?(this.cache_.sources.shift(),this.src(this.cache_.sources),!0):(this.sourceChanging_=!1,!1))},t.prototype.setTextTrackStyle=function(e){"EmpCast"===this.techName_?this.techCall_("sendTextTrackStyle",e):(this.options_.textTrackStyle=e,this.trigger("texttrackchange"))},t.prototype.lineUpAsset=function(e,t,i,n){var r={assetId:e,programId:i,channelId:t};n&&this.options({playFrom:"beginning",absoluteStartTime:n}),this.lineupSource({type:"video/emp",src:JSON.stringify(r)})},t.prototype.lineupSource=function(e){if(this.tech_&&void 0!==this.tech_.lineupSource)return void this.techCall_("lineupSource",e);this.cache_.sources.push(e)},t.prototype.unloadTech_=function(){e.prototype.unloadTech_.call(this)},t.prototype.stop=function(e){this.analytics&&this.analytics().stop(),this.yospace&&this.yospace().stop(),Le.stop(this,e)},t.prototype.getAvalibleTechs_=function(e){return this.options_.techOrder.map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).map(function(e){return[e,ri.getTech(e)]}).filter(function(t){var i=t[0],n=t[1];if(n&&"Html5"!==i&&"EmpCast"!==i&&-1===e.indexOf(i))return n.isSupported()})},t.prototype.selectSource=function(t){var i=this,n=this.options_.techOrder;if(this.options_.excludeTechs&&this.options_.excludeTechs.length>0){var r=this.options_.techOrder.filter(function(e){if(-1===i.options_.excludeTechs.indexOf(e))return!0});this.options_.techOrder=r}var o=e.prototype.selectSource.call(this,t);return this.options_.techOrder=n,o},t.prototype.handleRecoverableError=function(t,i){var n=[];this.options_.excludeTechs||(n=this.options_.excludeTechs.slice(0)),n.push(i.techName);var r=this.getAvalibleTechs_(n);if(i.source&&!i.source.licenseServer&&(!i.source.licenseServers||a(i.source.licenseServers))&&!i.source.protection&&!We&&r.length>0&&(6001!==i.error.code&&(me.error("handleRecoverableError",i.techName,i.message),this.analytics&&this.analytics().onError({code:i.error.code,message:i.message,stack:i.error.stack})),this.options_.excludeTechs||(this.options_.excludeTechs=[]),this.options_.excludeTechs.push(i.techName),this.options_.techOrder.length>this.options_.excludeTechs.length)){if(this.error(null),this.resetWithoutReload_(),this.options_.autoplay=this.options_.autoplay,this.hasStarted()&&(this.options_.autoplay=!0),this.options_.absoluteStartTime=this.previousAbsoluteStartTime_,i.source.channelId){var o={channelId:i.source.channelId,programId:i.source.programId};return void e.prototype.src.call(this,{type:"video/emp",src:JSON.stringify(o)})}if(i.source.assetId){var s={assetId:i.source.assetId};return void e.prototype.src.call(this,{type:"video/emp",src:JSON.stringify(s)})}}i.error.code&&i.error.message?this.error(i.error):(i.message=i.message||this.localize("Tech error, can't recover"),this.error(new pe(i.message,i.error.code))),this.resetWithoutReload_()},t.prototype.resetWithoutReload_=function(){this.tech_&&(this.techCall_("reset"),this.unloadTech_())},t.prototype.resetAndRestartFormPlayhead=function(){var e=this.getProgramDetails();e&&Le.currentAsset(this,null,e.programId,e.channelId);var t=this.getAbsoluteTime();me("resetAndRestartFormPlayhead",t),this.reset(),this.startResetAndReloadTimer_(),this.restart(null,t)},t.prototype.bitrates=function(){return Le.bitrates(this)},t.prototype.bitrate=function(e){return Le.bitrate(this,e)},t.prototype.getBitrate=function(){return Le.getBitrate(this)},t.prototype.selectAudioTrack=function(e,t){for(var i=this.audioTracks(),n=i.length;n--;){var r=i[n];if(r.language===e&&!r.enabled)return void(t&&r.kind!==t||(r.enabled=!0))}},t.prototype.getSelectedAudioTrack=function(){return Le.getSelectedAudioTrack(this)},t.prototype.getAudioTracksLanguages=function(){for(var e=[],t=this.audioTracks(),i=0;i<t.length;i++)e.push(t[i].language);return e},t.prototype.selectTextTrack=function(e,t){e=e&&"None"!==e?e:null;for(var i=this.textTracks(),n=i.length;n--;){var r=i[n];r.language===e?t&&r.kind!==t||(r.mode="showing"):"disabled"!==r.mode&&(r.mode="disabled")}},t.prototype.getSelectedTextTrack=function(){return Le.getSelectedTextTrack(this)},t.prototype.textTrackVisible=function(e){for(var t=this.textTracks(),i=t.length;i--;){var n=t[i];if(e){if("hidden"===n.mode)return void(n.mode="showing")}else"showing"===n.mode?n.mode="hidden":"disabled"!==n.mode&&(n.mode="disabled")}},t.prototype.isTextTrackVisible=function(){for(var e=this.textTracks(),t=e.length;t--;){if("showing"===e[t].mode)return!0}return!1},t.prototype.getTextTracksLanguages=function(){for(var e=[],t=this.textTracks(),i=0;i<t.length;i++)e.push(t[i].language);return e},t.prototype.canSeekTo=function(e){return Le.canSeekTo(this,e)},t.prototype.getRestrictions=function(){var e={},t=Le.getEntitlement(this);return t&&(e={minBitrate:t.minBitrate,maxBitrate:t.maxBitrate,maxResWidth:t.maxResWidth,maxResHeight:t.maxResHeight,rwEnabled:t.rwEnabled,ffEnabled:t.ffEnabled}),e},t.prototype.isPlaying=function(){return this.hasStarted()},t.prototype.isLive=function(){return Le.isLive(this)},t.prototype.techVersion=function(){return Le.techVersion(this)},t.prototype.baseCurrentTime=function(){return Le.baseCurrentTime(this)},t.prototype.baseDuration=function(t){if(void 0===t)return Le.baseDuration(this);e.prototype.duration.call(this,t)},t.prototype.src=function(t){var i=this;if(void 0===t)return this.cache_.src||"";if(!this.isCreated)return void this.one(le.PLAYER_CREATED,function(){i.src(t)});var n=u(t);if(!n.length)return void this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);if(n[0].type||(n[0].type="video/emp"),"video/emp"===n[0].type){if(this.loadingSrc_)return me("load src blocked",t),void(this.loadNextSrc_=t);this.loadingSrc_=setTimeout(function(){i.loadingSrc_=null,i.loadNextSrc_&&i.src(i.loadNextSrc_)},3e3)}return this.loadNextSrc_=null,me("load src OK"),this.yospace&&this.yospace().stop(),this.options_.excludeTechs=[],this.tech_||this.reset(),this.cache_.currentTime=0,this.error(null),"video/emp"!==n[0].type&&this.stopProgramService(),this.isPlaying()&&(this.sourceChanging_=!0),Le.casting(this,n)?void 0:(n[0].options&&this.options(n[0].options),"video/emp"!==n[0].type&&(n[0].options=this.getTechOptions_()),this.off(le.LOADED_DATA,this.initialSeekToAbsoluteStartTimeBind),this.one(le.LOADED_DATA,this.initialSeekToAbsoluteStartTimeBind),"application/yospace"===n[0].type&&this.yospace?void this.yospace().start("VoD",n[0].src).then(function(t){me("yospace mediaLocator returned",t),i.options_.excludeTechs.push("EmpShaka"),n[0]={src:t,type:"application/x-mpegURL",yospaceUrl:n[0].src},e.prototype.src.call(i,n)}).catch(function(e){i.error(e)}):e.prototype.src.call(this,n))},t.prototype.reset=function(){this.clearResetAndReloadTimer_(),this.hasStarted(!1),e.prototype.reset.call(this)},t.prototype.clearResetAndReloadTimer_=function(){this.resetAndReloadTimer_&&(me("clearResetAndReloadTimer"),clearInterval(this.resetAndReloadTimer_),this.resetAndReloadTimer_=null)},t.prototype.startResetAndReloadTimer_=function(){var e=this;if(!(We&&this.hasStarted()||(this.clearResetAndReloadTimer_(),me("startResetAndReloadTimer"),!1===this.options_.resetAndReloadLive))){var t=120;t=this.options_.resetAndReloadLive?this.options_.resetAndReloadLive>1?this.options_.resetAndReloadLive:1:We?120:360,this.resetAndReloadTimer_=this.setTimeout(function(){e.clearResetAndReloadTimer_(),e.isLive()&&"EmpShaka"===e.techName_&&e.resetAndRestartFormPlayhead()},1e3*t*60)}},t.prototype.initialSeekToAbsoluteStartTime_=function(){var e=Le.getEntitlement(this);this.options_.absoluteStartTime&&this.timeShiftEnabled()?(this.setAbsoluteTime(new Date(this.options_.absoluteStartTime)),this.previousAbsoluteStartTime_=this.options_.absoluteStartTime,this.options_.absoluteStartTime=void 0):this.options_.useLastViewedOffset&&e&&!this.isLive()&&"EmpShaka"===this.techName_&&e.lastViewedOffset&&this.currentTime(e.lastViewedOffset/1e3)},t.prototype.setMaxBitrate=function(e){this.options_.maxBitrate=e,this.tech_&&void 0!==this.tech_.setMaxBitrate&&this.techCall_("setMaxBitrate",e)},t.prototype.getMaxBitrate=function(){return this.tech_&&void 0!==this.tech_.getMaxBitrate?this.techGet_("getMaxBitrate"):0},t.prototype.disableTimeShift=function(e){if(!this.tech_||void 0===this.tech_.disableTimeShift)return!1;if(void 0!==e){if(!1===e&&!this.canEnableTimeshift())return!Le.timeShiftEnabled(this);this.techCall_("disableTimeShift",e);var t=Le.timeShiftEnabled(this);return this.options_.timeShiftDisabled=void 0===t?e:!t,this.trigger(le.TIMESHIFT_CHANGE,{timeShiftDisabled:this.options_.timeShiftDisabled}),this.options_.timeShiftDisabled}return!Le.timeShiftEnabled(this)},t.prototype.canEnableTimeshift=function(){var e=Le.getEntitlement(this);return!e||!1!==e.timeshiftEnabled},t.prototype.timeShiftEnabled=function(e){if(void 0===e)return Le.timeShiftEnabled(this);this.disableTimeShift(!e)},t.prototype.noEPG=function(){if(!this.getProgramDetails()){var e=Le.getEntitlement(this);return!e||e&&(e.isDynamicCachupAsLive||e.isStaticCachupAsLive)}return!1},t.prototype.canRestart=function(){return!Le.getEntitlement(this)||!this.noEPG()&&Le.canRestart(this)},t.prototype.restart=function(e,t){Le.restart(this,e,t)},t.prototype.error=function(t){return void 0===t?this.error_||null:null===t?void e.prototype.error.call(this,t):this.error_&&t&&4===t.code?this.error_:(t&&l(t)?t=new pe(t):t&&!t.code&&(t.code=ue.UNKNOWN),t&&this.cache_.sources&&this.cache_.sources.length>1?(me.error(t),this.loadNextSource(),t):this.videojsError_(t))},t.prototype.videojsError_=function(e){if(void 0===e)return this.error_||null;if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new R(e),this.addClass("vjs-error");var t="";R.errorTypes.hasOwnProperty(this.error_.code)&&(t=R.errorTypes[this.error_.code]),me.error("(CODE:"+this.error_.code+" "+t+")",this.error_.message,this.error_),this.trigger("error")},t.prototype.getError=function(){return this.error_},t.prototype.setAbsoluteTime=function(e){Le.setAbsoluteTime(this,e)},t.prototype.getAbsoluteTime=function(){return Le.getAbsoluteTime(this)},t.prototype.playheadTime=function(e){if(void 0===e)return Le.getPlayheadTime(this);Le.setPlayheadTime(this,e)},t.prototype.setAnalyticsCustomAttribute=function(e,t){this.options_.analytics||(this.options_.analytics={}),this.options_.analytics.customAttributes||(this.options_.analytics.customAttributes=[]),this.options_.analytics.customAttributes.push({key:e,value:t})},t.prototype.loadAsset=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};me.warn("loadAsset() has been deprecated with new USP a/v pipe use startPlayback() or src() instead"),this.options({playFrom:void 0}),Le.loadAsset(this,e,t,null,i)},t.prototype.startPlayback=function(e,t,i,n){if(n||(n={}),!e&&!t&&!i)return void me.error("assetId or channelId or programId is undefined");n.playFrom||(n.playFrom="defaultBehaviour");var r={playFrom:n.playFrom};void 0!==n.autoplay&&(r.autoplay=n.autoplay),n.startTime&&"startTime"===n.playFrom?(r.absoluteStartTime=n.startTime,this.options_.useLastViewedOffset=!1):r.absoluteStartTime=void 0,void 0!==n.startOffset?r.startTime=n.startOffset/1e3:r.startTime=0,r.useLastViewedOffset="bookmark"===n.playFrom||!0===this.options_.useLastViewedOffset,this.options(r),Le.loadAsset(this,e,i,t)},t.prototype.playEntitlement=function(t){t&&s(t)?(t.type="video/emp",e.prototype.src.call(this,t)):me.error("Call playEntitlement without entitlement")},t.prototype.timeBehindLive=function(){return Le.timeBehindLive(this)},t.prototype.liveDelay=function(){return Le.liveDelay(this)},t.prototype.startTimeLive=function(){return Le.startTimeLive(this)},t.prototype.getCurrentTechName=function(){return this.techName_},t.prototype.getExposure=function(){return this.programService?this.programService().exposure:null},t.prototype.syncServerTime=function(e){if(this.programService&&(exposure=this.programService().exposure,exposure))return void exposure.syncServerTime(e);var t="No programService or No exposure";me.error(t),e&&e(0,t)},t.prototype.stopProgramService=function(){this.programService&&this.programService().reset()},t.prototype.startProgramService=function(){this.programService&&this.programService().start()},t.prototype.supportsEpgProgramChange=function(){return void 0!==this.programService},t.prototype.getServerTime=function(){return Le.getServerTime(this)},t.prototype.getProgram=function(e){if(this.programService){var t=this.getProgramDetails();e(t,t?null:"No EPG for program")}},t.prototype.getProgramDetails=function(){return Le.supportsEpgProgramChange(this)?Le.program(this):this.programService?this.programService().currentProgram:void 0},t.prototype.getAssetDetails=function(){return this.tech_&&this.tech_.VOD?this.techGet_("VOD"):this.programService?this.programService().currentVOD:void 0},t.prototype.getSeekTimerange=function(){return Le.getSeekTimerange(this)},t.prototype.getBufferedTimerange=function(){return Le.getBufferedTimerange(this)},t.prototype.currentTime=function(e){var t=Le.getEntitlement(this);if(t&&(t.isDynamicCachupAsLive||t.isStaticCachupAsLive)&&"EmpCast"!==this.techName_){if(void 0!==e){var i=this.getProgramDetails();if(i){e<1&&e>-1&&(e=1);var n=new Date(i.startTime);if(t.isStaticCachupAsLive||"EmpHLS"===this.techName_||"EmpHLS-MSE"===this.techName_){var r=t.streamInfo;if((e+=(n.getTime()-r.start.getTime())/1e3)<=0)return e=0,void Le.playPreviousProgram(this,!0)}else if(1e3*(e+=n.getTime()/1e3)<=t.streamInfo.start.getTime())return e=t.streamInfo.start.getTime()/1e3+1,void Le.playPreviousProgram(this,!0)}return e<0&&(e=0),void this.techCall_("setCurrentTime",e)}var o=this.techGet_("currentTime")||0,s=this.getProgramDetails();if(s&&o>1){var a=new Date(s.startTime);if(t.isStaticCachupAsLive||"EmpHLS"===this.techName_||"EmpHLS-MSE"===this.techName_){var l=t.streamInfo;o-=(a.getTime()-l.start.getTime())/1e3}else o-=a.getTime()/1e3}else s||this.duration(1/0);return this.cache_.currentTime=o,this.cache_.currentTime}return void 0!==e?(t&&(t.isDynamicCachupAsLive||t.isStaticCachupAsLive)&&"EmpCast"===this.techName_||(e=e<0?0:e),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},t.prototype.duration=function(t){var i=Le.getEntitlement(this);if(i&&(i.isDynamicCachupAsLive||i.isStaticCachupAsLive)&&"EmpCast"!==this.techName_){if(void 0!==t){var n=this.getProgramDetails();if(n&&t!==1/0){var r=new Date(n.startTime);if(i.isStaticCachupAsLive||"EmpHLS"===this.techName_||"EmpHLS-MSE"===this.techName_){var o=i.streamInfo;t-=(r.getTime()-o.start.getTime())/1e3}else t-=r.getTime()/1e3}return this.noEPG()&&(t=1/0,this.addClass("vjs-live")),void e.prototype.duration.call(this,t)}var s=this.techGet_("duration"),a=this.getProgramDetails();return a&&s!==1/0&&(s=a.duration/1e3),this.noEPG()&&(s=1/0,this.addClass("vjs-live")),this.cache_.duration=s,s}return e.prototype.duration.call(this,t),this.techGet_("duration")},t.prototype.seekable=function(){var t=e.prototype.seekable.call(this);return"EmpCast"!==this.techName_?this.getRange_(t):t},t.prototype.buffered=function(){var t=e.prototype.buffered.call(this);return"EmpCast"!==this.techName_?this.getRange_(t):t},t.prototype.getRange_=function(e){var t=Le.getEntitlement(this);if(this.seeking()||!e)return w(0,0);if(e.length>0&&t&&(t.isDynamicCachupAsLive||t.isStaticCachupAsLive)){var i=this.getProgramDetails();if(i){var n=new Date(i.startTime),r=t.streamInfo,o=e.start(e.length-1),s=e.end(e.length-1);if(s)if(t.isStaticCachupAsLive||"EmpHLS"===this.techName_||"EmpHLS-MSE"===this.techName_)o-=(n.getTime()-r.start.getTime())/1e3,s-=(n.getTime()-r.start.getTime())/1e3,e=w(o>0?o:0,s>this.duration()?this.duration():s);else if(t.isDynamicCachupAsLive){o-=n.getTime()/1e3,s-=n.getTime()/1e3;var a=this.getGrowingLiveDuration();e=w(o>0?o:0,s>a?a:s)}}}return e},t.prototype.getGrowingLiveDuration=function(){var e=Le.getEntitlement(this),t=this.duration(),i=this.getProgramDetails();if(i&&t!==1/0&&e&&e.isDynamicCachupAsLive){if(this.getServerTime()<new Date(i.endTime).getTime()){if((t=this.techGet_("duration"))!==1/0){var n=e.streamInfo;t="EmpHLS"===this.techName_||"EmpHLS-MSE"===this.techName_?(n.start.getTime()+1e3*t-i.start.getTime())/1e3:(1e3*t-i.start.getTime())/1e3}}else t=i.duration/1e3}return t},t.prototype.remainingTime=function(){var e=Le.getEntitlement(this),t=0;if(e&&(e.isDynamicCachupAsLive||e.isStaticCachupAsLive)&&"EmpCast"!==this.techName_){var i=this.duration();if(i===1/0||0===i)return 1/0;t=i-this.currentTime()}else t=Le.remainingTime(this);return t<0&&(t=0),Math.round(t)},t.prototype.gotoLive=function(){Le.gotoLive(this)},t.prototype.playPreviousProgram=function(e){var t=this;if(this.sourceChanging_)return void me("playPreviousProgram ignore sourceChanging");if(this.tech_.playPreviousProgram)this.techCall_("playPreviousProgram",e);else{var i=Le.getEntitlement(this);this.programService&&(i.isStaticCachupAsLive||i.isDynamicCachupAsLive)&&i.rwEnabled?this.programService().getPreviousProgram(function(i,n){if(n)me.error("playPreviousProgram",n);else{new Date(i.startTime);e?t.playheadTime(i.end.getTime()-3e4):t.playheadTime(i.start.getTime()+1e3)}}):Le.playPreviousProgram(this)}},t.prototype.playNextProgram=function(){if(this.sourceChanging_)return void me("playNextProgram ignore sourceChanging");if(this.tech_.playNextProgram)this.techCall_("playNextProgram");else{var e=Le.getEntitlement(this),t=this.getProgramDetails();t&&(e.isStaticCachupAsLive||e.isDynamicCachupAsLive)&&e.ffEnabled?this.playheadTime(t.end.getTime()+1e3):Le.playNextProgram(this)}},t.prototype.isProgramLive=function(){var e=this.getProgramDetails();return e?e.end.getTime()>this.getServerTime():this.isLive()},t.prototype.isProgramCatchup=function(){var e=Le.getEntitlement(this);return e?e.isStaticCachupAsLive||!this.isProgramLive()&&e.isDynamicCachupAsLive:!this.isLive()},t.prototype.currentAsset=function(){return Le.currentAsset(this)},t.prototype.ended=function(){return this.ended_},t.prototype.handleTechWaiting_=function(){var e=this;!this.hasStarted()||this.ended()||this.paused()||this.hasClass("vjs-waiting")||this.playheadMoving_(function(t){t||(e.addClass("vjs-waiting"),e.trigger("waiting"),e.removeWaitingClass_())})},t.prototype.removeWaitingClass_=function(){var e=this;this.one("timeupdate",function(){e.playheadTime()-e.prePlayheadTime_>1||e.playheadTime()-e.prePlayheadTime_<-1?(e.prePlayheadTime_=0,e.removeClass("vjs-waiting"),e.paused()?e.trigger(le.PAUSE):e.trigger(le.PLAYING)):e.removeWaitingClass_()})},t.prototype.playheadMoving_=function(e){this.playheadMovingTimer_&&(clearInterval(this.playheadMovingTimer_),this.playheadMovingTimer_=null),this.prePlayheadTime_=this.playheadTime(),this.playheadMovingTimer_=this.setTimeout(function(){e(this.playheadTime()-this.prePlayheadTime_>200||this.playheadTime()-this.prePlayheadTime_<-200)},2e3)},t.prototype.handleTechCanPlay_=function(){this.prePlayheadTime_||this.removeClass("vjs-waiting"),this.trigger("canplay")},t.prototype.handleTechCanPlayThrough_=function(){this.prePlayheadTime_||this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.prototype.handleTechPlaying_=function(){this.prePlayheadTime_||this.removeClass("vjs-waiting"),this.sourceChanging_=!1,this.trigger("playing")},t.prototype.sourceChanging=function(){return this.sourceChanging_},t.prototype.isCasting=function(){return"EmpCast"===this.techName_},re(t,[{key:"version",get:function(){return"2.0.94-209"}},{key:"entitlement",get:function(){var e=Le.getEntitlement(this);return e&&(e=o({},e),e.options=void 0),e}}]),t}(ni);si.AutoTechArray=function(){var e=["EmpShaka","EmpHLS-MSE","EmpHLS","Html5"];si.SupportFairplay_()&&(e=["EmpHLS","EmpShaka","Html5"]);for(var t=[],i=0;i<e.length;i++)ri.techs_.hasOwnProperty(e[i])&&t.push(e[i]);return t},si.SupportFairplay_=function(){var e=te.getTech("EmpHLS");return!!(void 0!==e&&e.isSupported()&&Q.WebKitMediaKeys&&e.getKeySystem&&Q.WebKitMediaKeys.isTypeSupported(e.getKeySystem(),"video/mp4"))},te.getComponent("Component").registerComponent("player",si);var ai=function(){function e(t,i,n){ne(this,e),this.INITIAL_REFERENCE_TIME=1,this.player_=t,this.analytics_=i,this.sessionId_=null,this.customAttributes=n.analytics&&n.analytics.customAttributes,this.exposure=n.exposure,this.currentTimeTimer=null,this.onPlayBind=this.onPlay.bind(this),this.onResumedBind=this.onResume.bind(this),this.onPlayingBind=this.onPlaying.bind(this),this.onPauseBind=this.onPause.bind(this),this.onEndedBind=this.onEnded.bind(this),this.onErrorBind=this.onError.bind(this),this.onDrmSessionUpdateBind=this.onDrmSessionUpdate.bind(this),this.onEntitlementLoadStartBind=this.onEntitlementLoadStart.bind(this),this.onBitrateChangeBind=this.onBitrateChange.bind(this),this.onDisposeBind=this.onDispose.bind(this),this.onLoadStartBind=this.onLoadStart.bind(this),this.onSeekedBind=this.onSeeked.bind(this),this.onWaitingBind=this.onWaiting.bind(this),this.onChromeCastingStartBind=this.onChromeCastingStart.bind(this),this.onChromeCastingStopBind=this.onChromeCastingStop.bind(this),this.onProgramChangeBind=this.onProgramChange.bind(this),this.onWaitingEndedBind=this.onWaitingEnded.bind(this),this.onErrorBeforeAssetBind=this.onErrorBeforeAsset.bind(this),this.onEntitlementChangeBind=this.onEntitlementChange.bind(this),this.onWindowUnloadBind=this.onWindowUnload.bind(this),this.onPlayingAfterStartBind=this.onPlayingAfterStart.bind(this),this.allEvents_=Object.keys(le).map(function(e){return le[e]}),this.init(),this.createdSessions={},this.mem={}}return e.prototype.SessionId=function(e){if(!(e||this.entitlement()&&this.entitlementLoaded_))return this.errorSessionId;var t=e||this.entitlement().playSessionId;return this.mem[t]||(this.mem[t]={pause:{},resume:{}}),t},e.prototype.hasSessionId=function(){return!(!this.entitlement()||!this.entitlementLoaded_)},e.prototype.sendCurrentTime=function(){var e=this.SessionId();e&&this.player_&&this.analytics_.getSessionState&&"PLAYING"===this.analytics_.getSessionState(e)&&this.analytics_.setCurrentTime(e,this.OffsetTime())},e.prototype.registerCurrentTimeTimer=function(){var e=this;this.clearTimers(),this.currentTimeTimer=setInterval(function(){e.sendCurrentTime();var t=e.SessionId();t&&e.analytics_&&e.analytics_.ok&&!1===e.analytics_.ok(t)&&(e.exposure?e.exposure.verifySession(null,function(){e.player_.el_&&(e.player_.trigger(le.ERROR,"401 INVALID_SESSION_TOKEN: The session token is no longer valid."),Le.stop(e.player_)),e.clearTimers()}):me.error("registerCurrentTimeTimer Exposure is undefined"))},1e3)},e.prototype.clearTimers=function(){this.currentTimeTimer&&clearInterval(this.currentTimeTimer),this.currentTimeTimer=null},e.prototype.init=function(){if(!this.player_||!this.analytics_)return void me.warn("Warning: init failed . Possible causes: either player or analytics were not set.");this._errorSessionId=null,this.disabled_=!1,this.entitlementLoaded_=!1,me("Initialization EmpAnalytics"),this.analytics_.init(),Q.addEventListener("beforeunload",this.onWindowUnloadBind),this.player_.on(le.ENTITLEMENT_LOAD_START,this.onEntitlementLoadStartBind),this.player_.on(le.PAUSE,this.onPauseBind),this.player_.on(le.SEEKED,this.onSeekedBind),this.player_.on(le.ENDED,this.onEndedBind),this.player_.on(le.ERROR,this.onErrorBind),this.player_.on(le.DISPOSE,this.onDisposeBind),this.player_.on(le.STOPPED,this.onDisposeBind),this.player_.on(le.BITRATE_CHANGED,this.onBitrateChangeBind),this.player_.on(le.WAITING,this.onWaitingBind),this.player_.on(le.CHROMECAST_CASTING,this.onChromeCastingStartBind),this.player_.on(le.CHROMECAST_STOPPED,this.onChromeCastingStopBind),this.player_.on(le.PROGRAM_CHANGED,this.onProgramChangeBind),this.player_.on(le.DRM_SESSION_UPDATE,this.onDrmSessionUpdateBind)},e.prototype.onWindowUnload=function(){var e=this;this.onGeneric("WindowClose",this.analytics_.dispose,function(){!0===e.hasSessionId()&&e.analytics_.dispose(e.SessionId(),e.getCachedCurrentTime()),e.analytics_.dispatchNow(!1),e.clearTimers()},!0)},e.prototype.onChromeCastingStart=function(){var e=this;this.onGeneric("StartCasting",this.analytics_.startCasting,function(){if(!1!==e.hasSessionId()){if(e.SessionId()){var t=e.getCachedCurrentTime();me("StartCasting",t),e.analytics_.startCasting(e.SessionId(),t)}e.clearTimers()}},!1),this.disabled_=!0},e.prototype.onChromeCastingStop=function(e){var t=this;this.disabled_=!1,e&&this.onGeneric("StopCasting",this.analytics_.stopCasting,function(){!1!==t.hasSessionId()&&t.analytics_.stopCasting(t.SessionId(),t.OffsetTime())},!1)},e.prototype.onProgramChange=function(e,t){var i=this,n=t?t.program:null;me("analytics","onProgramChange",n),n&&this.analytics_.programChanged&&this.player_.hasStarted()&&this.onGeneric("ProgramChange",this.analytics_.programChanged,function(){i.analytics_.programChanged(i.SessionId(),i.OffsetTime(),{programId:n.programId})},!0)},e.prototype.onEntitlementChange=function(e,t,i){var n=this;this.entitlementLoaded_=!0,this.player_.off(le.ERROR,this.onErrorBeforeAssetBind);var r=this.entitlement(t&&t.entitlement);this.onGeneric("HandShake",this.analytics_.handshake,function(){var e={};if(r&&r.assetId&&(e.assetId=r.assetId),r&&r.programId&&(e.programId=r.programId),!r){var t=Le.currentAsset(n.player_);t&&(e.assetId=t.assetId,e.programId=t.programId)}var o=r?r.playSessionId:i;n.analytics_.handshake(n.SessionId(o),e),n.onLoadStart(o)},!1)},e.prototype.onEntitlementLoadStart=function(){var e=this;this.entitlementLoaded_=!1,this.onGeneric("ExitOngoingSession",this.analytics_.exitOngoingSession,function(){return e.analytics_.exitOngoingSession(e.getCachedCurrentTime())}),this.player_.one(le.ERROR,this.onErrorBeforeAssetBind),this.player_.one(le.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind)},e.prototype.onLoadStart=function(e){var t=this,i=e||this.SessionId();if(!i)return void me("onLoadStart called but not session available.");this.sessionCreated(i)||(this.createdSessions[i]=!0,this.onGeneric("Created",this.analytics_.created,function(){var e=t.player_.options(),n={version:t.playerVersion};e&&e.autoplay&&(n.autoplay=e.autoplay),t.entitlement()&&t.entitlement().requestId&&(n.requestId=t.entitlement().requestId),t.analytics_.created(i,n)},!1),this.player_.off(le.PLAYING,this.onResumedBind),this.player_.off(le.PLAYING,this.onPlayingAfterStartBind),this.player_.one(le.PLAYING,this.onPlayingAfterStartBind))},e.prototype.onPlayingAfterStart=function(){this.onPlayBind(),this.onPlayingBind(),this.player_.on(le.PLAYING,this.onResumedBind)},e.prototype.onBitrateChange=function(){var e=this;this.onGeneric("BitrateChange",this.analytics_.bitrateChanged,function(){var t={bitrate:Math.max(0,Math.round(e.getBitrate()/1024))};e.analytics_.bitrateChanged(e.SessionId(),e.OffsetTime(),t)},!0)},e.prototype.onWaiting=function(){var e=this;this.onGeneric("StartWaiting",this.analytics_.waiting,function(){e.player_.hasStarted()&&e.analytics_.waiting(e.SessionId(),e.OffsetTime()),e.allEvents_.map(function(t){t!==le.PLAY&&t!==le.PLAYING&&t!==le.ENDED&&t!==le.ERROR&&t!==le.DISPOSE&&t!==le.SEEKED&&t!==le.CHROMECAST_CASTING&&t!==le.CHROMECAST_STOPPED||e.player_.one(t,e.onWaitingEndedBind)})},!0)},e.prototype.OffsetTime=function(){
return this.entitlement()&&(this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive)?Le.getPlayheadTime(this.player_)/1e3:Le.baseCurrentTime(this.player_)},e.prototype.startTimeLive=function(){return Le.startTimeLive(this.player_)},e.prototype.isLive=function(){return Le.isLive(this.player_)},e.prototype.getBitrate=function(){return Le.getBitrate(this.player_)},e.prototype.duration=function(){return this.entitlement()&&(this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive)&&this.player_.getProgramDetails&&this.player_.getProgramDetails()?this.player_.getProgramDetails().duration/1e3:Le.duration(this.player_)},e.prototype.entitlement=function(e){return void 0===e?Le.getEntitlement(this.player_)||this.entitlement_:(this.entitlement_=e,e)},e.prototype.onWaitingEnded=function(){var e=this;this.allEvents_.map(function(t){e.player_.off(t,e.onWaitingEndedBind)}),this.onGeneric("WaitingEnded",this.analytics_.waitingEnded,function(){e.analytics_.waitingEnded(e.SessionId(),e.OffsetTime())},!0)},e.prototype.onDispose=function(e,t){var i=this;this.onGeneric("Dispose",this.analytics_.dispose,function(){!1!==i.hasSessionId()&&(i.analytics_.dispose(i.SessionId(),i.getCachedCurrentTime()),i.clearTimers())},!0,!0)},e.prototype.getCachedCurrentTime=function(){if(this.player_){var e=this.player_.getCache().currentTime,t=this.OffsetTime();return t||e}},e.prototype.onEnded=function(){var e=this;this.onGeneric("End of Stream",this.analytics_.endOfStream,function(){e.analytics_.endOfStream(e.SessionId()),e.clearTimers()},!0,!0)},e.prototype.onPlay=function(){var e=this;this.onGeneric("Play",this.analytics_.play,function(){var t=e.player_.techName_,i="Unknown";switch(t){case"EmpShaka":i="Shaka";break;case"EmpDash":i="DashJS";break;case"EmpFlash":i="Flash";break;case"EmpHLS":i="NativeHLS";break;case"EmpHLS-MSE":i="HLS-MSE"}var n={techName:i,version:e.playerVersion,techVersion:e.techVersion};e.analytics_.play(e.SessionId(),e.OffsetTime(),n),e.registerCurrentTimeTimer()},!1)},e.prototype.onPlaying=function(){var e=this;this.onGeneric("Playing",this.analytics_.playing,function(){var t={};t.bitrate=Math.max(0,Math.round(e.getBitrate()/1024)),!0===e.isLive()?t.referenceTime=e.startTimeLive():t.duration=e.duration(),e.entitlement()&&e.entitlement().mediaLocator&&(t.mediaLocator=e.entitlement().mediaLocator),t.mediaLocator&&t.mediaLocator.indexOf(".isml")>=0&&(t.referenceTime=e.INITIAL_REFERENCE_TIME),e.analytics_.clearCustomAttributes(),(e.customAttributes||[]).map(function(t){e.analytics_.setCustomAttribute(t.key,t.value)}),e.analytics_.playing(e.SessionId(),e.OffsetTime(),t)},!1)},e.prototype.onSeeked=function(){var e=this;this.onGeneric("Seeked",this.analytics_.seek,function(){e.analytics_.seek(e.SessionId(),e.OffsetTime())},!0)},e.prototype.onPause=function(){var e=this;this.onGeneric("Pause",this.analytics_.paused,function(){if(!1!==e.player_.hasStarted()){var t=e.SessionId(),i=parseInt((new Date-0)/25);e.mem[t].pause[i]||(e.mem[t].pause[i]=!0,e.analytics_.paused(t,e.OffsetTime()))}},!0)},e.prototype.onResume=function(){var e=this;this.onGeneric("Resume",this.analytics_.resume,function(){var t=e.SessionId(),i=parseInt((new Date-0)/25);e.mem[t].resume[i]||(e.mem[t].resume[i]=!0,e.analytics_.resume(t,e.OffsetTime()))},!0)},e.prototype.onErrorBeforeAsset=function(){this.entitlementLoaded_=!1,this.onEntitlementChange(null,null,this.errorSessionId),this.onError(null,this.errorSessionId),this.clearTimers()},e.prototype.onError=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(i||this.entitlementLoaded_)&&this.onGeneric("Error",this.analytics_.error,function(){var n=e.player_.error(),r={};n&&n.code&&(r.errorCode=n.code),n&&n.message&&(r.errorMessage=n.message),n&&n.status&&(r.errorDetails=n.status+""),n&&n.stack&&(r.errorDetails=r.errorDetails?r.errorDetails+"\n"+n.stack.toString():n.stack.toString());var o=e.player_.options();if(e.player_.tech_){var s="EmpShaka"===e.player_.techName_&&o&&o.empshaka?o.empshaka.videoType:"";r.errorInfo=e.player_.techName_+(s?"-"+s:"")}else r.errorInfo="Unknown tech, techOrder: "+o.techOrder.toString();!n&&t&&(r.errorCode=t.code,r.errorMessage=t.message?t.message:"Browser Error",t.status&&(r.errorDetails=t.status+""),t.stack&&(r.errorDetails=r.errorDetails?r.errorDetails+"\n"+t.stack.toString():t.stack.toString()));var a=e.SessionId();(a||i)&&e.analytics_.error(a||i,e.OffsetTime(),r),e.clearTimers()},!1)},e.prototype.onDrmSessionUpdate=function(e,t){var i=this;me("onDrmSessionUpdate",e,t),this.onGeneric("DrmSessionUpdate",this.analytics_.drmSessionUpdate,function(){i.analytics_.drmSessionUpdate(i.SessionId(),{message:t.messageType,code:t.code,info:t.info})},!0)},e.prototype.onGeneric=function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.disabled_&&!r)return void me(e+" not delivered: analytics disabled.");n&&!this.sessionCreated(this.SessionId())?me(e+" was discarded."):t&&i&&i()},e.prototype.sessionCreated=function(e){return e&&this.createdSessions[e]},e.prototype.dispose=function(){this.clearTimers(),this.analytics_&&(this.analytics_.exitOngoingSession(this.getCachedCurrentTime()),this.analytics_.dispatchNow(!1)),Q.removeEventListener("beforeunload",this.onWindowUnloadBind),this.player_.off(le.PLAY,this.onPlayBind),this.player_.off(le.PLAYING,this.onPlayingBind),this.player_.off(le.PLAYING,this.onResumedBind),this.player_.off(le.PAUSE,this.onPauseBind),this.player_.off(le.SEEKED,this.onSeekedBind),this.player_.off(le.ENTITLEMENT_LOAD_START,this.onEntitlementLoadStartBind),this.player_.off(le.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.player_.off(le.BITRATE_CHANGED,this.onBitrateChangeBind),this.player_.off(le.ENDED,this.onEndedBind),this.player_.off(le.DISPOSE,this.onDisposeBind),this.player_.off(le.STOPPED,this.onDisposeBind),this.player_.off(le.ERROR,this.onErrorBind),this.player_.off(le.ERROR,this.onErrorBeforeAssetBind),this.player_.off(le.WAITING,this.onWaitingBind),this.player_.off(le.CHROMECAST_CASTING,this.onChromeCastingStartBind),this.player_.off(le.CHROMECAST_STOPPED,this.onChromeCastingStopBind),this.player_.off(le.PROGRAM_CHANGED,this.onProgramChangeBind),this.player_.off(le.PLAYING,this.onPlayingAfterStartBind),this.player_.off(le.DRM_SESSION_UPDATE,this.onDrmSessionUpdateBind)},re(e,[{key:"techVersion",get:function(){return Le.techVersion(this.player_)}},{key:"playerVersion",get:function(){return this.player_.version?this.player_.version:Q.videojs?Q.videojs.VERSION:"2.x.x"}},{key:"errorSessionId",get:function(){return this._errorSessionId||(this._errorSessionId="error-"+Math.random().toString().split(".")[1]),this._errorSessionId}}]),e}(),li=i(function(t,i){!function(i){t.exports=function(){var t;return function t(i,n,r){function o(a,l){if(!n[a]){if(!i[a]){var c="function"==typeof e&&e;if(!l&&c)return c(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[a]={exports:{}};i[a][0].call(p.exports,function(e){var t=i[a][1][e];return o(t||e)},p,p.exports,t,i,n,r)}return n[a].exports}for(var s="function"==typeof e&&e,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,i){(function(e){var i;i="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=i}).call(this,void 0!==Z?Z:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,i,n){!function(r,o){"object"==typeof n&&void 0!==i?o(n,e("worker-timers-broker")):"function"==typeof t&&t.amd?t(["exports","worker-timers-broker"],o):o(r.workerTimers={},r.workerTimersBroker)}(this,function(e,t){"use strict";var i=new Blob(['!function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,r){"use strict";r.r(t);r(1)},function(e,t,r){!function(){"use strict";var w=new Map,T=new Map,b=function(e,t){var r,n;if("performance"in self){var o=performance.now(),i=Math.max(0,o-t);r=o,n=e-i}else r=Date.now(),n=e;var a=r+n;return{expected:a,remainingDelay:n}},M=function e(t,r,n,o){var i="performance"in self?performance.now():Date.now();n<i?postMessage({id:null,method:"call",params:{timerId:r,timerType:o}}):t.set(r,setTimeout(e,n-i,t,r,n,o))};addEventListener("message",function(e){var t,r,n,o,i,a,u,s,c=e.data;try{if("clear"===c.method){var l=c.id,d=c.params,f=d.timerId,p=d.timerType;if("interval"===p)!function(e){var t=w.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),w.delete(e)}(f),postMessage({error:null,id:l});else{if("timeout"!==p)throw new Error(\'The given type "\'.concat(p,\'" is not supported\'));!function(e){var t=T.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),T.delete(e)}(f),postMessage({error:null,id:l})}}else{if("set"!==c.method)throw new Error(\'The given method "\'.concat(c.method,\'" is not supported\'));var m=c.params,v=m.delay,h=m.now,g=m.timerId,y=m.timerType;if("interval"===y)i=g,a=b(v,h),u=a.expected,s=a.remainingDelay,w.set(i,setTimeout(M,s,w,i,u,"interval"));else{if("timeout"!==y)throw new Error(\'The given type "\'.concat(y,\'" is not supported\'));t=g,r=b(v,h),n=r.expected,o=r.remainingDelay,T.set(t,setTimeout(M,o,T,t,n,"timeout"))}}}catch(e){postMessage({error:{message:e.message},id:c.id,result:null})}})}()}]);'],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(i),r=t.load(n),o=r.clearInterval,s=r.clearTimeout,a=r.setInterval,l=r.setTimeout;URL.revokeObjectURL(n),e.clearInterval=o,e.clearTimeout=s,e.setInterval=a,e.setTimeout=l,Object.defineProperty(e,"__esModule",{value:!0})})},{"worker-timers-broker":3}],3:[function(e,i,n){!function(r,o){"object"==typeof n&&void 0!==i?o(n,e("fast-unique-numbers")):"function"==typeof t&&t.amd?t(["exports","fast-unique-numbers"],o):o(r.workerTimersBroker={},r.fastUniqueNumbers)}(this,function(e,t){"use strict";var i=function(e){return void 0!==e.method&&"call"===e.method},n=function(e){return null===e.error&&"number"==typeof e.id},r=function(e){var r=new Map,o=new Map,s=new Map,a=new Worker(e);return a.addEventListener("message",function(e){var t=e.data;if(i(t)){var a=t.params,l=a.timerId,c=a.timerType;if("interval"===c){var u=r.get(l);if("number"==typeof u){var p=s.get(u);if(void 0===p||p.timerId!==l||p.timerType!==c)throw new Error("The timer is in an undefined state.")}else{if(void 0===u)throw new Error("The timer is in an undefined state.");u()}}else if("timeout"===c){var h=o.get(l);if("number"==typeof h){var d=s.get(h);if(void 0===d||d.timerId!==l||d.timerType!==c)throw new Error("The timer is in an undefined state.")}else{if(void 0===h)throw new Error("The timer is in an undefined state.");h(),o.delete(l)}}}else{if(!n(t)){var m=t.error.message;throw new Error(m)}var f=t.id,g=s.get(f);if(void 0===g)throw new Error("The timer is in an undefined state.");var y=g.timerId,v=g.timerType;s.delete(f),"interval"===v?r.delete(y):o.delete(y)}}),{clearInterval:function(e){var i=t.generateUniqueNumber(s);s.set(i,{timerId:e,timerType:"interval"}),r.set(e,i),a.postMessage({id:i,method:"clear",params:{timerId:e,timerType:"interval"}})},clearTimeout:function(e){var i=t.generateUniqueNumber(s);s.set(i,{timerId:e,timerType:"timeout"}),o.set(e,i),a.postMessage({id:i,method:"clear",params:{timerId:e,timerType:"timeout"}})},setInterval:function(e,i){var n=t.generateUniqueNumber(r);return r.set(n,function(){e(),"function"==typeof r.get(n)&&a.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:n,timerType:"interval"}})}),a.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:n,timerType:"interval"}}),n},setTimeout:function(e,i){var n=t.generateUniqueNumber(o);return o.set(n,e),a.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:n,timerType:"timeout"}}),n}}};e.load=r,Object.defineProperty(e,"__esModule",{value:!0})})},{"fast-unique-numbers":4}],4:[function(e,i,n){!function(e,r){"object"==typeof n&&void 0!==i?r(n):"function"==typeof t&&t.amd?t(["exports"],r):r(e.fastUniqueNumbers={})}(this,function(e){"use strict";var t=new WeakMap,i=Number.MAX_SAFE_INTEGER||9007199254740991,n=function(e,i){return t.set(e,i),i},r=function(e){var r=t.get(e),o=void 0===r?e.size:r>2147483648?0:r+1;if(!e.has(o))return n(e,o);if(e.size<1073741824){for(;e.has(o);)o=Math.floor(2147483648*Math.random());return n(e,o)}if(e.size>i)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;e.has(o);)o=Math.floor(Math.random()*i);return n(e,o)},o=function(e){var t=r(e);return e.add(t),t};e.addUniqueNumber=o,e.generateUniqueNumber=r,Object.defineProperty(e,"__esModule",{value:!0})})},{}],5:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("global/window"),a=n(s),l=e("./platform"),c=n(l),u=e("worker-timers"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(u),h=function(){function e(t,i,n,o,s){var a=arguments.length<=5||void 0===arguments[5]?{}:arguments[5],l=arguments.length<=6||void 0===arguments[6]?{}:arguments[6];r(this,e),this.CYCLE_TIME=1e3,this.EVENT_PURGE_TIME_DEFAULT=3*this.CYCLE_TIME,this.TIME_WITHOUT_BEAT_DEFAULT=60*this.CYCLE_TIME,this.SERVER_URL_DEFAULT="",this.CUSTOMER_DEFAULT="",this.BUSINESS_UNIT_DEFAULT="",this.INCLUDE_DEVICE_METRICS_DEFAULT=!0,this.SESSION_TOKEN_DEFAULT="",this.SESSION_ID_DEFAULT="",this.DEBUG_DEFAULT=!1,this.MAX_RETRIES=20,this.DEVICE_CLOCK_CHECK_THRESHOLD=3e5,this.eventsSkeleton=this.initEventSkeleton(),this.customer_=i,this.businessUnit_=n,this.sessionToken_=o,this.serverURL_=t,this.includeDeviceMetrics_=!1,this.userId_=s,this.deviceInfoData_=a,this.props_=l||{},this.pendingRequest_=!1}return e.prototype.init=function(){var e=this;this.cycleTimer&&("undefined"!=typeof Worker&&!0!==this.props_.disableWebWorkers?p.clearInterval(this.cycleTimer):clearInterval(this.cycleTimer)),"undefined"!=typeof Worker&&!0!==this.props_.disableWebWorkers?this.cycleTimer=p.setInterval(function(){return e.cycle()},this.CYCLE_TIME):this.cycleTimer=setInterval(function(){return e.cycle()},this.CYCLE_TIME),this.communicationCurrentTime=0,this.lastCommunicationTime=0,this.eventPool={}},e.prototype.clear=function(){this.eventPool={}},e.prototype.ok=function(e){var t=this.eventPool[e];return!!t&&!1===t.forbidden&&t.retries<this.MAX_RETRIES},e.prototype.created=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i={type:"Created"};this.addEventToPool(e,i,t)},e.prototype.play=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"PlayerReady",currentTime:t};this.deviceAppInfo&&(i.deviceAppInfo=this.deviceAppInfo),this.addEventToPool(e,n,i)},e.prototype.playing=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"Started",currentTime:t};if(this.customAttributes){var r=Object.keys(this.customAttributes);r.length&&r.length>0&&(i.attributes=this.customAttributes)}this.addEventToPool(e,n,i),this.changeSessionState(e,"PLAYING")},e.prototype.paused=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"Paused",currentTime:t};this.addEventToPool(e,n,i,!0)},e.prototype.seek=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"ScrubbedTo",currentTime:t};this.addEventToPool(e,n,i,!0)},e.prototype.programChanged=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"ProgramChanged",currentTime:t};this.addEventToPool(e,n,i,!0)},e.prototype.startCasting=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"StartCasting",currentTime:t};this.addEventToPool(e,n,i,!0),this.changeSessionState(e,"FINISHED")},e.prototype.stopCasting=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"StopCasting",currentTime:t};this.addEventToPool(e,n,i,!0),this.changeSessionState(e,"FINISHED")},e.prototype.setCurrentTime=function(e,t){this.eventPool[e]&&(this.eventPool[e].currentTime=t)},e.prototype.handshake=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i={type:"HandshakeStarted"};this.addEventToPool(e,i,t)},e.prototype.resume=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"Resumed",currentTime:t};this.addEventToPool(e,n,i,!0)},e.prototype.bitrateChanged=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"BitrateChanged",currentTime:t};this.addEventToPool(e,n,i,!0)},e.prototype.drmSessionUpdate=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i={type:"DRM"};this.addEventToPool(e,i,t,!0)},e.prototype.endOfStream=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i={type:"Completed"};this.addEventToPool(e,i,t,!0),this.changeSessionState(e,"FINISHED")},e.prototype.error=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"Error",currentTime:t};this.addEventToPool(e,n,i),this.changeSessionState(e,"FINISHED")},e.prototype.dispose=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=this.eventPool[e];if(n&&"FINISHED"!==n.currentState){var r={type:"Aborted"};t&&(r.currentTime=t),this.addEventToPool(e,r,i,!0),this.changeSessionState(e,"FINISHED")}},e.prototype.waiting=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"BufferingStarted",currentTime:t};this.addEventToPool(e,n,i)},e.prototype.waitingEnded=function(e,t){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n={type:"BufferingEnded",currentTime:t};this.addEventToPool(e,n,i)},e.prototype.getSessionState=function(e){return this.eventPool[e]?this.eventPool[e].currentState||"IDLE":"IDLE"},e.prototype.dispatchNow=function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0];this.cycle(e,!0)},e.prototype.exitOngoingSession=function(e){var t=this;Object.keys(this.eventPool).map(function(i){t.eventPool[i]&&t.dispose(i,e)})},e.prototype.setCustomAttribute=function(e,t){this.customAttributes||this.resetAnalyticsCustomAttributes(),this.customAttributes[e]=t},e.prototype.clearCustomAttributes=function(){this.customAttributes={}},e.prototype.removeSession=function(e){if(!0===(!(arguments.length<=1||void 0===arguments[1])&&arguments[1]))delete this.eventPool[e];else{var t=this.eventPool[e];t&&(t.currentState="REMOVED")}},e.prototype.hasDataToSend=function(){for(var e=Object.keys(this.eventPool),t=0;t<e.length;++t)if(this.eventPool[e[t]].events.length>0)return!0;return!1},e.prototype.sendData=function(){var e=this,t=arguments.length<=0||void 0===arguments[0]||arguments[0],i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!this.pendingRequest_){var n=!1;this.pendingRequest_=!0;var r=void 0;r="undefined"!=typeof Worker&&!0!==this.props_.disableWebWorkers?p.setTimeout(function(){e.pendingRequest_=!1,r=void 0},2*this.EVENT_PURGE_TIME_DEFAULT):setTimeout(function(){e.pendingRequest_=!1,r=void 0},2*this.EVENT_PURGE_TIME_DEFAULT);Object.keys(this.eventPool).map(function(o){var s=e.eventPool[o];if(s){if(!o)return s.events=[],void e.removeSession(o,!0);if("PLAYING"===s.currentState&&0===s.events.length&&i&&s.events.push({EventType:"Playback.Heartbeat",Timestamp:(new Date).getTime(),OffsetTime:Math.floor(1e3*s.currentTime)}),"IDLE"!==s.currentState&&"REMOVED"!==s.currentState){if(0===s.events.length)return void("FINISHED"===s.currentState&&e.removeSession(o));var a={DispatchTime:(new Date).getTime(),Customer:e.customer_,BusinessUnit:e.businessUnit_,Payload:s.events,SessionId:o,ClockOffset:s.clockOffset};if(e.debugLog("Sending analytics - sessionId: "+o+" and params: ",a),s.retries>e.MAX_RETRIES||!0===s.forbidden)return void(s.events=[]);Math.abs(e.communicationCurrentDate-e.lastCommunicationDate)>e.DEVICE_CLOCK_CHECK_THRESHOLD&&e.initRequest(o).then(function(){}),n=!0,e.sendRequest(t,a,function(t,i){if(r)try{"undefined"!=typeof Worker&&!0!==e.props_.disableWebWorkers?(p.clearTimeout(r),r=void 0):(clearTimeout(r),r=void 0)}catch(e){}e.pendingRequest_=!1;var n=t&&t.httpCode?t.httpCode:200;void 0!==i||200!==n?(401===n&&(s.forbidden=!0),e.debugLog("Error sending request to backend",i),s.retries++):(s.events=[],s.retries=0,"FINISHED"===s.currentState&&e.removeSession(o))})}}}),n||(this.pendingRequest_=!1)}},e.prototype.cycle=function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0],t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];this.communicationCurrentDate=new Date,this.communicationCurrentTime+=this.CYCLE_TIME,this.hasDataToSend()?(t||this.lastCommunicationTime+this.EVENT_PURGE_TIME_DEFAULT<this.communicationCurrentTime)&&(this.sendData(e),this.lastCommunicationTime=this.communicationCurrentTime,this.lastCommunicationDate=this.communicationCurrentDate):(t||this.lastCommunicationTime+this.TIME_WITHOUT_BEAT_DEFAULT<this.communicationCurrentTime)&&(this.sendData(e,!0),this.lastCommunicationTime=this.communicationCurrentTime,this.lastCommunicationDate=this.communicationCurrentDate)},e.prototype.sendRequest=function(e,t,i){var n=new XMLHttpRequest;n.open("POST",this.serverURL_+"/eventsink/send",!0),n.setRequestHeader("Content-type","application/json"),n.setRequestHeader("Authorization","Bearer "+this.sessionToken_),n.onload=function(){var e=JSON.parse(this.responseText);i(e)},n.onerror=function(e){i(null,e)},n.send(JSON.stringify(t))},e.prototype.initRequest=function(e){var t=this;return new Promise(function(i,n){var r=(new Date).getTime(),o=new XMLHttpRequest;o.open("POST",t.serverURL_+"/eventsink/init",!0),o.setRequestHeader("Content-type","application/json"),o.setRequestHeader("Authorization","Bearer "+t.sessionToken_),o.onload=function(){var n=(new Date).getTime(),s=JSON.parse(o.responseText);t.determineClockOffset(e,s,r,n),s&&s.settings&&(s.settings,s.settings.includeDeviceMetrics&&(t.includeDeviceMetrics_=!!s.settings.includeDeviceMetrics)),i()},o.onerror=function(e){t.debugLog("Unable to init. Aborting."),n(e)};var s={Customer:t.customer_,BusinessUnit:t.businessUnit_,SessionId:e};o.send(JSON.stringify(s))})},e.prototype.debugLog=function(e,t){t=t||"",this.debug_},e.prototype.addDeviceInfoEvent=function(e){var t=this.eventPool[e];if(this.includeDeviceMetrics_&&t&&t.events&&t.events.length){var i={Timestamp:(new Date).getTime(),EventType:"Device.Info",DeviceModel:this.deviceInfoData_.deviceModel||"Desktop",UserAgent:this.deviceInfoData_.userAgent||a.default.navigator.userAgent,Height:this.deviceInfoData_.screenHeight||a.default.screen.height,Width:this.deviceInfoData_.screenWidth||a.default.screen.width,Model:this.deviceInfoData_.model||a.default.navigator.appName,Name:this.deviceInfoData_.deviceName||a.default.navigator.product,OS:this.deviceInfoData_.deviceOS||c.default.os.family,OSVersion:this.deviceInfoData_.deviceOSVersion||c.default.os.version,Type:this.deviceInfoData_.type||"WEB"};(this.deviceInfoData_.deviceManufacturer||c.default.manufacturer)&&(i.Manufacturer=this.deviceInfoData_.deviceManufacturer||c.default.manufacturer),this.deviceInfoData_.deviceId&&(i.DeviceId=this.deviceInfoData_.deviceId),t.events.push(i)}},e.prototype.determineClockOffset=function(e,t,i,n){var r=this.eventPool[e];r&&(r.clockOffset=Math.floor((n-t.repliedTime+i-t.receivedTime)/2))},e.prototype.createPool=function(e){var t=this;return new Promise(function(i,n){t.eventPool[e]={currentState:"IDLE",currentTime:0,clockOffset:0,events:[],retries:0,forbidden:!1},t.initRequest(e).then(function(){t.addDeviceInfoEvent(e),i()}).catch(function(e){n(e)})})},e.prototype.addEventToPool=function(e,t,i){var n=this;if(arguments.length<=3||void 0===arguments[3]||!arguments[3]||!this.eventPool[e]||"FINISHED"!==this.eventPool[e].currentState&&"REMOVED"!==this.eventPool[e].currentState){var r;this.eventPool[e]||(r=this.createPool(e)),r?r.then(function(){n.internalAddEventToPool(e,t,i)}):this.internalAddEventToPool(e,t,i)}},e.prototype.internalAddEventToPool=function(e,t,i){var n=this.eventsSkeleton[t.type];if(!n)return void this.debugLog("Unknown playback event: ",t);var r={Timestamp:(new Date).getTime(),EventType:"Playback."+n.event};n.includeOffset&&(r.OffsetTime=Math.floor(1e3*t.currentTime)),n.attributes&&"function"==typeof n.attributes&&(r=this.objectAssign(r,n.attributes(i))),this.eventPool[e].events.push(r),this.debugLog("added "+n.event+" to queue")},e.prototype.changeSessionState=function(e,t){var i,n=this;this.eventPool[e]||(i=this.createPool(e)),i?i.then(function(){n.eventPool[e].currentState=t}):this.eventPool[e].currentState=t},e.prototype.initEventSkeleton=function(){var t={};return t.Completed={event:"Completed",autoListener:!1},t.PlayerReady={event:"PlayerReady",autoListener:!1,attributes:function(t){var i={Technology:t.techName,PlayerVersion:t.version};return t.techVersion&&(i.TechVersion=t.techVersion),i.AnalyticsVersion=e.VERSION,t.deviceAppInfo&&(i.DeviceAppInfo=t.deviceAppInfo),t.playMode&&(i.PlayMode=t.playMode),i}},t.Resumed={event:"Resumed",autoListener:!1,includeOffset:!0},t.BufferingStarted={event:"BufferingStarted",includeOffset:!0},t.BufferingEnded={event:"BufferingEnded",includeOffset:!0},t.ScrubbedTo={event:"ScrubbedTo",includeOffset:!0},t.Created={event:"Created",attributes:function(e){var t={};return void 0!==e.autoplay&&(t.AutoPlay=e.autoplay),e.techName&&(t.Technology=e.techName),e.player&&(t.Player=e.player),e.version&&(t.Version=e.version),e.requestId&&(t.RequestId=e.requestId),e.techVersion&&(t.TechVersion=e.techVersion),e.deviceAppInfo&&(t.DeviceAppInfo=e.deviceAppInfo),e.playMode&&(t.PlayMode=e.playMode),t}},t.StartCasting={event:"StartCasting",includeOffset:!0},t.StopCasting={event:"StopCasting",includeOffset:!0},t.Paused={event:"Paused",includeOffset:!0},t.BitrateChanged={event:"BitrateChanged",includeOffset:!0,attributes:function(e){return{Bitrate:e.bitrate}}},t.DRM={event:"DRM",includeOffset:!1,attributes:function(e){var t={};return e.message&&(t.Message=e.message),e.code&&(t.Code=e.code),e.info&&(t.Info=e.info),t}},t.Error={event:"Error",includeOffset:!0,attributes:function(e){var t={};return e.errorCode&&(t.Code=e.errorCode),e.errorMessage?t.Message=e.errorMessage:t.Message="Unknown Error",e.errorInfo&&(t.Info=e.errorInfo),e.errorDetails&&(t.Details=e.errorDetails),t}},t.HandshakeStarted={event:"HandshakeStarted",autoListener:!1,attributes:function(e){if(!e.assetId)return{};var t={AssetId:e.assetId};return e.programId&&(t.ProgramId=e.programId),t}},t.ProgramChanged={event:"ProgramChanged",includeOffset:!0,autoListener:!1,attributes:function(e){return e.programId?{ProgramId:e.programId}:{}}},t.Aborted={event:"Aborted",autoListener:!1,includeOffset:!0},t.Started={event:"Started",autoListener:!1,includeOffset:!0,attributes:function(e){var t={};return e.bitrate&&(t.Bitrate=e.bitrate),e.duration&&(t.VideoLength=1e3*e.duration),e.mediaLocator&&(t.MediaLocator=e.mediaLocator),e.attributes&&(t.Attributes=e.attributes),e.referenceTime&&(t.ReferenceTime=e.referenceTime),e.playMode&&(t.PlayMode=e.playMode),t}},t},e.prototype.objectAssign=function(e,t){for(var i,n,r=1;r<arguments.length;++r){n=arguments[r];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o(e,[{key:"debug",get:function(){return this.debug_},set:function(e){this.debug_=e}},{key:"deviceAppInfo",get:function(){return this.deviceInfoData_?this.deviceInfoData_.deviceAppInfo:null}}]),e}();h.VERSION="2.0.93-7",i.default=h,t.exports=i.default},{"./platform":6,"global/window":1,"worker-timers":2}],6:[function(e,i,n){(function(e){"use strict";(function(){function r(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function o(e,t,i){var n={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"7 / Server 2008 R2","6.0":"Vista / Server 2008",5.2:"XP 64-bit / Server 2003",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&i&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e=String(e),t&&i&&(e=e.replace(RegExp(t,"i"),i)),e=a(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}function s(e,t){var i=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=E)for(;++i<n;)t(e[i],i,e);else l(e,t)}function a(e){return e=d(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:r(e)}function l(e,t){for(var i in e)A.call(e,i)&&t(e[i],i,e)}function c(e){return null==e?r(e):I.call(e).slice(8,-1)}function u(e,t){var i=null!=e?typeof e[t]:"number";return!(/^(?:boolean|number|string|undefined)$/.test(i)||"object"==i&&!e[t])}function p(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function h(e,t){var i=null;return s(e,function(n,r){i=t(i,n,r,e)}),i}function d(e){return String(e).replace(/^ +| +$/g,"")}function m(e){function t(t){return h(t,function(t,i){var n=i.pattern||p(i);return!t&&(t=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(i.label&&!RegExp(n,"i").test(i.label)?i.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),i=i.label||i,t=a(t[0].replace(RegExp(n,"i"),i).replace(RegExp("; *(?:"+i+"[_-])?","i")," ").replace(RegExp("("+i+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function i(){return this.description||""}var n=g,r=e&&"object"==typeof e&&"String"!=c(e);r&&(n=e,e=null);var s=n.navigator||{},f=s.userAgent||"";e||(e=f);var v,_,T=r||b==y,E=r?!!s.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(I.toString()),C="Object",A=r?C:"ScriptBridgingProxyObject",w=r?C:"Environment",P=r&&n.java?"JavaPackage":c(n.java),x=r?C:"RuntimeObject",D=/\bJava/.test(P)&&n.java,O=D&&c(n.environment)==w,k=D?"a":"",L=D?"b":"",N=n.document||{},R=n.operamini||n.opera,M=S.test(M=r&&R?R["[[Class]]"]:c(R))?M:R=null,B=e,U=[],H=null,G=e==f,F=G&&R&&"function"==typeof R.version&&R.version(),j=function(t){return h(t,function(t,i){return t||RegExp("\\b"+(i.pattern||p(i))+"\\b","i").exec(e)&&(i.label||i)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),V=function(t){return h(t,function(t,i){return t||RegExp("\\b"+(i.pattern||p(i))+"\\b","i").exec(e)&&(i.label||i)})
}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox Mobile",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),W=t([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation 3","PlayStation 4","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),q=function(t){return h(t,function(t,i,n){return t||(i[W]||i[/^[a-z]+(?: +[a-z]+\b)*/i.exec(W)]||RegExp("\\b"+p(n)+"(?:\\b|\\w*\\d)","i").exec(e))&&n})}({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),K=function(t){return h(t,function(t,i){var n=i.pattern||p(i);return!t&&(t=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=o(t,n,i.label||i)),t})}(["Windows Phone ","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(j&&(j=[j]),q&&!W&&(W=t([q])),(v=/\bGoogle TV\b/.exec(W))&&(W=v[0]),/\bSimulator\b/i.test(e)&&(W=(W?W+" ":"")+"Simulator"),"Opera Mini"==V&&/\bOPiOS\b/.test(e)&&U.push("running in Turbo/Uncompressed mode"),/^iP/.test(W)?(V||(V="Safari"),K="iOS"+((v=/ OS ([\d_]+)/i.exec(e))?" "+v[1].replace(/_/g,"."):"")):"Konqueror"!=V||/buntu/i.test(K)?q&&"Google"!=q&&(/Chrome/.test(V)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(W))?(V="Android Browser",K=/\bAndroid\b/.test(K)?K:"Android"):"Silk"==V?(/\bMobi/i.test(e)||(K="Android",U.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&U.unshift("accelerated")):"PaleMoon"==V&&(v=/\bFirefox\/([\d.]+)\b/.exec(e))?U.push("identifying as Firefox "+v[1]):"Firefox"==V&&(v=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(K||(K="Firefox OS"),W||(W=v[1])):V&&!(v=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(V))||(V&&!W&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(v+"/")+8))&&(V=null),(v=W||q||K)&&(W||q||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(K))&&(V=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(K)?K:v)+" Browser")):K="Kubuntu",F||(F=function(t){return h(t,function(t,i){return t||(RegExp(i+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",p(V),"(?:Firefox|Minefield|NetFront)"])),(v="iCab"==j&&parseFloat(F)>3&&"WebKit"||/\bOpera\b/.test(V)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(j)&&"WebKit"||!j&&/\bMSIE\b/i.test(e)&&("Mac OS"==K?"Tasman":"Trident")||"WebKit"==j&&/\bPlayStation\b(?! Vita\b)/i.test(V)&&"NetFront")&&(j=[v]),"IE"==V&&(v=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(V+=" Mobile",K="Windows Phone "+(/\+$/.test(v)?v:v+".x"),U.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(V="IE Mobile",K="Windows Phone 8.x",U.unshift("desktop mode"),F||(F=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=V&&"Trident"==j&&(v=/\brv:([\d.]+)/.exec(e))&&(V&&U.push("identifying as "+V+(F?" "+F:"")),V="IE",F=v[1]),G){if(u(n,"global"))if(D&&(v=D.lang.System,B=v.getProperty("os.arch"),K=K||v.getProperty("os.name")+" "+v.getProperty("os.version")),T&&u(n,"system")&&(v=[n.system])[0]){K||(K=v[0].os||null);try{v[1]=n.require("ringo/engine").version,F=v[1].join("."),V="RingoJS"}catch(e){v[0].global.system==n.system&&(V="Narwhal")}}else"object"==typeof n.process&&(v=n.process)?(V="Node.js",B=v.arch,K=v.platform,F=/[\d.]+/.exec(v.version)[0]):O&&(V="Rhino");else c(v=n.runtime)==A?(V="Adobe AIR",K=v.flash.system.Capabilities.os):c(v=n.phantom)==x?(V="PhantomJS",F=(v=v.version||null)&&v.major+"."+v.minor+"."+v.patch):"number"==typeof N.documentMode&&(v=/\bTrident\/(\d+)/i.exec(e))&&(F=[F,N.documentMode],(v=+v[1]+4)!=F[1]&&(U.push("IE "+F[1]+" mode"),j&&(j[1]=""),F[1]=v),F="IE"==V?String(F[1].toFixed(1)):F[0]);K=K&&a(K)}F&&(v=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(F)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(G&&s.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(H=/b/i.test(v)?"beta":"alpha",F=F.replace(RegExp(v+"\\+?$"),"")+("beta"==H?L:k)+(/\d+\+?/.exec(v)||"")),"Fennec"==V||"Firefox"==V&&/\b(?:Android|Firefox OS)\b/.test(K)?V="Firefox Mobile":"Maxthon"==V&&F?F=F.replace(/\.[\d.]+/,".x"):/\bXbox\b/i.test(W)?(K=null,"Xbox 360"==W&&/\bIEMobile\b/.test(e)&&U.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(V)&&(!V||W||/Browser|Mobi/.test(V))||"Windows CE"!=K&&!/Mobi/i.test(e)?"IE"==V&&G&&null===n.external?U.unshift("platform preview"):(/\bBlackBerry\b/.test(W)||/\bBB10\b/.test(e))&&(v=(RegExp(W.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||F)?(v=[v,/BB10/.test(e)],K=(v[1]?(W=null,q="BlackBerry"):"Device Software")+" "+v[0],F=null):this!=l&&"Wii"!=W&&(G&&R||/Opera/.test(V)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==V&&/\bOS X (?:\d+\.){2,}/.test(K)||"IE"==V&&(K&&!/^Win/.test(K)&&F>5.5||/\bWindows XP\b/.test(K)&&F>8||8==F&&!/\bTrident\b/.test(e)))&&!S.test(v=m.call(l,e.replace(S,"")+";"))&&v.name&&(v="ing as "+v.name+((v=v.version)?" "+v:""),S.test(V)?(/\bIE\b/.test(v)&&"Mac OS"==K&&(K=null),v="identify"+v):(v="mask"+v,V=M?a(M.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(v)&&(K=null),G||(F=null)),j=["Presto"],U.push(v)):V+=" Mobile",(v=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(v=[parseFloat(v.replace(/\.(\d)$/,".0$1")),v],"Safari"==V&&"+"==v[1].slice(-1)?(V="WebKit Nightly",H="alpha",F=v[1].slice(0,-1)):F!=v[1]&&F!=(v[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(F=null),v[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==v[0]&&537.36==v[2]&&parseFloat(v[1])>=28&&"WebKit"==j&&(j=["Blink"]),G&&(E||v[1])?(j&&(j[1]="like Chrome"),v=v[1]||(v=v[0],v<530?1:v<532?2:v<532.05?3:v<533?4:v<534.03?5:v<534.07?6:v<534.1?7:v<534.13?8:v<534.16?9:v<534.24?10:v<534.3?11:v<535.01?12:v<535.02?"13+":v<535.07?15:v<535.11?16:v<535.19?17:v<536.05?18:v<536.1?19:v<537.01?20:v<537.11?"21+":v<537.13?23:v<537.18?24:v<537.24?25:v<537.36?26:"Blink"!=j?"27":"28")):(j&&(j[1]="like Safari"),v=v[0],v=v<400?1:v<500?2:v<526?3:v<533?4:v<534?"4+":v<535?5:v<537?6:v<538?7:v<601?8:"8"),j&&(j[1]+=" "+(v+="number"==typeof v?".x":/[.+]/.test(v)?"":"+")),"Safari"==V&&(!F||parseInt(F)>45)&&(F=v)),"Opera"==V&&(v=/\bzbov|zvav$/.exec(K))?(V+=" ",U.unshift("desktop mode"),"zvav"==v?(V+="Mini",F=null):V+="Mobile",K=K.replace(RegExp(" *"+v+"$"),"")):"Safari"==V&&/\bChrome\b/.exec(j&&j[1])&&(U.unshift("desktop mode"),V="Chrome Mobile",F=null,/\bOS X\b/.test(K)?(q="Apple",K="iOS 4.3+"):K=null),F&&0==F.indexOf(v=/[\d.]+$/.exec(K))&&e.indexOf("/"+v+"-")>-1&&(K=d(K.replace(v,""))),j&&!/\b(?:Avant|Nook)\b/.test(V)&&(/Browser|Lunascape|Maxthon/.test(V)||"Safari"!=V&&/^iOS/.test(K)&&/\bSafari\b/.test(j[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(V)&&j[1])&&(v=j[j.length-1])&&U.push(v),U.length&&(U=["("+U.join("; ")+")"]),q&&W&&W.indexOf(q)<0&&U.push("on "+q),W&&U.push((/^on /.test(U[U.length-1])?"":"on ")+W),K&&(v=/ ([\d.+]+)$/.exec(K)||(_=/^[a-z]+ ([\d.+]+) \//i.exec(K)),K={architecture:32,family:v&&!_?K.replace(v[0],""):K,version:v?v[1]:null,toString:function(){var e=this.version;return this.family+(e&&!_?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(v=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(B))&&!/\bi686\b/i.test(B)&&(K&&(K.architecture=64,K.family=K.family.replace(RegExp(" *"+v),"")),V&&(/\bWOW64\b/i.test(e)||G&&/\w(?:86|32)$/.test(s.cpuClass||s.platform)&&!/\bWin64; x64\b/i.test(e))&&U.unshift("32-bit")),e||(e=null);var Y={};return Y.description=e,Y.layout=j&&j[0],Y.manufacturer=q,Y.name=V,Y.prerelease=H,Y.product=W,Y.ua=e,Y.version=V&&F,Y.os=K||{architecture:null,family:null,version:null,toString:function(){return"null"}},Y.parse=m,Y.toString=i,Y.version&&U.unshift(F),Y.name&&U.unshift(V),K&&V&&(K!=String(K).split(" ")[0]||K!=V.split(" ")[0]&&!W)&&U.push(W?"("+K+")":"on "+K),U.length&&(Y.description=U.join(" ")),Y}var f={function:!0,object:!0},g=f[typeof window]&&window||this,y=g,v=f[typeof n]&&n,_=f[typeof i]&&i&&!i.nodeType&&i,T=v&&_&&"object"==typeof e&&e;!T||T.global!==T&&T.window!==T&&T.self!==T||(g=T);var E=Math.pow(2,53)-1,S=/\bOpera/,b=this,C=Object.prototype,A=C.hasOwnProperty,I=C.toString;"function"==typeof t&&"object"==typeof t.amd&&t.amd?t(function(){return m()}):v&&_?l(m(),function(e,t){v[t]=e}):g.platform=m()}).call(void 0)}).call(this,void 0!==Z?Z:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[5])(5)}()}()}),ci=t(li),ui=Q.empAnalytics?Q.empAnalytics:ci,pi=te.getPlugin("plugin"),hi=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));me("AnalyticsPlugin","create"),r.analyticsConnector_=null,r.options_=n,r.onLoadStartBind=r.onLoadStart_.bind(r),r.player.on(le.LOAD_START,r.onLoadStartBind);var o=C();return r.options_=r.options_?r.options_:{},r.options_.analytics=r.options_.analytics?r.options_.analytics:{},r.options_.analytics.deviceInfo=r.options_.analytics.deviceInfo?r.options_.analytics.deviceInfo:{},r.options_.analytics.deviceInfo=te.mergeOptions({deviceName:o.name,model:o.version},r.options_.analytics.deviceInfo),r}return oe(t,e),t.prototype.stop=function(){this.analyticsConnector_&&this.analyticsConnector_.dispose&&(this.analyticsConnector_.dispose(),this.analyticsConnector_=null)},t.prototype.stopCasting=function(){this.analyticsConnector_&&this.analyticsConnector_.dispose&&(this.analyticsConnector_.onChromeCastingStop(!0),this.analyticsConnector_=null)},t.prototype.dispose=function(){me("AnalyticsPlugin","dispose"),this.player.off(le.LOAD_START,this.onLoadStartBind),this.stop(),e.prototype.dispose.call(this)},t.prototype.options=function(e){if(!e)return this.options_;this.options_=te.mergeOptions(this.options_,e)},t.prototype.newAnalytics=function(e){me("new EMPAnalytics");var t=new ui(e.exposureApiURL,e.customer,e.businessUnit,e.sessionToken,e.userId,this.options_.analytics&&this.options_.analytics.deviceInfo);this.stop(),me("new EMPAnalyticsConnector"),this.analyticsConnector_=new ai(this.player,t,this.options_)},t.prototype.onEntitlementLoadStart=function(){this.analyticsConnector_&&this.analyticsConnector_.onEntitlementLoadStart()},t.prototype.onError=function(e){this.analyticsConnector_&&this.analyticsConnector_.onError(e)},t.prototype.onWindowUnload=function(){this.analyticsConnector_&&this.analyticsConnector_.onWindowUnload()},t.prototype.onLoadStart_=function(e){Le.getEntitlement(this.player)||this.stop()},t.prototype.version=function(){return ui?ui.VERSION:e.prototype.version.call(this)},re(t,[{key:"connector",get:function(){return this.analyticsConnector_}}]),t}(pi);hi.VERSION="2.0.94-209",te.getPlugin("analytics")?te.log.warn('A plugin named "analytics" already exists.'):te.registerPlugin("analytics",hi);var di=function(){function e(t,i){ne(this,e),this.assetId=t.assetId||0,this.playToken=t.playToken||"",this.playTokenExpiration=t.playTokenExpiration||"",this.productId=t.productId||"",this.edrmConfig=t.edrmConfig||null,this.mediaLocator=t.mediaLocator||"",this.mediaLocator&&("localhost"===location.hostname?this.src=this.mediaLocator:this.src=this.mediaLocator.replace(/^(http:)/,"").replace(/^(https:)/,"")),this.adMediaLocator=t.adMediaLocator||"",t.streamInfo?this.streamInfo=t.streamInfo:this.setupStreamInfo(i),this.mimeType=t.mimeType||"",this.entitlementType=t.entitlementType||"",this.live=t.live||!1,this.playSessionId=t.playSessionId||"",this.analyticsConfig=t.analyticsConfig||null,this.lastViewedOffset=t.lastViewedOffset||null,this.lastViewedTime=t.lastViewedTime||null,this.liveTime=t.liveTime||null;var n=Date.parse(t.licenseExpiration||null);!1===isNaN(n)&&(this.licenseExpiration=new Date(n)),this.licenseExpirationReason=t.licenseExpirationReason||"",this.playRequest=t.playRequest||null,this.minBitrate=t.minBitrate||0,this.maxBitrate=t.maxBitrate||0,this.maxResWidth=t.maxResWidth||0,this.maxResHeight=t.maxResHeight||0,this.rwEnabled=void 0===t.rwEnabled||t.rwEnabled,this.ffEnabled=void 0===t.ffEnabled||t.ffEnabled,this.airplayBlocked=void 0!==t.airplayBlocked&&t.airplayBlocked,t.fairplayConfig&&(this.protection={},this.protection.certificateUrl=t.fairplayConfig.certificateUrl||"",this.protection.licenseUrl=t.fairplayConfig.licenseAcquisitionUrl||"",t.fairplayConfig.secondaryMediaLocator?this.protection.version="mrr":this.protection.version="irdeto"),t.widevineConfig&&(this.certificateServer=t.widevineConfig.certificateUrl||""),this.mdnRequestRouterUrl=t.mdnRequestRouterUrl||"",this.timeshiftEnabled=t.timeshiftEnabled,t.cencConfig&&(this.licenseServers=t.cencConfig),this.requestId=t.requestId||""}return e.prototype.setupStreamInfo=function(e){if(this.streamInfo={referenceTime:0},this.isDynamicCachupAsLive=!1,this.isStaticCachupAsLive=!1,this.mediaLocator){var t=p("t",this.mediaLocator);if(!t){var i=p("dvr_window_length",this.mediaLocator);if(i){var n=e?new Date(e):new Date;t=new Date(n.getTime()-1e3*i).toISOString().replace(/Z/g,"")}}if(t)try{t&&47===t.length?(this.streamInfo.start=new Date(t.slice(0,23)+"Z"),this.streamInfo.startTime=this.streamInfo.start.getTime(),this.streamInfo.end=new Date(t.slice(24)+"Z"),this.streamInfo.endTime=this.streamInfo.end.getTime()):t&&23===t.length&&(this.streamInfo.start=new Date(t+"Z"),this.streamInfo.startTime=this.streamInfo.start.getTime()),this.isDynamicCachupAsLive=void 0!==this.streamInfo.start&&void 0===this.streamInfo.end,this.isStaticCachupAsLive=void 0!==this.streamInfo.start&&void 0!==this.streamInfo.end}catch(e){me.warn("timeParams",e)}}},re(e,null,[{key:"Type",get:function(){return{DASH:"DASH",FLASH:"FLASH",HLS:"HLS"}}}]),e}(),mi=i(function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,i){for(var n=!0;n;){var r=e,o=t,s=i;n=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,o);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=o,i=s,n=!0,a=c=void 0}},o=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];if(i(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),Object.defineProperty(this,"message",{enumerable:!1,value:e,writable:!0}),Object.defineProperty(this,"name",{enumerable:!1,value:this.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace"))return void Error.captureStackTrace(this,this.constructor);Object.defineProperty(this,"stack",{enumerable:!1,value:new Error(e).stack,writable:!0})}return n(t,e),t}(Error);t.default=o,e.exports=t.default}),fi=t(mi),gi=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ne(this,t);var n=void 0,r=!0,o=ue.ENTITLEMENT2;"string"==typeof i?n=i:i instanceof Object&&(n=i.message,!1===i.fatal&&(r=i.fatal),i.code&&(o=i.code));var s=se(this,e.call(this,n));return s.fatal=r,s.code=o,s}return oe(t,e),re(t,[{key:"fatal",get:function(){return!!this.fatal_},set:function(e){this.fatal_=e}}]),t}(fi),yi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ne(this,e),this.options_=t}return e.prototype.getEntitlement=function(e,t,i){throw new gi("EntitlementEngine: getEntitlement should be implemented in subclass.")},e.prototype.getServerTime=function(e){throw new gi("EntitlementEngine: getServerTime should be implemented in subclass.")},e.prototype.syncServerTime=function(t){this.getServerTime(function(i,n){n&&(me.error("getServerTime",n),i=new Date),e.ServerTimeDiff_=i-new Date,me("serverDiff",e.ServerTimeDiff_),t&&t(e.ServerTimeDiff_,n)})},e.prototype.getCachedServerTime=function(){return void 0!==e.ServerTimeDiff_?Date.now()+e.ServerTimeDiff_:Date.now()},e.prototype.getPreferences=function(e){throw new gi("EntitlementEngine: getPreferences should be implemented in subclass.")},e.prototype.savePreferences=function(e,t){throw new gi("EntitlementEngine: savePreferences should be implemented in subclass.")},e.prototype.getProgramInfo=function(e,t,i,n){throw new gi("EntitlementEngine: getProgramInfo should be implemented in subclass.")},e.prototype.getEPG=function(e,t,i,n){throw new gi("EntitlementEngine: getEPG should be implemented in subclass.")},e.prototype.getAssetInfo=function(e,t){throw new gi("EntitlementEngine: getAssetInfo should be implemented in subclass.")},e.prototype.getChannelInfo=function(e,t){throw new gi("EntitlementEngine: getChannelInfo should be implemented in subclass.")},e.prototype.verifySession=function(e,t){throw new gi("EntitlementEngine: verifySession should be implemented in subclass.")},e.prototype.verifyEntitlement=function(e,t,i){throw new gi("EntitlementEngine: verifyEntitlement should be implemented in subclass.")},e.prototype.login=function(e,t,i,n){throw new gi("EntitlementEngine: login should be implemented in subclass.")},e.prototype.logout=function(e){throw new gi("EntitlementEngine: logout should be implemented in subclass.")},e.prototype.fetchPreferences=function(e){throw new gi("EntitlementEngine: fetchPreferences should be implemented in subclass.")},e.prototype.savePreferences=function(e,t){throw new gi("EntitlementEngine: savePreferences should be implemented in subclass.")},e.isEntitlementEngine=function(t){return t.prototype instanceof e||t instanceof e||t===e},e.registerEntitlementEngine=function(t,i){if(e.engines_||(e.engines_={}),!e.isEntitlementEngine(i))throw new gi("EntitlementEngine "+t+" must be a EntitlementEngine");return e.engines_[t]=i,i},e.getEntitlementEngine=function(t){return t=t||"EricssonExposure",e.engines_&&e.engines_[t]?e.engines_[t]:null},e}();yi.ServerTimeDiff_=void 0;var vi=U,_i=Object.prototype.toString,Ti=i(function(e,t){function i(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=i,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),Ei=H,Si=Object.prototype.toString,bi=Object.prototype.hasOwnProperty,Ci=function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ai=function(e){if(!e)return{};var t={};return Ei(Ti(e).split("\n"),function(e){var i=e.indexOf(":"),n=Ti(e.slice(0,i)).toLowerCase(),r=Ti(e.slice(i+1));void 0===t[n]?t[n]=r:Ci(t[n])?t[n].push(r):t[n]=[t[n],r]}),t},Ii=V,wi=Object.prototype.hasOwnProperty,Pi=K;K.XMLHttpRequest=Q.XMLHttpRequest||X,K.XDomainRequest="withCredentials"in new K.XMLHttpRequest?K.XMLHttpRequest:Q.XDomainRequest,function(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],function(e){K["delete"===e?"del":e]=function(t,i,n){return i=q(t,i,n),i.method=e.toUpperCase(),Y(i)}});var xi=function(){function e(){ne(this,e)}return e.getBaseUrl=function(e,t){var i=new XMLHttpRequest;i.open("GET",e.mdnRequestRouterUrl),i.onreadystatechange=function(n){if(4===i.readyState)if(200===i.status){me("getBaseUrl OK");var r=i.responseXML;try{var o=r.firstChild.getElementsByTagName("baseURL")[0].textContent;o?e.baseUrl=o:me.error("getBaseUrl Error can not find baseURL"),t(e)}catch(i){me.error("getBaseUrl Error",i),t(e)}}else me.error("getBaseUrl Error",i.statusText),t(e)},i.send(null)},e}(),Di=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ne(this,t),i=o({exposureApiURL:"https://exposure.emps.ebsd.ericsson.net",exposureApiVersion:"v1"},i);var n=se(this,e.call(this,i));return n.errorMap={400:{INVALID_JSON:{message:"Invalid json.",fatal:!1}},401:{NO_SESSION_TOKEN:{message:"The session token is missing.",fatal:!0},INVALID_SESSION_TOKEN:{message:"The session token is not valid.",fatal:!0}},403:{FORBIDDEN:{message:"The business unit has been configured to require server to server authentication, but it is not valid.",fatal:!0},NOT_ENTITLED:{message:"The user is not entitled.",fatal:!0},DEVICE_BLOCKED:{message:"The device is not allowed to play the asset.",fatal:!0},GEO_BLOCKED:{message:"Not allowed from this region.",fatal:!0},LICENSE_EXPIRED:{message:"Asset has been expired.",fatal:!0},NOT_AVAILABLE_IN_FORMAT:{message:"The media is not available in the requested format.",fatal:!1},NOT_ENABLED:{message:"The media is not enabled.",fatal:!0},CONCURRENT_STREAMS_LIMIT_REACHED:{message:"You have reached the maximum number of concurrent streams you are allowed to watch.",fatal:!0},NO_MEDIA_ON_CHANNEL:{message:"The media is not available on the channel.",fatal:!1},NO_MEDIA_FOR_PROGRAM:{message:"No media available for this program.",fatal:!1}},404:{UNKNOWN_BUSINESS_UNIT:{message:"The business unit cannot be found.",fatal:!0},UNKNOWN_ASSET:{message:"The asset cannot be found.",fatal:!1}},0:{NETWORK_ERROR:{message:"Network error.",fatal:!1}}},void 0===yi.ServerTimeDiff_&&n.getServerTime(function(e,t){t&&(me.error("getServerTime",t),e=new Date),yi.ServerTimeDiff_=e-new Date,me("serverDiff",yi.ServerTimeDiff_)}),n}return oe(t,e),t.prototype.login=function(e,t,i,n){var r=this;if(!i)throw"callback is mandantory for login";var o=!1;n&&(o=!0);var s=""===e,a=new Date(this.getCachedServerTime());if(a.setTime(a.getTime()+864e5),this.options_.apiKey){var l={"EMP-Auth":this.options_.apiKey},c=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+this.customer+"/businessunit/"+this.businessUnit+"/auth/session",u={accountId:e,userId:e,deviceId:"WEB_"+e,device:{height:screen.height,width:screen.width,model:navigator.appName,name:navigator.product,os:navigator.platform,osVersion:navigator.appVersion,manufacturer:navigator.vendor,type:"WEB"},expiration:a.toISOString(),anonymous:!1};Pi.post(c,{json:u,headers:l},function(e,t,n){r.checkForError(e,t,function(e,t){i({success:!1,expiration:0,message:t.message})})||(r.sessionToken=n.sessionToken,i({success:!0,expiration:864e5,session:n}))})}else{var p=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+this.customer+"/businessunit/"+this.businessUnit;p+=!0===s?"/auth/anonymous":!0===o?"/auth/twofactorlogin":"/auth/login";var h={deviceId:"WEB_"+e,device:{height:screen.height,width:screen.width,model:navigator.appName,name:navigator.product,os:navigator.platform,osVersion:navigator.appVersion,manufacturer:navigator.vendor,type:"WEB"},rememberMe:!1,username:e,password:t,totp:!0===o?n:void 0};Pi.post(p,{json:h},function(e,t,n){r.checkForError(e,t,function(e,t){i({success:!1,expiration:0,message:t.message})})||(r.sessionToken=n.sessionToken,i({success:!0,expiration:n.expirationDateTime?new Date(n.expirationDateTime)-new Date(r.getCachedServerTime()):864e5,session:n}))})}},t.prototype.logout=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},i=arguments[1],n=this.customer,r=this.businessUnit;if(!n)throw new gi("Customer was not provided.");if(!r)throw new gi("Business unit was not provided.");var o=this.requestHeaders;i&&(o={Authorization:"Bearer "+i});var s=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+n+"/businessunit/"+r+"/auth/session";return Pi.del(s,{headers:o},function(i,n,r){e.checkForError(i,n,t)||(e.sessionToken=null,void 0!==(void 0===t?"undefined":ie(t))&&t(!0))})},t.prototype.getEntitlement=function(e,t,i){if(void 0===e)throw new gi("No request specified.");if(void 0===e.assetId)throw new gi("No assetId specified.");if(void 0===t)throw new gi("Media not found.");if(!t.drm||!t.format)throw new gi("Invalid playrequest specified.");null!==e.programId||e.channelId?this.getProgram_(e.assetId,e.programId,t,i):this.getAsset_(e.assetId,t,i)},t.prototype.getErrorForResponse=function(e){if(!e)return null;var t=e.statusCode,i="";e.body&&(i=e.body.message);var n=this.errorMap[t];if(n){var r=t+" "+i,o=n[i];return o&&(r+=": "+o.message),new gi(o?{message:r,fatal:!!o.fatal}:r)}if(!(t>=200&&t<=299)){return new gi(t+" "+i)}return null},t.prototype.checkForError=function(e,t,i){var n=e;return e||(n=this.getErrorForResponse(t)),n?(i&&i(null,n),n):null},t.prototype.getAsset_=function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=this.customer,o=this.businessUnit;if(!r)throw new gi("Customer was not provided.");if(!o)throw new gi("Business unit was not provided.");var s=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+r+"/businessunit/"+o+"/entitlement/"+e+"/play";return Pi.post(s,{json:t,headers:this.requestHeaders},function(r,o,s){if(!i.checkForError(r,o,n)){var a=new di(s,o.headers.date);a.assetId=e,a.playRequest=t,a.mimeType=t.type;var l=o.headers["x-request-id"];a.requestId=l||"",a.mdnRequestRouterUrl?xi.getBaseUrl(a,n):n(a)}})},t.prototype.setStreamReferenceTime_=function(e){(e.isDynamicCachupAsLive||e.isStaticCachupAsLive)&&("application/dash+xml"===e.mimeType?e.isStaticCachupAsLive?e.streamInfo.referenceTime=e.streamInfo.startTime:e.streamInfo.referenceTime=0:"application/x-mpegurl"===e.mimeType&&(e.streamInfo.referenceTime=e.streamInfo.startTime))},t.prototype.getAssetMetadata_=function(e,t){var i=this,n=this.customer,r=this.businessUnit;if(!n)throw new gi("Customer was not provided.");if(!r)throw new gi("Business unit was not provided.");var o=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+n+"/businessunit/"+r+"/content/asset/"+e;return Pi.get(o,null,function(e,n,r){if(!i.checkForError(e,n,t)){var o=JSON.parse(r);t(o)}})},t.prototype.getProgram_=function(e,t,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},o=this.customer,s=this.businessUnit;if(!o)throw new gi("Customer was not provided.");if(!s)throw new gi("Business unit was not provided.");var a="";t&&(a="/program/"+t);var l="";e&&(l="/channel/"+e);var c=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+o+"/businessunit/"+s+"/entitlement"+l+a+"/play";return Pi.post(c,{json:i,headers:this.requestHeaders},function(o,s,a){if(!n.checkForError(o,s,r)){var l=new di(a,s.headers.date);e&&(l.assetId=e,l.channelId=e),t&&(l.programId=t),l.playRequest=i,l.mimeType=i.type,n.setStreamReferenceTime_(l);var c=s.headers["x-request-id"];l.requestId=c||"",l.mdnRequestRouterUrl?xi.getBaseUrl(l,r):r(l)}})},t.prototype.getServerTime=function(e){var t=this.customer,i=this.businessUnit;if(!t||!i)return me.warn("getServerTime no customer or businessUnit"),void e(new Date);if(!1===window.navigator.onLine)return me("getServerTime offline"),void e(new Date);var n=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+t+"/businessunit/"+i+"/time";return Pi.get(n,null,function(t,i,n){if(t)return void e(null,t);var r=JSON.parse(n),o=new Date(r.iso8601);e(o)})},t.prototype.getPreferences=function(e){var t=this,i=this.customer,n=this.businessUnit,r=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+i+"/businessunit/"+n+"/preferences";return Pi.get(r,{headers:this.requestHeaders},function(i,n,r){if(!t.checkForError(i,n,e)){var o=JSON.parse(r);e(o)}})},t.prototype.savePreferences=function(e,t){var i=this,n=this.customer,r=this.businessUnit;if(!e)return void me.error("Preferences was not provided.");var o={preferences:e},s=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+n+"/businessunit/"+r+"/preferences";return Pi.post(s,{json:o,headers:this.requestHeaders},function(e,n,r){i.checkForError(e,n,t)||t(!0)})},t.prototype.getEPG=function(e,t,i,n){var r=this,o=this.customer,s=this.businessUnit,a=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+o+"/businessunit/"+s+"/epg/"+e;return a+="?from="+t+"&to="+i,Pi.get(a,null,function(e,t,i){if(!r.checkForError(e,t,n)){var o=JSON.parse(i);n(o)}})},t.prototype.getProgramInfo=function(e,t,i,n){var r=this.customer,o=this.businessUnit,s=null,a=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+r+"/businessunit/"+o+"/epg/"+e;return n?a=a+"/program/"+n:(s={from:t.getTime(),to:t.getTime()},a+="?from="+s.from+"&to="+s.to),Pi.get(a,null,function(e,t,n){if(e)return void i(null,e);var r=JSON.parse(n),o=void 0;if(r.programs&&r.programs.length>0)o=r.programs[0];else{if(!r.programId)return void i(null,"Invalid response from EPG. No programs found.");o=r}o.start=new Date(o.startTime),o.end=new Date(o.endTime),o.duration=new Date(o.endTime)-new Date(o.startTime),i(o)})},t.prototype.getChannelInfo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.getAssetInfo(e,t)},t.prototype.getAssetInfo=function(e,t){var i=this.customer,n=this.businessUnit,r=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+i+"/businessunit/"+n+"/content/asset/"+e;return Pi.get(r,null,function(e,i,n){if(e)return void t(null,e);var r=JSON.parse(n);t(r)})},t.prototype.verifyEntitlement=function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=this.customer,o=this.businessUnit;if(!r)throw new gi("Customer was not provided.");if(!o)throw new gi("Business unit was not provided.");if(!e)throw new gi("assetId was not provided.");if(!t)throw new gi("playRequest was not provided.");var s=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+r+"/businessunit/"+o+"/entitlement/"+e+"?drm="+t.drm+"&format="+t.format;return Pi.get(s,{headers:this.requestHeaders},function(e,t,r){i.checkForError(e,t,n)||void 0!==(void 0===n?"undefined":ie(n))&&n(JSON.parse(r))})},t.prototype.verifySession=function(e,t){var i=this,n=this.customer,r=this.businessUnit,o=this.options_.exposureApiURL+"/"+this.options_.exposureApiVersion+"/customer/"+n+"/businessunit/"+r+"/auth/session";return Pi.get(o,{headers:this.requestHeaders},function(n,r,o){if(i.checkForError(n,r))return void(t&&t());e&&e()})},re(t,[{key:"requestHeaders",get:function(){var e={Authorization:"Bearer "+this.sessionToken};return this.options_.apiKey&&(e=o({"EMP-Auth":this.options_.apiKey},e)),e}},{key:"customer",get:function(){return this.customer_||this.options_.customer||null},set:function(e){this.customer_=e}},{key:"businessUnit",get:function(){return this.businessUnit_||this.options_.businessUnit||null},set:function(e){this.businessUnit_=e}},{key:"sessionToken",get:function(){return this.options_.sessionToken||null},set:function(e){this.options_.sessionToken=e}}]),t}(yi);yi.registerEntitlementEngine("EricssonExposure",Di);var Oi=function(){function e(t){ne(this,e),this.assetId=t.assetId||null,this.programId=t.programId||null,this.channelId=t.channelId||null}return re(e,[{
key:"assetId",get:function(){return this.assetId_},set:function(e){this.assetId_=e}},{key:"programId",get:function(){return this.programId_},set:function(e){this.programId_=e}},{key:"channelId",get:function(){return this.channelId_},set:function(e){this.channelId_=e}}]),e}(),ki=videojs.getPlugin("plugin"),Li=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));return me("ProgramService","create"),r.MIN_PROGRAM_CHECK_TIMEOUT=1e3,r.checkForProgramChangeBind=r.checkForProgramChange_.bind(r),r.onEntitlementChangeBind=r.onEntitlementChange.bind(r),r.clearProgramChangeTimeoutBind=r.clearProgramChangeTimeout_.bind(r),r.options_=n||{},r.programChangeTimeout_=null,r.programChangeCheckTimestamp_=0,r.player.on(le.ENTITLEMENT_CHANGE,r.onEntitlementChangeBind),r}return oe(t,e),t.prototype.entitlement=function(e){return void 0===e?this.entitlement_:(this.entitlement_=e,e)},t.prototype.options=function(e){if(!e)return this.options_;this.options_=e},t.prototype.onEntitlementChange=function(e,t){var i=t&&t.entitlement;i&&(i instanceof di||(this.stop(),i=o(new di({}),i)),this.entitlement(i)),Le.supportsEpgProgramChange(this.player)||(this.player.off(le.PLAYING,this.checkForProgramChangeBind),this.player.one(le.PLAYING,this.checkForProgramChangeBind))},t.prototype.start=function(){me("ProgramService","start"),this.entitlement()&&this.checkForProgramChange_({type:"startplayback"})},t.prototype.stop=function(){me("ProgramService stop"),this.clearProgramChangeTimeout_(),this.player&&(this.player.off(le.SEEKED,this.checkForProgramChangeBind),this.player.off(le.PLAYING,this.checkForProgramChangeBind),this.player.off(le.PAUSE,this.clearProgramChangeTimeoutBind),this.player.off(le.PLAY,this.checkForProgramChangeBind)),this.currentProgram_=null,this.currentVOD_=null},t.prototype.reset=function(){this.stop(),this.currentProgram_=null,this.currentVOD_=null,this.entitlement_=null},t.prototype.clearProgramChangeTimeout_=function(e,t){this.programChangeTimeout_&&(e&&me("clearProgramChangeTimeout",e.type),clearTimeout(this.programChangeTimeout_),this.programChangeTimeout_=null)},t.prototype.running=function(){return!!this.programChangeTimeout_&&(me("ProgramService:running",this.programChangeCheckTimestamp_?new Date(this.programChangeCheckTimestamp_):0),!0)},t.prototype.dispose=function(){me("ProgramService","dispose"),this.player.off(le.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.stop(),e.prototype.dispose.call(this)},t.prototype.checkForProgramChange_=function(e,t){var i=this;if(!e)return void me.error("checkForProgramChange","event was not provided.");if(me("checkForProgramChange",e.type),this.entitlement().live||this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive||e.type!==le.SEEKED){if(this.player.options_.absoluteStartTime&&e.type===le.SEEKED)return void me("checkForProgramChange","ignore livepoint");if(this.clearProgramChangeTimeout_(),Le.supportsEpgProgramChange(this.player)){if(Le.program(this.player))return void me("updateCurrentProgram from player")}var n=this.entitlement().assetId,r=this.entitlement().live,o=this.entitlement().programId;if(!r&&!o)return void this.updateVOD_(n);var s=void 0;if(r&&!o){var a=new Date(this.exposure.getCachedServerTime()),l="startplayback"===e.type?15:Le.timeBehindLive(this.player);if(a.setSeconds(a.getSeconds()-l),s=a,me("checkForProgramChange","Live",l),this.currentProgram&&this.currentProgram.channelId===this.entitlement().channelId&&s.getTime()<this.currentProgram.end.getTime()&&s.getTime()>=this.currentProgram.start.getTime())return me("checkForProgramChange","Same"),s=null,void this.updateCurrentProgram_(this.currentProgram,!1)}else if("startplayback"!==e.type&&(this.entitlement().isDynamicCachupAsLive||this.entitlement().isStaticCachupAsLive)){var c=Le.getPlayheadTime(this.player);if(c){s=new Date(c);new Date(this.exposure.getCachedServerTime());if(this.currentProgram&&this.entitlement().isStaticCachupAsLive&&s.getTime()+2e3>=this.entitlement().streamInfo.end.getTime())return me("checkForProgramChange","Load next stream",s),void(this.player.lineUpAsset&&this.player.lineUpAsset(null,this.currentProgram.channelId,this.currentProgram.programId,s.getTime()));if(this.currentProgram&&s.getTime()+2e3>=this.currentProgram.end.getTime())me("checkForProgramChange","Next",s),s.setSeconds(s.getSeconds()+2);else{if(this.currentProgram&&s.getTime()<this.currentProgram.end.getTime()&&s.getTime()>=this.currentProgram.start.getTime())return me("checkForProgramChange","Same",s),s=null,void this.updateCurrentProgram_(this.currentProgram,!1);me("checkForProgramChange","Prev",s)}}}this.exposure.getProgramInfo(n,s,function(t,n){if(i.currentVOD_=null,n)return me("getProgramInfo","No EPG found.",n),void i.pollingForEPG_();i.updateCurrentProgram_(t,"startplayback"===e.type)},s?null:o)}},t.prototype.updateChannelInfo_=function(e,t){var i=this;return e&&e.channelId?this.currentChannelAsset_&&this.currentChannelAsset_.assetId===e.channelId?(e.channelInfo=this.extractAssetMetadata(this.currentChannelAsset_),void t()):void this.exposure.getChannelInfo(e.channelId,function(n,r){if(r)return void me.warn("updateChannelInfo","No ChannelInfo found.",r);me("updateChannelInfo",e.channelId),i.currentChannelAsset_=n,e.channelInfo=i.extractAssetMetadata(i.currentChannelAsset_),t()}):(me.error("updateChannelInfo","program or channelId empty"),void t())},t.prototype.updateVOD_=function(e){var t=this;this.exposure.getAssetInfo(e,function(e,i){if(t.currentProgram_=null,i)return me.warn("No AssetInfo found.",i),t.currentVOD_=null,void t.player.trigger(le.ASSET_CHANGED,{asset:null});t.currentVOD_&&t.currentVOD_.assetId===e.assetId||(t.currentVOD_=e,me("ASSET_CHANGED"),t.player.trigger(le.ASSET_CHANGED,{asset:e}))})},t.prototype.updateCurrentProgram_=function(e,t){var i=this;if(me("updateCurrentProgram",e,t),this.clearProgramChangeTimeout_(),this.currentProgram_&&this.currentProgram_.programId===e.programId||(this.currentVOD_=null,this.currentProgram_=e,t||this.verifyEntitlement(),this.updateChannelInfo_(e,function(){Le.currentAsset(i.player).channelId||(Le.currentAsset(i.player,e.channelId,e.programId,e.channelId),i.entitlement_&&!i.entitlement_.channelId&&(i.entitlement_.channelId=e.channelId)),Le.setTechProgram(i.player,e),i.player.trigger(le.PROGRAM_CHANGED,{program:e}),i.player.trigger(le.DURATION_CHANGE)})),t)return void me("updateCurrentProgram","startplayback");if(this.entitlement().isDynamicCachupAsLive||this.entitlement().live||this.entitlement().isStaticCachupAsLive){var n=void 0;if(this.entitlement().isStaticCachupAsLive||this.entitlement().isDynamicCachupAsLive){var r=Le.getPlayheadTime(this.player);if(!r)return void me("updateCurrentProgram","no playHeadTime",r);n=new Date(r)}else{var o=Le.timeBehindLive(this.player);n=new Date(this.exposure.getCachedServerTime()),n.setSeconds(n.getSeconds()-o)}var s=new Date(e.start.getTime()+e.duration),a=this.entitlement().streamInfo.end;a&&s.getTime()>a.getTime()&&(s=a);var l=s.getTime()-n.getTime();(!l||l<this.MIN_PROGRAM_CHECK_TIMEOUT)&&(me("updateCurrentProgram","timediff is below minimum",l),l=this.MIN_PROGRAM_CHECK_TIMEOUT),this.programChangeCheckTimestamp_=Date.now()+l,me("updateCurrentProgram","programChangeTimeout",new Date(this.programChangeCheckTimestamp_)),this.programChangeTimeout_=setTimeout(function(){i.checkForProgramChange_({type:"programend"}),i.programChangeTimeout_=null},l>2147483647?2147483647:l)}this.player.off(le.SEEKED,this.checkForProgramChangeBind),this.player.one(le.SEEKED,this.checkForProgramChangeBind),this.player.off(le.PLAY,this.checkForProgramChangeBind),this.player.one(le.PLAY,this.checkForProgramChangeBind),this.player.off(le.PAUSE,this.clearProgramChangeTimeoutBind),this.player.one(le.PAUSE,this.clearProgramChangeTimeoutBind)},t.prototype.pollingForEPG_=function(){var e=this;this.currentProgram_;this.currentProgram_=null,this.player.trigger(le.PROGRAM_CHANGED,{program:null}),this.player.trigger(le.DURATION_CHANGE);this.programChangeCheckTimestamp_=Date.now()+3e5,this.programChangeTimeout_=setTimeout(function(){e.checkForProgramChange_({type:"pollingforepg"}),e.programChangeTimeout_=null},3e5)},t.prototype.getNextProgram=function(e){if(!this.currentProgram&&e)return void e(null,{message:"getNextProgram No Current Program"});if(this.exposure.getCachedServerTime()<this.currentProgram.end.getTime())return void e(this.currentProgram);var t=new Date(this.currentProgram.endTime);t.setSeconds(t.getSeconds()+15),this.exposure.getProgramInfo(this.currentProgram.channelId,t,function(t,i){i?e(null,i):e(t)},null)},t.prototype.getPreviousProgram=function(e){if(!this.currentProgram&&e)return void e(null,{message:"getPreviousProgram No Current Program"});var t=new Date(this.currentProgram.startTime);t.setSeconds(t.getSeconds()-15),this.exposure.getProgramInfo(this.currentProgram.channelId,t,function(t,i){i?e(null,i):e(t)},null)},t.prototype.getProgram=function(e,t){if(!this.currentProgram&&t)return void t(null,{message:"getProgram No Current Program"});this.exposure.getProgramInfo(this.currentProgram.channelId,e,function(e,i){i?t(null,i):t(e)},null)},t.prototype.verifyEntitlement=function(){var e=this;this.currentProgram&&this.exposure.verifyEntitlement(this.currentProgram.assetId,this.entitlement().playRequest,function(t,i){return i?(e.player.error("verifyEntitlement "+i.message),void Le.stop(e.player)):t&&"SUCCESS"===t.status?void me("verifyEntitlement",t.status):(e.player.error(t?t.status:"verifyEntitlement no status"),void Le.stop(e.player))})},t.prototype.getAssetMetadata=function(e,t){var i=this,n=this.currentProgram?this.currentProgram.asset:this.currentVOD;n&&n.assetId==e?t(this.extractAssetMetadata(n)):this.exposure.getAssetMetadata_(e,function(e,n){return n?(me.warn("getAssetMetadata","No data found.",n),void t(null,n)):void t(i.extractAssetMetadata(e))})},t.prototype.extractAssetMetadata=function(e){var t=null,i=null,n=null;return e&&e.localized&&e.localized.length>0&&(e.localized[0].title&&(t=e.localized[0].title),e.localized[0].shortDescription&&(i=e.localized[0].shortDescription),e.localized[0].images&&e.localized[0].images.length>0&&e.localized[0].images[0].url&&(n=e.localized[0].images)),{title:t||"",subtitle:i||"",images:n||[]}},re(t,[{key:"exposure",get:function(){if(!this.options_.exposure){var e=this.player.options_["entitlement-engine"];e||(e=this.player.options_["exposure-service"]?this.player.options_["exposure-service"]:"EricssonExposure");var t=this.player.options_[e.toLowerCase()];if(!t)return null;var i=yi.getEntitlementEngine(e);this.options_.exposure=new i(t)}return this.options_.exposure}},{key:"currentProgram",get:function(){if(Le.supportsEpgProgramChange(this.player)){return Le.program(this.player)}return this.currentProgram_}},{key:"currentChannelAsset",get:function(){return this.currentChannelAsset_}},{key:"currentVOD",get:function(){return this.currentVOD_}}]),t}(ki);Li.VERSION="2.0.94-209",videojs.getPlugin("programService")?videojs.log.warn('A plugin named "programService" already exists.'):videojs.registerPlugin("programService",Li);var Ni=videojs.getPlugin("plugin"),Ri=function(e){function t(i,n){ne(this,t);var r=se(this,e.call(this,i,n));return me("EntitlementExpirationService","create"),r.options_=n,r.onEntitlementChangeBind=r.onEntitlementChange.bind(r),r}return oe(t,e),t.prototype.dispose=function(){me("EntitlementExpirationService","dispose"),this.stop(),e.prototype.dispose.call(this)},t.prototype.stop=function(){me("EntitlementExpirationService","stop"),this.player.off(le.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.expirationTimeout_&&(clearTimeout(this.expirationTimeout_),this.expirationTimeout_=null)},t.prototype.start=function(){me("EntitlementExpirationService","start"),this.expirationTimeout_&&(clearTimeout(this.expirationTimeout_),this.expirationTimeout_=null),this.player.off(le.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind),this.player.on(le.ENTITLEMENT_CHANGE,this.onEntitlementChangeBind)},t.prototype.entitlement=function(e){return void 0===e?this.entitlement_:(this.entitlement_=e,e)},t.prototype.onEntitlementChange=function(e,t){this.entitlement(t&&t.entitlement),this.expirationTimeout_&&(clearTimeout(this.expirationTimeout_),this.expirationTimeout_=null),this.checkForExpiration()},t.prototype.options=function(e){if(!e)return this.options_;this.options_=e},t.prototype.checkForExpiration=function(){var e=this,t=this.entitlement();if(me("EntitlementExpirationService","checkForExpiration",t.licenseExpiration),this.hasLicenseExpiration(t)){var i=t.licenseExpiration.getTime()-this.exposure.getCachedServerTime();if(i<=0)return this.player.error(this.errorForReason(t.licenseExpirationReason)),void Le.stop(this.player);i<2147483647?this.expirationTimeout_=setTimeout(function(){e.expirationTimeout_=null,me("EntitlementExpirationService","license expired"),e.refreshEntitlement()},i):setTimeout(function(){return e.checkForExpiration()},1073741823)}},t.prototype.refreshEntitlement=function(){Le.restart(this.player,!0)},t.prototype.errorForReason=function(e){switch(e){case"GEO_BLOCKED":return this.player.localize("Not allowed from this region.");case"NOT_ENTITLED":return this.player.localize("The user is not entitled.");case"GAP_IN_EPG":return this.player.localize("Asset temporarily not available");case"EPG_PLAY_MAX_HOURS":default:return this.player.localize("Asset exceeded maximum playback time")}},t.prototype.hasLicenseExpiration=function(e){return!!e.licenseExpiration},re(t,[{key:"exposure",get:function(){return this.options_&&this.options_.exposure}}]),t}(Ni);Ri.VERSION="2.0.94-209",videojs.getPlugin("entitlementExpirationService")?videojs.log.warn('A plugin named "entitlementExpirationService" already exists.'):videojs.registerPlugin("entitlementExpirationService",Ri);var Mi=te.getComponent("Tech"),Bi=function e(t){return{setSource:function(i,n){function r(e,t,i,n,r){e.options_.absoluteStartTime&&e.options_.absoluteStartTime>i.getCachedServerTime()?e.options_.absoluteStartTime=i.getCachedServerTime()-1e4:e.options_.startTime&&e.options_.startTime>i.getCachedServerTime()/1e3&&(e.options_.startTime=(i.getCachedServerTime()-1e4)/1e3);if(e.programService&&(!t.programService||!t.programService.disable)){if(e.programService().options({exposure:i}),n.isDynamicCachupAsLive&&t.playFrom)if("beginning"===t.playFrom||!n.live&&!e.options_.absoluteStartTime&&!e.options_.startTime){var o=n.streamInfo.start.getTime()+100;"EmpShaka"===e.techName_&&e.tech_?(me("SET startTime",o),e.options({startTime:o/1e3}),n.options.startTime=o/1e3):(me("SET startTime",.1),e.options({startTime:.1}),n.options.startTime=.1)}else if(e.options_.absoluteStartTime){e.options_.absoluteStartTime<n.streamInfo.start.getTime()&&(e.options_.absoluteStartTime=n.streamInfo.start.getTime());var s=e.options_.absoluteStartTime;"EmpHLS"!==e.techName_&&"EmpHLS-MSE"!==e.techName_||(s=e.options_.absoluteStartTime-n.streamInfo.start.getTime()),s=s||.1,me("absoluteStartTime SET startTime",s),e.options({startTime:s/1e3}),n.options.startTime=s/1e3,e.options_.absoluteStartTime=void 0,n.options.absoluteStartTime=void 0}else e.options_.startTime&&(n.options.startTime=e.options_.startTime,e.options_.absoluteStartTime=void 0,n.options.absoluteStartTime=void 0);else if(n.isStaticCachupAsLive&&e.options_.absoluteStartTime){e.options_.absoluteStartTime<n.streamInfo.start.getTime()&&(e.options_.absoluteStartTime=n.streamInfo.start.getTime());var a=e.options_.absoluteStartTime-n.streamInfo.start.getTime();me("absoluteStartTime SET startTime",a),e.options({startTime:a/1e3}),n.options.startTime=a/1e3,e.options_.absoluteStartTime=void 0,n.options.absoluteStartTime=void 0}else n.isStaticCachupAsLive&&e.options_.startTime&&(n.options.startTime=e.options_.startTime,e.options_.absoluteStartTime=void 0,n.options.absoluteStartTime=void 0);e.programService().start()}r()}function s(e,i){if(!e)return void me.error("setupEntitlement no entitlement");!0===a.useLastViewedOffset&&((e.isStaticCachupAsLive||e.isDynamicCachupAsLive||e.live)&&(e.lastViewedTime||e.liveTime)?e.liveTime?(me("liveTime",new Date(e.liveTime),e.liveTime),t.options({absoluteStartTime:e.liveTime})):(me("lastViewedTime",new Date(e.lastViewedTime),e.lastViewedTime),t.options({absoluteStartTime:e.lastViewedTime})):e.lastViewedOffset&&(me("lastViewedOffset",e.lastViewedOffset/1e3),"EmpShaka"!==t.techName_&&t.options({startTime:e.lastViewedOffset/1e3}))),!1===e.timeshiftEnabled&&t.options({timeShiftDisabled:!0}),t.trigger(le.ENTITLEMENT_CHANGE,{entitlement:e}),e=o(new di({}),e),e.type=e.mimeType;var n={autoplay:t.options_.autoplay,muted:t.options_.muted,language:t.options_.language,maxBitrate:t.options_.maxBitrate,timeShiftDisabled:t.options_.timeShiftDisabled,useLastViewedOffset:t.options_.useLastViewedOffset,startTime:t.options_.startTime,absoluteStartTime:t.options_.absoluteStartTime,audioLanguage:t.options_.audioLanguage,subtitleLanguage:t.options_.subtitleLanguage,liveDelay:t.options_.liveDelay};return e.options=n,e.options.source=e,t.entitlementExpirationService().start(),e}var a=t.options(),l=null,u=null;if(t.programService&&t.programService().stop(),function(e){return e&&e.playSessionId&&e.playToken&&e.mediaLocator}(t.currentSource()))l=t.currentSource();else{var p=c(i.src);u=new Oi(p),t.trigger(le.ENTITLEMENT_LOAD_START,u)}var h=a["entitlement-engine"];h||(h=a["exposure-service"]?a["exposure-service"]:"EricssonExposure");var d=a[h.toLowerCase()];if(!d){var m=new pe("Missing entitlementOptions in player options",ue.ENTITLEMENT);return t.error(m),void n(m)}var f=e.getExposure(d,h);if(!d.sessionToken)return void f.login("","",function(e){if(e.success)d.sessionToken=e.session.sessionToken,t.trigger(le.REPLAY);else{me.error("Anonymous login fail",e.message);var i=new pe("Anonymous login fail",ue.ENTITLEMENT);t.error(i)}},"");a.analytics&&a.analytics.disable||function(e,t,i,n){var r=t.analyticsDeviceInfo;r&&(me.warn("options.analyticsDeviceInfo is deprecated. Use options.analytics.deviceInfo."),t.analytics||(t.analytics={}),t.analytics.deviceInfo=r),e.analytics&&(e.analytics().options({exposure:n,analytics:t.analytics}),e.analytics().newAnalytics({exposureApiURL:i.exposureApiURL,customer:i.customer,businessUnit:i.businessUnit,sessionToken:i.sessionToken}),e.analytics().onEntitlementLoadStart())}(t,a,d,f),t.entitlementExpirationService().options({exposure:f});var g=a.techOrder.map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).map(function(e){return[e,Mi.getTech(e)]}).filter(function(e){var t=e[0],i=e[1];if(i&&"Html5"!==t&&"EmpCast"!==t)return i.isSupported()});if(0===g.length){var y=new pe("Unable to load asset: None of the playback technologies are supported",ue.ENTITLEMENT);return t.error(y),void n(y)}var v;$(g.length,function(e){var i=e.iteration();if(a.excludeTechs&&-1!==a.excludeTechs.indexOf(g[i][0]))return void e.next();var o=g[i][1];t.tech_&&t.techName_!==g[i][0]&&(t.techCall_("reset"),t.unloadTech_());try{if(l)return l=s(l,o),r(t,a,f,l,function(){n(null,l)}),void e.break();var c=a[g[i][0].toLowerCase()],p=c&&c.videoType&&o.entitlementPlayRequests?o.entitlementPlayRequests[c.videoType]:o.entitlementPlayRequest;f.getEntitlement(u,p,function(i,c){if(c){if(v=new pe(c.message+"  "+JSON.stringify(p)+JSON.stringify(u),c.code,c.stack),c.fatal)return t.error(v),Le.stop(t),void n(v);e.next()}else l=s(i,o),l.adMediaLocator&&t.yospace?(me("play adMediaLocator with yospace",l.adMediaLocator),t.yospace().start("VoD",l.adMediaLocator).then(function(i){me("yospace mediaLocator returned",i),l.mediaLocator=i,l.src=i,r(t,a,f,l,function(){n(null,l)}),e.break()}).catch(function(e){v=new pe(e,ue.ENTITLEMENT),t.error(v),Le.stop(t)})):(r(t,a,f,l,function(){n(null,l)}),e.break())})}catch(t){return me.warn("error try next tech",new pe(t,ue.ENTITLEMENT)),void e.next()}},function(){if(null===l)return v||(v=new pe("Unable to load asset: None of the playback technologies are supported",ue.ENTITLEMENT)),t.error(v),Le.stop(t),void n(v)})}}};Bi.isExposure=function(e){return yi.isEntitlementEngine(e)},Bi.EntitlementClass=di,Bi.getExposure=function(e,t){if(e){return new(yi.getEntitlementEngine(t))(e)}throw new pe("Missing exposureOptions",ue.ENTITLEMENT)},Bi.registerExposure=function(e,t){return yi.registerEntitlementEngine(e,t)},Bi.getLog=function(){return me},Bi.getEntitlementEngine=yi.getEntitlementEngine,Bi.registerEntitlementEngine=yi.registerEntitlementEngine,Bi.isEntitlementEngine=yi.isEntitlementEngine,Bi.VERSION="2.0.94-209",te.EntitlementMiddleware?te.log.warn("EntitlementMiddleware already exists."):(te.use("video/emp",Bi),te.EntitlementMiddleware=Bi);var Ui=window.empEntitlement?window.empEntitlement:Bi,Hi=te;return Hi.canPlayUnencrypted=M,Hi.canPlayEncrypted=B,Hi.getExposure=Ui.getExposure,Hi.getEntitlementEngine=Ui.getEntitlementEngine,Hi.registerEntitlementEngine=Ui.registerEntitlementEngine,Hi.isEntitlementEngine=Ui.isEntitlementEngine,Hi.EntitlementClass=Ui.EntitlementClass,Hi.log=me,Hi.plugin=te.plugin,Hi.videojs=te,Hi.EntitlementMiddleware=Ui,Hi.extend=te.extend,Hi.Events=le,Hi.VERSION="2.0.94-209","function"==typeof define&&define.amd?define("empPlayer",[],function(){return Hi}):"object"===("undefined"==typeof exports?"undefined":ie(exports))&&"object"===("undefined"==typeof module?"undefined":ie(module))&&(module.exports=Hi),Hi});
